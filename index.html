<!DOCTYPE html>
<html data-init="no-js">
<head>
<meta charset="UTF-8" />
<title>未命名故事</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (v2.36.1): A free (gratis and libre) story format.

Copyright © 2013–2021 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/1.2.20171210/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new c("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],h=function(){return new l(this)};if(c[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return~a(this,t+"")},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",~a(this,t)||(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=a(this,t);~e;)this.splice(e,1),r=!0,e=a(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.replace=function(t,e){var n=a(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},u.toString=function(){return this.join(" ")},s.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,f)}catch(p){void 0!==p.number&&-2146823252!==p.number||(f.enumerable=!1,s.defineProperty(i,e,f))}}else s[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),i=n.indexOf(t+"");~i&&(n=n.slice(i),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}());
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2020 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.14/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=arguments.length===0?0:arguments.length===1?i-f:b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(j).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(Ne,""),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=["Webkit","Moz","ms"],$e=E.createElement("div").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement("input"),nt=E.createElement("select").appendChild(E.createElement("option")),tt.type="checkbox",y.checkOn=""!==tt.value,y.optSelected=nt.selected,(tt=E.createElement("input")).value="t",tt.type="radio",y.radioValue="t"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ft[t]||S.find.attr;ft[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=ft[o],ft[o]=r,r=null!=a(e,t,n)?o:null,ft[o]=i),r}});var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(P)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,gt(this)))});if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,gt(this)))});if(!arguments.length)return this.attr("class","");if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,gt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=vt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=gt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+ht(gt(n))+" ").indexOf(t))return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(yt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var mt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!mt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,mt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,xt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,xt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var bt=C.location,wt={guid:Date.now()},Tt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Ct=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||Ct.test(n)?i(n,t):At(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)At(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Nt=/%20/g,jt=/#.*$/,Dt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ot={},Pt={},Rt="*/".concat("*"),Mt=E.createElement("a");function It(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Wt(t,i,o,a){var s={},u=t===Pt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Ft(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Mt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,S.ajaxSettings),t):Ft(S.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=qt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||bt.href)+"").replace(Ht,bt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Mt.protocol+"//"+Mt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Wt(Ot,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Lt.test(v.type),f=v.url.replace(jt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Nt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Tt.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Dt,"$1"),o=(Tt.test(f)?"&":"?")+"_="+wt.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Rt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Wt(Pt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&S.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},$t=S.ajaxSettings.xhr();y.cors=!!$t&&"withCredentials"in $t,y.ajax=$t=!!$t,S.ajaxTransport(function(i){var o,a;if(y.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Bt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var _t,zt=[],Ut=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+wt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+r):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((_t=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===_t.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=Fe(y.pixelPosition,function(e,t){if(t)return t=We(e,n),Pe.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Vt=C.jQuery,Gt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Gt),e&&C.jQuery===S&&(C.jQuery=Vt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/dist/FileSaver.js */
(function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof module&&(module.exports=g)});
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:500000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html[data-init=loading] #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html[data-init=loading] #passages,html[data-init=loading] #ui-bar{display:none}</style>
<style id="style-font" type="text/css">@font-face{font-family:tme-fa-icons;src:url('data:application/octet-stream;base64,d09GRgABAAAAADLAAA8AAAAAWHgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIslek9TLzIAAAGUAAAAQwAAAFY+IEkIY21hcAAAAdgAAAG8AAAF3rob9jFjdnQgAAADlAAAABMAAAAgBtX/BGZwZ20AAAOoAAAFkAAAC3CKkZBZZ2FzcAAACTgAAAAIAAAACAAAABBnbHlmAAAJQAAAI6gAADv+gJOpzGhlYWQAACzoAAAAMwAAADYY1IZaaGhlYQAALRwAAAAgAAAAJAfCBClobXR4AAAtPAAAAJEAAAFMBfb/0WxvY2EAAC3QAAAAqAAAAKhjiHI5bWF4cAAALngAAAAgAAAAIAFjDA9uYW1lAAAumAAAAY0AAAL94+zEpHBvc3QAADAoAAACHAAAA11cG/YjcHJlcAAAMkQAAAB6AAAAhuVBK7x4nGNgZGBg4GIwYLBjYHJx8wlh4MtJLMljkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAJjsFSAB4nGNgZNZgnMDAysDAVMW0h4GBoQdCMz5gMGRkAooysDIzYAUBaa4pDA4vGF4EMgf9z2KIYg5imAYUZgTJAQDSIQumAHic7dTVbltRAETR7dpNCikzQ8rMzMxt/M39mHnsU1/TfZz5jFpaV7pXJunMDLAZmOqaZjD5y4Tx+uPTyeL5lG2L5zN+L94zG8+ztr7ulXH1fra4bvK9M79xiWW2sNXPbWeFHexkF7vZw172sZ8DHOQQhznCUY5xnBOc5BSnOcNZVjnHeS5wkUtc5gpX/f3r3OAmt7jNHe5yj/s84CGPeMwTnvKM57zgJa94zRve8o73fOAjn/jMF77yje/84Ce/WGPun1zi/2tlXKbp3Xyc44bFyZanSWokJDXOOjXSk/LUSXn+pEwCKTNBaqQqZU5IjX+XMjukTBEp80TKZJEyY6RMGylzR8oEkjKLpEwlKfNJyqSSMrOkTC8pc0zKRJMy26RMOSnzTsrkk7IDpGwDKXtByoaQsiukbA0p+0PKJpGyU6RsFyl7RmosQcrukbKFpOwjKZtJyo6Ssq2k7C0pG0zKLpOy1aTsNymbTsrOk7L9pNwBUi4CKbeBlCtByr0g5XKQckNIuSak3BVSLgwpt4aUq0PK/SHlEpFyk0i5TqTcKVIuFim3i5QrRso9I+WykXLjXOYNzP8BuAPUwHicY2BAAxIQyBz0PwuEARJsA90AeJytVml300YUHXlJnIQsJQstamHExGmwRiZswYAJQbJjIF2crZWgixQ76b7xid/gX/Nk2nPoN35a7xsvJJC053Cak6N3583VzNtlElqS2AvrkZSbL8XU1iaN7DwJ6YZNy1F8KDt7IWWKyd8FURCtltq3HYdERCJQta6wRBD7HlmaZHzoUUbLtqRXTcotPekuW+NBvVXffho6yrE7oaRmM3RoPbIlVRhVokimPVLSpmWo+itJK7y/wsxXzVDCiE4iabwZxtBI3htntMpoNbbjKIpsstwoUiSa4UEUeZTVEufkigkMygfNkPLKpxHlw/yIrNijnFawS7bT/L4vead3OT+xX29RtuRAH8iO7ODsdCVfhFtbYdy0k+0oVBF213dCbNnsVP9mj/KaRgO3KzK90IxgqXyFECs/ocz+IVktnE/5kkejWrKRE0HrZU7sSz6B1uOIKXHNGFnQ3dEJEdT9kjMM9pg+Hvzx3imWCxMCeBzLekclnAgTKWFzNEnaMHJgJWWLKqn1rpg45XVaxFvCfu3a0ZfOaONQd2I8Ww8dWzlRyfFoUqeZTJ3aSc2jKQ2ilHQmeMyvAyg/oklebWM1iZVH0zhmxoREIgIt3EtTQSw7saQpBM2jGb25G6a5di1apMkD9dyj9/TmVri501PaDvSzRn9Wp2I62AvT6WnkL/Fp2uUiRen66Rl+TOJB1gIykS02w5SDB2/9DtLL15YchdcG2O7t8yuofdZE8KQB+xvQHk/VKQlMhZhViFZAYq1rWZbJ1awWqcjUd0OaVr6s0wSKchwXx76Mcf1fMzOWmBK+34nTsyMuPXPtSwjTHHybdT2a16nFcgFxZnlOp1mW7+s0x/IDneZZntfpCEtbp6MsP9RpgeVHOh1jeUELmnTfwZCLMOQCDpAwhKUDQ1hegiEsFQxhuQhDWBZhCMslGMLyYxjCchmGsLysZdXUU0nj2plYBmxCYGKOHrnMReVqKrlUQrtoVGpDnhJulVQUz6p/ZaBePPKGObAWSJfIml8xzpWPRuX41hUtbxo7V8Cx6m8fjvY58VLWi4U/Bf/V1lQlvWLNw5Or8BuGnmwnqjapeHRNl89VPbr+X1RUWAv0G0iFWCjKsmxwZyKEjzqdhmqglUPMbMw8tOt1y5qfw/03MUIWUP34NxQaC9yDTllJWe3grNXX27LcO4NyOBMsSTE38/pW+CIjs9J+kVnKno98HnAFjEpl2GoDrRW82ScxD5neJM8EcVtRNkja2M4EiQ0c84B5850EJmHqqg3kTuGGDfgFYW7BeSdconqjLIfuRezzKKT8W6fiRPaoaIzAs9kbYa/vQspvcQwkNPmlfgxUFaGpGDUV0DRSbqgGX8bZum1Cxg70Iyp2w7Ks4sPHFveVkm0ZhHykiNWjo5/WXqJOqtx+ZhSX752+BcEgNTF/e990cZDKu1rJMkdtA1O3GpVT15pD41WH6uZR9b3j7BM5a5puuiceel/TqtvBxVwssPZtDtJSJhfU9WGFDaLLxaVQ6mU0Se+4BxgWGNDvUIqN/6v62HyeK1WF0XEk307Ut9HnYAz8D9h/R/UD0Pdj6HINLs/3mhOfbvThbJmuohfrp+g3MGutuVm6BtzQdAPiIUetjrjKDXynBnF6pLkc6SHgY90V4gHAJoDF4BPdtYzmUwCj+Yw5PsDnzGHQZA6DLeYw2GbOGsAOcxjsMofBHnMYfMGcdYAvmcMgZA6DiDkMnjAnAHjKHAZfMYfB18xh8A1z7gN8yxwGMXMYJMxhsK/p1jDMLV7QXaC2QVWgA1NPWNzD4lBTZcj+jheG/b1BzP7BIKb+qOn2kPoTLwz1Z4OY+otBTP1V050h9TdeGOrvBjH1D4OY+ky/GMtlBr+MfJcKB5RdbD7n74n3D9vFQLkAAQAB//8AD3icrXsLcFzlleZ//v+++nb37dfte/VotVrdrW5JltuKpO6WJVluPyXbsmOEbGRjO4KVjWPZlsM4QIU4IYGlgCE2yxqKIQkJg2GreKQCTCZb1CZkiswjzOwOmSTATNVWTZLdDUwSMrVDsomD23vOf69assFAqgbk+773P4//nPOdc/5mwNjFl8WjosbaWblmxiOmIlTGYXzb11M7Z2ohAMbZCcZ5iG9prZl4whfwGju05xtttitUdwXYEUgkbQtWga5lC+XBaqJI285qpb8dVEc8Gnm5L5QM/f58yAlB399a7dD0mWAmdAqaMvBmKPKX9TdDwSjod9yhx03FAPcvI6Gk2lV33XoXUtKgL8C6Wa0WSzXbVjhg6JoqIPShCK0FOvOuE48K1V4B1VUQAVevugmP7Fz2CmTzW5/8+ZGP/+Kp7h/8oI4MuOZ7M5B9IvujH2Wf+PnCAjzn8ZK6AieMKRcvXnxWWSWCzGARlPcqtqs21WZzEBFgYIVDAYWzVJIrXBlH+hXGlWNM00GAJmYZ8sKBzTJFVZVppijqDFMVdTIWLa0o5JrdaHusPZGIG1IjFhQGK2mAZEe56kJnR1bTY7ZT7eivFGODBTdma3pHtlCNDVbwmgMHx/aO4R8ffeet5/ZCG6TfuV03IaSJU3oIzKsGO9+5PV+BwU5xqnOQx1aO8fW71yvD9fPn55/fA22PmsaFvfSgwZ8wzPiFvZ2DUMnzJ2hHVDMmHucPsSRrq7UQo4DMAV/AW7CANw/Zru3NIx20bBEpXwukArlxxOPReibaG63/SyQyiftzcBy3k1HuOHgjEgFHnkYfh4VodDJC4138Ff8hv5PlWbrWmm2O6grNEgGNCWGnbFtRm1Z04gzQPPWvkqMWF4eWU8DB267Df+gNe84bBvfRpfNI5Ny5yAmHDh5/PPLuByMlekDS9DsRR73nWHetwBShSO5PqCBQONO4E2wGlSvYZG6gMzeQ09SWFZC0tWION3oOVVXGTbGM+hrAzQj0O25yoN8R8YzzRsaZdzLwhpsGPEm783hAJ9+kq286eDX5pn/VydDjvk7i8EuchU21JJ3DNOqFzeABmywPcNXxhu/wB+3whrqwVw7Cn1j8vPfdDH6O7PR3fDV/Cb85wua/waSit309grZJHHOhHEQ9CA7zTGVCUb0ZvXzc1lrRe5Af+4An0aSL9op0IU9y6vRFtAYGKy7KJGFbQrdg2dXqGAwWilld0zUy9xLqd6A/zeFuy7gzYFmBOwOhZ6NNhZakm8YTI7S1pyM1mM032V26qevXGlzZ8+TKvROlB/BBkO9ACDalB7OZuBnuC5tRcAItpalENNOfhajVH1A2a1HjbHZ4N4r54oWLz4qPoe4jrMo2sonapm5QRQBQ3XycKVxwRRxjQuVCnWc6mrzOZ5FvBiraOmia5FubYRpok8n0ioRTKOQMNbWiszxYWAFZrQ1sB+dDJTFYghzyiBN3oB857ndIAha4Se/+YGUtjAkXXUO2xPE2eoe3TWPeMOXmzNi+j9w1HghvVbSAmu4c6nFac6MgbzXFU2baDr1241+98TfHtU/9t7df+MzU4msmfPYj06Wbw8Gqohda0/FkSyiyvtPGG/FsMKq1pLqmPvndkye/+y+08eYIHEJZpFmJra2Nop/VWuKcCwPvgRhnGlOFps6iIdAEmFVAKh53jblZyBU6nAFdbfX03tGwioZ9oGnEyDSWTQCyFzhoR+s/jdjgWLmc3L2K21zEmXCsM5aDm4g9Ny5v0PZVb+dY9Rcd/sl5eTiPj0nTaeiU+BhhW2qbuzJcUy2Nc2gCrjBkxWCqZiArGgOuwSzjAlDb5L91XfpvfYbpij6ZRIUWYoVcLqC2+UqNLddsMrekY3GZztVl2uQjpl4xjedIM+Uybc/r5viShuHgcgXuwQtpuoMHz8utCe/s8S+Y/7xMaYu2DX1yDrez3lp3cyyKdop+HLcLi878Uh9SKOSlj73cOIUFRVKVKHhaSS9JP452RCcYoJ3w85bz8Ckp9VN4xeZj9atpH4FnPCV4OtiDNIVYCrWwsbauK81VxUlaQnA+riFBisoUsiU0LbQpASCmmRAwg1MNJoH19uQ6WpriUV1jIQjphA5QjosiTfiy1tF+kPJKMTFYpAu6lkx40odnTv7VjYtC/QtTJyGH9HmMnKamGrcaqmaagRsMUwR9WeLmwsQREvIRevSvYa8uVFXo9Sc0w5A8/Rp5+jcxhXLuYAOIx/pbY+ggFp0FV8lNoLNAEQvyDkwBZR9T1ZC6xR0qFgsybix3DJcR7iIGwCsCHHQM0nYKVSBXQZPnqG7KDZiqrn8K524gpN9ghAx42k4GsvF3nohnA0kbnglkC9mrl7h4Db2TommKcVE1QOPRd97K5WJxsKO5nIjHbHtx/og3kK8iWys1he/EkKlqCbFOB6iKQp5Q5Yp6DB0AsjmPvHEFSGsoFraPaVpI2zLc2lmudErjJ/eeQwbKPoRBZulcwhwXYc6i1SdiEpiCF+KrFOIrAzKaHdhQ79tw4MAGuJv4rt8sQQu80jloGnnDfNVJBa+vn1WjSg1d8NHrg44FbTgdJ5+T77yy/gDI5wY7633yTbI7+CdyMDyEL2paDd0BvZjyfIYXH2/H+aqjDfXUisgnk3rFYMePoyZBegWanQpM5hKdlUSU1JnoQH2iG1d90IYADi0JPV2/oxMEeB7apm+aBngFw/ObMjzHzv7dgzyOh48fHZnmO9c8Wv+2RAGwHiP20UNnzx46mvYxyaMixDpZX22lQqQgRDqG4kYcMo92cpypAOo0Ti+iSYXJRGc5l8wvQhPfqpE0SYa7nDwkeQyh26OOlbecqVumoCwJ8+mDm+9/5T4eOyOt+4wk8WjavYTIG+7nD5Li2cWv8zGkMYoz51q2u3Y1JQSwfcumSn9JUxW0CZIWQ5isqKCo8zoGFPybx/lyHD2w4AaCBw7Ap1HIxAaHyZlr1tXG1owMt7h5Ox5QmxF4Iv6vDhaQoTFAYADuYIlnLa7b7RwtiOBDtVK1dbyCMXXxn5azOIIKfLFKaQP9K3HKIMYEQosvhkIWH23TQ9wIpCq9M4WxycnJsQIUYrEJ/bPGuOZohfHVzdmMaAmHm418c7DU3xdoyYPebFktPJtpHu7fefjw4R0VHiNTa06ZUTPe09a1sdTUVNrYtbo3nth11VW7tBa1d/U1a1t71rdG2u1IJNkWDYdbUs0pnnFT+OloWzISsdsjqVpvy9prqrNjed41POfPx2+J7TIXaWP5Wgf5bvToBEvpppQYOXPOJoda4gTQE6TsNK8sAvUSSHBFygfnfM9wL+8aK/Bddv0tZ8SufyKZ7ml7s20iCWdsPpPu4YVaXuur/2M6WX8riReTE21vtPUAnn4iyTxdf0vJ+/QM0pwsUL4D5BmUBQEeXpaU4W6RtExzN1In7eT9qHPpIoUdqAzSrdyHIPo1JNRps1uioCWJyIm2U/JG8oO4aZMXozF8b4RupRd5JJv7Nn8ZeUyxjlrakhJHcwO2gHMUDgGLR0MmS0GrIoMRWos0K81LUnPZYgmkw6sM8HtCoQTaT9y0Wu3f/MZuCYfijhMPhUVQNdL2hY8kMroS/8UvEqqeSfC/xzPV07k3vsqyrL+2ykYnhJjEz45OLIdbu4ncrbrWhImzltU7oqqaXAEdMWiHxPsSdvuF70K6/xf6FejjL13YBvFVP+UXrkwnyelZjBcltoLypQIoEmsoiDUw4C2QFS/I/J6yx5ybWOOqaMad0kJlKo+ElAdLqvRTMqOsgucuM64j3hgHU1H1mIkQ084Oje3eXT1lZwL1nwaD0BZMNfFTcHpv+sf7v6LEo4oZMlRbFNqH9tb60nEN0UkQ0mYawZNpR878eFuD1lWsl/Jb9J5iMbPlDKnkh3raBmS66U1M9Jm5rKUmMel1dKLOcxrVSgf5dJqU4o0g0pJyTlV37x4bytpCATOG8VUT4+m9cPoURiakE34ZMes/wbB0Roun+2p7h9oLSlwzQqZq2eIr+xe2/Rhp5QF8hHn5Hh/FfM9ibs32UrNG+l22ZbrnJ8N+fERAcD6YCp6nuPc2Aq/vWXiMfzKaye/BDfzTLPwe33MT8ns4P/y0uiLBdyZw3qRvNvGZegjF6H+escXvreOnkD7zm7IkADTbJEkU4sdw1jmwzpTj42smHLB82ijenjfx9YsXkccR+B5+I1azGtQk+4maTpnLlsBL75E7O1IPea+mzfPmUwQt00FJoG+nPxN/zruZzZprTljyx2GpXiHdYWBZtcINeB+2xVP16/GT9euDwf00TbqgK5gK7QvCmfp/wPn15WDa3BcM1l/Hy8F9wZQ31nf4Q2IjjrXyG+BnzXnMmqXiTuB5CLa01gINjvb8mesSTwHuSAEtzm8anp+uvwbdprkfhUs0wCNIxH6TP1l/vf6aPDThK0TXI5I+tjj+SX/8wIcaPxWX4y+CqsCiEIiAIzhsKrgfh+6qv+4L4RETPl6/zqMKukki9AA96OseZb3Zk7UKVKxZKt65tpR1J9p1sTGgP5Z4ah+KEzl73R/xEfr+I8H5fchlN/Jr0n0c3fSGkrz+vbhd5m2ZWltThDeKUaKh3WTZXWauS+WomBdMkjGvOCRuT9YfcIZxk0x24/5cT3q8redxe8TpTsLn03b9LIaFo/I0eQ7uxtjQm6rffI4elnTcJfbwX/qRFyG+Vw+SaJdyFIpugk0WXCcnaZFo1323viNAWHZPvk1+ugfjTf2sbcPR5LDT442bhwPj6Z5z9qi9wr8B85Ji51yXb3tISxlpSUtaZEYnFX8ZbHI6C8vk4ll2h5/YdRQbM0CUbSmXHsd5rH5zWz7fBnc/5iA1NLANwyQZ2+5JjiYfQ4mle+BxJA1prT9g+770dv4zTz9RnTPp+JlY4DJKoroOucmyT4fnsGIeFC3H9EtmB+qnGyP6413tPvs4BhIwipskDKakeIg+KKTgbl92JBkkHn1J3c8t+9ia2vBKhMFkGBJtEjrGDIzKE1SeAgTJiDAVRYpKmSGwMlksJor5gUWgjKlXYS0gurS4neaYflXJnaWBUjDKNAVhkWoF1WhHz7uJ2PapE8NHJkulySPD62/qVmLapMq10a997JqvnphQarc8dO3UQ2smYr38pfOWszK6fTs+eBKfHy4j8t2uWNrWnbDx5CNfe+TkxrHVE/EEW4ynxM9H2FhtpAeE2tnGFUH1J4xXChxD5hACLNXbLgOA3WU353rI37Y44SipbwdxwED/mEC0rOmuIzmlGkw7SBzNxZ6NN3519+zXRhV1Uosp3TdtGD68s4eXJo8uzHVtjyXc85gC9MYmRh+euuaRk+vhAG43Tm3RLGW7Clp52Oesq3N7dKVjnW9KxCdWjyFvi/nUs+Ja5CnPxtn+2t4NnVwLrELw76JqDMz1MacMGJoR0I5RVsA1lR/DLEdonLJLQWnOMcSamKlrszLnWWZ3mzcVOjsrnYWynTfVNmQ6aQFxrWtL9SQtgjqsojbxf5lp+qquSF1rVGyk02qZZEEKRkPdlv9ff3LVQ6MTFMas8xSft3fNVbd+vqg1KaF5w7RwBsirUye24UVXDS3oIcj/nz+56mF6qQlUAQ++gGoNytcxFG7P98DWMXMoHIL/6l/Z7p1riv8ko2oiyiru129WsSrmUjO1XdtWc0Pr7miOoWOV9YUQ07WQPmsCisWYDge5puAUAI3NIk6EQACmaQ+BGRaAwOSemV1TH90+vnlDrZBNFOi/nEUlLL96lYx5VZLqB5zDQLFQzGm6KuUX89L6YqxRuaPsCwXYTlJE1EVJt9ycWTo8bereoW7Wv38ewfOzmgI/N42Kn53LatjTxUCv85zbEyg+Y5hTcDddq99M2ysc8/51lABfjZ++8KvSxvUlnpCj7U+mIG3vR8yhXSbXEbaB3cDmatdds4lrhi9Z8hskNo2hkI+RQHWN6fMIUwKGFZiNhDmCNq6BoR1gejCoTzNdD86woB6cPDh33YFr91w99dHJLePr1tp525NylKZkzJtthLplN+ADzhOxjpiN1trRPwb/vhKfqIcMg8Mr3DDqd38o4cM36y9KWa+Tsn7v4/ocj134Vcg2TZsf/ABFKH4tYwrtObZYYxoF3QiQC+PjATwUho5+W8MkQlOOqUDxnlMNjZpsfB8zjJCxZe2afKeTjXeuboqT2XcOlsACB6XROFhWch7AeNy/VsZfx4fO5Aj8EjTVRPjLdtrmTS1NX7Azce6kmjZnnHf+1iuBiG0duzsmQTiZPzfjEoTGAqZ7xqt/nmmai8gXOWb0/sG9z8vyyPNOZjKDf9DlRgmQR93keVlHOU/9RTkfH8W8ieTQzWpsc21DGRM0Xw4soAUWDEDPtMB0oS9I5qeXC0PhMySPyTWjuYFctn9JEgWLp6FSXdz71TeSgzuQBmnXVHPXGqWhIhXkF+H2lQXxVqiSO5OthN9CQQSazmBOhdycwSgoZRJvQ28Yz8SVltDiwd3PUxMLN9De1dWehinH5783RvA9xhpyoHgnWAfGvE3sqtqOFT25rGIoMB4GBa0NAaepg2KYyiwVijQqFKGtopEeUFFYgQCboj0jZ8cCk7U1Q2W3MBBLjMRi0SCKxO0od6gD6Muon6Q35JGLDZS9DEpfLNZTA4aqrmrD0rwHCAO8Cs/Ur4a3J0Lql9WU4RfBJiYySfg+cviqaczLvipt59LuhbjXflPdSuRLUUd/9VV422jRv6SF/NbehYrcQ1p2AZ6jd80L5+kSRwE3WV+OVGTs9GvnU6yLDbJsrZ2aE+iijskqPtuHgTAktgz0r+xtaUaslZRRH6FKlRJrBwO9bK+lef8YXipg7j8GSJjM+GRPmSApRv6n//T4VrH3qqbRaNxoqoxSNMfwD6MV18yPulftrX+xZ7gXeka7vMCPgf2aQ8+N4bPuaKz7lg2LIGjjTT3x4T4jvubPYKL+cFtPTxscwm0DA+yVNaMjbFNt/cE9k+sUpoxgas8Gu1qjhG7GqUu+oAFel8B2gTDcgt+54If2XXv1VVsmVvRkM4m4TnnrYCGLtt5foc4F2rWO/NrIbxENvBHUy0WJBYqEg8hbyklAxoATvupfHMCZ3wAHaASEAFz/Y7pUPh+ZumWK7z65G1KGftgMJro0NbIzrOvbm1sCuhL9tBGKtrof1aLaZkdRjS4zYhzSDTDVw4bldnrPGtubWgKGiH0adR1JuR9VI/qErSgB72HMk0emp2+anr6F7kfTydZ+zdKSO0EdDRuTqaip3xAIjapaLa1aWqg/kmqNQEiXzza3ZFbqId3euezR4Iiqbkj5j7ZEIeTX7X4n9vLvLmKL2mAXILVUp0WPoyLCVJVGQ+/yNlGhjP8PNLq4y9vNy9rPrn+eW36OaPmdX0nTF7EIpu9XPlvW1XMgOiHbSHIL1ji1nsbpBdbAyXtlTRwjSHuCqyJvkjfAVEiMe317oeLEURlNKa/CI7tfVLxLp5qb4tFwUFVYJ3R6/STHqy1Xi1R9RLvvd6lSPIba14rZoo6zwa3w/7L18OGzRwC+N7B52+HD2zYPfA8OP3iIH9kyjkd4Fdwj9x85skUPzfXhQd9cSN96mB+97yjgoYUXvZ7kxYu/UW7mL7Eo+rwKK9byTKWsSWWz6N8VBaZxB5ShgDJZHerscm0J6L1at2fNGPH4CqQNZ+gAGTeaPZVNBB52IJ7nt/uI3N/B0707Do+8vmEH37rpdTLX8eEDd47Xr564Y3aIj+67azM8Q4dwYHjpHbJoOu1/8OkH++lk4s59Y2Lo+tsevG1ukA/N3uHb9f9TbkFebNRET61I/GEuOEtdCkxKcdfISpPptmSn01kdVNF4Y4NjHF1rWnh0cxWZKImsJdKcKPPIkZR5RIoYkcJ7dh665dDOHqV/4jgc2ILXkYz77zgwypGsH1zKst/L+ir6nJVsPdtR2zaC4aQTZC9CR4p0jigDQ6gmexJcUeeXdbS0xY7WslzDdpPF8uryAPX0L+tqoVNFD5QrFi7rbKGXwYnkJGCpwra4XMZe1th6JZcOCL0VgV445HepqL+l5jVdKMHP1VeH89a/WtYaK2/9Z/g4noyFYduzjf6WpSS0FIKDRovrC4aaQ9ZArQ9b1r/K58P0Yhi/4Msl4WPhFbUuzCTBb1OitsjmCVsAn+Qs3eokTJ1FeEQlI1nGXNlfnbS8tcc/sYz4wU8vsbd+lr/UII5u7mncOYBJ+WKc+5jsETe/L03AXCfmN4IlTVnCOYiVSxyWr5h45up7d/Lpu568c7ey4zRcu6yjzk9P3Xvu3im5qb9yaf98ab2AwZIsy0Zrq6nXxkG22zi121ScGiC71IoiZwcZqlAmzUCmvaU5GgkkzaQfoNCjlKimWnxvGhtR5b4r0roYFX59BZLFsvVB5NMRIVAGQ65bJoBsRuaFbLJM/0n3nZCLlZaWYKj+efWy88WezKv+yiG5dKnN23mX2uUJbi5bY+Rc4XgxBrHXGnlYb637gwLPEuXVBmD1ViiIyzgRfl5f9NddvfoB9NDxw0clWD9KV0FbdhMMjzfc+H7uJXEG8fo6Ns4O1q5fU+KCCq16PhXG3JuJcczFw6GwEaLSBXkQwNwF4DgLs1AgHDqA2FToAXEgCDpj+jTudDaDgUmnGsaG9bWx1UOVctJGzBlDf2HJWgZyh1HHkeV53RK5WC6Gc8fr45AzKSByxwlWHShTsxydSgfVLhALUZsXOiS8w0TlVOdJ006bC4ZayA43j7cN9WCqeCgYDTvGJzKnKG0Jn7ou6KSC18Frs8FUk2Jch1frv65/kWLdMMbf2fWfDKac4HFdaYpb8HY9ZDXZhnEylEgHP7t2L6YMcO46M22b111HA113zoFBDJQUpy/WLx6B36K+MxQdmlHBKerm0BIJKqUu68GgoLY0VSpexdChJiDC1WpC9qwK1cQYpS7U0BW0JAzeMrX6P+hRI2Dy4z/hqqmb4gS3jG8GLT77P1Ue5E4wfOFTFoioAS8NYVYZhv9umJapaPV6hct6wHdkHiowcqVYnvUivt5Qa+3vK/X2dBXy2Uy6pclBE4pR4XkwxWHTtq93vH+tv0l2U6pFvbNRePWrv51uBFbBWmgHbw/upXv+0LnRc1AxL/RjLrVgmvx/yP0Fq1KJxarV2A+PHct2HDvWwbvxJIYX60/THfzHrcdGH7shQm/iC2l6E/fXRumtaPU/ybeyx+p34UkVL0LJv9PAUHOomzL1w8q9uZaYoV3SIOoujHBKKii60eKMxhJHXUMgTQW0InVqqErq22AbYN6BHOMkFCMtlpWLDDc/0NM23tYLZ1uGMX5ZrWfPtkQj+chQ61lZiH+gZSiai0Sbz4JhDbeswXd2PSVr8E/twqtr8KXdu690Q2KpI6jHMMuhBjdRdbG9iQslEae6YVhDV7gBdOiHgK4iKtSERkv4yOpAP8ZMpimmNqtSRuUFG50FDD2AeaYRNrasGS0P2LTwuGDncpRJNtZ5Fpev85SVhMY6T3ewBJrtjAFIs8XZi95eSXOXLJkW75wKaXmE7afkst1TsjBDJxP3v3I//kG6Z9R+ce7WnfcfrvHRo6fPnT46CpteTMJZ7yXKMb2XTlHieMpspgUYLz+k3UsJV/LFTWNH7vvT08eHlfWHHtx+69yLSbZMRhHWhDn2SG0oYCC3qE/B0qAKuZqPg+b5XkErlwWmYkKlMkNY2eLmUAqF3OJinmKjrPIhuK1/W/IJ6z8kh5K1D2aK+/UTWqOzkz1fC4xVOgKKKqgjZqKV9nhTGGOgUGnZjiK4Mq8jJFKOMwJ0UxSLdlO/Ymvrtq8H3/UG+nBNcG0e7Vh79xt/yOf37KklDMPYaeyc3LZ1y8hwT671KoP8BApooL9agOqYUm2FATeRptTcdeQGxexmC3pWyw2u5ZSr4l9xsLCKW+DaaeqxVskXZql+XdTggY9NDrcHk331MoTzqZSj3fGlCe3GxJQT6IsGjeBkQOGQO53v+VKSb9E1EVMQ5vKs2/R7axiimWAmiVCh4/MZ1eYrecvvMWx9oa71KppmNkVhBs6G6m+veHkw8amOFi0QFY4pTI7RrikRxSd1jgBaCeytDEHmYSsUN/HTEEyqQVQ6ppY4937ER/nPmMXaWK6W8TvQy1cj+s28wcIlS70LHqQsSoS5rB18abP70ubwv0VMqrRhJALnb2SJXZ76vg7pAPc9++oF2+s8XzLyZUMt/3ajhy35encPGy4n+lIy4Xvvou1JERMJFmTa8zqHldSwlaBa9k6VC63heDzM/3cYttfndDMiKlbIwCN7eV2F8FS61toUNZhCzHltUoKChwg/yah6WVnr8jIXJer+ultoizj14CWn/GfvvEU5uIjTdtnx8nw86K1TlzWF5QsXBhYXGlw+3rLk/5IB/G8+gzZuYUagPa8ByoUaWfiRIuA35I4CrJOMVariLtOCaKD+Ryq3gvWTwSDci1AAfVtQi7zzsmWE4F5Vq/+RPKDe8714vX5SVSVGuXjxa2K/iCyN42qyOkbLkXwt6FIjmt5sRsHC11VB2yANZQl1HL+GWjFC9Em4Vx7Q2oKTeB2+oKkeL3xEkBU015zWlri4VEBrpICIlwZ7Eso2mgSVKs8GLeJN5YsLnmn7Lh7/45KS6ncSg5I/Por8NcaWi7UW27Te2JeyTGPqPg3VS9j2CzJyeznjn1qaGXCrpsq8ro655n7+1zi3WwkBRkGuRl5e3eMyi6L0TvDJcnYwTnM14fWG5Xyh5nXVLya56BmNJRUi25oYoiGRJBGXdaO+Rb1Y9R861mlZYzodsf21K8/wZ1mC8I75Hr9viTsF+fsW5BzxTSO1IFQNz6DJvnC/lPv9L6Ab4KcvfJU6gC94y9NfMP31s7i5XY5RIn6LJqKRxjAKDuOVppiQA65ycUhaEvVeQya8dVuF6uCYKClVFADVGd5FyGt9RTWAAgg50ahiNFm2YkcCarHv3QTW/6Jna0TY0VA0FEpnMkbciKJ0RGSrrMN/XzzKfy7p3saOsq21cUl7FVQ2Dboqxg8D38S4hnxooL2bGRU1qurqAtP1Q1M7xzd3Sd4MKlx9aN7cxtWq/1OQAi25ohrK0s0ilVHwbgmKVNGWD1T/IMmcmd2u68h5MhPsLpW6Mf7ZEUPfceC+0zfhdXy9uTm5cQffujnZrMQFzmZdv+n0HyDOnl33Z4RjOcFoIL338N50IIpBxBEd9+2+7fV+vGGHQ5Y18NCTDw1EwkITYRu/JwZe9fPMI+IfxFUsyjbSqvKhAcwt168pdedsTBbTzZxTnRzRxQyV/if8uggP8y2VcpqWw7iyTmgJOy3GuEu5oK35P5xC0L6GZFag308hopD9/6r3KyoE7rKG5Tqi3D9z8s6TM/3+7mEeeCxiPDanxdWDjxmRxwKIeebmVFVePajGtTl5VaWLcGDdLdMVpbTvxD0n9pWUyvQtew1RfioQFOU/1vU/Lotg4KmyMEz9nnuM2OINTVu8ETPuuUeXPuNZUcFYEmd9rFRbYSxfVUjLiN9dFerqyvd2yKWFBEEB548Fup3m1PWnBQHUERnjyKYur0O1v1pBfvl30u2Hnj4EwydOw/CBOyd23vd4+YefpuUbvHb84elmO9HXD1P3Tq1f48YM5VZ17msH5/d1fPtmWQndeOwTd1EnZNeXbtwsoBRbcbJ29T3T0GbGDO+3J95aen6KxViWDVCHL8i5wsPAxPLfE1FDb55RmQnmCYgrEoijOyX+6KeDoE66Tt5ONjkSgheKBA9LqL6qpqchU0E7QaSYtJ3+irSVimrrmpLJU3ej0gsK6vTRXbdlEXtnb9u17Z9B+Un9m9Hg5rmoE93YF4zCPwZ31H9b/6f6b3cEgzvAgAIYO4IwfMe64Q03nOX3fXzD8Lo7brzrLtiCz85tCkajwb6N0b9LJD738MOfSxTs2x7mj3yGsEgjzzBYB9Xw2hGCYAZOzYWG2uR6nFlvxlJeEZfO732ziNsX84be4ffMGz7/gRmQb1dyTX8Q/dtArU8Hb8Wybmgod53NBlQOilxbg9mPCIstK3sTAzE7O5BMJuTKkvJgwfulBskXM0CBMymXLQrpkSoDMVmJ6aA2QjGG4SJkRk38g5sd61dtYGoQ4St+jHY+U23r4aVWOEjtseoMnDgvfwCEm2+hp6r/X91AK4zYkU3HMVEaxnR3qBfqPzn+/wHPnsOreJxjYGRgYABi1vIsoXh+m68M3MwvgCIMt5YoxkDp2P9f/2exVDAHAbkcDEwgUQAz1Qu/AHicY2BkYGAO+p/FwMBS9v/r/68sFQxAERQQDACh8QbyeJxdT0sVwzAMy49AkAxAkbT3UQiAITGAISmAYQiA9th4ttUs7Q568UeSlVidiwSkB3PUPg+ESd6ZD/+8v7HyrtzwghY89ZB6BcyrYqc6RZhw48YhaA1Wc/v1PQtdeXJ/HppUmFM597nvBVK7D+Z+E8/uQZLBgDyaz3Llvxx02S3c/Hv813JrznryZP4F+6lSfQAAAAAAAAAAUAC2ATABaAGyAfoCJAKwAzYDmgQSBFwExgUyBbQF/AZOBvwHRAe2B/YISgigCPIJGglCCWQJignACgAKQAp2CroLAAtGC4oL8gxcDPINng5iDuYPag/6EF4RIBGGEeQSShKYEyQTbhOyFAoUYhS+FVoVphYoFooXHBeGGFoYnhjGGOwZChlOGXgZrBneGhwaWhqgGtIbLhvyHHQc2B1QHZ4d/wABAAAAUwBtAAYAAAAAAAIAIAAwAHMAAAB2C3AAAAAAeJx1kN9q2zAUh39q0441YxcbjN3tXJWWEcc1lEGvWkLbXZeSu8JUV/6T2VKQlY48w95ifYa9zt6jd/vFESUUYiP5O5/O8ZEE4AP+QWH9nHKsWeEdozXv4A0uIu/Sf488IN9G3sMQPyLv0/+MfICv+BV5iI/4wz+owVtGM/yNrPBZfYm8g/fqW+Rd+svIA/Jd5D18UovI+/S/Ix9gqp4iD3GoniduvvR1WQU5mhxLlmap3C/FUdVWN6IXoXK+k3MpnA2maVySuza0ZlToUZ07292YctFov6k2eWp8VzsrJ0m6qa+NNV4H87Dq1j2WWQiFFN61chX7yNy7mclDUoUwPxuPN/tjAoc5lvCoUaJCgOCI9pjfDGk/BPfMEGaus2pYaDQ0GgtWVP1Kx/ico2BkaQ0zGnKCnHNL09KNuK451721rLqhLfmfht5vzdrmp7Sr3nUfC07YL92afU1r+wrd7/Dh5WwdHrmLjDawanUK3+9acPXqPML7Wq3NaHL6pL+1QHuGMd8t5/8PvPGO3QAAAHicbZLnlpswEIV9DRiwvZtseu89Ib333vvmBWRZYMVC0pHEEufpg8BO/kTncOfTaLgMOtPr97o17P1/baKPACEiDBAjQYohRhhjDevYhu3YwA7sxC7sxh7sxT7sxwEcxCEcxhEcxTEcxwmcxCmcxhmcxTmcxwVcxCVkuIwruIpruI4buIlbuI07uIt7uI8HeIhHeIwneIpneI4XeIlXeI03eIt3eI8P+IhP+Iwv+Ipv+I5N/OiF1hEz9JKxUrtFrDl1lWF9NR9QIikToRaVjUouKxvOmNBjLxnlhgo2DbnM1djLKrNGnGPScSUzItzGv93yPP2bSQSX84z9cqFQdJ56yZRmMhW8mLlJJSaBI0XYPDaZKDUviZmvr6DrNjJMi0WcK1MTM02mqpbZlJtEsNx5SI238jSodJtoS7qv+BpPw67IY9xU+dg5TXjROTWwdGrIOzWhT+uA0jolxqjaZrSOnCF2Nmq16651EYpMm1fakAul9SJQeR5QVYQlk1VkZ8SwoVNFIVjWnKQrlBGdMToftdoZjrs77DajqXKrS02YEFxbbtdWkG0x44JJVUS5aBqKSlJwmhDrmOF2Hv9Wqsy4TNqoKhfmSrrQKuNSL5nvPG6p0s0AkEWkSWVZMy1Kx3ljk03qLuZ14lTmB8gNGmByGrGfjLrhlhJV2f7SaIneNF1ypQNbybBUSgZswQaWEUNngeay1/sD4l/60HicY/DewXAiKGIjI2Nf5AbGnRwMHAzJBRsZWJ02MTAyaIEYm7mYGDkgLD4GMIvNaRfTAaA0J5DN7rSLwQHCZmZw2ajC2BEYscGhI2Ijc4rLRjUQbxdHAwMji0NHckgESEkkEGzmYWLk0drB+L91A0vvRiYGFwAMdiP0AAA=') format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}:-webkit-full-screen{height:100%;width:100%}:-ms-fullscreen{height:100%;width:100%}:fullscreen{height:100%;width:100%}body::-ms-backdrop{background:0 0}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}body{color:#eee;background-color:#111;overflow:auto}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}input:not(:disabled):focus,input:not(:disabled):hover,select:not(:disabled):focus,select:not(:disabled):hover,textarea:not(:disabled):focus,textarea:not(:disabled):hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle:before,.error-view>.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0\00a0"}[data-icon-after]:after{content:"\00a0\00a0" attr(data-icon-after)}.error-view>.error-toggle:before{content:"\e81a"}.error-view>.error-toggle.enabled:before{content:"\e818"}.error-view>.error:before{content:"\e80d\00a0\00a0"}a.link-external:after{content:"\00a0\e80e"}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}@media (prefers-reduced-motion:reduce){.passage{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}</style>
<style id="style-core-macro" type="text/css">@-webkit-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-o-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}.macro-type-cursor:after{-webkit-animation:cursor-blink 1s infinite;-o-animation:cursor-blink 1s infinite;animation:cursor-blink 1s infinite;content:"\2590";opacity:1}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay.open{visibility:visible;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:100000;position:fixed;top:-50%;left:-50%;height:200%;width:200%}#ui-dialog.open{display:block;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:100100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:92%;height:calc(100% - 2.1em)}@media (prefers-reduced-motion:reduce){#ui-overlay.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-overlay:not(.open){-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-dialog.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-close{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}</style>
<style id="style-ui" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .datestamp{font-size:75%;margin-left:1em}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}@media (prefers-reduced-motion:reduce){#story{-webkit-transition:margin-left 0s;-o-transition:margin-left 0s;transition:margin-left 0s}#ui-bar{-webkit-transition:left 0s;-o-transition:left 0s;transition:left 0s}}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-ui-debug" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:75%;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:0;width:8em}#debug-bar>div>select{width:15em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:101%;height:calc(100% + 1px);left:-2em;left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.175em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:102%;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:650%;max-height:65vh;position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-none{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint:after,#debug-bar-toggle:before,#debug-bar-views-toggle:after,#debug-bar-watch .watch-delete:before,#debug-bar-watch-add:before,#debug-bar-watch-all:before,#debug-bar-watch-none:before,#debug-bar-watch-toggle:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#debug-bar-toggle:before{content:"\e838"}#debug-bar-hint:after{content:"\e838\202f\e822"}#debug-bar-watch .watch-delete:before{content:"\e804"}#debug-bar-watch-add:before{content:"\e805"}#debug-bar-watch-all:before{content:"\e83a"}#debug-bar-watch-none:before{content:"\e827"}#debug-bar-views-toggle:after,#debug-bar-watch-toggle:after{content:"\00a0\00a0\e830"}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:after,html[data-debug-view] #debug-bar-views-toggle:after{content:"\00a0\00a0\e831"}html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript must be enabled to play.</noscript></div>
		<div id="init-lacking"><p>Browser lacks capabilities required to play.</p><p>Upgrade or switch to another browser.</p></div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<tw-storydata name="未命名故事" startnode="165" creator="Twine" creator-version="2.8.1" format="SugarCube" format-version="2.36.1" ifid="BC0A5369-7106-4E6F-B29B-433052FEF22A" options="" tags="" zoom="1" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript">
(function () {
    // v1.0.1
    'use strict';

    // selectors to ignore
    var ignored = ['a', ':button', '*[role="button"]', '.continue-macro-ignore', '#ui-bar', '#ui-dialog'];

    var _i = 0;

    prehistory['%%continue-expiration'] = function () {
        _i = 0;
    };

    function ns() {
        // create unique namespace
        var namespace = '.' + Date.now().toString(36) + '-' + _i;
        _i++;
        return namespace;
    }

    function ignoreMe() {
        $(document).on('click.continue-macro keyup.continue-macro', ignored.join(', '), function (ev) {
            ev.stopPropagation();
        });
    }

    function addIgnore() {
        if (State.length > 0) {
            return false;
        }
        var args = [].slice.call(arguments).flatten();
        ignored = ignored.concat(args);
        return true;
    }

    $(document).one(':passagerender', function () {
        // on first render, set up the ignore list
        ignoreMe();
    });

    // continue functions
    function cont(press, cb) {
        var namespace = ns();
        if (!cb || typeof cb !== 'function') {
            return;
        }
        var events = 'click.continue-macro' + namespace;
        if (press) {
            events = events + ' keyup.continue-macro' + namespace;
        }
        $(document).one(events, function () {
            cb.call();
            // expire all namespaced events
            $(document).off(namespace);
        });
    }

    function reset() {
        var args = [].slice.call(arguments).flatten();
        ignored = ignored.concat(args);
        $(document).off('.continue-macro');
        ignoreMe();
    }

    // macros

    // <<ignore selectors...>>
    Macro.add('ignore', {
        handler: function () {
            var check = addIgnore(this.args);
            if (!check) {
                return this.error('the <<ignore>> macro should only be run from StoryInit or equivalent.');
            }
        }
    });

    // <<cont [append] [press]>>Code<</cont>>
    Macro.add('cont', {
        tags: null,
        handler: function () {
            var append = this.args.includes('append'), // append keyword
                press = this.args.includesAny('key', 'keypress', 'press', 'button'), // keypress keyword
                wiki = this.payload[0].contents, // content to wikify
                $output; // output element (if needed)

            if (append) {
                // create output element, but only if needed (e.g. if appending content)
                $output = $(document.createElement('span'))
                    .addClass('macro-' + this.name)
                    .appendTo(this.output);
            }

            cont(press, this.createShadowWrapper(function () {
                // wikify 
                if (append && $output && $output instanceof $) {
                    $output.wiki(wiki);
                } else {
                    $.wiki(wiki);
                }
            }));
        }
    });
    Macro.add('clicked', {
        isAsync: true,
        tags: ['next'],
        t8nRe: /^(?:transition|t8n)$/,

        handler() {
            const items = [];

            try {
                items.push({
                    name: this.name,
                    source: this.source,
                    content: this.payload[0].contents
                });
            }
            catch (ex) {
                return this.error(`${ex.message} in <<timed>>`);
            }

            if (this.payload.length > 1) {
                let i;

                try {
                    let len;

                    for (i = 1, len = this.payload.length; i < len; ++i) {
                        items.push({
                            name: this.payload[i].name,
                            source: this.payload[i].source,
                            content: this.payload[i].contents
                        });
                    }
                }
                catch (ex) {
                    return this.error(`${ex.message} in <<next>> (#${i})`);
                }
            }

            // Custom debug view setup.
            if (Config.debug) {
                this.debugView.modes({ block: true });
            }

            const transition = this.args.length > 1 && this.self.t8nRe.test(this.args[1]);
            const $wrapper = jQuery(document.createElement('span'))
                .addClass(`macro-${this.name}`)
                .appendTo(this.output);

            // Register the sequence with cont
            this.self.registerContSequence($wrapper, items, transition);
        },

        registerContSequence($wrapper, items, transition) {
            if (!Array.isArray(items) || items.length === 0) {
                throw new TypeError('items parameter must be a non-empty array');
            }

            const processItem = (item) => {
                const frag = document.createDocumentFragment();
                new Wikifier(frag, item.content);

                // Output.
                let $output = $wrapper;

                // Custom debug view setup for `<<next>>`.
                if (Config.debug && item.name === 'next') {
                    $output = jQuery(new DebugView( // eslint-disable-line no-param-reassign
                        $output[0],
                        'macro',
                        item.name,
                        item.source
                    ).output);
                }

                if (transition) {
                    $output = jQuery(document.createElement('span'))
                        .addClass('macro-timed-insert macro-timed-in')
                        .appendTo($output);
                }

                $output.append(frag);

                if (transition) {
                    setTimeout(() => $output.removeClass('macro-timed-in'), Engine.minDomActionDelay);
                }
            };

            const sequenceRunner = () => {
                if (items.length > 0) {
                    const item = items.shift();
                    processItem(item);

                    if (items.length > 0) {
                        cont(false, sequenceRunner);
                    }
                }
            };

            sequenceRunner();
        }
    });

    // APIs

    setup.cont = cont;
    setup.cont.ignore = addIgnore;
    setup.cont.reset = reset;

    window.cont = window.cont || setup.cont;

}());</script><tw-passagedata pid="1" name="起源" tags="" position="500,200" size="100,100">你希望通过建立和使用一个工具来重塑思维习惯，以应对过度思考和分析瘫痪带来的挑战。这种工具可以帮助你形成长期的自动化行为习惯，而不依赖其他灵活个体的沟通和理解。你有考虑过什么样的工具或方法可以最好地支持你的需求和目标吗？

[[支持系统之灵活个体]]
[[外部信息及刺激]]
[[目录]] 
[[时间表]] </tw-passagedata><tw-passagedata pid="2" name="支持系统之灵活个体" tags="" position="500,350" size="100,100">你计划通过编写一个脚本工具来自动化每日的闹钟和唤醒仪式，帮助你温习个人常识和记忆，以改善你与他人交流的情感体验。这种工具会帮助你收集每日的反馈，并形成一个数据库，供日后分析和改进问题设定使用。你打算如何开始实现这个自动化方案的编写和执行？

[[自动化方案]]
(input-box:2bind $new,&quot;=XX=&quot;,&quot;略过&quot;)
&lt;&lt;linkreplace &quot;提交&quot; &gt;&gt;
$new
&lt;&lt;/linkreplace&gt;&gt;

	&lt;&lt;linkreplace &quot;继续&quot; &gt;&gt;

	&lt;img src=&quot;img\start\baby-g90cef73ed_1920.jpg&quot; width=&quot;500px&quot;&gt;

	這一天,风雨不停，古老的城堡中迎来了一个新的生命，一个健壮的中年男人双手托起一个孩子，“我的儿子啊， 当你出生的这一天起， 整个城堡都在低语着这个名字： 布莱恩。 我的孩子啊， 你将一天天长大，成为正义的化身。 记住， 力量和智慧并存。 总有一天，我的生命将抵达终点。 而你，将成为传奇！


	&lt;&lt;/linkreplace&gt;&gt; </tw-passagedata><tw-passagedata pid="3" name="总结表达" tags="" position="500,600" size="100,100">理解了，你希望通过持续的对话来加深对每个概念点之间联系的理解，从而建立坚实的认知基础，以便细化文字或语言表达的连贯性和自然度。我们可以逐步讨论每个问题和概念，确保它们之间的关系清晰，并帮助你准备出更易于理解的版本。你想从哪个问题或概念开始？

[[心理资本]]</tw-passagedata><tw-passagedata pid="4" name="心理资本" tags="" position="500,725" size="100,100">关于投资心理资本,人生的主要成果价值都是做事的副产品。 这个讲起来可能不太好说的抽象, 就是你努力工作并不是为了这个所谓的这个钱啊,这个目的啥的, 而真正的生活的意义只是这些工作,什么生存,真正有价值的东西,反而是这些附加品。 好吧,我描述的确实比较磕碰, 我的原意是有些东西是没有办法直接追求到的, 你追求这个,反而它给出来是另外一个产品, 比如说你想变得快乐, 然后你过分追求快乐的话,它给你的是悲伤。 如果你追求悲伤的话,它反而会给你一种喜悦,热爱,或者是某种你并不讨厌的情绪。 


你说得很有深度。生活中的主要成就往往并非直接的目标，而是通过努力工作而产生的副产品。追求快乐时可能得到悲伤，反之亦然，这种反转是生活的有趣之处


从这里切入就是你想要或者是你有所执念的东西 并不能直接去追求 你只有先打消掉自己的执念 才能追求得到你所想要的东西 就是有些事物当你没有那么在意的时候 你反而能够得到的 然后你越是在意越是得不到 这个有一种是先有鸡还是先有蛋的意味 你是因为想要得到所以才得不到 还是因为缺乏所以才想要得到 所以到底是因为缺乏导致你得不到 还是因为你想得到导致了你缺乏它 这个就是比较很有意思的一个事情

你提到了一个深奥而有趣的观点：有些东西你想要的越多，却越难得到；而当你不那么在意时，反而可能得到。这种情况好像是一个“先有鸡还是先有蛋”的问题，即是因为你想要所以得不到，还是因为缺乏所以才想要。这个问题确实很有趣，有时候反思我们对事物的态度和期望，可能会帮助我们更好地理解和实现自己的目标。

[[灵感库存]]</tw-passagedata><tw-passagedata pid="5" name="自动化方案" tags="" position="500,475" size="100,100">你希望总结这些问题，但希望表达更符合日常语言习惯的方式，避免显得生硬或难懂。你已经探索了关于悖论、自我指涉和哥德尔不完备定理等一系列基础概念，并将感想写成了文字稿。现在的挑战是如何将这些复杂概念以生动、形象且易理解的方式表达出来，使其更容易为他人接受和理解。你有想过怎样来改进你的文字稿，让它更生动、更容易理解吗？
[[总结表达]]</tw-passagedata><tw-passagedata pid="6" name="灵感库存" tags="" position="500,850" size="100,100">那么我可以得出一个推论 就是你越是想要的东西 越会占据你的心理能量 或者心理资本 你的思维能量 然后你越是考虑这件事情的东西 然后你的灵性 或者是你的灵感的存库 会越来越得到耗尽 而这个灵感存库它需要 需要闲暇去发丧 去做一些没有目的 没有意义的事 去蹉跎一下时光 它才能得到补全 所以如果你一旦把你真正想做的事 和你耗费灵感 这个东西放到一起的话 它是会进入一种恶性循环 就是你一边为了你想做的事 就是你想做的事 就是补充灵感源 补充心理能量 而这种你费尽心思去补充心理能量 这样的执念 反而会导致心理能量就无法得到补充 因为心理能量的来源就是不在意的 没有目的的 或者是无所事事的这种状态 它才能够得到补充
[[“傻瓜”]] 
你的推论很有深度，指出了想要的东西可能会消耗心理能量和灵感的存储。当我们过度专注于追求目标时，可能会耗尽我们的心理能量和灵感，而这些资源通常需要在闲暇中才能得到补充。这种恶性循环表明，过度追求可能反而阻碍了我们真正目标的实现。
[[业余价值]]</tw-passagedata><tw-passagedata pid="7" name="业余价值" tags="" position="500,975" size="100,100">而是平常做这些自己可以无所谓的事情 就是以平常心或者是无所谓的态度去做 然后去酝酿去后激勃发去积累这个心理能量 然后到未来某个时机起点的话可以一举突破 就是把自己想要的东西通过前面的一些积累 想要的东西就很顺畅的就能够去达成了 如果你每天去都是要考虑这个想要的东西 每天都不去积蓄能量都是只面这个想要的东西 你会很容易受挫的 因为每时每刻你都会在比较 这个我想要的东西没有达到 而这个没达到的东西 这个事实情况会给自己造成持续的这种负面反馈 这种负面反馈的话就是既不能给你这个积蓄能量 反而会损耗你的这个积累的心理能量 所以我现在都是建议把自己真的想要的东西 当作业余爱好闲暇的东西来做 真正主业的东西 就是你真正热爱的东西不能把它当作工作来干 有些你可以无所谓的东西就可以把它当作工作来干

你提出的建议很有见地。通过将真正想要的事物视作业余爱好，在日常生活中保持平常心态或无所谓的态度，可以酝酿和积累心理能量。这样做能帮助我们在未来某个时机更顺利地实现目标，避免过度专注带来的挫折和负面反馈，同时有效地保持心理能量的积累和稳定。
[[非此即彼无过渡]]</tw-passagedata><tw-passagedata pid="8" name="非此即彼无过渡" tags="" position="500,1100" size="100,100">然后就是关于这些冥想和正念相关的这些概念 就是如何让这个 就是比如说当下的力量这本书里面提到了一些概念 就是小我和真我之间的这个争执 小我真我它原本是合一的 然后因为小我的这个执念过程导致它分离了 小我是尝试试图自己去开悟 就试图自己不是小我 就是试图让自己变成这个身心合一的状态 但是恰是这种尝试或者是努力让自己不是小我 它体现了就是小我的特色 这可能说起来还是很抽象的 就是接纳的意思 就是真正的对抗和不接纳 就是说我一定要去完成某件事 不能做到这件事就不可以 就是会很难受 会很割裂的感觉 会很分裂的感觉 而真正的接纳就是无论做得到做不到都无所谓 都不会对我产生影响 这就是接纳 那么客观上来讲 就是我去接纳自己 这是必经之路 对 而主观上讲 因为我必须得做到接纳 不做到接纳会很痛苦 然后这样反而达不到接纳 达不成接纳 因为接纳就是无论自己能不能做到接纳都无所谓 这个就形成了一定的自制悖论 就是到底是哪一层的这个接纳才有效 和这个受患者悖论类似 比如说我现在说的这句话是谎话 如果假设他是谎话 那么他这句话的内容 他一定是假的 那只能反过来 就是我说的话不是假话 那这个这句话的含义又和他表现出来的形式又是相反的 所以这很多时候就是他们之间 他中间好像没有一个过渡的这个中间 这过渡的 过渡的阶段吧 就是接纳与不接纳 两个之间好像就是一个像是量子跃迁的状态 你只能选择其没有中间连续过连贯的这个 连续的点 它是一个离散的 要么接纳要么不接纳 然后作为人的基本事实 就是人是能够去有这种自由意志 去主动选择去接纳还是不接纳 你可以控制好自己的能量 然后

这种对小我和真我之间争执的理解很深刻。接纳的实践是关键，不是努力试图改变自己或否认现实，而是无论发生什么都能接受。客观上来看，接纳是自我发展的一部分，但主观上追求接纳却可能导致无法真正达到。这种悖论类似于说谎者悖论，要么接纳，要么不接纳，之间没有连续的过渡状态。

[[状态分类或感性理性]]</tw-passagedata><tw-passagedata pid="9" name="状态分类或感性理性" tags="" position="500,1225" size="100,100">所以这可以有一个很好笑的 就是这种状态的分类吧 就是比如说我一开始就是处于一个接纳状态 还有一个是一开始就是不接纳的状态 另外一个就是我处于不接纳的状态 然后试图去达到一个或者是努力 去达到一个接纳的状态 这三者他的状态很奇迹 一个是从来就是比如说从来就是天才 没有反思没有努力 就没有反思过自己的天赋 为什么会有这种天赋 他就是理所当然的 我就是能够做到这件事 那另外一个是比较蠢的一些人 就是比较蠢货或者比较笨天赋差的一些人 他总是想通过努力来达到天才一样的这种浑然天成 他需要模仿去刻意的去探穷他中间的规律 他需要显化出他们天才的经验 但是你想要成为天才的话 不能用蠢货的这种 就是天赋差的人这种评判标准 他们的这种模刻和模仿 真正的天才是不需要这种规则 是破掉这些规则的时候 他能给自己找到一种有规律 有自有某种孕育的这种感觉感受 所以很多东西只有是感性的东西才是有创造力的 而理性的东西它是不能凌驾于感性之上的 理性很多时候是起到了保护感性不受损的作用



你说得对，这种状态确实可以分类。有些人天生就是自信，不需要思考就能做到。另一些人可能天赋较差，需要努力模仿和学习。然而，真正的天才能够突破传统规则，发现新的方式和创意。感性和理性在创造中各有角色，感性通常驱动创造力，而理性则保护和指导。




[[起源]]

[[跃迁]]</tw-passagedata><tw-passagedata pid="10" name="四象限" tags="" position="750,450" size="100,100">重要且紧急



重要不紧急



不重要但紧急
洗衣服


不重要不紧急








[[课题分离]]</tw-passagedata><tw-passagedata pid="11" name="课题分离" tags="" position="725,675" size="100,100">
&lt;div class=&quot;container&quot;&gt;
  &lt;label for=&quot;inputText&quot;&gt;输入文本:&lt;/label&gt;
  &lt;input type=&quot;text&quot; id=&quot;inputText&quot; placeholder=&quot;在这里输入文本&quot;&gt;
  &lt;button onclick=&quot;displayText()&quot;&gt;显示文本&lt;/button&gt;
  &lt;div id=&quot;displayArea&quot;&gt;&lt;/div&gt;
&lt;/div&gt;


&lt;&lt;linkreplace &quot;继续&quot;&gt;&gt;
&lt;&lt;set $azx = inputText.value&gt;&gt;

&lt;&lt;print $azx&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;

&lt;script&gt;
  function displayText() {
    var inputText = document.getElementById(&#39;inputText&#39;).value;
    document.getElementById(&#39;displayArea&#39;).textContent = inputText;
  }
&lt;/script&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://player.bilibili.com/player.html?isOutside=true&amp;aid=750266943&amp;bvid=BV1yC4y1K7ZZ&amp;cid=1382758077&amp;p=1&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen&gt;&lt;/iframe&gt;


&lt;a href=&quot;https://www.bilibili.com/video/BV1yC4y1K7ZZ/?share_source=copy_web&amp;vd_source=d2af58e92a4b625627960f65d78970a3&quot;&gt;
【【油管搬运】EMDR眼动疗法演示 心理咨询案例演示 中英双语字幕】 
&lt;/a&gt;

[[双侧刺激]]</tw-passagedata><tw-passagedata pid="12" name="本性" tags="" position="1775,450" size="100,100">本能之误——
过度比较
情绪失控
欲望无限


[[体内(比较欲望、刺激代谢)]] 


[[沟通]] 


[[外部信息及刺激]] </tw-passagedata><tw-passagedata pid="13" name="沟通" tags="" position="1975,300" size="100,100">假设信息填补
误解百分百
人际沟通ABCD
争论无果

[[假设信息填补]] 



[[观念]] </tw-passagedata><tw-passagedata pid="14" name="观念" tags="" position="2225,200" size="100,100">价值观之错
非逻辑接受
小鸭子
前观念法官
旧观念胜出
无法说服
多宝豆

[[全新/次新观念(风俗、文化、价值、信仰…)]] 



[[改变]] </tw-passagedata><tw-passagedata pid="15" name="改变" tags="" position="2475,125" size="100,100">改变活化能
改变虚弱期
变化惰性
熟悉偏好与改变
[[积极行动(提升自己)]] 

扳道工
小鸭子与扳道工
[[思维扳道(自我扳道)]] 


[[创新]]
</tw-passagedata><tw-passagedata pid="16" name="不知之障" tags="" position="2975,125" size="100,100">高山俯瞰
不知有不知无
雪山困境
知边界


[[不知有不知无]] 



[[弹簧迷雾]] </tw-passagedata><tw-passagedata pid="17" name="弹簧迷雾" tags="" position="3225,200" size="100,100">维持判断力自信
期待性求证
记忆的修改
自我说服
单倾选择
饭碗正义

[[平衡补偿机制(弹簧人)]] 

[[终极局限]] </tw-passagedata><tw-passagedata pid="18" name="终极局限" tags="" position="3475,300" size="100,100">自查无错


[[自查无错]] 
[[全面进步]] </tw-passagedata><tw-passagedata pid="19" name="全面进步" tags="" position="3675,450" size="100,100">思维错误树
思维体操
无罪之罪

[[思维扳道(自我扳道)]] 
[[外部信息及刺激]] </tw-passagedata><tw-passagedata pid="20" name="外部信息及刺激" tags="" position="1750,675" size="100,100">+--&gt;外部信息及刺激
	|
	+--&gt;[[体外(眼耳鼻舌身意)]]

[[本性]] </tw-passagedata><tw-passagedata pid="21" name="找不同" tags="" position="3225,950" size="100,100">[[全新/次新观念(风俗、文化、价值、信仰…)]]</tw-passagedata><tw-passagedata pid="22" name="经验价值清单(记忆)" tags="" position="2850,1550" size="100,100">[[负反馈(动机)]] </tw-passagedata><tw-passagedata pid="23" name="负反馈(动机)" tags="" position="2700,1725" size="100,100">[[降低标准/100%合理理由/自动调节负反馈]] 
[[平衡补偿机制(弹簧人)]]
[[延迟行动]]
[[立即行动(谨慎-鲁莽、粗心-细心、急躁-耐心)]]

</tw-passagedata><tw-passagedata pid="24" name="平衡态(轻松)" tags="" position="1950,1125" size="100,100">[[失衡态(压力)]] </tw-passagedata><tw-passagedata pid="25" name="失衡态(压力)" tags="" position="2400,975" size="100,100">[[积极情绪集(快乐、幸福、狂喜、满足、悠闲、舒适、骄傲、自信…)]]
[[消极情绪集(焦虑、抑郁、愤怒、羞愧、害怕、内疚、嫉妒…)]]
</tw-passagedata><tw-passagedata pid="26" name="进步的平衡态" tags="" position="3675,2875" size="100,100">[[别胡思乱想了]]

[[学习之道]]</tw-passagedata><tw-passagedata pid="27" name="积极情绪集(快乐、幸福、狂喜、满足、悠闲、舒适、骄傲、自信…)" tags="" position="2725,1125" size="100,100">[[利益脂肪(储存名/权/利/安全/尊重/认同/归属…)]]
[[边际效用递减(无聊/麻木/无感/厌倦…)]]</tw-passagedata><tw-passagedata pid="28" name="消极情绪集(焦虑、抑郁、愤怒、羞愧、害怕、内疚、嫉妒…)" tags="" position="3075,1150" size="100,100">被动失衡[[经验价值清单(记忆)]] </tw-passagedata><tw-passagedata pid="29" name="利益脂肪(储存名/权/利/安全/尊重/认同/归属…)" tags="" position="2550,1225" size="100,100">[[平衡态(轻松)]] 
[[自利性利他(帮助他人/友情关爱/溺爱/慈善…)]]
[[追名逐利(欲望无止境/事业无止境…)]]</tw-passagedata><tw-passagedata pid="30" name="自利性利他(帮助他人/友情关爱/溺爱/慈善…)" tags="" position="2400,1350" size="100,100">[[平衡态(轻松)]] </tw-passagedata><tw-passagedata pid="31" name="边际效用递减(无聊/麻木/无感/厌倦…)" tags="" position="2825,1350" size="100,100">主动失衡[[经验价值清单(记忆)]] </tw-passagedata><tw-passagedata pid="32" name="追名逐利(欲望无止境/事业无止境…)" tags="" position="2600,1475" size="100,100">主动失衡[[经验价值清单(记忆)]] </tw-passagedata><tw-passagedata pid="33" name="思维扳道(自我扳道)" tags="" position="3225,2200" size="100,100">+--&gt; 克制+--&gt;[[消极情绪集(焦虑、抑郁、愤怒、羞愧、害怕、内疚、嫉妒…)]]
				|
				+--&gt;[[消极行动(拉低别人)(诬陷、造谣、陷害、打压…)]]
				|
				+--&gt;[[平衡补偿机制(弹簧人)]]
				|
				+--&gt;[[非全信息局限]]

+--&gt;立即提升+--&gt;[[进步的平衡态]] </tw-passagedata><tw-passagedata pid="34" name="降低标准/100%合理理由/自动调节负反馈" tags="" position="2450,1600" size="100,100">[[平衡态(轻松)]] </tw-passagedata><tw-passagedata pid="35" name="平衡补偿机制(弹簧人)" tags="" position="2175,2000" size="100,100">+--&gt;[[维持判断力自信]]</tw-passagedata><tw-passagedata pid="36" name="延迟行动" tags="" position="2925,1775" size="100,100">等待时机-&gt;[[压力欲望库(性、谈恋爱、买房买车、求子、升官发财…)]]</tw-passagedata><tw-passagedata pid="37" name="立即行动(谨慎-鲁莽、粗心-细心、急躁-耐心)" tags="" position="2775,2200" size="100,100">
[[日常行为(吃饭、喝水、休息、购物…)]]
[[消极行动(拉低别人)(诬陷、造谣、陷害、打压…)]]
[[积极行动(提升自己)]]</tw-passagedata><tw-passagedata pid="38" name="压力欲望库(性、谈恋爱、买房买车、求子、升官发财…)" tags="" position="3075,1900" size="100,100">时机出现-&gt;[[立即行动(谨慎-鲁莽、粗心-细心、急躁-耐心)]] </tw-passagedata><tw-passagedata pid="39" name="日常行为(吃饭、喝水、休息、购物…)" tags="" position="2375,2125" size="100,100">+--&gt;[[平衡态(轻松)]]</tw-passagedata><tw-passagedata pid="40" name="消极行动(拉低别人)(诬陷、造谣、陷害、打压…)" tags="" position="2475,1875" size="100,100">+--&gt;[[平衡态(轻松)]]</tw-passagedata><tw-passagedata pid="41" name="积极行动(提升自己)" tags="" position="2975,2275" size="100,100">[[学习与改变(提升自己、求学深造、自省、锻炼身体…)]]
[[探索、创新]]</tw-passagedata><tw-passagedata pid="42" name="探索、创新" tags="" position="3125,2425" size="100,100">+--&gt;培养--&gt;[[兴趣果(运动、艺术…)]]</tw-passagedata><tw-passagedata pid="43" name="学习与改变(提升自己、求学深造、自省、锻炼身体…)" tags="" position="2825,2425" size="100,100">+--&gt;克服--&gt;[[变化惰性]]</tw-passagedata><tw-passagedata pid="44" name="变化惰性" tags="" position="2950,2525" size="100,100">+--&gt;跨越--&gt;[[改变活化能]]</tw-passagedata><tw-passagedata pid="45" name="改变活化能" tags="" position="3100,2650" size="100,100">+--&gt;度过--&gt;[[改变虚弱期]]</tw-passagedata><tw-passagedata pid="46" name="改变虚弱期" tags="" position="3225,2750" size="100,100">+--&gt;[[改变完成]]
</tw-passagedata><tw-passagedata pid="47" name="改变完成" tags="" position="3400,2875" size="100,100">+--&gt;[[进步的平衡态]]</tw-passagedata><tw-passagedata pid="48" name="兴趣果(运动、艺术…)" tags="" position="3250,2525" size="100,100">+--&gt;[[熟悉偏好]]</tw-passagedata><tw-passagedata pid="49" name="熟悉偏好" tags="" position="3375,2650" size="100,100">+--&gt;坚持--&gt;[[职业发展到高层]]</tw-passagedata><tw-passagedata pid="50" name="职业发展到高层" tags="" position="3525,2750" size="100,100">+--&gt;[[进步的平衡态]]</tw-passagedata><tw-passagedata pid="51" name="维持判断力自信" tags="" position="2075,1825" size="100,100">+--&gt;[[记忆修改/期待性寻证]]</tw-passagedata><tw-passagedata pid="52" name="记忆修改/期待性寻证" tags="" position="1925,1625" size="100,100">+--&gt;[[自我说服/单倾选择/饭碗正义]]</tw-passagedata><tw-passagedata pid="53" name="自我说服/单倾选择/饭碗正义" tags="" position="1775,1475" size="100,100">+--&gt;[[平衡态(轻松)]]</tw-passagedata><tw-passagedata pid="54" name="全新/次新观念(风俗、文化、价值、信仰…)" tags="" position="3500,1100" size="100,100">全新+--&gt;[[非逻辑接受(小鸭子模型)]]
次新+--&gt;[[前观念法官]]
+--&gt;[[非全信息局限]]
</tw-passagedata><tw-passagedata pid="55" name="非逻辑接受(小鸭子模型)" tags="" position="3250,1250" size="100,100">--&gt;存入--&gt;[[经验价值清单(记忆)]]</tw-passagedata><tw-passagedata pid="56" name="非全信息局限" tags="" position="3825,1350" size="100,100">+--&gt;[[自查无错]]
|
+--&gt;[[不知有不知无]]
|
+--&gt;[[假设信息填补]]</tw-passagedata><tw-passagedata pid="57" name="前观念法官" tags="" position="3575,1350" size="100,100">+--&gt;排斥+--&gt;[[旧观念胜出]]

+--&gt;接受+--&gt;[[多宝豆(世界观、人生观、价值观、金钱观、爱情观…)]]</tw-passagedata><tw-passagedata pid="58" name="旧观念胜出" tags="" position="3350,1400" size="100,100">+--&gt;[[无法说服]]</tw-passagedata><tw-passagedata pid="59" name="多宝豆(世界观、人生观、价值观、金钱观、爱情观…)" tags="" position="3675,1975" size="100,100">+--&gt;升级经验价值清单+--&gt;[[经验价值清单(记忆)]]
+--&gt;形成+--&gt;[[思维扳道(自我扳道)]]</tw-passagedata><tw-passagedata pid="60" name="无法说服" tags="" position="3075,1450" size="100,100">+--&gt;维持旧观念+--&gt;[[经验价值清单(记忆)]]</tw-passagedata><tw-passagedata pid="61" name="自查无错" tags="" position="4025,1425" size="100,100"></tw-passagedata><tw-passagedata pid="62" name="不知有不知无" tags="" position="4025,1275" size="100,100">--&gt;[[雪山困境]]</tw-passagedata><tw-passagedata pid="63" name="假设信息填补" tags="" position="4025,1575" size="100,100">--&gt;[[误解百分百/人际沟通ABCD]]</tw-passagedata><tw-passagedata pid="64" name="雪山困境" tags="" position="4225,1350" size="100,100"></tw-passagedata><tw-passagedata pid="65" name="误解百分百/人际沟通ABCD" tags="" position="4225,1500" size="100,100"></tw-passagedata><tw-passagedata pid="66" name="创新" tags="" position="2725,100" size="100,100">创新不新
创意丑小孩
创新实操攻略
人类创新历程



[[探索、创新]] 

[[不知之障]] </tw-passagedata><tw-passagedata pid="67" name="体外(眼耳鼻舌身意)" tags="" position="2125,750" size="100,100">+--&gt;[[体内(比较欲望、刺激代谢)]]
</tw-passagedata><tw-passagedata pid="68" name="体内(比较欲望、刺激代谢)" tags="" position="2550,800" size="100,100">

[[找不同]] 
[[平衡态(轻松)]] </tw-passagedata><tw-passagedata pid="69" name="早起" tags="" position="2325,2625" size="100,100">第一节   早起： 无闹钟、不参团、不打卡， 我是如何坚持早起的
虽然每天叫醒我的还不是梦想 ，但也不是闹钟 。回头看去 ，我已经过了4年早起生活 ，其间从来没有用过闹钟、没参过 团 ，也没有打过卡 ，我在完全独立的情况下自然地养成了早起的习惯。
坚持早起给我创造了大量的可支配时间 ，生活状态也发生了巨大的改变 ，而且生理健康几乎没有受到影响 ，甚至有很多方 面反而变得更好了 。看着五花八门的早起团、打卡团 ，各类早起课、监督群 ，我觉得有必要分享一下自己的经历 ，或许对想要 养成早起习惯的人有所帮助。
我的早起之路
4年前 ，我和很多人一样喜欢熬夜 ，每天不到12点以后是不会睡的 。睡前我通常都盯着手机屏幕 ，直到实在无法支撑才怏   怏睡去 。那时我的身体和精神状态不太好 ，早上起来迷迷糊糊的 ， 白天也显得无精打采 。虽然我也知道这种毫无节制的生活习 惯不好 ，但实在是没有心力去对抗惰性 。对于早起的好处 ，我多少也有所耳闻 ，也知道很多名人都有早起的习惯 ， 比如：
·巴菲特每天6 ∶45起床；
·乔布斯每天6点左右开始工作；
·潘石屹每天4点起床 ，6点开始晨跑 ，8点前开始工作 ……
这些人在我眼里都不是一般人 ，我怎么可能和他们一样呢？早起 ，在那时的我眼中 ，完全是另外一个世界的事情 ，看看就 罢了 。如果当时有人跑来告诉我： 如何用多个闹钟、如何早起打卡、如何相互监督 ……我一定是无动于衷的 ，我知道这种纯粹 消耗意志力的做法会很痛苦 ，并且多半不会成功 。直到我看到日本作家中岛孝志写的《4点起床：最养生和高效的时间管理》
这本书。
大概是因为“4点起床”让我觉得有些夸张 ，于是我产生了一探究竟的兴趣 ，结果书中的四个观点让我耳目一新。 第一 ，每天4点起床 ，把全天分成三段。
4点~12点：第一个8小时用于完成过去的工作（或者说用于完成我们一天正常的工作）； 12点~20点：第二个8小时用来铺垫未来的工作（也可以视其为多出来的一个工作日） ； 20点~次日4点：第三个8小时用于休息（还是8小时没变）。
作者称之为人生两季：4点起床 ，就相当于多了一个工作日 ，并且睡眠时间没有减少 。虽然这种说法经不起推敲 ，但表面 的好处还是让人产生一丝心动 ，毕竟只需要改变起床的时间 ，就能得到更多的时间 ，而且也没什么损失。
第二 ，有关睡眠的脑科学理论。
书中提到芝加哥大学的克雷特曼与德门克在实验中发现 ，人的眼球会在睡觉的时候来回运动 ，他们根据这个运动规律发现 了“快速眼动睡眠”（REM）和“非快速眼动睡眠”（Non-REM）规律 。健康的成年人睡觉时大多是1.5小时快速眼动睡眠、1.5小时 非快速眼动睡眠 ，两种模式不断切换 ，并且在最初的两个单位时间内 ，也就是睡着之后的前3小时中 ，会进行高质量的睡眠
（深度非快速眼动睡眠等于熟睡） ，之后则是浅层非快速眼动睡眠与快速眼动睡眠的组合 。根据这一规律 ，人在睡眠后的3小   时、4.5小时、6小时、7.5小时这几个节点醒来 ，就会觉得神清气爽 ，精力充沛 。我对早起的实践就是从对这个理论的神奇体验 开始的。
在看完书的那天晚上 ，我大约23点入睡 ，凌晨微醒 ，一看表刚好是凌晨2点 ，之后又微醒了一次 ， 时间在3点半到4点之
间 ，极其吻合上述睡眠规律 ，这让我非常惊讶 。知道这个规律后 ，我对睡觉节点的感知突然变得敏锐 ，所以在那些时间节点能 醒过来 。回想以前 ，我也曾在半夜有过那种微醒的感觉 ，但那时不知道是睡眠周期结束了 ，于是翻身就又睡过去了 。知道这一 规律后 ，我连续试了几天 ， 时间基本相同。
这个理论让我明白了为什么有时候我们睡了很长时间 ，但醒来后还是精神不佳 ，原因就是醒来的时机不在睡眠节点上 ，而 是在睡眠周期中。
第三 ，放弃闹钟。
中岛孝志说：“闹钟不会照顾你的睡眠周期 ， 时间一到 ，就会把手伸进你的脑子里 ，让你的脑子发生一场大地震 ，潜意识 会被搅得一团糟 。因为你是被闹钟吵醒的 ，大脑深处其实还睡着 ，所以明明睡了8小时 ，可总会觉得没睡饱 ，整个人昏昏沉沉 的 。”我也不喜欢被闹钟叫醒的感觉 ，和自然醒来相比 ，被闹钟叫醒后 ，我的精神状态会差很多 ，起床的痛苦感很大程度源自 这里 ，于是我果断放弃了闹钟。
现在很多早起课都告诉学员要准备多个闹钟 ，床头放一个、卫生间放一个、客厅放一个 ，设好时间间隔 ，音量要一个比一 个大 ……利用这种粗暴的方式强迫自己早起 ，我觉得实在是一种摧残 ，早起会给他们带来痛苦的体验 。而当我有了感知睡眠节 点的能力和习惯后（大约用了两周） ，根本不用担心醒不过来或错过正常的起床时间 ，这个生物时钟非常准。
放弃闹钟的另一个好处是 ，不影响家人或室友的休息 ，这样更容易得到他们的支持。 第四 ，抓住大脑工作的高峰期。
人体从黎明开始分泌肾上腺素和肾上腺皮质类脂醇这两种可以让人保持精力充沛的荷尔蒙 ，分泌高峰期正好是早上7点左

右 ，这时 ，人的工作效率非常高 。人体进食后 ， 能量也会在1小时后转变为葡萄糖 ，输送到大脑 ，人的记忆力、理解力就会提   高 ，大脑的运转速度会迎来峰值 ，直至4小时后才降到谷底 。所以人们要顺应规律 ，抓住效率高峰期 ，把最困难的工作放在这   个时间段完成 ，就能达到事半功倍的效果 。另外 ，正常吃早餐的人 ，上午的工作效率更高（午饭后的效率峰值在14点到16点间 出现）。
正是以上4个观点 ，让我几乎无痛地踏上了早起之旅 ，尽情体验早起给自己带来的改变 ，直到现在 ，从未间断 。这大概也 是一次典型的认知驱动体验 ，一旦认知上想通想透了 ，行动时就不需要用大把大把的意志力来支撑了。
早起给我带来了什么
现在我早已养成习惯 ，每天不用闹钟也能自然醒来 。有时5点起 ，有时4点半起 ，最早4点起 ，通常不晚于5点半。
相比在7点左右起床 ，我每天多出了2小时 ，按一天8小时工作时长计算 ，每年可以多出约90个工作日 ，如果坚持40年 ，就 相当于一个人全年无休工作10年 。有了这些不被打扰的时间 ，我可以高效地做下面这些事情。
一、规划 。利用10分钟左右的时间 ，罗列全天的工作 ，对它们进行排序 ，这样可以让自己保持头脑清晰 ，对全天的时间产 生一种掌控感 ，保证自己的工作不会走弯路。
二、跑步 。我个人习惯起床后先跑步 ，毕竟此时大脑还没完全苏醒 ，直接进行脑力活动可能不容易迅速进入状态 ，但跑完 步之后再冲个热水澡 ，精神状态就完全不同了 ，身体的每个细胞都被激活了 ，此时再读书写作就会很轻松 。这种精神状态会延 续到上午 ， 当大家正常起床懵懵懂懂地去上班时 ， 自己已经精神抖擞了 。早起跑步可以让自己整个上午都享受身体的轻盈感 ， 冬天会更耐寒 。经过长期的锻炼 ，身型和体质也会得到极大的改善。
另外 ，早起后 ，大部分人还都在睡梦中 ，我就可以独自一人享受晨间的静谧 ，这种感觉非常美妙 ，不会像夜间锻炼那样， 经常遇到熟人而需要不停地打招呼 ，使锻炼效率变得很低。
三、反思 。这是我给自己定的功课 ，每天复盘一些工作、梳理一些思绪 ，或把一些心得感受记录下来 。这么做可以很好地 提升自己。
四、读书或写作 。平时受家庭及工作的影响 ，我很少有大块的时间进行自我提升 ， 因此 ，早起后的这些时间非常宝贵 ，我 的很多文章就是在这个时间段写的。
五、困难的工作 。我有时也会把一些困难的任务放在这个时间段攻克 ，通常效率会很高 。早上上班的时候 ，那种完成了最 困难的工作的心情令我从容和愉悦 ，这样 ，我就可以在很轻松的状态下做些超前或拓展性工作。
以上是我目前主要的收获：清晰的时间安排、强健的体魄、 良好的精神状态、不受干扰的锻炼氛围、专注的学习环境、从 容的工作心态、持续的个人成长等。
除此之外 ，生活中焦虑也减少了很多 。长期的坚持也增强了我的毅力 ，更重要的是 ，到了晚上10点 ，我就想着爬上床了 ， 熬夜的恶习彻底改正 。如果没有养成早起的习惯 ，我肯定还处于那个熬夜成性、无精打采、忙忙碌碌、无所长进的状态 ，不敢 想象5年或10年之后会成什么样子。
早起的一些注意事项
尽管我“轻松”地养成了早起的习惯 ，但毫不避讳地讲 ，过程中也不是完全无痛的 ，我有时也会面临痛苦、挣扎 ，毕竟养成 一个习惯并不容易 。在这里 ，我把自己的一些感悟和心得分享给大家。
一、初期会有一个相对痛苦的适应期 。在经历两周左右的兴奋期之后 ，我开始进入适应期 。因为生活习惯一下子改变 ，身 体还没来得及适应 。其间会出现醒来却不愿意起床 ，或是上午连续打哈欠、精力不足、黑眼圈加重的状况 ，这个过程大约持续 了两个月才慢慢好转 。一旦过了这个适应期 ，早起难度就小了 。当时 ，让我继续坚持的动力是：无须闹钟就能醒来的神奇体验 以及出门散步享受静谧早晨的感觉实在是太好了 ，我宁愿再坚持看看也不愿轻易放弃。
二、循序渐进、难度匹配 。首先 ，在起床时间上不要一步到位 ， 刚开始主要是感受睡眠节点 ， 能不用闹钟醒来就好 ，千万 不要追求过早的起床时间 ，而让自己陷入不适或痛苦的状态 。其次 ，在内容选择上不要一步到位 ，根据实际情况来 ，不需要像 我一样选择去跑步 ，这样可能会给起床带来压力 ，尤其是冬天 。刚开始的两个月里 ，我起床后的活动是散步或快走 ，是纯享
受 ，而且当时正好是不冷不热的秋天 ，后面才慢慢开始学习和跑步 。最后 ，在环境过渡上不要一步到位 ，这主要是指冬天起
床 。如果有条件 ，尽可能保持室内温度适宜 ，醒来后能不费力地从被窝里出来 。冬天 ，去锻炼之前要先在室内做好准备活动 ， 通常我会花20分钟左右的时间热身 ，待身体完全苏醒发热后再出门 ，这样 ， 哪怕温度在零下 ，我也不会觉得寒冷 。难度匹配原 则很重要 ，如果醒来后要直接面对寒冷的环境 ，我们肯定会因为痛苦感太强而放弃。
三、按状态起床 。假如你真的在早上4点就醒了 ，而你从来都没有起过这么早 ，这个时候要不要起床呢？我的建议是：状   态优于时间 。如果你醒来时还是迷迷糊糊的 ，那就再睡一个周期（1.5小时） 。若是感觉神清气爽 ，就可以起床 。不要担心起得 太早上午精力可能不够用这个问题 ，我们的身体有很强的适应能力 ，我们能早早醒来就说明身体已经做好了准备。
四、中午需要午休一次 。如果当天早起 ，到了中午时我们就会产生困意 ，在饭后午睡半小时就可以让我们快速恢复精力， 这样 ，下午依旧可以精神饱满 。午休很重要 ，最好不要省去。
五、不打扰他人 。如果你不是独居 ，最好事先跟家人或室友沟通一下 ，表示不会影响他们休息 ，通常我们都会得到对方的 支持 。如果你准备第二天起来跑步或读书 ，那么 ，在头天晚上就要提前把衣物、书籍、水杯、 电脑之类的东西准备好 ， 当然，

这些东西要放在卧室外 。起床时动作轻一点 ，让人感觉你只是正常起夜。
六、提前准备 。除了晚上提前准备好衣物 ，更重要的是要提前想好起床之后具体要做什么 ， 比如第二天早上要是下雨了
（不能外出跑步）应该怎么调整事项 ，如果晚醒了半个小时又该安排哪些学习内容 ……总之 ，要针对各种可能出现的情况做好 预案 。当脑中有具体清晰的目标、规划和步骤时 ，第二天起床才不会犹豫 ，否则很容易临时改变主意再睡一会儿 。情绪脑追求 舒适的意愿是很强烈的 ，但如果理智脑提前和它沟通好 ，行动的阻力就会小很多。
七、明确遇到哪些情况时可以不早起 。早起要考虑实际情况 。偶尔几次无法早起时不要焦虑或内疚 ， 只要给自己定好原则 就行 ， 比如遇到以下几个场景我就允许自己晚起床：
·生理低谷期；
·前一天晚上参加聚会 ， 睡得太晚；
·第二天需要开长途车或做其他需要消耗大量精力的重要活动； ·环境突然变化 ，不适合早起活动 ……
以上是我通过4年的早起实践获得的一些体悟 ，希望能给大家一些启发 ，让你的早起之旅变得更加科学和轻松 。当然 ， 由 于每个人的生活环境不同 ，个人的毅力、认知程度、体质都不一样 ，是否适合早起 ，还得根据实际情况来尝试和决定。
我想 ，你只要真的受到了触动 ，就会行动 。当初我看到《4点起床：最养生和高效的时间管理》 中的一句话：成功人士一   旦发现别人的好习惯 ，就会立刻将这个习惯变成自己的 。我就是被这句话打动后开始行动的 ，现在将它转送给你 ，或许它也会 成为你开始早起的催化剂。

[[冥想]]</tw-passagedata><tw-passagedata pid="70" name="冥想" tags="" position="2325,2750" size="100,100">第二节   冥想： 终有一天， 你要解锁这条隐藏赛道
这是一件一开始我不相信 ， 明白后却无论如何都要坚持做的事——冥想。
我知道你看到这个词之后心里在想什么 ，我当初就是这样 ，觉得惊诧、不可思议 ，毕竟在大多数人的观念中 ， 冥想、打坐、禅修等似乎都是那些与世无争的人做的事 。但我建议你认真对待一下这件事 ， 因为它会扎扎实实地影响你的生存质量与竞 争力。
稍微了解一下 ，你便会知道很多顶尖人物都在运用这一工具 ， 比如比尔·盖茨、尤瓦尔·赫拉利 ，等等 ，可以说 ， 冥想就是 一条隐藏的成长快车道。
知道秘密的人都悄悄地解锁了这条隐藏赛道 ，让自己在某些方面遥遥领先 ，所以你若想更好地崛起 ，不妨随我一同探视这 项活动背后的秘密 ，拾取这把解锁的钥匙。
不可不知的“七个小球”
普通人和聪明人最大的能力差异是什么？是长时间保持极度专注的能力 。正如《暗时间》 一书的作者刘未鹏所说： 能够迅 速进入专注状态 ， 以及能够长期保持专注状态 ，是高效学习的两个最重要的习惯。
在成绩不好的人眼里 ，成绩好的人全身心投入时的专注力是很强大的 ，普通人只能感慨自己没有这种能力 ，哀叹自己总是 分心走神 ，甚至怀疑自己的脑回路和那些聪明人的不一样。
事实并非如此 。我们同为人类 ，基本配置都差不多 ，没有谁的大脑更加特殊 ，但是人们在大脑的使用上确实有差异 ，这个 差异就是使用“工作记忆”的能力 。人类的大脑看起来很厉害 ，但意识所能处理的信息数量并不多 ，平均为7±2个 ，有的人多
些 ，有的人少些 ，但都在7个左右浮动。
如果你是第一次听说这个知识 ，可能会怀疑我是在胡说八道 ，不过我不需要阐述科学原理也能让你信服 。不信的话 ，你可 以尝试记住一些完全不相干的数字或不熟悉的物品的名称 。在短期内 ，你 的工作记忆通常你只能记住7个左右 ， 多了就记不住了 。同样 ，在   生活中我们通常也只能同时记住六七件事；在工作记忆饱和的情况下如果又接收到一个新的信息 ，那你只能移除一个旧的信
息 。这就是为什么你明明想着去晾洗衣机里的衣服 ，但接到快递员的电话后 ，转眼就把晾衣服这件事给忘了 ， 因为它已经从中移除了 。为了方便表述 ，我就以7为基准 ，就像一周有7天一样 ，我们可以想象自己的脑子里有7个小球 ，它们代   表我们的脑力资源。
不难想象 ，成绩好的人的真正优势在于 ，他们能够长时间让“7个小球”同时关注一件事情 ， 以保证高质高效的学习 ，而在成 绩不好的人脑中 ，很可能一个球在播放背景音乐 ，一个球在想晚上吃什么 ，一个球在担心即将到来的考试 ……真正用于学习的  小球或许只有三四个 。而且 ，不学习的小球还可能干扰或压制正在学习的小球 ，这就可能造成7-3&lt;4的效果 ，而成绩好的人的    小球在集中配合的情况下 ，可能产生4+3﹥7的效果 。你可以想想 ， 日积月累 ，这种脑力差异会使人产生什么样的差距。
所以 ，人和人之间的能力竞争 ，说到底就是脑力资源利用率的竞争 ，你能多开发一个小球的脑力 ，就多一点竞争力 。好在 这种差异并非不可逾越 ，大脑的7个小球是可以被训练的 ，借助恰当的方式可以让它们目标一致 ，共同协作 。这种理想的训练   方式就是冥想。
在冥想过程中 ，我们仅需把注意力全部集中到呼吸上 ，也就是说 ，让7个小球同时做一件事 ，如果其中某个小球“走神”了 ， 把它柔和地拉回来即可 。坚持这种练习 ，你就能养成专注的习惯 ，将专注变成无意识的行为 ，在不冥想时也能自动抑制思维离  散 ，控制涣散的精神 。换句话说 ，“7个小球”都能在需要的时候为你所用 。现在 ，你终于知道这个看起来什么都没做、与学习毫

无关联的活动 ，是如何使一个人变聪明了吧？
科学研究表明 ，通过这种集中注意力的冥想练习 ，人大脑皮层表面积增大 ，大脑灰质变厚 ，这意味着这种练习可以从物理 上让我们变得更加聪明 ， 因为一个人大脑皮层表面积和大脑灰质厚度是影响人聪明程度的因素。
我们平时学习各种技能 ， 比如钢琴、游泳、体操等 ，都会提高相关脑区的神经元密度 ，促进脑细胞之间的信号沟通 ，但是 这些练习一旦停止 ，神经元就会开始减少 ，而冥想带来的改变是持久的。
闭眼静坐 ，专注于自己的呼吸 ，每天持续15分钟以上 ……你会感受到它的效果 。当然 ，把它看成一种健脑操（事实上它就 是） ，就像我们通过举哑铃锻炼自己的手臂肌肉一样 ，你就能更好地理解了 。只是这种锻炼并不像肌肉锻炼那样直观 ，所以很 多人并不相信 ，也不愿意去做 。但了解了这部分内容后 ，你现在还需要更多理由吗？仅仅知道冥想能让人变得更聪明 ，你就可 以试试看了。
保持情绪平和 ，不过如此
我很想知道这“7个小球”在你的想象中呈现什么形态 。在我的理解中 ，这些小球大部分都非常“轻”。一个不切实际的幻想、 一个电视剧中的场景、一件要做的事情 ，都可能让人的思绪瞬间脱离现实 ，毕竟 ，想要改变现实世界很难 ，但在脑中幻想改
变 ，成本约等于零 。所以人们一旦在现实世界中受困受阻 ，就会不自觉地去虚拟世界体验舒适与自由 ，人类避难趋易的天性也 正好有了出口。
《心流》 一书的序言中有这样一个比方： 一个人从外表看是在静坐 ，但内心却如同瀑布一般 ，无数念头蜂拥而来 ……脑中 就像热锅里的气体一样 ，各个念头之间没有什么束缚和联系 ，各自撒开脚丫欢快地狂奔 ， 内心一片混乱 ，熵值非常高。
这正是人们分心走神、幻想丛生时的真实写照 。我甚至能想象这些小球在大脑这个小“房间”里像乒乓球一样反弹跳动的场 景 。这种混乱让人心浮气躁、缺乏耐心 ，对眼前的事物无法保持专注 ， 只想做更轻松、更有趣的事。
还有些人会因这种习惯 ，每天睡觉前不自觉地开启“胡思乱想”模式 ，杂念丛生 ，无法安然入睡 。他们虽躺在床上 ，脑子里 却像一壶刚烧开的沸水 ， 思绪难以平静 ，彻夜不眠。
当然 ，有些小球很“重”，犹如铁球一样沉在“房间”的某个角落 。这些重量来自巨大的压力 ， 比如经济压力、职业困境、情   感危机、社交恐惧等 ，沉重的情绪如同磐石一般压在大脑中 ，挥之不去 。人们既无法赶走它 ，又不愿去碰它 ，于是不得不让它 长期占据着自己的心智带宽 ，让人无心做事、郁郁寡欢。
一轻一重 ，很多人无法摆脱这两种情绪 ，为此苦恼不堪 。一些人甚至盲目求助各路“心灵导师”，花费不菲 ，最终也没找到  解决问题的办法 。事实上 ，你无须求助任何人 ，也无须花费钱物就能完成自救 。开始冥想 ， 时常练习 ，你就能渐渐走出情绪困 境 ，成为一个凡事心气平和、稳若泰山的人。
对于那些过轻的小球 ，保持专注就能给它们加码 ，让它们稳定下来；对于那些过重的小球 ，你冥想时必须正视它们、接纳 它们 ，否则你无法做到专注 。一旦正视、接纳之后 ，那些隐性的压力也就不那么让你伤神了 ，这也是我一直倡导大家把心中的 困惑写出来的原因 ， 因为只要写出来 ，那些紧张、担忧、畏惧、害怕等情绪就会在清晰的观察下无处遁形 ，小球的重量自然会 减轻 。只要持续练习 ，脑中的小球就能保持最佳质量 ， 既稳定 ，又可控 ，人们就能把注意力和情绪锁定在一个相对理想的状态 下。
可见 ， 冥想并不只是我们想象的那种心灵修炼活动 。当我们用知识去观察它的时候 ，就会发现原来这个看似虚无的技能正 是我们的制胜之道。






[[阅读]]</tw-passagedata><tw-passagedata pid="71" name="阅读" tags="" position="2325,2875" size="100,100">第三节   阅读： 如何让自己真正爱上阅读
人做决定时 ，分两个层次。
第一个是“情绪决定”， 比如看到人家健身、摄影、画画时 ， 自己的肾上腺素开始飙升 ，马上表示自己也想做；
第二个是“理智决定”，理智决定同样表示想要一样东西 ，但表示人必定已经想好了为什么要做、怎样去做以及可能遇到的 困难等问题。
习惯做“情绪决定”的人 ，凡事倾向于半途而废 ，而善于做“理智决定”的人则更容易让想法变成现实。
读书这件事也是如此 。当人们开始厌恶现状 ，期望变得更好时 ，第一件想做的事通常是读书 。很多智者都嗜书如命 ，书本 给了他们不一样的东西 ，所以不管怎样 ， 多读书肯定是好的 。这种仅凭借强烈的愿望做出的决定就是情绪决定。
一想到读书能让人变好 ，人生的希望似乎就在自己眼前 ，于是我们抑制不住地向他人索要书单 ，然后立即去网上或书店疯 狂购书 。我们把书从书架上取下或在网上点下付款按钮的一瞬间 ，那种快感简直无与伦比——似乎只要占有这些书籍 ，这些知 识就变成了自己的 ，但真到翻开书时 ，就兴趣全无了 。深奥的理论、抽象的逻辑、枯燥的案例、黑白的色调 ……阅读体验和想 象中相差十万八千里 ，远不如刷手机来得轻松有趣 。没过几天 ，书就再也翻不动了 ，原先看起来欣喜若狂 ，现在看起来面目可 憎 ，我猜你的书柜里还有不少没有拆封或落满灰的书吧？
另一群人稍好一些 ，他们能坚持阅读 ，并且读得极多、极快 ，一年读上百本书 ，真的是“嗜书如命”，但唯独不能让他们满 意的是读了那么多书却没有任何改变 ，甚至脑子更乱了。
读书这件事虽然好 ，但陷阱不少 ，不是想读就能读的 。很多时候我们都处于“假阅读”状态 ，并且没有意识到这是由低层次

的“情绪决定”引起的 。如果你正好有这类困扰 ，不妨随我一起做个“理智决定”，让自己真正爱上阅读。
换个角度看阅读
未来学家凯文·凯利在谈到“如何快速成为一个行业的高手”时 ，讲过这样的经历 。他的一位朋友想进入一个全新的领域 ，但 没有任何经验 。怎么办呢？这位朋友就跑去参加领域内的各种行业会议 ，会上听专家分享 ，会下抓住机会和专家交流、请教 。 3年的时间 ，他几乎和这个领域内最顶尖的专家都交流了一遍 。通过不停学习、积累 ，他开始慢慢地输出观点 ， 当然 ， 刚开始   的观点多是综合别人的观点得出的 ，后来就逐渐形成了自己的见解 。3年后 ，这位朋友也成了这个领域的专家 ，大家开始付费   邀请他去论坛演讲。
归结起来就是一句话： 想要快速成为一个行业的高手 ，最好的方法就是和行业专家交流 ，直接向他们请教——这大概是最 高级的成长策略了 。但现实是普通人很少有这样的机会和资源。
怎么办？ 阅读。
书籍是传承思想的最好介质 ，顶级的思想都能从书籍中找到 ， 只要选书得当 ，就能以极低的成本找到行业里顶级的思想 。 这些思想通过书籍被清晰无误地记录下来 ，简洁精练 ，甚至还经过了上百年时间的沉淀和检验 ，而你只要花上几十元就可以直 接获得 。从这个角度看 ，读书不再是扫视白纸上黑字的重复动作 ，每读一本书实际上就是在进行一次名人访谈 ，就是在和顶级 的专家交流谈话。
这种交流谈话既不用花费巨额路费 ，也不用考虑时间限制 ，更不用担心对方缺乏耐心 。你随时能接触到顶级的思想 ， 只要 你愿意 。还有比这更舒服的事情吗？可以说读书就是用最低廉的成本获取最高级的成长策略 ，这是所有人提升自己的最好途
径。
除此之外 ，书籍可能是一段生命经历、一种奇妙见闻 ，也可能是一场奇思妙想 。当我们拿起《活出生命的意义》 ，就可以 跟随维克多·弗兰克尔去纳粹集中营感受绝望中的重生； 当我们捧起《三体》 ，就可以进入刘慈欣描绘的宏伟雄壮的星体文明   世界 ……
脚步不能丈量的地方 ，文字可以； 眼睛无法看到的地方 ，文字可以 ，文字还可以带我们穿越时空与千百年前的顶级思想家 交流 。时间和空间都不再成为束缚 ，这可是无法轻易拥有的能量 ，但阅读能够帮助我们获得。
不读书 ， 只能想自己的所见所闻 ，而读书、持续地读书、持续地读好书 ，则相当于和古今中外的顶级思想家处在一个朋友 圈。
留心的话 ，你还会发现几乎所有的书籍都是智者看待事物、做选择、决策的过程 。看多了之后 ，就能借助他们高明的视角 来提升自己的选择能力 ，而我们每个人的命运不就是各种选择的结果吗？所以阅读改变命运 ，就是从改变我们的认知和选择开 始的。
现在再看看你身边的书 ，你还觉得它仅仅是本书而已吗？
阅读 ，让人拥有高密度的思考
远古时代 ，我们的祖先为了更好地生存 ，学会了记住那些危险的场景 ， 以便在需要的时候能快速做出反应 ，否则每次遇到 野兽时还要思考到底危不危险 ，那样他们可能早就被吃掉了 。我们的大脑就是这样运行的： 思考一次 ，记住 ，下次遇到同样的 情况时只要调用原来的记忆就好了 ，不需要重新思考 ， 因为思考这件事对大脑来讲是非常缓慢和耗能的 。大脑很聪明 ， 能巧妙 地化繁为简 ，但后遗症便是 ，我们越来越依赖通过调用记忆或者说是利用习惯来做决策。
人 ，生来追求简单舒适 ，在无觉知的情况下能偷懒就一定不会费力 ，这使绝大多数人天生抵触思考 。然而 ，我们早已从远 古文明进化到了科技文明和信息文明 ，在现代社会 ，人与人之间的根本差异是认知能力上的差异 ，而认知能力极度依赖思考能 力 ，可以说 ， 思考能力是我们立足现代社会的根本竞争力 。所以 ， 目光长远的人都会主动、刻意地磨炼自己 ，尽力提高每天的 思考密度。
比如查理·芒格就说过：“我这辈子遇到的聪明人没有不每天阅读的 ，一个都没有 。”反观我们自身 ， 思考密度其实是很低   的 ：待人接物、安排日程、组织活动、开汽车、用手机 ……绝大多数时候只是调用原有的记忆模块 ，顺着习惯做出反应而已， 真正的思考其实并不多 。那如何才能快速提高每天的思考密度 ，让自己在未来更具竞争力呢？
阅读！
阅读可以让我们的思维能随时与顶级的思想交锋 ，对一个主题进行深度全面的理解 ，并与自己的实际充分关联 ，这种思维 状态在平淡生活中是很少有的 ，但是只要拿起书本就可以马上拥有 。我们每天花费在阅读上的时间越多 ，花在无意义的娱乐活 动上的时间就会越少 ， 思维密度就会越来越大 。通过长年累月的积累 ，坚持高密度思考的人会与习惯低密度思考的人产生巨大 的差距 ，这正是我们现在要仰望智者的原因。
阅读是一个技术活
虽然每个人都能拿起书就读 ，但不意味着读书这件事门槛低 。事实正好相反 ，读书是个技术活 ，如果技术不佳 ，就会陷入 低效的努力 ，所以 ，要想让自己真正爱上阅读 ，最好擦亮眼睛避免走进以下几个误区。
一、读书要先学会选书 。初读者在选书的时候往往喜欢向厉害的人索要书单 ，这样做无可厚非 ，但我认为更好的方式是先

向自己提问：“什么是自己当前最迫切、最需要解决的问题？”毕竟每个人的需求不一样 ，如果读的书不贴合自己的需求 ，那就  很容易陷入为读而读的境地 ，而读书之后若是能立即解决自己最迫切的现实问题 ， 自己就能马上感受到阅读的乐趣与好处 ，这 会激励我们继续读下去 。所以书单可以参考 ，但不要视其为唯一的选择标准。
另外 ，我们还要选那些阅读难度刚好让自己处在舒适区边缘的书 ，具体讲就是读起来有一点点难 ，但又能刚好读懂的书 。 不管别人说一本书有多好 ， 只要你读起来觉得太难 ，也没什么兴趣 ，那最好不要硬着头皮去读 ， 因为它和我们之间肯定还存在 着一些信息缺口 。强行去读 ， 自己会很痛苦 ， 阅读的兴趣也会很容易被消磨掉 ，所以在初读的时候 ，一定要让兴趣、难度、需 求三者尽可能匹配。
如果一本书选得好 ，那在读完它之后 ，通常你会有意愿继续读下去 。另外 ，记得留心你认为好的书里面被作者多次提到的 书 ，这些信息往往都是你继续发现好书的线索。
选书比读书本身更重要 。书籍是精神食粮 ，我们“吃进”的东西会在我们身上表现出来 ，如果不分好坏见书就读 ，可能会“读 出一身病”，这样读书还不如不读 。所以选书的时候一定要警惕 ，肤浅的内容加上商业运作 ，这样的书反而会对你产生不好的   影响 。多关注那些经过时间检验的书籍通常不会错。
二、阅读是为了改变 。很多人以为一本书只要读完 ，读书的过程就结束了 。事实上 ， 阅读只是整个过程的开始 ， 阅读之后 的思考、思考之后的实践比阅读本身更加重要（这里主要指非虚构类书籍） 。很多人的阅读仅停留在表面 ，读的时候觉得这里 好有道理、那里好有道理 ，读完之后就不闻不问了 ，然后迅速转移到下一本书中 ，这种满足于录入的阅读造成的一个直接后果 便是 ，一段时间之后再去翻这本书就好像之前没有看过一样 ，所有的痕迹都烟消云散了 。真正读好一本书 ，往往需要花费数倍 于阅读的时间去思考和实践 ，并输出自己的东西——可能是一篇文章 ，也可能是养成一个习惯——这个过程比阅读本身要费力 得多。
从权重上看 ， 阅读量&lt;思考量&lt;行动量&lt;改变量 。阅读仅仅是最表层的行为 ，最终的目的是通过思考和行动改变自己 。就像  你读了一本关于冥想的书、懂得了冥想的一百个好处和一百种方法 ，但从来不练习 ，远不如你只懂得一种好处和方法但能每天 持续冥想10分钟。
这也回答了另外一个问题 ， 阅读的深度比速度重要 ， 阅读的质量比数量重要 。读得多、读得快并不一定是好事 ，这很可能 是自我陶醉的假象 。如果读书只是完成了文字扫视 ，但并不真正理解 ，那又有什么效率可言呢？如果阅读只是知道了那些道
理 ，而自己并没有发生任何实质改变 ，那又有什么意义呢？所以读书慢不要紧 ， 即使你一个月只能读完一本书 ，但能读通、读 透 ，产生巨大的改变 ，那也比3天读1本书不知要强多少倍。
只要紧紧盯住“改变”这个根本目标 ，很多阅读障碍就会立即消失 。 比如我们根本不用在意自己读后记住多少内容 ， 即使整  本书都记不起来了也没关系 ， 只要有一个点、一句话触动了自己 ，并让自己发生了改变 ，这本书就没有白读 。所以 ，面对海量 的知识 ，你根本不需要焦虑 ，用不了多长时间 ，你就可以气定神闲地看着周围的一切 ，看着有些人极其焦虑地追求速读、刷阅 读量 ， 收集了一大堆和自己实际需求并没有太大关联的知识 。如果你有了那种感觉 ，说明你基本上已经跳出大多数误区了。
三、高阶读书法 。对于阅读来说 ，跳出误区也只是刚好回到平地 ，如果还想继续进阶 ，我想下面这两个建议非常值得你关 注 。第一个是要特别注意自己在阅读时产生的关联 。如果一个知识点让你想起了其他的知识、引发了关联 ，一定要留意 ，并把 它记下来 。知识产生关联说明知识网络正在形成或加固 ，这么做还可能创造新知识 ，这正是学习的核心方法之一 。第二个是读 写不分家 。如果你在阅读后还能把所学知识用自己的语言重新阐释 ，甚至将它们教授给他人 ，那这个知识将在你脑中变得非常 牢固。
阅读是每个人都能获得的平等、希望和机会 ，如果你希望自己变得不同 ，那就请用一生的时间去探索、实践。



[[写作]]</tw-passagedata><tw-passagedata pid="72" name="写作" tags="" position="2325,3000" size="100,100">第四节   写作： 谢谢你， 费曼先生
在没有互联网时 ，普通人想通过写文章获得大量反馈是一件很难的事 ， 即便文章登上报纸、上了杂志 ，也得耐心地等待读 者的回信或电话 。而现在只要鼠标轻轻一点 ，几秒之后就有可能收到读者的留言或点赞 。如果文章写得足够好 ，反馈就会像潮 水一样在短时间内涌来。
每每体验到这种美妙 ，我都要在心里感恩一下这个时代 ，这福利不仅带来及时的反馈 ，而且总会夹带一些惊喜 ， 比如我经 常收到这样的留言。
·这不是费曼技巧吗？
·好像是费曼学习法吧？    ·与费曼学习法异曲同工。
·将费曼技巧使用得出神入化。
说起来真让人不好意思 ，初次看到这些评论时 ，我其实一头雾水 ， 因为那时的我孤陋寡闻 ，并不知道谁是费曼 ，什么是费 曼技巧 。我只好去一通恶补 ，结果发现“费曼先生”和“费曼技巧”在学界原来如此大名鼎鼎 ，而自己的写作竟然能和他挂上钩，
这不禁让我感到一丝骄傲 。同时我也非常好奇：为什么在不知情的情况下 ，我能使用与费曼先生类似的技巧呢？我想要搞清楚 其中的缘由。
费曼先生和费曼技巧

先说说费曼先生吧 ，他是一个很厉害的物理学家 。有多厉害？他获得过诺贝尔物理学奖！这可是科学界目前最高的学术荣 誉 。费曼先生之所以厉害 ， 除了有强烈的好奇心和韧性 ，应该还与他独特的思维习惯有关。
说到这里 ，不得不提到他的父亲麦尔维尔 ，他在教育孩子思考方面很有一套 。 比如有一次他给小费曼读《大英百科全书》 中关于恐龙的知识：“恐龙的身高有25英尺[1]，头有6英尺宽 。”读到这儿 ，他没有继续念下去 ，而是停下来对费曼说：“我们来   看看这句话是什么意思 。也就是说 ，假如那东西站在我们家的前院 ，它那么高 ，足以把头伸进楼上的窗户 。不过呢 ， 由于它的 脑袋比窗户稍微大了些 ，它要是硬把头挤进来 ，就会弄坏窗户 。”这样一解释 ，原本陌生的概念就有了熟悉的事物作为参照
物。
麦尔维尔总是通过自己的语言把知识变成有实际意义的东西 ， 费曼无形中从父亲那儿学会了一个很有力的学习技能：翻 译 ， 即无论学习什么东西 ，都要努力琢磨它们究竟在讲什么 ，它们的实际意义是什么 ，然后用自己的话将其重新讲出来。
另外 ，麦尔维尔还会时常问他类似这样的问题：“假设火星人光临地球 ，而他们从来不睡觉 ，所以当他们问你‘什么是睡
觉’时 ，你该如何回答呢？”这问题看似简单 ，但不容易回答 。不信你试着答答看 ，你会发现 ， 向一个没有任何背景知识的人说 清楚一件事是很难的。
正因为这种有意无意的训练 ， 费曼养成了一种独特的思维习惯 。在从事物理研究的时候 ，他也会要求同事在向他汇报或者 解释一个新事物时 ，必须用最简单的话来讲清楚 。一旦解释过于冗余或者复杂 ，就说明他根本没有理解透彻 。所谓费曼技巧就 是通过自己的语言 ，用最简单的话把一件事情讲清楚 ，最好让外行人也能听懂。
除此之外 ，没有别的了 。大名鼎鼎的费曼技巧难道不是什么复杂精妙的技法？起初我也是这么认为的 ，但在查阅了大量资 料之后 ，得出了这样的结论 。也许这就是大道至简 ， 只是我们习惯了烦琐和复杂。
误打误撞的好运
我没有费曼那么幸运 ，有一个从小给我讲形象故事的老爸 ，不过我也很幸运 ， 因为我能自己阅读。 2016年11月 ，我读了刘未鹏的《暗时间》 ，书中的一个观点让我至今印象深刻。
你不能自己站在11层 ，然后假设你的读者站在第10层 ，指望着只要告诉他第11层有哪些内容就让他明白 。你的读者站在第 一层 ，你必须知道你脚下踩着的另外10层到底是怎么构造的 。这就迫使你对所掌握的 ，或之前认为正确的那些东西做彻彻底底 的、深刻的反思 ，你的受众越是不懂 ，你需要反思的就越深刻。
或许刘未鹏当时也不知道什么是费曼技巧 ，但学习这件事 ，探索到最后肯定是殊途同归的 ，所以我误打误撞地遇到了这个 思维好运 ，无意中开始运用起这个简单而又高级的技巧 。因为从那时起 ，我就懵懵懂懂地意识到：要让外行人也能看得懂我写 的东西。
那一年 ，前文提到过的罗振宇的“缝接扣子”学习方法也深深地触动了我 。虽然他也没有提费曼技巧 ，但其底层逻辑也是一 样的：用自己的语言解释新概念。
回头看 ，刘未鹏和罗振宇对写作和阅读心法的描述本身就很契合费曼技巧 ， 因为他们都没有用抽象的概念来解释 ，而是分 别用“11层楼”和“缝扣子”的形象比喻 ，让人一看就懂 ，然后牢牢记住 。而我现在的写作风格 ，也正是因为有这种意识的支撑和   引领才得以塑造 。但客观地说 ，我对这种能力的理解和运用还十分有限：要么说得太多不够简单 ，要么无法完全用自己的话说 清楚。
尽管如此 ，我也体会到了这种力量的强大 。好消息是 ，我现在已经能够把它拎出来主动运用 ，而不再是模模糊糊地误打误 撞了。
用简单的语言
写作 ，仅仅是费曼技巧在一小方面的体现 ，事实上费曼技巧是一个能广泛运用的学习方法 ， 因为它触及了人类接触信息的 根本方式 。如果你了解人类大脑的基本构造 ，就知道我们的大脑里同时住着“理性”和“感性”两个小人 。理性小人很高级 ，但感   性小人更强大 ，所以绝大多数时候 ，我们的行为都由感性主导 ，包括接收信息。
这就不难理解为什么我们每个人都天生喜欢轻松愉快和简单的事情 ， 比如在读书或读文章的时候 ，我们往往更愿意听故事 而不是听道理 。只要想明白了这一点 ，我想任何写作的人都会调整自己的创作方式。
比如先用合适的故事引起对方“感性小人”的兴趣和注意 ，然后把想要表达的道理通过“感性小人”转达给“理性小人”，这是一 个很好的策略 ，两个小人都会很满意。
特别是讲知识、讲道理的书籍 ，最好不要随意堆砌抽象概念 ，让人感觉很高深 ，看得云里雾里的 。如果上来就摆图表、讲 模型、说概念 ，或许“理性小人”没什么意见 ，但“感性小人”早就不耐烦了 ，于是他拉起“理性小人”的手说：“没意思 ，我们走
吧 。”“感性小人”的力气很大 ，所以说教式的写作很难吸引读者 。当然 ，我们也不能成为“标题党”，把人吸引过来之后 ，又没有 什么实质性的内容 ，这样 ，“理性小人”也会不满意。
比如采用像聊天一样的方式写作就会让文章显得很自然 。很多初学写作的人都过于把写作当成一回事 ，写着写着就开始说 教了 ，实际上 ，若是你把写作当成是与一位老朋友聊天 ，过程就会变得不一样了 。你想啊 ，聊天是一件多轻松的事情啊 ，也是 每个人都愿意做的事情 。你在聊天的过程中必然不能显得太严肃 ，不能太高高在上 ，也不能只顾着讲自己 ，你肯定得观察对方 的感受 ，所以好的写作就是聊天 ，好的聊天也是写作。

说来说去 ， 能用简单的语言就不要用复杂的 ，这就是费曼技巧的核心之一 。不过 ，简单不仅仅意味着轻松 ，还意味着简洁 和形象。
比如我自认为对“刻意练习”这个概念颇有研究 ，经常用“信息缺口”“舒适区边缘”等概念指导别人读书 ，有时候还用“跳一跳 就能够得着”的比喻来说明 ，还觉得这已经很了不起了 。而文学大家木心先生在谈及读书时是这样说的：“开始读书 ，要浅 。浅 到刚开始就可以居高临下 。”这令我醍醐灌顶 。没有抽象的概念和名词 ，寥寥数语、浅显易懂 ，却道尽了“刻意练习”的精髓。
又一次 ，读者“晴天”问我： 前额皮质、元认知、理智脑这三个概念是什么关系？我突发灵感 ，想到了一个类比： 前额皮质 就是理智脑和元认知的“肉身”。这次算我扳回一局 ， 因为想到一个合适的类比是一件非常难得和宝贵的事。
我们大多数人都低估了类比（比喻） 的作用 ，认为它只是文学中的一种修辞 ，事实上 ，它是我们的思维方式 ，更是我们的 认知工具 。认知语言学科的创始人乔治·莱考夫曾这样定义和评价“类比”。 以一种事物认知另一种事物 ，恰恰是学习的本质！ 因 为人类只能通过已知事物来解释未知事物 ，我们很难凭空去理解一个自己从未见过的东西 。而类比 ，正是连接未知事物与已知 事物的桥梁。
如果你能在写作中运用合适的类比 ，就能简化大量的概念 ， 以一种非常神奇的方式让人接受和理解 。就像前文提到的“11   层楼”“缝扣子”“头脑中的两个小人”……这些类比不用耗费什么脑力 ，就能让你轻松理解一些复杂的原理 。难怪李笑来在写作时 始终坚持这样一条：大量使用类比 ， 除了类比和排比 ，尽量不使用任何修辞 ……如果你时常践行这一原则 ，就会慢慢发现 ， 自 己不仅写得更好了 ，也学得更好了。
用自己的语言
费曼技巧的另一个核心就是“用自己的语言表达”，这一点比“用简单的语言表达”更为关键和奇妙 。因为只有当我们使用自   己的语言去解释所学时 ，才会真正调动自己原有的知识 ，才能将松散的信息编织成紧密的体系和网络 ，甚至创造新的认知 。换 言之 ，用自己的语言重新表达就是在调动自己的千军万马。
遗憾的是 ，很多写作者并不重视这一点 ， 以致长期停留在“知识陈述”层面 ，无法达到“知识转换”层面 。 比如一些人读完一   本书之后 ，把全书的框架和观点罗列一番就认为完成写作输出了 ，这其实远远不够 ，顶多算是把别人的知识挪了个地方——你 只是多了些“军马”，但并不能调动它们 ，这是无用的。
好的写作肯定要用自己的语言将所学之物重新解释 。尽管这样做比较难 ，尽管一开始肯定做得不好 ，但它必定能让你迈进 深度学习的殿堂 ，飞速进步。
我们再回顾一下前面提到的王云五先生自学英语的方法 。从中可见 ，用自己的语言表达或重新解释的方法就是深度学习， 对深度写作来说 ，这也是一种利器。
肯定会有人提出这样的疑问：很多观点早就被前人写过了 ， 自己再写一遍也无法超越他们 ，这样做还有什么意义呢？关于 这个问题 ，《刻意学习》 一书的作者Scalers曾这样回答。
你自己想明白的 ，是从你的体系中萌芽生长出来的；而从书上看到的 ，非常容易停留在做个笔记画个线 ，涂个手绘画个 圈 ， 自以为懂了的层面 。不要害怕书上早就写了 ，我们每个人都可以在这个世界上 ，刻画出一条与众不同的轨迹。
所以 ，一个人想要真正成长 ，一定要学会写作 ， 因为“只读不写”的学习是不完整的 ，是低效的 。而写作时如果不学会用自 己的语言转述 ，则是无用的。
正因为如此 ，我们最终都应该成为一位教授者 。这不是为了获取讲师的身份 ，而是为了自己能够学得更好 ， 因为“教”才是 最好的“学”。教授他人会逼迫我们通过自己的语言 ，用最简单的话把一件事情讲清楚 ，甚至让外行人也能听得懂 ，而写作的优 势就在于它可以让我们在磨炼这项技能的路上不断调整、反复修改 ，直至自己满意。
谢谢你 ， 费曼先生
某天 ，我的连襟陈平先生邀请我去看他新装修的别墅 。走进别墅的那一瞬间 ，我突然意识到写作和房屋装修其实是一回
事 ：房子的结构就像我们的思想 ，而房子的装修就像我们的表达 。用简单的语言表达 ，可以让人舒适；用自己的语言表达 ，可 以体现个性 。当人们走进舒适而个性的房子时 ，就愿意待在里面 ，进而去关注它那合理巧妙的结构布局 ，否则 ，一间屋子就算 结构再合理 ，走进去却是毛坯 ，估计没多少人愿意待在里面。
我好像又找到了一个不错的类比 ，但是和费曼先生相比肯定还有很大差距 。如果你有兴趣 ，记得去读一读《别逗了 ， 费曼 先生》 一书 ，你会了解一个别样的费曼： 智慧、率真、热烈、不羁 ，一半是天才学者 ，一半是滑稽演员 。他总是能在别人意想 不到的地方打破众人的期待 ，让人捧腹 ，让人动容 ，我坚信 ，那样的生命值得被了解。
非常庆幸自己与他产生了交集 ，也庆幸他留下了这个充满智慧的概念——费曼技巧。 所以借此机会 ，我想说一声：谢谢你 ， 费曼先生！



[[运动]]</tw-passagedata><tw-passagedata pid="73" name="运动" tags="" position="2325,3125" size="100,100">第五节   运动： 灵魂想要走得远， 身体必须在路上
“四肢发达 ，头脑简单 。”这话不知道坑了多少人。
起初 ，这句话还是有道理的 。古时候人们生活和学习条件有限 ，体力劳动者为了生计 ，必须长时间参与劳动生产 ，难有更

多时间和财力去学习知识 ， 因此文化程度普遍较低 。而读书人为了考取功名 ，也只能在室内埋头苦读 ，体力锻炼相对较少 ， 因 而显得弱不禁风。
或许是人们观察到了这种客观现象 ， 自然而然就有了“四肢发达 ，头脑简单”的描述 ，又或是读书人为了维护群体尊严 ，也  倾向于宣传这类观点 。一来暗示体力劳动者虽然身体强壮 ，但没什么了不起的 ，二来暗示读书人弱不禁风并不可耻 ，有头脑比 什么都强。
然而语言会反过来影响思维 ，这句描述现象（What）的话 ，可能被不明就里的人理解为原因（Why）， 比如身体好的人会 想： 也许自己天生不是读书的料；而学习好的人会想： 不锻炼也无所谓 ， 四肢发达 ，头脑也许会变笨 。似乎体力和脑力之和是 一个固定值 ，一方面占比多了 ，另一方面就自然会少 。然而事实果真如此吗？拨开迷雾之后 ，真相或许会让你大吃一惊。
好的事物往往是“正相关”的
英国科学家弗朗西斯·高尔顿发明了统计学上的一个重要概念：相关性 。他发现 ，如果一个人的智力水平高 ，那这个人的   其他方面往往也不错 ， 比如自律能力、经济水平 ，包括身体条件都更好 ，也就是说 ，好的事物往往是正相关的 。那能不能由此 推导出： 身体好和头脑好也是正相关的呢？我认为答案是肯定的。
因为运动能够调节人体的各种激素 ，使人达到最佳状态 ，使身体这个内部生态系统充满能量和活力 。时常运动的人 ，体内 生态系统犹如一汪清泉 ，而久坐不动的人 ，体内生态系统则更像是一潭死水 。长此以往 ，一些不愿意运动的人则更容易滋生焦 虑、抑郁、消沉、低落等各种不良情绪 ，并且压力产生的毒素会破坏大脑中几十亿个神经细胞之间的连接 ，逐渐使大脑的部分 区域萎缩 ，这表明 ，一个长期缺乏运动的人可能会变“笨”。
而另一个让人觉得不可思议的好消息是：运动能够使大脑长出更多的新的神经元 ，这意味着运动可以在物理上让人变得
更“聪明”。要知道我们每个人在遗传父母的基因时 ，大脑起始水平必然有差异 ， 比如在相同的脑区 ，有的人神经细胞多 ，有的  人神经细胞少 ， 因此 ，不同的孩子在语言、图形、音律等方面体现出明显的天赋差异 。但凭借后天的学习和发育 ，这些生理差 异逐渐缩小 ，人与人之间的角力都集中在努力程度上 。然而脑科学的发现却提示我们运动能够启动“神经新生”， 同时由于注意  力、意识和运动脑区之间有大量重叠 ，所以运动也可以直接从物理上提升我们的专注力、 自控力和思维能力 ，等等。
由此可以做出如下推演：运动不仅能使人身材更好、精神更佳 ， 同时能增强大脑功能 ，提升注意力、记忆力、理解力、 自 制力 ，从而增强学习效果 ，让人创造更大的成就 ，获取更多资源。
运动 ，正是人生幸福正相关因素的出发点。
好的模式是“运动+学习”
即使得出上述结论 ，我们依旧无法打消这样的疑虑：为什么很多人积极投身运动 ，却并没有体现出正相关的趋势呢？这个 问题很值得探究 ，好在背后原因确实有据可依。
一个不可忽略的信息是：科学研究虽然证实运动能使大脑生长出新的神经元 ，但这些神经元需要经过发育 ，长出神经轴突 和树突 ，才能形成真正的神经细胞 。简单地说 ，新生的神经元就像一棵树 ，它需要长出树枝和树叶才能活下去（见图8-1）。

图8-1   新生的神经元是空白的干细胞
所以运动不是关键 ，运动之后的活动安排及环境刺激才是关键 。有效的模式是这样的：在运动后的1~2小时内进行高强

度、高难度的脑力活动 ， 比如阅读、解题、背记、写作、编程 ，等等 ，或是一些需要复杂技巧的体力活动 ，诸如舞蹈、钢琴， 以及参加不同于以往的社交活动 ，如接触新的环境、人物或事物 ，这么做可以让新的神经元受到刺激 ，不断生长 。换句话说， 运动之后 ，脑子需要充分接受考验或挑战 ，才能让自己不断地变“聪明”。
并且 ，“运动+学习”的模式需要坚持 ， 因为新的神经元从生长到成熟通常需要28天 。这对脑力劳动者绝对是个好消息 ，如 果长期坚持“运动+学习”模式 ，脑子会不知不觉地变得越来越灵活 。大脑神经的连接越来越多 ，信号通路越来越宽 ，反应速度 越来越快 ，人学习起来就更容易 ，就像一台计算机的运行内存在不断扩容 ，硬件条件变得越来越强。
在校学生更是如此 。因为脑力活动原本就是他们的“主业”，如果辅以“运动+学习”的模式 ，把复杂的学习内容放在运动之
后 ，便能有效提升学习效果 ，那些注重体育活动的学校 ，学生的综合素质往往不差 。如果你家里有孩子 ，记得不要让他成天闷 在房间里读书 ， 时常将孩子“赶”出去跑跑跳跳再学习 ，是非常有益的。
所以绝大多数运动者的硬伤就在这里：运动之后缺乏主动学习的意识和习惯 。他们习惯于在运动后看电视、刷手机、玩游 戏、逛街、聚会、和朋友们闲聊 ，甚至直接睡觉 ，做那些无须动脑或让自己感到很舒服的事 。真的很遗憾 ，那些好不容易生长 出来的神经元随即消散 ，他们因此错失了变“聪明”的机会。
如何正确地运动
听到这个好消息 ，说不定你已经迫不及待地想去准备跑鞋了 ，但别着急 ，先了解一下如何科学地运动或许对你更有帮助。 有效的运动不是高强度地“折磨”自己 ，也不是在室外闲庭信步 ，而是保持适当的心率 。就减肥瘦身的有氧运动而言 ，专业的建 议是心率保持在60%~80%之间 ， 刚好处于身体的舒适区边缘 ，每天活动半小时 ，就能产生极好的效果。
如果觉得麻烦 ，有一个简单的方法：让自己保持做有氧运动时有些气喘的状态 。 比如跑步时 ，保持足够快的速度直到有些 气喘 ，持续1~2分钟 ，然后改为快走 ，调整呼吸 ，重复即可 ，这个活动量几乎每个人都可以达到。
提到运动 ，我猜绝大多数人都会选择跑步 ，但想要获得更好的效果 ，最好结合复杂运动 。 比如在10分钟的有氧热身之后练 习瑜伽、舞蹈、体操、太极 ，等等 ，这些复杂的活动能让大脑的全部神经细胞参与其中 。活动越复杂 ，神经突触的联系也就越 复杂 ， 突触生长也更密集 ，所以好的运动方式一定同时包含有氧运动和复杂运动（见图8-2）。

图8-2   复杂运动促使神经细胞的连接更紧密
四肢发达 ，头脑更发达
200万年前 ，人类一直过着“狩猎采集”的生活 ，我们的祖先为了果腹 ，平均每天必须行走8~16公里 。到最近的1万年前 ，人 类进入农耕文明 ，直至最近的一百年 ，人类才进入物质丰富时代 ，不再需要为寻找食物耗费那么多能量。
在人们的观念中 ，运动只是为了让自己拥有更健康的身体和更健美的体型 ，健身房里的宣传画、朋友圈里的运动照 ，都在 宣扬这种观点 。但事实上 ，运动更大的意义不在于健身而在于健脑 ，它不仅能使人更加乐观 ，还能使头脑更加灵活 ，最终使健 康水平和认知水平实现双重提升。
但人们一旦习惯久坐之后就再也不愿意活动了 ，不知不觉进入了生活质量的下行通道——越低落、消沉 ，越不想运动 ，越 不运动越低落、消沉 ，而打破怪圈的最好办法正是去“挥洒汗水”——穿起跑鞋狂奔 ，拿起球拍挥打 ……
好在觉醒的人越来越多 ，人们都开始相互鼓励去学习和运动 ，甚至还流行起了这样的文艺箴言： 身体和灵魂 ，总有一个要 在路上。
语言是会影响思维的 ，“四肢发达 ，头脑简单”这句话应该修改为“四肢发达 ，头脑更发达”才合理 ，而身体和灵魂也并非只   能二选一 ，你不能只学习不运动 ，或只运动不学习 ，也不能随心情交替进行这两项活动 。我相信你现在肯定更倾向于这样的表 述： 灵魂想要走得远 ，身体必须在路上。
认知越清晰 ，行动越坚定。

从现在开始 ，给自己的运动计划赋予一个新的意义吧！
[1] 1英尺≈0.3048米。

[[目录]] </tw-passagedata><tw-passagedata pid="74" name="匹配" tags="" position="1125,2950" size="100,100">第一节   匹配： 舒适区边缘， 适用于万物的方法论
我在前一章描述的深度沉浸其实并非刻意练习的真正核心 ，其真正核心在于难易匹配上。
“匹配”这个关键词很可能被大众忽略了 ，但稍加研究我们就会发现 ， 只要掌握了匹配原则 ，我们就可以掌握一个适用于万物的方法论 。这么说还真不是夸张 ， 因为 匹配原则的适用范围实在太广了。
好的成长是始终游走在“舒适区边缘”
就在我写这部分内容的时候 ，碰巧读者“Amy曹”跟我分享了她的几点体会 ，我一看内容就会心地笑了 ， 因为她的体会正好印证了“匹配”这个关键词 ，所以我们不妨 从她的故事开始。
第一件事说的是跑步 ，她说：“之前我要求自己每天跑步1小时 ，靠意志力 ，我坚持了蛮长一段时间 ，但是最后还是中断了 。最近我调整了跑步的时间 ，改为每次30 分钟 ，最好不要少于一周4次 。调整以后发现 ，我可以不用太靠意志力去做这件事 ，而且会主动想办法坚持 ，并且跑完后会很放松 ，不像之前那样连续跑1小时会很
累 、很难受 。我真的能感觉到现在这种‘主动做’和原先那种‘靠意志力做’完全不一样 。”
第二件事说的是学英语 ，她说：“原来每天学习1小时我会烦躁 ，但现在改为每天学习30分钟 ， 时间一到就不学了 。这样 ，我反而可以坚持每天学 ，不厌倦 。”
最后她总结道：“找一个自己能坚持做下去的方式 ， 比单纯按照标准化的时间和方式做更重要 。以前一直以为多花时间才能学好 、才能达到效果 ，其实那是因为自 己急于求成 ，想要快速见效 ，这样反而不容易坚持 。现在降低了难度和标准 ， 自己的行动力反而能持续增强 ， 虽然达到目标所需的时间可能会变长 ，但是我相信这样  的坚持最终可以产生复利效应 。”
不知道你看了“Amy曹”的故事后有何感想？在我看来 ，她最可贵的地方在于能够主动降低学习的强度和难度 ，使自己处在最佳承受范围 ， 既保留了学习的成就感， 也保证了学习的挑战性。
但是对大多数人来说 ，这种做法是反直觉的 ， 因为我们想要做成一件事的时候 ，通常都会告诉自己要很努力 、很拼 ，会给自己设定一个很高的标准 ，还会经常给 自己“打鸡血”，告诉自己坚持就是胜利 。这是我们默认的思考模式 ， 只是默认的不代表就是科学的 。那么科学的模式是什么呢？
回忆图1-4的内容 ，它告诉我们 ，最佳的学习区域在拉伸区内 、舒适区边缘 ，在这个区域 ，我们既有成就又有挑战 ，进步最快 。事实上 ，它就是难易匹配的意思： 既不要太难 ，也不要太容易 ，难易适中的地带才是学习的心流通道。
“Amy曹”一开始就处在困难区 。 由于想快速看到改变 ，她制订了远超自身水平的学习 、训练计划 ，结果因体验太痛苦而中途放弃 ，这非常像我们常见的激励模式。 很多缺少经历的年轻人都是这样的 ，总想同时实现太多 、太大的目标 ，还希望在很短的时间内实现 ，于是不自觉地把自己推到了困难区内 。他们总是兴冲冲地开始 ，  热火朝天地做上几天 ，然后很快就没劲了——做事情半途而废就是这个原因。
当然 ， 匹配原则不只适用于学习这一领域 ，在我能观察到的任何领域 ，几乎都遵循这个规律。
比如健身 ，我们每次推举受力的时候其实都是肌肉撕裂的过程 ，这种轻微的撕裂会让人产生酸痛感但不会造成伤害 ，经过休息和营养补充 ，肌肉就会开始修复， 修复过后会变得更强壮 ，所以每次教练让我们再坚持一下 ，做到力竭 ，就是在逼迫我们走出肌肉的舒适区到拉伸区。
其他运动也是如此 ， 比如很多人都想通过跑步来减肥 ，但有的人很刻苦 ，上来就猛冲 ， 以为那种痛苦感就是努力的证据 ，其实不然 ，专业教练给出的方法看上去   更像是一种偷懒的做法 。比如教练会建议你先慢跑 ，到稍微气喘的时候就改为快走 ，等气匀了再改为慢跑 ，如此反复 ，运动半个小时 。因为就减肥而言 ，有氧运动前   20分钟消耗的主要是身体里的糖 ，30分钟之后消耗脂肪的比例才会有较大幅度的上升 。所以我们只需每次到舒适区的边缘坚持一下 ，然后回到舒适区停留一下 ，调整   好了再到舒适区边缘 ……如此反复 。在接下来的10~15分钟 ，如果体力允许 ，就尽量快跑 ，或者强度至少比前30分钟再大一点 ， 以便消耗更多的脂肪 ， 因为此时身体已 经适应了一定的强度 ，可以离舒适区边缘再远一些。
再说阅读 。很多人喜欢向能人索要书单 ，认为能人们推荐的书肯定很好 。他们按照书单兴冲冲地买一大堆回家 ，读的时候才发现那些书根本没能人们说的那么
好 ，有些书晦涩 、难懂 、根本读不下去 ，没过几天 ，他们的兴趣就消失了 。这是因为每个人的知识背景不同 ， 同样一本书 ，能人们读起来可能刚好在拉伸区 ，但我们 读起来则在困难区 。所以 ，这个时候 ，不妨先把这本书放一放 ，去看那些自己感兴趣 、又刚好能读懂的书 ，让兴趣 、难度 、需求同时匹配到舒适区边缘 ，这样的书肯 定会让你读得津津有味。
再说说学习 。成绩不好的同学想要奋起直追 ，想到的第一件事往往是努力比拼 ，于是他们也和成绩好的同学一样去做那些比较难的题目 ，结果人家学得挺轻松 ， 自己却学得很痛苦 ，差距越拉越大 。因为学习同样的内容 ，成绩好的同学可能刚好在拉伸区 ，但自己可能在困难区 。此时 ，正确的做法应该是先沉住气 ，主动降低学 习难度。
知道了这个原理以后 ，我们就应该花大量的时间去梳理哪些内容处在自己的拉伸区 ， 即梳理那些“会做但特别容易错或不会做但稍微努力就能懂”的内容 ，然后在这 个区域内努力 。如果你已经为人父母 ，那就应该花大量的时间探寻孩子的拉伸区 ，然后指导他们在舒适区的边缘努力 ，而不是看到孩子考不好就一味冲着他们发脾
气 ，说别人家的孩子如何如何 ，对标优等生 ，给孩子加学习量 、加难度 ，这样做往往会适得其反。
另外 ，很多人说自己学习时经常分心走神 、不够专注 ，其实原因也是一样的 ， 因为他们可能并没有刻意关注自己学习内容的难易程度 、调整学习的快慢节奏 。我    的朋友宋鼎华是一名高级工程师 ，平日里大家都叫他“宋兄”，他的孩子正在读高中 ，学习成绩始终名列前茅 ，可贵的是孩子从来不上课外兴趣班 ，学习之余还有不少玩 游戏的时间 ，是名副其实的“学霸”。在一次聚会中 ，我正好与宋兄临座 ，于是试探地问：“你在孩子的学习上有没有采取什么特别的方法？”没想到他干脆地说：“有
的！”我竖起耳朵继续听 ，他说：“就两条 ，一是像对待考试一样对待家庭作业；二是有问题只找主观原因 。”
我听后有些发懵 ，心想：这就是所谓学霸的秘密吗？尤其是第一条 ，我竟然抓不到要领 。后来才明白 ，“像对待考试一样对待家庭作业”就是让孩子保持合适的学习 节奏 。因为大多数孩子在家里写作业的时候都会因缺少限制而漫不经心 ，一会儿上厕所 ，一会儿喝水 ，遇到不会的就卡在原地发呆或马上求助 ，这种状态看起来像一    直在学习 ，实际上是在舒适区内磨洋工 ，不仅效率低 ，还特别容易出错 。而要求像考试一样 ，他们就必须逼迫自己集中注意力 ，在最短的时间内做最多的题 ，并且还    要做正确 ，于是他们不自觉地把自己推到了舒适区的边缘 。在这种状态下 ，孩子必然会极度专注 ，学习效率和成绩自然会提升。
距离太远的 ，我们都把握不住
面对上述需要努力的事情 ，我们需要游走在舒适区边缘 ，那么 ，面对那些不需要努力 ，甚至是令人享受的事物时 ，我们又该如何呢？ 比如突然有了大量的时间和 金钱 。我想很多人肯定希望时间和金钱越多越好 ，不过我劝你一定要谨慎 ， 因为距离我们太远的事物 ，我们通常无法把握 ，无论它们是令人痛苦的还是令人享受的。
2019年暑假 ，一位年轻的老师在向我提问的时候说：“别人羡慕我有寒暑假 ，但我一点也不喜欢 ， 因为自己根本没有能力掌控这些大量的空余时间 。不仅计划一个 没实现 ，连作息时间也乱作一团 。可以说 ，我对假期简直一点控制力都没有 。”
很多学生也经常给我留言 ，说上了大学之后 ，一下子没有了高三时的那种紧张感 ， 虽然刚开学的时候还算自律 ，但很快就开始变得懒散 ，宅在寝室里打游戏 、刷 抖音 ，无法专心学习 ，尤其是独处 、时间由自己支配的时候 ，总是不自觉地选择最舒适的娱乐活动 。这其实就是自由时间超出了自己的掌控——他们失控了。
千万不要认为没有管束的生活很美好 ，一旦进入完全自由的时间 ， 虽然开始会很舒服 ，但很快 ，我们就会迷失在众多选项中——做这个也行 ，做那个也行 。做选 择是一件极为耗能的事情 ，如果没有与之匹配的清醒和定力 ，绝大多数人最终都会被强大的天性支配 ，去选择娱乐消遣 。在有约束的环境下我们反而效率更高 ，生活 更充实。
至于突然获得巨额财富这种事 ，估计大多数人都很难有这样的运气 ，不过我们可以看看别人的经历 。2002年 ，英国男子卡罗尔中了970万英镑奖金 ，一夜之间从垃 圾工成了超级富翁 ，然后他开始买豪宅 、买名车 、吸毒 、赌博 ，7年后 ，其财富被挥霍一空 ，妻子离他而去 ，他不得不重做苦力 ，靠救济金生活；2006年 ，英国女子温 迪·格雷厄姆中了100万英镑奖金 ，结果奖金在一年内被花光 ，该女子沦为穷光蛋 。据统计 ，在美国 ，每年彩票中奖者的破产率高达75%。以此为戒 ，我们一定要保持清 醒 ，认真审视自己控制欲望的能力 ，不要让悲剧发生。

理想的状态是持续获取与自己当前能力相匹配的财富或自由 。这一点 ，做父母的应该有所启示：我们要关注孩子当前对自由 、财富的掌控程度 ，在适当的时候适 当放权或鼓励 ，这样的父母才是真正明智的 。那些溺爱孩子的父母 ，往往在孩子很小的时候就给他们很大的决策权 ，让他们自己决定吃什么 、玩什么 、做什么 ，但孩 子根本没有相应的掌控能力 ，最后变成了自以为是 、 自私自利的人 ，造成这些后果的原因正是我们缺少对匹配这个概念的认识。
人们常说底层概念 、底层规律 ，那到底什么是底层呢？在我眼中 ，能解释的现象越多 ，这个概念就越底层 。所以你掌握了匹配原则之后 ，就可以自己解释其他事 情了 ， 比如有人问你：“练习写作是日更好还是周更好？”你可以这样回答：“不管采用哪种方式 ，关键是你有没有让自己处在舒适区的边缘进行练习 。如果输出的东西 都是在舒适区随便写写的 ，那写再多也没用 。”这样的回答既能给出开放的答案 ，又能抓住问题的本质。
从这个底层概念中我们可以得到这样一个结论：不管做什么 ，不管当前做得怎么样 ， 只要让自己处在舒适区的边缘持续练习 ，你的舒适区就会不断扩大 ，拉伸区 也就会不断扩展 ，原先的困难区也会慢慢变成拉伸区 ，甚至是舒适区 ，所以成长是必然的。
同时 ，我们也可以肯定：速成是不可能的 。因为能力圈只能一点一点扩大 ，所以只要我们遵循匹配规律 ，不断在舒适区边缘拓展自己 ， 同时愿意和时间做朋友， 那么我们注定可以持续成长 ，重塑自己。
一切为了匹配
刻意练习的四要素看上去各自独立 ，实际上环环相扣 、互连互通 ，而且它们最终都指向匹配。
先说第一个要素“ 目标”，它能帮我们解决行动力中的大问题 。比如 ，我们每次行动遇阻时都会一筹莫展 ，但只要细想就能发现 ，不管你遇到的是什么问题 ，其根源 都是一样的 ，那就是：这个问题太大 、太模糊。
所以 ，你只要拆解目标——把大目标拆分为小目标 ，任务就会立即从困难区转移到拉伸区 ，这样你就愿意行动了 。不信的话 ，你可以细心观察一下 ，几乎所有的 行动达人都是拆解任务的高手。
掌握了这个原理 ，我们就能推导出从舒适区到拉伸区的策略：提炼目标 。在舒适区内行动最大的特点就是不动脑筋地重复 ，这种状态下 ，人们凭习惯和感觉做 事 ，没有特别需要关注的东西 ，所以学习的时候分心走神 ，跑步的时候分心走神 ，睡觉的时候也分心走神 ，这样 ，做什么事都不会有太大的长进。
在拉伸区练习的一大特点就是要有关注点 。关注点越多 、越细致 ，我们的注意力就越集中 ，提升的效果就越明显 ， 因此 ，跳出舒适区的最好办法就是去发现和收 集那些要点 ，也就是每次行动的小目标 。比如练习弹钢琴的时候 ，不是一遍一遍地重复 ，而是只练出错最多的地方； 比如背单词的时候 ，不是一遍一遍地重复 ，而是 看完之后合上书进行自我测试 ，把出错的单词找出来 ，然后不停地重复记这些出错的单词 ，直到全部掌握。
目标清晰了之后 ，“极度专注”也自然能做到了 ，然后通过自我测试 、反思 、错题本这些方式获得反馈 ，这样做能不断优化自己关注的要点和小目标。
学习不只是一味地努力 ，成长也不只需要“打鸡血”、拼意志力 。只要站在舒适区边缘 ，一点一点往外走 ， 同时和时间做朋友 ，你肯定会在不经意间发生蜕变。</tw-passagedata><tw-passagedata pid="75" name="深度" tags="" position="1250,2950" size="100,100">第二节   深度： 深度学习， 人生为数不多的好出路
胡适的英语老师 、出版家王云五先生是这样自学英语写作的：找一篇英文的名家佳作 ，熟读几次以后 ，把它翻译成中文；一星期之后 ，再将中文反过来翻译成英 文 ，翻译期间绝不查阅英语原文；翻译好后再与原文比对 ，找出自己翻译的错误 、失误和不够精良之处。
如此反复练习 ，王云五先生积累了扎实的英文功底 ，为日后从事英语教学和出版事业打下了坚实的基础 。在那个科技 、信息远不如今天发达的年代 ，有限的学习 条件迫使人们静下心来深度学习。
时间拨到数十年之后 ，我们的社会发生了巨变 ，人类进入了前所未有的物质和信息丰富时代 。时至今日 ，恐怕很少有人能像王云五先生这样主动静下心来深度学 习了 ，甚至有很多人认为 ，现今 ，学习已经不必如此费劲 、艰辛 ，人们有太多方式可以让自己轻松地获取知识 ， 比如每天听一本书 、参加名人的线上课 、订阅名家专 栏或参加某某学习社群 ，等等 ，轻松高效 ，干货满满 ， 只要自己持之以恒 ，就肯定能有所成就。
可惜这只是一种错觉 。科技和信息虽然在我们这一代发生了巨大的发展 ，但人类的学习机制并未随之快速变化 ，我们大脑的运作模式几乎和几百年前一样 。更坏 的消息是 ，丰富的信息和多元的方式带来便捷的同时 ，也深深地损耗着人们深度学习的能力 ，并且这种倾向越来越明显。
种种迹象表明 ，快速 、简便 、轻松的方式使人们避难趋易 、急于求成的天性得到了放大 ，理智脑的潜能受到了抑制 ，而深度学习的能力几乎全部依赖高级理智脑 的支撑。
我隐约看到：一小部分知识精英依旧直面核心困难 ，努力地进行深度钻研 ，生产内容；而大多数信息受众始终在享受轻度学习 ，消费内容 。如果我们真的希望在 时代潮流中占据一席之地 ，那就应该尽早抛弃轻松学习的幻想 ，锤炼深度学习能力 ，逆流而上 ，成为稀缺人才 ，否则人生之路势必会越走越窄。
何为深度学习
1946年 ，美国学者埃德加·戴尔提出了“学习金字塔”理论 。之后 ，美国缅因州国家训练实验室也通过实验发布了“学习金字塔”报告 ，报告称：人的学习分为被动学习 和主动学习两个层次（见图5-1）。
被动学习：如听讲 、阅读 、视听 、演示 ，这些活动对学习内容的平均留存率为5%、10%、20%和30%。 主动学习：如通过讨论 、实践 、教授给他人 ，将被动学习的内容留存率提升到50%、75%和90%。


图5-1   学习金字塔
这个模型很好地展示了不同学习深度和层次之间的对比 。反观自身的学习 ，我们同样可以清晰地划分出不同的层次 。如图5-2所示 ， 以阅读为例 ，从浅到深依次 为： 听书 、 自己读书 、 自己读书+摘抄金句 、 自己读书+思维导图/读书笔记 、 自己读书+践行操练 、 自己读书+践行操练+输出教授。

图5-2   阅读金字塔
当前有很多听书产品 ，读书达人用十几分钟解读一本书 ，假设我们一天听一本 ，一年就能听300多本 ，这种便捷新颖 、浓缩干货的学习方式看似轻松高效 ，实则处 于被动学习的最浅层。
好一点的情况是读原书 ，但若是读完从不回顾 、思考 ， 只满足于输入的过程 ，这类学习的知识留存率很低 。几天之后就想不起自己读了什么 。更糟的是 ，这种努 力会让人盲目追求阅读的速度和数量 ，让人产生勤奋的感觉 ，实际上 ，这是低水平的勤奋 ，投入越多损失越大。
还有一类人的数量也不少 。这类人能够自己阅读 ，也做读书笔记或思维导图 ，但遗憾的是 ，他们的读书笔记往往只是把书中的内容梳理罗列了一番 ，看起来更像 是一个大纲 。很多人醉心于此 ，似乎对全书的知识了然于胸 ，殊不知 ， 自己只是做了简单的搬运工作而已 。虽然这种做法在一定程度上属于主动学习 ，但它仅仅是简 单的知识陈述 ，与高级别的知识转换有很大的不同。
更深一层的是 ，读完书能去实践书中的道理 ，哪怕有那么一两点内容让生活发生了改变 ，也是很了不起的 ， 因为从这一刻开始 ，书本中的知识得到了转化。
从知道到做到是一种巨大的进步 ，然而自己知道或做到是一回事 ，让别人知道或做到又是另外一回事 。不信你可以试着将自己知道的东西向别人清晰地陈述 ，你 会发现这并不容易 。明明心里想得挺明白 ，讲的时候就开始语无伦次了 ，如果再让你把知道的东西写下来呢？你可能会觉得根本无从下笔。
请注意 ，遇到这种困难才是深度学习真正的开始！ 因为你必须动用已有的知识去解释新知识 ， 当你能够把新学的知识解释清楚时 ，就意味着把它纳入了自己的知 识体系 ， 同时达到了可以教授他人的水平 ，并可能创造新的知识。
罗振宇曾提到他是这样学习的：“我每天要求自己写够五篇阅读心得 ，不用长篇大论 ，短短几个词就行 。因为真正的学习就像是缝扣子 ，把新知识缝接到原有的知 识结构中 ，每天写五篇阅读心得就是逼迫自己原来的知识结构对新知识做出反应 ，然后把这些反应用文字固化下来 ，缝接的过程就完成了 。”
可见“缝接”是深度学习的关键 ，而大多数人只完成了“获取知识”，却忽略了“缝接知识”这一步 ， 因此 ，他们的学习过程是不完整的 。有些人做了一定的缝接 ，但缝 接得不够深入 ，没有高质量的产出 ，也使学习深度大打折扣。
浅层学习满足输入 ，深度学习注重输出 。从想法到语言再到文字 ， 即将网状的思维变成树状的结构再变成线性的文字 ，相当于把思想从气态变成液态再变成固态 ——那些固态的东西才真正属于自己 。毕竟任何知识都不可避免地会损耗 ，并且这种损耗一直存在 ，如果不想办法把自己学到的东西固定下来 ， 时间一长 ，这些知识 就会烟消云散 ， 留不下多少痕迹。
有了自己的东西 ，便一定要教授出去 ，教授和缝接会相互巩固 ，形成循环 。《暗时间》 的作者刘未鹏说：“教”是最好的“学”，如果一件事情你不能讲清楚 ，十有八 九你还没有完全理解 。当然 ，教的最高境界是用最简洁的话让一个外行人明白你讲的东西。
所以 ，逼迫自己获取高质量的知识以及深度缝接新知识 ，再用自己的语言或文字教授他人 ，是为深度学习之道。 如何深度学习
深度学习有以下3个步骤：
（1）获取高质量的知识；
（2）深度缝接新知识；
（3）输出成果去教授。
这样的学习必然要放弃快学 、多学带来的安全感 ，要耗费更多的时间 ，面临更难的处境 ，甚至还会“备受煎熬”。但请一定相信：正确的行动往往是反天性的 ，让你 觉得舒服和容易的事往往得不到好结果 ，而一开始你认为难受和困难的事才能让你真正产生收获 ，所以我们可以通过以下几个方法逐步改进。
一是尽可能获取并亲自钻研一手知识 。比如 ，我们可以读经典 、读原著 ，甚至读学术论文 。经典的一手知识已经经过时间的沉淀 ，其价值已被证明 ，值得精耕细  读 。我们要放弃那些“几分钟读完 ……”“每天一本 ……”“十堂 ……课”的干货幻想 ， 虽然这些方法也能带来一些启示 ，但终究是支离破碎 、被人咀嚼过的 。亲自钻研虽然 更艰辛 ，但能感受到深度理解产生的真正快感 ，这比吸收浅薄的二手知识不知道要舒服多少倍 。读书这件事最好不要请人代劳 ，从长远看 ，终归是要自己获得挖矿的  能力的。
二是尽可能用自己的话把所学的知识写出来 。每读完一本有价值的好书 ，就用写作的方式把作者的思想用自己的语言重构出来 ，尽力结合自身经历 、学识 、立
场 ，去解释 、去延伸 ，而不是简单地把书本的要点进行罗列 。因为简单的知识陈述无法达到深度缝接的效果 ， 只有做到知识转换才能用旧知识体系对新知识进行深度 缝接 ，所以在重构时 ，我们可以只取最触动自己的观点 ，其他观点可以放弃 ， 即使它们很有道理 。如有机会 ，我们还可以花足够长的时间去打磨一个主题或观点 ， 当 一个你精心打磨的作品打动了别人 ，它产生的影响力将远比每天都写但缺乏深度的思考要大得多 。而且 ，写作具有复利效应 ，我们写的文章随时可能被他人读到 ，这 样也间接达到了讨论交流和教授他人的目的。
三是反思生活 。学习不止读书 ，生活经历同样可以被深度学习 。比如《好好学习》一书的作者成甲就非常注重反思 ，他每天早上大约要花2小时进行复盘反思 ，还 要求自己的员工也这样做 。他在书中花大量笔墨阐述了反思的方法和好处 ，他说：人与人之间的差距不是来自年龄 ，甚至不是来自经验 ，而是来自经验总结 、反思和

升华的能力。
受这个理念的影响 ，我从2017年2月开始坚持每天写复盘反思 ，有时几句话 ，有时上千字 。通过持续反思 ，很多没想明白的事情想清楚了 ，很多模糊的概念变清晰 了 ，很多看似并无关联的事情居然有了底层的联通 。持续反思让我对生活细节的感知能力变得越来越强 ，从生活中获得的东西也越来越多 。这部分内容的立意与构思   也来自平日的反思 。如果让我推荐一个不可或缺的习惯 ，我必推每日反思。
深度学习的好处
深度学习除了能让我们不再浮躁 ，能磨炼理智 ，还能带来诸多好处 ， 比如跨界能力的提升 。古典在《你的生命有什么可能》一书中提到 ，人的能力分为知识 、技 能和才干三个层次：知识是最不具迁移能力的 ，你成为医学博士 ，也照样有可能不会做麻婆豆腐；技能通常由70%的通用技能和30%的专业技能组成 ，迁移性要好一  些 ；而到了才干层面 ，职业之间的界限就完全被打破了。
这就解释了为什么一些人能够轻易地跨界 ， 因为他们通过深度学习已经拥有了某些才干 ，而这些才干在其他领域同样适用 ，所以他们只需要花少量的时间熟悉知 识与技能就玩得转 。但反过来 ，如果你不具备某些才干 ， 当你换到其他行业时 ， 只能重新开始培养底层的知识和技能 ，这就非常吃力了。
深度学习还能让人产生更多灵感 。我们知道爱因斯坦是在去专利局上班的路上 ，看到伯尔尼钟楼时突然冒出了一个假设：“如果公交车以光速移动 ，那么从车上
看 ，钟楼的指针会不会是静止的呢？”这个假设使20世纪最伟大的发现之一——狭义相对论走入人们的视野 。而德国化学家凯库勒是在非常疲劳的情况下做了个梦 ，梦 到一条首尾相咬的蛇 ，这条蛇成了他发现苯分子结构的线索 。人们都惊叹科学家们的直觉和灵感 ，但假设爱因斯坦和凯库勒不具备深度学习的能力 ，他们就不会获得  这些直觉和灵感 。只有在自己的领域探索得足够深入时 ，灵感才可能在潜意识的帮助下显现 。虽然我们不是科学家 ，但深度学习也能让我们更大概率地收获意外的惊  喜。
与此同时 ，深度学习还能让我们看到不同事物之间更多的关联 ，产生洞见 。比如我曾带女儿去看电影《西游记之女儿国》 ，剧中女儿国国王与唐僧经历生死之后   对他说：“我做了一个梦 ， 多年以后 ，你蓄满长发 ，和我一起慢慢变老 ，但是 ，你并不开心 。”我立即感慨道 ，这就是“未来视角”啊 ， 国王用未来视角回望现在 ，然后做 出了理智的决定 ，克制了自己的感情 ，放唐僧西行 。因为一周前我正好写了一篇关于未来视角的文章——《用什么来拯救你的行动力》 ，换作以前 ，我肯定是对此无   感的 。而女儿看到的只是国王好漂亮 ，孙悟空好搞笑 ……
不仅如此 ，如果自己在一些领域的认知积累得足够多 ，那么 ， 即便是面对影视节目 、娱乐八卦或新闻热点等这些分散人们注意力的事物时 ，也同样能调动高级认 知 ，把它们与有益的思考关联起来 ，产生更深刻 、更独特的见解。
据我所知 ，很多严肃的成长者同样喜欢娱乐消遣 ， 比如李笑来就喜欢看电影 。我敢说 ， 当他们身处娱乐环境时 ，依旧是理智脑作主导 ，他们能不自觉地关联认 知 、获得启发 ，而非单纯地满足本能脑和情绪脑的原始需求。
娱乐热点并非没有价值 ，浅层知识也同样具有意义 ，但前提是你需要具备一定的认知深度——深度之下的广度才是有效的。 为浅学习正名
说了这么多深度学习 ，那么我们应该如何对待网络上那些知识专栏 、精品课 、听书等产品呢？彻底拒绝或远离吗？我觉得并不需要 ， 因为深度学习与浅学习其实 并不冲突 ，浅学习也有其价值 ，关键是不要搞反它们的权重关系 。我们可以把浅学习作为了解新信息的入口 ，但不能把成长的需求全部寄托于此 ，更合理的态度
是 ：专注于深度学习 ， 同时对浅学习保持开放。
选择一些值得关注的人 ，和他们保持联结 。他们释放的一些有价值的信息会引领我们走向更广阔的世界 ，但无论如何 ，最终要自己去读 、 自己去想 、 自己去做。 就像这本书 ，如果它触动了你 ，也仅仅是为你开启了一个新的视角 ，最终能否获取深度学习的能力 ， 只能靠你自己行动 ，没有人能够代替。</tw-passagedata><tw-passagedata pid="76" name="休息" tags="" position="1900,2950" size="100,100">第七节   休息： 你没成功， 可能是因为太刻苦了
一位“考研党”发来求救信号。
她说：“自从开始准备考研 ，我就拿出了前所未有的执着和毅力 ，天天只想着学习 ，连吃饭时都要听音频 。前几个月更是天天五六点起床 ，但不知道是不是因为战 线太长 ，我有些疲劳 ，到后面自制力反而不如前几个月 。我有时候累了 ，觉得应该合理放松一下 ，结果瞄了几眼小说就又陷入失控状态 ，什么都不管不顾 ，没心思考  虑任何事情 。等缓过劲儿 ，发现已经过三四天了 ， 白白浪费了时间 ，我又开始自责和焦虑 。更不解的是 ，别的同学看书看累了 ，玩两局游戏就又能投入学习 ，而自己  一放松就像跌入地狱一样 ……”
这个场景很熟悉吧？无论是在校学习 ，还是在职场打拼 ，我们都曾为了能名列前茅而自我打气 、暗下决心 ， 以为只要有超过常人的刻苦 ，就一定能成为老师和老   板心中的骄傲 ，成为同学和同事眼中的榜样 ，于是拿出“头悬梁 、锥刺骨”的精神 ，不闲聊 、不娱乐 、不浪费一点时间 ，哪怕精疲力竭也要强打精神再逼自己多学一点。
但很多情况下 ，英雄式的开头却没有带来英雄式的结尾 。在足足体验了一把痛苦的自虐后 ，我们不仅学习成绩提升不明显 ，甚至连信心都被磨灭了——这么努力 居然还不行 ，大概自己天生不是学习的料吧！
事实上 ，如果你留心观察 ，无论在学校还是在职场 ，总有这种现象：一些人很刻苦 ，很勤奋 ，每天都很忙碌 ，但就是表现平平；而另一些人工作娱乐两不误 ，却 表现优异 ，做任何事都游刃有余 。这其中的原因肯定有很多 ，诸如学识基础 、学习习惯 、内在驱动 ，等等 ，但除此之外 ，刻苦程度这个角度也非常值得我们窥视一
番 ，说不定这里别有洞天。
主动休息的秘密
你肯定记得“刻意练习四要素”：定义明确的目标 、极度的专注 、有效的反馈 、在拉伸区练习。
有效学习的关键是保持极度专注 ，而非一味比拼毅力和耐心 。不过 ，保持专注需要花费精力 ，而我们的精力是有限的 ，就像一桶水 ，有的人总量多些 ，有的人少 些 ，但只要在困难的事情上消耗精力 ，精力桶的水位就会慢慢下降。
问题就出在这里 ，那些持续刻苦 、争分夺秒 、舍不得休息一下的人 ，他们的精力总量势必呈一条持续下降的曲线（见图5-11）。
也就是说 ，他们起初状态很好 、效率也很高 ，但精力一旦消耗到一定程度 ， 比如70%以下的水平时 ，注意力就开始不自觉地涣散 、思维速度放缓 ，如果精力继续消 耗 ，学习效率就会进一步降低 ，很容易出现分心走神的情况。
但这种信号对于刻苦者来说 ，仿佛是在提示自己该让意志力出场了 ，毕竟身边人告诫过自己：学习和成长是要吃苦的 ，所以不能因为有点累就去休息 ，而应该用 意志力让自己坚持下去——这不就是所谓的努力 、刻苦吗？于是他们舍不得浪费一点时间 ，认为在痛苦中前行才是努力的表现 ，越痛苦 、越坚持 ，越刻苦 、越感动 ， 因此 ，他们采取的策略也不可能是停下来休息 ，而是强迫自己更刻苦 、更努力 ，做别人做不到的努力 ， 即使昏昏欲睡 ，也要强打精神。


图5-11   刻苦者的精力变化曲线
刻苦者看似无比勤奋 ，可效果却越来越差 ，过程中感受到的多是痛苦而不是乐趣 ，精力消耗严重 ， 以致一旦放松就完全不想再次投入 ，他们更容易沉溺于舒适的 娱乐活动。
反观那些轻松的学霸 ，他们学习时从不过度消耗自己 ， 只要感到精力不足 ，就停下来主动休息 ，这反而使他们精力桶的水位得到快速回升 。如图5-12所示 ，他们的 精力曲线呈波浪状 ，这种循环能使精力水平一直保持在高位。

图5-12   轻松者的精力变化曲线
如果我们把精力水平高于70%的区域视为高效学习区 ，那么对比二者不难发现 ，轻松者比刻苦者的高效学习区要大得多（见图5-13）。


图5-13   高效学习区对比
这个曲线足以说明“主动休息”的意义和优势 ，优势日积月累 ，一些人领先于另一些人就会成为必然 。而领先的那些人居然还很轻松 ，这对崇尚刻苦的人来说 ，无疑 是个让人惊愕的认知反转。
保持专注的危机
不难发现 ，高效学习的关键在于保持极度专注 ，而不是靠意志力苦苦支撑 ，谁能保持长时间的专注 ，谁就能够在竞争中胜出 。然而专注这个品质在信息时代已日 渐成为稀缺品质。
2018年8月 ，我在公众号上发布了一则关于“学习成长困惑”的在线调查 ，截稿前共收到338份答卷 ， 虽然参与调查的样本还不够丰富 ，但从调查结果中也能看出一些 明显的趋势。
比如得票最高的两个困惑是“经常沉浸在担忧 、幻想 、焦虑的情绪里”（168票）和“总是分心走神 ，无法保持专注”（167票） 。这都是分心的表现 。可见受分心走神 困扰的人不在少数 ，保持极度专注已然成了一种稀缺能力。
虽然李大钊先生早就教导过我们：要学就学个踏实 ，要玩就玩个痛快 。但是在那个年代 ， 由于学习量和信息量都相对较少 ，人们更容易做到学习和玩耍各自专
注 、边界清晰 。如今 ，人们面对大量的信息干扰和巨大的竞争压力 ，在这种情况下 ，大多数人只会本能地告诉自己要更刻苦 、更努力 ，却很少有人能意识到 ，更科学 的模式应该是：极度专注+主动休息 ，如此反复。
毕竟保持专注并不能仅靠意志力约束 ，还要靠主动休息“回血”， 只有精力充沛了 ，我们才能保持专注 ，所以如果你感到自己分心了就放下笔 ，没有睡意了就离开   床 。在生活中 ，最要不得的就是那种明明已经分心走神了 ，却还要强撑内耗 ，倒不如遵循“极度专注+主动休息”的模式 ，让自己先尽力保持短时间的极度专注 ，到有些 累的时候就主动停下来 ，这是更加明智的生活和学习策略。
这种策略也极其符合在拉伸区练习的原则 ， 因为一个人刚好感到有些累时 ，说明他正好处在精力舒适区边缘 ，此时主动休息 、及时回血 ，就能使精力的使用效率 最大化 。那些靠意志力强撑又不够专注的人 ，其实已经将自己置身于精力的困难区 ，所以他们体验到的多是痛苦而非愉悦（见图5-14）。

图5-14   在拉伸区练习 ，专注效率最佳
说到学习的拉伸区 ，不得不提一下 ，控制学习和工作内容的难度也是保证专注的重要方式 ， 因为太容易的内容会让人因无聊而走神 ，太困难的内容会让人因畏惧 而逃避 ，所以选择做那些“跳一跳就能够得着”的学习或工作 ，是最容易进入专注状态的（见图5-15）。


图5-15   将学习难度控制在拉伸区范围内
当然 ，有人会反问：现实生活中哪有这么多“刚好的事情”，难道在面对老师和老板时 ， 自己还能挑三拣四？其实这并不难办：要么重新设定学习内容 ，调整为合适 的难度 ，要么将目标拆解为更具体的小目标 ， 降低工作的难度 ，总之 ，想办法把难度控制在拉伸区范围内就对了 。不管面对多么棘手的任务 ， 只要我们愿意动脑筋，
总能找到主动调整的空间。
意志失控的根源
但为什么一些同学在娱乐之后能立即投入学习 ，且毫不恋战 ，而另一些人一放松意志力就会溃散呢？原因还是精力不足。
精力 ，在某种程度上可以作为意志力的代名词 。精力充沛时 ，人们面对困难会无所畏惧 ，面对诱惑也有更强的抵抗力 ，但当精力不足时 ，我们不仅难以面对困 难 ，甚至对诱惑的抵抗能力也会变弱 ，毕竟克服困难和抵制诱惑都需要消耗意志力。
也难怪 ， 当我们忙了一整天 ，精疲力竭地回到家中 ，第一件事情往往是往沙发上一倒 ，此时除了看看微信 、刷刷抖音 ，用轻松的信息给自己来个精神按摩 ，其他 事都懒得做 ，如果经历了情绪上的波动 ，精力透支的影响可能会持续很久。
所以 ，一个真正的自控高手 ，不是一个只知道冲刺的人 ，而是一个善于主动休息 、保持平衡的人 。这些人无论面对精力的消耗与恢复 ，还是面对情绪的波动与还 原 ，都会刻意保持高位富足的状态 ，避免进入低位稀缺的境地 。越是接近一天的尾声 ，我们就越要注意自己的精力和情绪水平 ，毕竟我们还要抵制一些诱惑 ， 防止自 己不小心滑入深渊呢。
能拯救你的“番茄”
很多人都希望自己有极度专注的能力 ，但说实话 ，这种能力并不是想有就能有的 ，要不然怎么说它是稀缺能力呢？造就专注品质 ，涉及一个人的生活环境 、兴趣 匹配 、 自身动力 、学识背景 、习惯积累等各种因素 。那么 ，缺少这些条件的普通大众又该如何获取极度专注的能力呢？
一个简单又通用的方法正是前文说的主动培养“极度专注+主动休息”的行为模式 。具体的做法就是： 只要开始学习或工作 ，就尽量保持极度专注的状态 ，哪怕保持 专注的时间很短也是有意义的；一旦发现自己开始因为精力不足而分心走神 ，就主动停下来调整片刻。
当然辅助工具也是有的 。在时间管理领域 ，有一个著名的番茄工作法 ，它由意大利人弗朗西斯科·西里洛创立于1992年 ，其核心就是：先极其专注地工作25分钟， 然后休息5分钟 ，如此循环往复 。这种工作法有点类似于高强度间歇性训练。
其实我很早之前就知道这个番茄工作法 ，但一直对它带有偏见：一是认为这种严卡时间的做法太死板 ，我们总不能在做得正起劲的时候主动停下来吧？二是实际 应用中肯定会有各种干扰 ，定时工作的做法不太现实。
然而 ，就在我想通“主动休息”这个原理的瞬间 ，脑海里第一个闪过的念头竟是番茄工作法 ， 因为它符合学霸模式的所有特征：极度专注 、主动休息 、循环往复 。 为了了解这部分内容 ，我特意学习了国内时间管理达人李参博客中介绍的方法 ，还购买了她推荐的专业番茄钟来实践体验 。说实话 ，这个方法和工具真的很棒！
每次开始阅读和写作时 ，我只要按下计时键就不再管时间 ，让自己完全专注地投入其中 ，直至25分钟过去后提示音响起 ， 中途除非有极特殊的事情需要中断 ，否则我 会将其余事情全放到一边 ，等专注时间结束后再处理 。时间一到 ，我会立即合上书本或让双手马上离开键盘 ，然后开始5分钟的休息计时 。在这5分钟里 ，我会做与阅 读或写作无关的事情 ， 比如：看看窗外 、收收衣服 、拆拆包裹 ，等等 ，但刷手机 、玩游戏这些被动使用注意力的事情我不推荐 ， 因为它们仍然是消耗精力的。
通过一段时间的练习 ，我发现自己的学习耐力比原先高了很多 ，工作和学习的效能也有显著的提升 ，关键是到了晚间 ，我也能积极地安排时间 ，很少沉迷于娱乐 信息。
当然 ，25分钟只是一个参考标准 ，我们可以根据自己的思维耐力来设定工作时段 ，有的人可以集中精力半小时 ，而有的人也许只能集中15分钟 ， 只要到达了自己    的疲劳边缘 ，就可以主动停下来 。而且这个“主动停止”的动作一定要坚决 。很多人在一开始的时候 ， 由于精力分散得还不明显 ，就不愿意主动停下来 ，但这往往会得不 偿失 。主动休息犹如主动喝水 ， 当感到很渴的时候再喝水 ，其实已经晚了 ，你想让精力保持高位 ，就要学会主动停下来 ，这甚至可以作为一个关键点。
另外 ，很多人在学习和工作中都不具备不受打扰的理想条件 ，但只要坚持“极度专注+主动休息”的模式 ，效果也会让你满意 。不管你能工作几分钟 ， 只要开始了， 就尽力保持专注 ，把无关的事情都放在一边。
刻苦 ，是一种宏观态度 ，轻松 ，是一种微观智慧 。在学习这件事上 ，普通人的策略往往是“天赋不够 ，刻苦来凑”。好在我们已经知道学习的秘密不完全在于刻苦， 还在于“会玩”，希望你在今后的学习成长中也能玩出水平 ，玩出风格 ，成为他人眼中的学霸。
[1] 此处的目标任务仅为说明“设下限 ，不设上限”的方法 。——编者注
[2] 此处指《认知升级：认知的深度决定你人生的高度》 ， 中国友谊出版社 ，作者刘传 。——编者注
</tw-passagedata><tw-passagedata pid="77" name="关联" tags="" position="1375,2950" size="100,100">第三节   关联： 高手的“暗箱”
如果有人问：“在不付出特别努力的情况下 ，可以快速变聪明吗？”他们通常会得到这样的警告：“莫做白日梦！”然而 ，我还真找到了一个快速变聪明的方法。 张继钢是谁？
你可能不认识他 ，但是他的作品《千手观音》你肯定看过 。2005年 ，21个有听力及语言障碍的演员亮相中央广播电视总台春节联欢晚会 ，呈现了极富视觉冲击力 的舞蹈作品——《千手观音》 ，震惊了世人。
这个创意是导演张继钢1996年在山西云冈石窟 、五台山 、崇善寺大悲殿等地采风时产生的 ，作品前后打磨了7年 。更不为人知的是 ，张继钢还是2008年北京奥运会 开幕式的副导演 ，开幕式表演中的“梦幻五环”就是他的创意。
说到这个创意的诞生 ，还真是神奇有趣 。当时为了达到“见所未见 、闻所未闻”的要求 ，导演组研究了很长时间 ，但总也拿不出一个很好的方案 。北京奥组委为了方 便导演工作 ，给每位导演配了音响 、电视和白板 ， 白板就是那种可以吸磁铁 、反复擦写的记号板 。一次讨论的时候 ，张导说：“把这个擦掉 ，我再给大家谈一个方案。
”结果白板上的痕迹怎么也擦不掉 。张继钢的第一反应是 ，这块白板是个次品 ，于是他赶紧叫人联系奥组委的行政部门 。10分钟后 ，派去询问的人回来说：“导演 ，我们 真够笨的 ，新买的板子的塑料薄膜还没撕掉！”大家哈哈大笑：“原来是这样啊！”然后开始撕薄膜 ，就在这个时候 ，张继钢突然喊道：“别动！”在众人的诧异中 ，他向所 有编导宣布：“奥运五环诞生了！ℽ
于是在奥运会开幕那天 ，全世界的人都看到了这样的画面：29个烟花大脚印向鸟巢“走”来 ， 当最后一个大脚印在鸟巢上空散开时 ，满天的烟花像繁星一样落到地 面 ，地面的LED就向中间汇聚 ，形成了奥运五环图案 。全世界的人都知道图案是在LED上显示的 ，但没有人会想到这个五环图案会被“揭”起来。
这正是大师创作的普遍手法——把远处不起眼的A，关联到近处需解决的B，然后爆发出惊人的力量。
关联 ，正是高手们的秘密 ，但因形式隐蔽 ，常不为人所知 ，故而形成了暗箱 。今天 ，就让我们一起打开这个暗箱 ，把关联这个神秘武器曝光 ，为众人所用 ，助力 更多人成为高手和大师。
无关联 ，不学习
关联是种底层能力 ，它不仅体现在高层 ，也体现在低处 ，与人们的日常生活息息相关。
比如在学习这件事上 ，很多人喜欢遵循这样的模式： 阅读很多书籍和文章 ，不断了解新知识 ，做笔记 、画导图 、点收藏 ，甚至还不时在朋友圈分享；或者时不时 抛出新名词 、新概念 ，让人感觉很厉害 ， 以此宣告自己见多识广 。然而这样的学习效果十分有限 ，不是说不好 ，而是太肤浅。
在《这样读书就够了》一书中 ，赵周提出了读书的三个步骤：
·用自己的语言重述信息 ， 即找到触动自己的信息点； ·描述自己的相关经验 ， 即关联生活中的其他知识；
·我的应用 ， 即转化为行动 ，让自己切实改变。
这既是有效阅读的三个步骤 ，也是深度学习的三个层次：
·知道信息点 ·关联信息点 ·行动和改变
不难看出 ，知道信息点是最浅的层次 ，完整 、深入的学习还包含关联和行动 。然而很多人到了第一层就停止了 ，或是因为心理满足 ，或是因为根本不知道学习有 这三个层次 ，于是常年遨游在知识的海洋中 ，始终无法进阶 ，这其中最根本的阻碍在于他们意识不到新学习的知识点是孤立的 。不管这个新知识让人多警醒 、使人多 震撼 ，若是无法与已有的知识发生足够的关联 ，它存活不了太久。
在前文中我也提到罗振宇“缝扣子”的学习方法 ，可见高手们的学习通常不满足于对新知识的获取 ，更注重对新知识的“缝接”，这个缝接过程就是关联 。孤立的知识 就像沙粒 ， 只有关联才能将其聚沙成塔 ，形成稳固的知识晶体 ，最终构建自己的认知体系（见图5-3）。



图5-3   关联是学习的重要环节
如果你了解人类大脑的学习原理 ，就很容易从这幅图联想到大脑中神经元工作的情景 。因为无论是学习动作 ，还是背记公式 ，从本质上来说都是大脑中神经细胞 建立连接的过程 。用神经科学术语解释就是：通过大量的重复动作 ，大脑中两个或者多个原本并不关联的神经元经过反复刺激产生了强关联 。如果没有关联这个过
程 ，就算有再多脑细胞 ，你也不会变得更聪明。
鉴于此 ，我时常也鼓励人们写作 。因为单纯阅读时 ，人容易满足于获取新知识 ，而一旦开始写作 ，就必须逼迫自己把所学的知识关联起来 ，所以写作就是一条深 度学习的自然路径。
放眼看去 ，按照关联意识的强弱 ，人在不知不觉间被分成了两个群体：绝大多数人习惯以孤立的思维看待事物 ，喜欢花大量时间收集和占有信息；而另一批先行 者则更喜欢拨弄信息之间的关联 ，从而在不知不觉间变得聪明了起来。
事不关己 ，不关联
充分运用关联 ，确实能快速提高人的能力 ，但这并不意味着我们需要随时随地把所见所闻通通关联起来 ，那既不可能 ，也无必要 。天下事物之多 ，如何能关联殆 尽？所以 ，我们在关联时 ， 需要牢牢聚焦自身最迫切的需求 ，换句话说 ，就是让一切与自己有关。
在这方面 ，《生活中的经济学——发现你内心的经济学家》一书的作者泰勒·考文给我们做了一个亮眼的示范 。据说考文读的10本书中往往只有1本是从头到尾读完 的 。有记者目睹了考文读书的过程 ，并进行了报道。
一次 ，考文带着一大摞新书在机场等飞机起飞 ，他一边翻书一边跟记者聊天 ，2小时过去了 ，飞机快起飞了 ，考文也翻得差不多了 。他留下一两本 ，把剩下的书都 丢给了记者 ，说 ：“你要感兴趣你就拿走 ，你要不感兴趣就直接扔了吧 。”
普通人觉得要是不把书读完 ，实在是对不起作者或是自己花出去的钱 ，但经济学家考文却觉得他这样做很划算 。因为只有真正和自己有关的内容才对自己有用， 在这个注意力非常匮乏的时代 ，没有必要把所有的书或是书中所有的内容都读完。
想来也是 ，一本书再好 ，我们也无法记住全部内容 。回头一翻 ，很多内容就像没看过一样 ，但那些被自己关联过的观点和知识却很难被忘记 ，让自己发生改变的 观点必定印象更加深刻 。这也反过来印证了前文：知识的获取不在于多少 ，而在于是否与自己有关联 ， 以及这种关联有多充分 。对别人有用的东西可能与自己并没有 关系 ，那就果断将其放弃 ，把握“与自己有关”的筛选原则 ，会让关联效能大大提升。
当然 ，还有一个更重要的隐蔽条件不能忽视：你需要明确的目标或强烈的需求 。张继钢之所以能将佛像关联为舞蹈 ，把薄膜关联成五环图案 ，是因为他是一个艺 术工作者 ，有强烈的创作需求 。这就好比你手中有了一把锤子 ，其他事物看起来才会更像是钉子 ，能为你所用的东西才会变多 。一个心中迷茫 、漫无目的人 ， 即使置 身各种情景和知识中 ，也看不到有益的关联 ，纵使辛勤努力 ，也终是竹篮打水一场空。
如何获取关联能力
成为大师并不神奇 ， 只要开启了暗箱 ，我们也有机会成为大师 。关联能力能够让人加速演化 ，获取杠杆 。结合上文 ，我们很容易梳理出几条实现路径。
首先 ，手中有锤子 。如果你对某件事情没有足够的热爱和投入 ，没有极致的专注和思考 ，恐怕任何事物对你都没有意义 。张继钢的访谈节目是我10年前看的 ，如 果不是因为现在手中有了写作这把“锤子”，这个故事可能再也不会被我想起。
其次 ，输入足够多 。不管是阅读获取 ，还是现实经历 ，知识和阅历越丰富 ，成功关联的概率就越大 。很难想象空白的头脑和苍白的人生如何建立精彩的关联 。所 谓巧妇难为无米之炊 ，面对满屋子的食材 ，拙妇也能随便弄出点花样来 ，所以 ， 多走走 、多看看 ， 多阅读 、多反思 。人生没有白走的路 ，每一步都算数。
再次 ，保持好奇心 。瓦特好奇壶盖为什么会被热气顶起来 ，牛顿好奇苹果为什么会往地上落 ……这世间最伟大的哲思蕴藏在万事万物中 ，越不起眼的小事越有可 能通过关联产生至深的启发 。不过对于成人来说 ，做到这一点可不容易 ，若不时常净化自己 ，像孩子一样保持纯净 ，怕也只是遇到了任何事都见怪不怪 、视而不见 ， 所以 ，成长这件事不仅仅是提高认知 ，更是一种自我修炼。
最后 ，常说一句话 。总有一些话让人听过一次就难以忘记 ， 比如李笑来的这句话我就一直记在脑中：“这个道理还能用在什么地方？”很多高手都是这样学习的 ， 比 如混沌大学创办人李善友看书的时候 ，每看到一个有用的知识 ，都会停下来寻找联系 ，看看有什么其他的现象能够被这个理论解释 。不找出5个现象他是不会罢休的。
他们都有意无意地坚持着这个思维准则：但凡收获一个感悟 、了解一个观点或是学到一个知识 ， 只要触动了自己 ，就要想办法让它效率最大化 ，而效率最大化的 办法就是主动关联到别处 ，并让自己的行动发生改变 。所以你不妨也把这句话当作口头禅 ， 时常问自己：这个道理还能用在什么地方？
一切在于主动
瓦特关联了壶盖 ，牛顿关联了苹果 ，爱因斯坦关联了钟 ，凯库勒关联了蛇 ，伟大的方法论始终存在 ， 只是被极小部分人运用了 ，若是我们打开了暗箱 ，可不能再 对其熟视无睹 ，全凭运气撞进暗箱啊！
我们很小就学过“关联”这个词 ，也在无数场合听过“关联”这个词 ，但谁能想到它竟是进阶的天梯呢？从今日起 ，请你重新认识它 ，主动运用它 、传递它 ，让它不再 隐藏 、不再模糊 。我相信肯定有人会因为主动使用了它而变得与众不同。
放眼未来 ，我似乎看到一大波有识之士正在知识和技能的进阶之路上不断崛起 ……</tw-passagedata><tw-passagedata pid="78" name="体系" tags="" position="1500,2950" size="100,100">第四节   体系： 建立个人认知体系其实很简单
如何判定一个人是否厉害？
要是一个人拥有的知识体系可以解决自己遇到的各种问题 ，那他必定是个厉害的人。

比如被誉为当代最伟大的投资思想家查理·芒格 ，据说他有数百个思维模型可以应对投资判断中的各种问题；再比如桥水基金的创始人瑞·达利欧 ，他的知识体系中 包含500多条生活和工作的原则 ，最终写成的《原则》一书也有500多页； 当然 ，很多知名高管 、政界翘楚 、图书作者 、超级学霸 ，等等 ，都在此列 。那些知识体系正   是他们的制胜法宝 ，如果我们能借用他们的知识体系 ，是不是也能快速提升呢？
这真是个好思路。
于是 ，学习高手们的知识体系成了时下流行的学习方式：一些人热衷于谈概念 ，张口闭口就是某某模型 ，好像知道了这些就拥有了完整的知识体系；一些人相对    勤奋 ，他们看书 、画思维导图 ，为自己能整理出一个“完美”的结构框架而欣喜不已；一些人博采众长 ，对别人的知识体系如数家珍 ，甚至还能互相整合 ，感觉自己看穿 了一切。
只是美好归美好 ，现实归现实 。折腾了一番之后 ，他们发现自己还是问题重重 ，少有长进 ， 除了知道 ，一切照旧 ，最后只得把原因归结于此：建立知识体系是一 件很难的事情 ，而自己现在的积累还不够 ，等学会更多知识以后再来尝试 ……
事实上 ，建立个人知识体系真的很简单 ，简单到你可能不相信 ，但等我说出来之后 ，你就知道我不是在吹牛 。毕竟这背后不仅有严谨的科学作支撑 ，还有我自己 实践的呈现 。现在 ，让我们一起搓搓期待的小手 ，开启不一样的个人知识体系打造之旅吧。
知识与认知的区别
如果你仔细看过这一节的标题 ，会发现我写的其实不是“知识体系”，而是“认知体系”。“知识”和“认知”在我眼里是不同的 ，这种不同如何表达呢？我想借用万维钢 老师的一段话。
考试得了高分 ，不叫有知识；茶余饭后能高谈阔论 ，这也不叫有知识 。这些场合下 ，知识虽然有用 ，但是这些知识都不太牵扯到具体的得失 ，所以只是智力游    戏 。只有当局势不明朗 、没有人告诉你该怎么办 ，而错误的判断又会导致一些不良的后果时 ，你要是能因为有知识而敢于拿一个主意 ，这才算是真有知识 。请注意， 这不是在说 ，实用的知识才是知识 ，而是在说 ， 只有当知识能够帮助你做实际决策的时候 ，它才是你的知识。
这段解释深深地打动了我 ， 因为它打破了人们对于知识的固有观念 。在很多人（包括我自已） 以前的观念里 ，知识就是书本上的概念 、公式 、原理 、案例 、道
理 ，等等 ，它们都是有体系的 。那个时候 ，我们至少坚信两件事：一是学术上的知识体系是确定的 、通用的 ，是可供所有人学习和参照的；二是学霸或名师必然掌握 了知识体系或知识框架 ，看到了知识的全景 ，所以才能游刃有余 ， 因此参照他们的知识体系就是走捷径 。这两种观点在求学阶段几乎没有什么可反驳的 ， 以致人们形 成了思维惯性 ，在探索个人知识体系的时候 ，也不假思索地延续了这种观念：找一个最权威 、最确定的认知体系去学习和照搬就好了。
如果有这种想法 ，就说明我们把“知识”和“认知”混淆了 ，这直接导致很多人以“寻找最优认知体系并全盘学习”为标准 ，忽略了他人的认知体系与自身实际需求的差 异 ， 因为个人成长的目的已经不是“知道和理解”了 ，而是“判断与选择”。正如万维钢所言 ，真正的知识不是你知道了它 ，而是能运用它帮助自己做出正确的判断和选    择 ，解决实际问题 。这一点正是“学术知识体系”和“个人知识体系”的重要区别。
所以在个人成长领域 ，没有最优 、最确定 、最权威的认知体系 ， 只有最适合我们当前状态的认知体系 。换句话说 ，知识不一定能给我们带来认知能力 ，而认知能  力必然包含有效的知识 。这部分有效的知识是能帮助我们判断 、选择 、行动 、改变和解决实际问题的 ，也是本节要重点阐述的 。为了避免混淆 ，下面我会使用“认知体 系”来指代“知识体系”。
只学让自己触动的
初学者迫切希望拥有自己的认知体系 ，是因为自己手中只有碎片化信息 ，难以整合以应对复杂的情况 。在没有觉知的情况下 ，他们很容易把“学习知识”和“学习认  知”混淆 ，用掌握学术知识的方法去对待别人的认知体系 ，所以不禁沉迷于全面掌握和全盘照搬他人的体系 ，甚至感觉如果没有完全掌握对方的认知体系 ，就有可能前 功尽弃。
有这种想法和担忧的人不少 ，他们有一个共同的特点是：非常在意形式上的完整 。比如很多读者和我探讨读书方法的时候都会说 ， 自己每读完一本书 ，都要系统 地梳理作者的知识框架 ，写读书笔记 ，摘录精华 ，还要画出思维导图 ，似乎只有这样做才意味着自己认真读完了一本书 ，然后他们问我：“你平时用什么思维导图工   具？ℽ
这时我往往不知道怎么回答 ， 因为我读书从来不画思维导图 ，也不会刻意梳理作者的知识框架 。在阅读时 ，我唯一要做的事情就是：寻找触动点 。我会在触动自 己的地方做标记 ，在空白处写下大量能联想到的思考 ，书读完之后 ，我会放上几天 ，然后问自己：“这本书最触动自己的是哪个点？”这个点可以是一个理论 、一个案  例 ，甚至是一句话 ， 只要它真正触动我 ，并能让我发生真实的改变 ，我就认为这本书超值了 ，至于其他 ，忘记就忘记了 ，我一点也不觉得可惜 。而作者的知识体系和 框架 ，又与我何干呢？
很多人得知我的读书方法后都很惊讶 ，觉得这种方法很不靠谱 、很浪费： 明明有完整的体系可以参考 ，偏偏只拾取一块或几块碎片 ，这不是舍近求远吗？难道我 是在骗他们？如果你有这种想法还请少安毋躁 ， 因为这个方法是有科学依据的。
根据能力圈法则可知 ，人的能力是无法跳跃发展的 ， 只能在现有基础上一点一点向外扩展 ，而扩展的最佳区域就在舒适区边缘。
认知也是一种能力 ， 同样遵循这个原理：处于认知圈边缘的知识与我们的实际需求贴合得最紧密 ， 因此也更容易让我们产生触动 ，进而与现有的知识进行关联。 而他人认知体系中的很多知识 ，纵使再有道理 ，如果距离我们的认知或需求太远 ，就相当于处在了学习的困难区（见图5-4）。

图5-4   在认知圈边缘扩展最有效
所以 ， 除非对方的认知体系刚好和自己的认知圈比较匹配 ，否则痴迷于全盘接受 ，学习效果有限 ，还很浪费时间（见图5-5）。


图5-5   全盘照搬往往不合身
想想看 ，你看过的那些书 、做过的那些笔记和思维导图 ，有多少你还记得？大部分都模糊了吧？如果再问自己：这些知识中哪些是平时能真正运用的呢？答案或 许更少。
我们不需要全盘掌握他人的知识体系 ， 只需要掌握那些最能触动自己 、离自己需求最近的知识（见图5-6）。

图5-6   建立认知体系 ，关联各家的“触动碎片” “触动碎片”能够与自身紧密结合 ，慢慢变成自己的一部分 ，最终织出一张属于自己的认知网络。
体系的本质就是用独特的视角将一些零散的 、独立的知识 、概念或观点整合为应对这个世界的方法和技巧 。我们再走近一点观察 ，就会发现每个人的认知体系都 是不同的 ，高手们也是根据自己的关注点 ，不断收集该领域内触动自己的信息 ，然后加工整合 ，形成独特的认知体系 。所以 ，我们也要尝试建立独一无二的认知体
系。
这就是搭建个人认知体系的真相：打碎各家的认知体系 ， 只取其中最触动自己的点或块 ，然后将其拼接成自己的认知网络。
想通了这些 ，我们就能明白 ，为什么读了一些优质书 、报了一些高端课 ， 自己却无法发生想象中的巨变？ 因为那些书的目录 、那些课程的大纲 ， 虽然洋溢着体系 的香味 ，但它们可能与自己的认知和需求贴合得并不紧密 ，学了也用不起来 。明白了这些 ，我们就不会被各类体系所迷惑 ，不会因读完一本书而没有全部记住书中内 容而内疚自责。
随着我们自身认知体系的不断完善 ，原来距离我们较远的知识就会相对变近 ，于是又能触动我们 ，所以暂时放弃一些知识并不可怕 ， 只要持续学习 ，我们不会损 失什么 。从这个角度看 ，我们已经能打破形式 ，从万事万物中学习了——只要学的东西是能触动自己并解决实际问题的 ，不管是读书 、上课 ，还是自我反思或与人交 谈 ，都是贴近自己的成长方式 。这样成长不仅高效 ，而且非常“接地气”，甚至能消除学习的焦虑。
有了触动 ，学习的机会就来了！ 触动是最好的筛选器
我们潜意识的感性能力完全可以作为学习的筛选器——通过情绪触动 ，识别与自身需求结合最紧密的内容 。紧紧地抓住这些内容就可以让自己处在舒适区的边 缘 ，高效学习 、快速提升。
截至目前 ，似乎还没有人归纳过这种方法 ，所以我把它命名为“触动学习法”。通过运用“触动学习法”，我也得到了莫大的好处 ，用它来读书 、反思 、建立个人认知 体系 ，效果非常显著。

我建议每一个想成长的人都去进行每日反思 ， 因为它可以提高自己对生活细节的感知能力 ，不会让日子像流水一样哗哗流过而什么都没留下 。不过 ，和一般的日 志不同 ，每日反思不是记流水账 ，而是留意每天最触动自己的那件事 ，不管是好的启发还是坏的体验 ，都写下来复盘 ，写得越细越好 。一个触动点若是能转化成一个 认知晶体 ，我们的生命质量和密度将远远超过那些不反思的人 。面对生活中信息的滚滚洪流 ，触动真是最好的筛选器 ，它能让我们免受洪流的冲击 ，从容而体面地行 走在人间。
仅仅触动还不够
不是所有的触动都是有效的 。就像你曾经看过很多好文章 ， 当时被触动得一塌糊涂 ，还把它们放进了收藏夹 ，但一段时间之后 ，你就再也记不起来了 。如果让你 在一本书上画出令自己触动的地方 ，纸页上可能会有很多横线 ，但显然这些内容不能全部为你所用 。触动了却用不了 ，这就好像在医药箱里备了创可贴 ，可真到划破 手指的时候却又想不起来用 ，这和没触动又有什么区别呢？
确实没区别 ， 因为它们只是“伪触动”。我们看看图5-7就明白其中的缘由了。

图5-7   产生“触动”不意味着“连接”紧密
当一个新知识靠近我们认知圈边缘的时候 ，触动产生了 ，但触动产生并不意味着连接紧密 。如果不及时强化 ，新的触动点很可能停留一段时间之后就又“飞走了”。 为了留住它 ，让它成为自己体系的一部分 ，就得想办法和它发生关系 ，产生连接 。这种连接越多越好 ，但主要表现在以下三个方面（见图5-8）。

图5-8   有效关联新知识的三个方面
一是用自己的语言重新解释新知识 ，这会促使自己原有的知识体系对新知识做出反应 。如果能用自己的语言把一个知识 、一个道理 、一件事情说清楚 ，让外行人 也能听懂 ，那么这些知识 、道理 、事情十有八九会成为自己的一部分 。经常输出的人往往成长得很快 ， 因为他们总是不断在新旧知识之间建立连接。
二是在需要的时候能够顺利提取知识 ，提取不出来的知识就是伪触动 。比如我经常听罗振宇的60秒语音分享 ，但我在写作时 ，能从那些60秒语音分享中提取出来 的观点只占少数 ，大多数观点都被我忘了 。偶尔回头再看那些观点 ，我会感叹：这些知识很有道理啊 ，但我怎么就一点印象都没有了呢？像这种当时很受触动 ，但需 要用的时候完全想不起来的知识 ，就是“伪触动”。说明它们离我们的真实需求很远 ，所以放弃也罢。
如果你在读书 、写作 、交谈的时候想到了一个观点 ，哪怕你记不清具体的内容 ， 只有一条微弱的线索 ，你也要极端重视这些内容 ， 因为那些能在需要的时候被提 取的知识 ，是与你真正产生触动的知识 ，你们之间宝贵的连接还在 ，所以要想办法主动关联和强化。
很多人读书的时候往往只关注自己是否理解了书中的内容 ，却经常忽视头脑中冒出的想法 。其实这些想法是非常珍贵的 ，放过了它们 ，我们的学习效果就会大打 折扣。
三是在生活中能够经常练习或使用这些知识 ， 因为实践是产生强关联的终极方法 。学习不是为了知道 ，而是为了发生真实的改变 。当你运用那些知识践行那些道 理时 ，相关细节就会源源不断地显现在你的视野里 。到那时 ，你不仅能成为认知上的强者 ，也会成为行动上的巨人。
最终 ，你会明白 ，所谓的学习成长 ，诸如阅读 、写作 、反思 、培养习惯 、练习技能 、建立认知体系 ，等等 ，本质上都是一回事：在舒适区边缘 ，一点一点向外扩展。
想通了这一点后 ，一切就都简单了！</tw-passagedata><tw-passagedata pid="79" name="打卡" tags="" position="1625,2950" size="100,100">第五节   打卡： 莫迷恋打卡， 打卡打不出未来
时下 ，学习成长蔚然成风。
不管是在家的 、在校的 、上班的 ，都在抓紧一切时间提升自己 。为了实现目标 ，我们周围兴起了一股打卡风：早起打卡 、健身打卡 、跑步打卡 、阅读打卡 、外语 打卡 ……只要是想得到的领域 ，都能找到打卡阵营。
这似乎是一个不错的办法：把大目标分解成小目标 ， 日拱一卒 ， 既能看到努力的轨迹 ，又能增强行动的信心 ，而且把大目标平摊为每天的小任务 ，看上去既轻松 又无痛苦 ，成功似乎只是时间问题。
然而 ，总有哪里让人感到不对劲 。读者“阿健”就有这样的困惑 ，他在咨询时表示：“我为了学习 ，建立了5个打卡计划 ，天天坚持 ，但是 ，如果某个打卡计划一旦中 断 ，我就想把它扔到一边 ，不愿再继续了 。”
是他太贪心了？还是他有完美情结？都不是 。事实上这种现象背后藏着一个隐蔽的心理机制 。为了看清它 ，我们不妨关注一下朋友圈里打卡的人 ， 虽然他们每天 打卡打得很起劲儿 ，但最终学有所成的人寥寥无几 。对大多数人来说 ，打卡只是一场充满激情的欢娱盛宴 ，无须多日 ，他们就会出现在另一轮打卡活动中 ，或是无疾 而终了。
当然 ，这样说肯定会让很多正在打卡的人不高兴 ，但先别生气 ，请继续往下看 ，我会给出合理的解释 ，也会提出更好的办法 。事实上 ，我并不反对打卡 ， 只是有 几种情况我们必须学会区分。
动机转移 ，动力扭曲
“微信运动”大家都知道 ，这个功能可以让自己每天的行走步数显示在排行榜上 。不排名不要紧 ，一排名 ，有些事就变了 。不管之前爱不爱运动 ，人们都开始冲进大 街小巷 、公园码头 ，甩开膀子走了起来 ，无论刮风还是下雨 ，都抵挡不了他们的热情 。这乍一看是好事 ，每天的排名激发了人们的运动热情 ， 既能健身又能社交 ， 多    好啊 。但问题就出在这里。
因为从开始排名的那一刻 ，人们的锻炼动机就不知不觉地发生了转移：原先纯粹是为了身体健康 ，享受运动带来的美好 ，现在却是不自觉地为了自己的成绩在排 行榜上更好看 ，甚至有人还专门为此去买设备或用软件“刷”步数。
打卡活动也是如此 。一开始 ，人们的行动动机全都出于学习成长本身 ，一想到自己今后能够轻松早起 ，享受美好时光；锻炼塑身 ，拥有美好身材；热爱阅读 ，成 为博识智者 ……就顿时信心满满 ，动力十足 。出于这种目的 ，打卡更像是锦上添花 ， 即使不用任何意志力支撑 ，人们也能持续行动 。然而打卡一旦开始 ，任务心态其 实已经锚下了。
随着时间的推移 ，热情消退 、动机减弱 ，学习成长的难度逐渐增大 ，人们不得不依靠更强的意志力去坚持 ，等到意志力难以为继时又该怎么办呢？直接放弃？那 不等于告诉大家自己不行吗？多丢面子啊！
为了不陷入痛苦 ，我们的大脑会开启自我保护模式 ，在举步维艰的时候主动调整认知 ，给自己找借口：“学习很难 ，但打卡并不难啊！ 只要完成打卡 ，不就代表任 务已经完成了吗？”“既然打卡就代表完成 ，那为什么不选这个轻松的 ，而非得选那个难的呢？ℽ
这就是大脑“解释系统”的逻辑 ， 虽然很荒谬 ，但强大的天性会迫使理性这样解释 ，而有的人还真接受了 ，于是有人去网上购买刷步神器 ，坐在家中就可以让自己运 动步数名列前茅；有人早上5点闹钟一响就在早起群里打个卡 ，然后倒头继续睡；有人翻开书 ，拍张照 ，然后将照片发到朋友圈 ， 以示自己今天读过书了 ……
这些做法虽然有些极端 ，也只是少数人的行为 ，但大多数人在意志力薄弱的情况下 ，都会为了完成打卡任务而不自觉地降低标准 ，此时做多做少 、做好做坏已然 不是最重要的 ，最重要的是完成打卡任务 。人们坚持的动机 ，就这样不知不觉地从学习本身转移到了完成任务上 ， 由内在需求转移到了外在形式上。
阿健同学正是因为没有意识到自己的学习动机已经转移 ，所以疑惑为什么一旦打卡中断就不愿继续行动 ， 因为他关心的是让打卡纪录保持完整 ，而不是让学习过 程保持完整 ，其实对于学习来说 ，偶尔中断又有什么关系呢？
一些“中毒”更深的人 ，他们的学习动机转移了 ，甚至连学习的目标也转移了 。他们起初还记得做某件事的意义 ， 比如知道学英语是为了与外国人流利地交谈 ，但时 间一长 ， 目标就被简化为每天背20个单词 ，于是他们每天只是机械地完成 、打钩 ，却忘了所学为何 ，从此陷入为学而学的境地。
认知闭合 ，效能降低
单纯地依赖打卡 ，不仅会转移行动的动机 ，还会降低行动的效能 。这源自另一个重要的心理机制——认知闭合需求。
所谓认知闭合需求 ，就是指当人们面对一个模糊的问题时 ，就有给问题找出一个明确的答案的欲望 。比如古时候人们不知道为什么会下雨 ，于是下雨这个问题就 没有闭合 ，会让人很难受 ，所以古人就用雷公 、电母 、龙王解释下雨的成因 ，这些说法虽然没什么根据 ，但满足了认知闭合需求 。将这一概念扩展到行为上也是一样 的 ：一件事若迟迟没有完成 ，心里就总是记挂 ，期盼着早点结束；此事一旦完成 ，做这件事的动机就会立即趋向于零。
比如老板交代你做一件事 ，在完成之前 ，你总会对这件事念念不忘 ，脑子里都是关于这件事的零零散散的细节 ，但是只要老板说可以了 ，这件事就结束了 。任务 一旦闭合 ，大脑就会清理原先被占用的记忆空间 ，那件事很快就会退出脑海 ，行动的动机也就消失了。
我们之所以有这种心理是因为人类的大脑喜欢确定性 ，不喜欢未知或不确定性 。而打卡活动自带任务心态 ，人们每打一次卡 ，都要面临一次任务闭合需求 ，这在 开始时并无大碍 ，但动机一旦转移 ，人们的心理就会发生变化。
比如你每天要打卡记20个单词 ，如果今天时间来不及了 ，但为了完成打卡 ，你就可能随便扫几遍 ，告诉自己学过了 ，先让任务闭合再说 ，不然总惦记着这事 ，心 里难受 。反过来 ，如果今天时间非常充裕 ，你一早就完成了记20个单词的任务 ，打卡一结束 ，任务就闭合了 ，此后 ，你的学习动机衰减为零 ，你也不会想着再多做些 探索。
这就是打卡心态的特性：学不到 ，假装一下；学到了 ，立即停止 。所以单纯抱着打卡这一任务心态去学习 ，很少会有强烈的主动性 ，毕竟在任务心态的驱使下， 人们关注的是完成情况 ，对任务本身没有更大的热情。
任务心态 ，身心分裂
任务心态在某些领域是很有用的 ， 比如军事领域 。军人必须有极强的任务意识 ，但在个人学习成长领域 ，任务心态或许并不可取。
比如跑步时总想着还剩多少时间就可以结束 ，读书时总想着还剩多少页就可以完成 ，背单词时总想着还剩多少个就可以完事 ……这样的心态会使注意力处于分散 状态 ，很难全身心投入事物本身 ，从而体会其中的要领和乐趣 。我们感受不到跑步时身心 、手脚的畅快 ，无法深入了解书中人物的思考和情感 ，体会不到单词之间的 深入关联 ……不管什么时候 ，身后好像总有个声音在不停地催促：快点 、快点 、再快点 ，赶快完成它！
现代人很难获得幸福感 ， 多是因为这种快节奏和急心理 ，但在这种状态下 ，生活何其枯燥 ，它无法让我们享受过程 ， 只会让身心紧张 、焦虑 、麻木和分裂。
在《今日简史》一书中 ，尤瓦尔·赫拉利对人类存在的意义做了极为深入的思考 ，但是在谈到生命的意义时 ，他说出了这样的感悟：我和这个世界之间隔着的是身 体的感觉。
换句话说 ，个体生命的本质意义就在于身心合一 ，去觉知真实的生命过程 ，这其中有禅意 、有哲思 ，也有科学 。至少在学习时 ，身心合一 、极度专注是极为重要 的前提条件 ， 只有在这种状态下 ，人们才能从学习活动中收到精细 、强烈的正向反馈 。然而任务心态破坏了身心合一的状态 ，这种不良体验会加剧人们对学习活动的 厌恶感 ，形成恶性循环。
说到这里 ，你可能也希望自己能减少任务心态 ， 以免影响自己的专注和感受 ，不过 ，世界上有些事情很奇怪 ，你直接去追求反而得不到 。比如睡觉 ，你越是提醒    自己要睡着 ，你就越睡不着 ，但若是放松身体 ，你可能会安然入睡； 比如专注 ，你越是提醒自己要专注 ，你就越容易分神 ，但你若是全身心思考 、体会事物本身 ， 自    然就能专注了；再比如美 ，你越是花心思去装扮展示 ，你就越容易让人感到刻意 ，但你若是安静地专注于一件事情 ，真正的美就出现了 。所谓“大美不自知”，我想破除

任务心态的方法正是如此——集中心力做眼前的事就好。
两个策略 ，轻松改变
写这些没有一竿子打翻一船人的意思 。正如开篇所说 ，我其实不反对打卡 ，很多时候打卡是一个很好的工具 ，它确实能助推我们持续行动 ，形成行动惯性 ，这也 是很多人对打卡爱不释手的原因 ，但切不可完全依赖打卡 ，否则很容易陷入认知陷阱。
现实中的打卡大军 ，几乎都缺乏觉知 ，在助推期结束后不能及时 、主动地调整动机 ，导致深陷其中却不知其害 。当然 ，也有一些人能做到学习和打卡相结合 ， 究 其原因 ，并没有什么神秘之处 ，不过是因为他们的行为动机没有改变——打卡只是学习活动的附属品。
那他们是如何做到的呢？
只要一个小方法就能立即改变 ，那就是用记录代替打卡。
每次学习后只做行动记录 ，不做打卡展示 。把学习过程记录下来 ， 既可以看到自己的学习轨迹 ，也便于每周复盘（见图5-9）。

图5-9   用记录代替打卡
虽然看上去和打卡是一样的 ，但这样做没有打卡的任务压力 ，可以将注意力集中到活动本身 ，而不是完成任务上。
当然 ，也无须担心缺少打卡的限制会使自己懈怠 ，毕竟谁都有向好之心 ，谁不愿意自己每次都比上次做得更好呢？ 只要专注于学习成长活动本身 ，体会其中的乐 趣 ，就能保持强烈的学习动机 ，化被动学习为主动学习 。打卡与记录 ，看似只是叫法上的不同 ，但其中的差别非常微妙 ， 需要悉心体会。
同时 ，我们在任务设置时要使用新策略：设下限 ，不设上限。
比如原先打卡每天要背20个单词 ，这是任务的上限 ，假设做到这一条并不容易 ，所以任务一完成你就会松一口气 ，心想：终于完事了 。现在把任务调整为背5个单  词[1]        一个很容易完成的下限 ，这样做的好处是：你完成目标毫无负担 ，且此时刚好进入学习状态 ，精力旺盛 ，就愿意顺着惯性继续学下去 ，毕竟此后多学一个单词 都是额外的收获 ，心态完全不同 ，身心容易沉浸 ，不会顾虑什么时候才能完成任务。
这种策略的智慧之处在于规避了任务闭合需求 ， 只要觉得有意思 ，你就可以一直学下去 ，直至自己觉得有些吃力 。 由于没有设置具体的上限 ， 比起打卡模式 ，新 策略的能动性要强很多 ，而且能动性还是可持续获取的。
除此之外 ，这种策略也极其符合刻意练习的原则——让自己始终处于舒适区的边缘 。因为这么做 ，你每次都可以刚好学到有点难但又不是太难的程度 ，而打卡却 必须面对一个固定的任务值 ，很容易让人觉得无趣或困难 ，从而放弃。
当然 ，这个策略不是我想出来的 ，而是从《微习惯》一书中获得的启示 。作者斯蒂芬·盖斯为了养成好习惯 ，要求自己每天只做一个俯卧撑 、每天只读一页书 、每 天只写50个字 ，这种无负担的习惯养成法最终促使他拥有了良好的身材 ，养成了阅读习惯 ，还写出了自己的书 。他称这种方法简单到不可能失败。
我亲测有效 ，你也可以试试。
于学习而言 ，保持内在的动机最重要 。但相比之下 ，保持动机这条路其实比打卡更难走 。不过 ，做难事必有所得 ， 因为它更接近成功的要求 。当然 ，仅仅保持动 机依然是不够的 ，想真正获得成功还要学会创造动机。</tw-passagedata><tw-passagedata pid="80" name="反馈" tags="" position="1750,2950" size="100,100">第六节   反馈： 是时候告诉你什么是真正的学习了
《认知升级》[2]的作者刘传小时候有段神奇的学琴经历：他从零开始学电子琴到考上十级只用了两年时间 ，而同龄人取得这一成绩通常要4~5年 。更神奇的是 ，直 到考上十级 ，他都没有学习一点乐理知识 ，而他的老师也从来不让他学理论 。那么他的老师究竟是怎么教的呢？
老师先示范左手 ，再示范右手 ，再合起来弹一遍 ，让我大概知道这一首曲子出来是什么样子 。接下来一周我就要努力练成这样子 ，周末的时候验收 。不通过 ，继 续练 ，通过 ，再到下一首曲子 。如此循环两年 ，最后练成的曲子直接达到十级 。在学习过程当中 ，完全不接触音乐理论。
至今刘传依然非常感谢他的音乐启蒙老师 。虽然不知道乐理 ，但这并不影响他完整流畅地演奏给别人听 ，并由此收获即时的夸奖和赞扬 。这种反馈会像海浪一样 一遍遍冲击着信心这块沙滩 ，让他始终沉浸在弹琴的乐趣里。
反观现在 ， 多少孩子因为要学习系统枯燥的理论而长期处于乏味的基础练习中——乐理 、指法 、音律 、节拍 ……家长们要求孩子一遍一遍地练习 ， 多半不是为了 马上给他人表演 ，而是为了完成考级 。 由于长时间收不到外界的正向反馈 ，孩子们逐渐将学习视作内心抗拒但又不得不完成的任务 。家长们投入了大量金钱 ，孩子们 投入了大量时间 ，最终却不得不走上“从入门到放弃”之路。
对比二者不难发现：是否有及时 、持续的正向反馈 ，正是产生学习效果差异的关键。
回到刘传学琴的经历 。其实刘传有此成就一点也不神奇 ， 因为我们每个人从小就是这样学会说话和走路的 。没有人从学拼音规则 、字母发音开始学习说话 ，也没 有人从学力学原理 、肌肉控制开始学习走路 ，我们只是不断地模仿和练习 ，直接去说 、去走 ，从环境中持续获得反馈 ，体会乐趣 ，修正不足 。最终 ，在不知道原理的 情况下 ，我们就会说了 ，也会走了 ，而且做得还相当不错。
上天给了我们生命的同时 ，也赋予我们一个强大的学习方法 ， 只是我们不知不觉地忘了它 。 自从有了文明和理性 ，人类的学习就逐渐转向了以原理 、基础为导向 的系统学习 ，这种方式看似高效 ，但往往过于注重输入和练习 ，忽视了输出和反馈 ，使学习过程变得痛苦 、无趣 。天下苦学久矣 ，是时候回归学习的本源了。
无反馈 ，不学习
现实生活中 ，大多数人往往缺少输出和反馈意识 ， 虽然他们极其理性 ，甚至能以超越常人的毅力不断激励自己努力 ，但最终收获的仍然是痛苦和失败。
比如一名大二学生“无悔”曾告诉我 ，他每天从早学到晚 ，学6天休1天 ，如此付出 ，收获的却是无力和疲累；而另一位读者“傅琴”女士也说 ，为了应对生活危机 ，她 不停地学习瑜伽 、写作 、肚皮舞 、英语口语 、绘画 、茶道等各种技能 ，但内心始终得不到满足 ，感受不到自我价值。
所有处于类似困境中的学习者 ，无论是在校的还是在职的 ，无不认为只要自己努力地输入 ，不停地学 ，就一定能学有所成 ，然而现实总是令他们失望 。他们似乎    从来没有考虑过要尽快产出点什么 ， 以换取反馈 ，通过另一种方式来激励自己 。也许是因为在人造的学习体制内待久了 ，有些人很难相信“跳过原理 ，直接实操”的方式

是有效的 ，他们认为这种方法不过是奇技淫巧 ，强大的毅力和认知才是学习的正道。
对于这种观点 ，脑科学家提出了不同的意见 ，在他们看来 ，持续的正向反馈才能真正激发本能脑和情绪脑的强大行动力 。因为人类强大的本能脑和情绪脑虽然没 有思维 、短视愚笨 ， 时常沉溺于游戏 、手机 、美食 、懒觉 ……但它们超强的欲望和情绪力量却是非常宝贵的行动力资源 ，如果能让它们感受到学习的乐趣 ，它们同样 会展现强大的行动力 ，让自己像沉迷娱乐一样沉迷于学习。
我们的理智脑虽然聪明 、有远见 ，但它身单力薄 ，真的不适合亲自上阵 ，真正需要它做的 ，是运用聪明才智去制定策略 ，让本能脑和情绪脑不断接受强烈的正向 反馈 ，愉悦地朝着目标一路狂奔（见图5-10）。
所以科学的学习策略是产出作品 、获取反馈 ，驱动本能脑和情绪脑去“玩玩玩”，而不是一味地努力坚持 ，让理智脑苦苦地去“学学学”。这看起来很违反直觉 ，但它 确实成为优劣学习者之间无形的分水岭。

图5-10   本能脑和情绪脑是学习的发动机
有作品意识才有未来
有了这种认知 ，人是会迅速改变的——会拥有清晰而强烈的作品意识 ，会更加重视输出和运用 ，会倾心打磨作品 ，主动换取外界的反馈。
比如以前你学习英语可能会选择每日打卡的方式 ，但现在你可能会选择直接用：直接翻译一段美文 、查询英文文档 、阅读英文原版书 ，或者把手机语言设置成英 文 ……这么做当然会造成一些困难 ，但为了解决问题 ，你必定会想办法补全相关知识 ，所以你的学习行为都能得到即时反馈：要么帮自己或他人解决了一个问题 ，要 么产出了一个有价值的作品 ，这些反馈带给自己的必然是强烈的成就感和继续行动的欲望。
这也进一步完善了前一节关于打卡问题的思考：想创造全新的学习动机 ，就得放弃一味打卡输入的做法 ，想办法直接运用或产出作品 ，获取反馈。
所以凡是向我咨询类似问题的读者 ，我都会建议他们去产出点什么 ，要么去说 、要么去写 、要么去分享视频 ……总之不能一味地学学学而毫无产出 ， 因为没有反 馈的学习不仅是痛苦的 ，而且十有八九会失败。
说到这里 ，我想大家更能理解强者们常说的话了： ·教是最好的学；
·用是最好的学；
·输出倒逼输入；
·请用作品说话 ……
那些先行者确实都有相同的品质 ，他们在学习的时候经常不按常理出牌 ，不管是不是新知识 、技能 ，他们都直接用 、直接做 。当然 ，一开始常常用不好 、做不 好 ，但他们肯定要“鼓捣”出一个东西 ，然后抛出去获取反馈 ，不断打磨迭代。
这真的是见效最快的学习方式！我在这两年的写作过程中体会得太深刻了 。实不相瞒 ，我的电脑里有一个专门的文件夹是用来收藏读者留言截图的 ，这些截图都 是大家对我的夸奖 、肯定 、表扬和赞赏 。保留这些截图并非自恋 、臭美 ，而是我深知这些反馈对自己行动力的影响实在是太重要了 。每每看到这些留言截图 ，我都会 动力十足 ，经常在电脑前一坐数小时而不知疲惫 。我知道这就是在驱动情绪脑为自己工作 ，如果自己写的文章没有任何反馈 ，我真不敢保证仅凭意志力和长远的认知 能走到现在 。所以“锁定价值—打磨作品—换取反馈”正是我持续写作的真正策略和真实动力。
古典在《跃迁》一书中这样描述高手的破局战略：找到自己的高价值区——让自己成为某个领域的头部——再借助头部效应的系统推力 ，从一个小头部不断地向 大头部移动 ，实现跃迁 。而抢占头部最好的途径莫过于持续打磨高价值的作品 ，凭借作品换取反馈。
没有作品和作品意识 ，一切免谈。
痛苦也是一种反馈
“产出作品 ，获得反馈”听起来很美好 ，但大家心里肯定有这样的顾虑：万一自己分享后收到的是批评或嘲笑该怎么办？如果自信心受到打击 ，那岂不是更糟？很多 年轻人都有这种担心 ，不过只要想清楚下面三点 ，就不难迈出步子了。
首先 ，分享不是随意分享半成品 ，而是尽最大力气将作品打磨成自己当前能力范围内可完成的最好的样子 。如果你只是随意地写些文字 、拍些照片 ，那必定没有 什么价值 ，人们自然不会产生兴趣并予以赞扬 ，所以 ，对待作品要像对待自己的孩子一样 ，每次出门前都要尽可能把它们打扮得漂亮精致 ，让人眼前一亮 。这种要求 必然会逼迫自己在能力舒适区边缘快速成长 ， 因为这符合刻意练习的基本原则。
其次 ，制定分享策略 ，展示给那些能力不及你的人 。只要你认真打磨了作品 ，就肯定有人会觉得你比他们厉害 ，此时 ，赞扬就会飞向你 。而真正比你强的人往往 没空打击你 ，所以你不必担心会被人嘲笑。
最后 ，冷静客观地对待打击 。不排除你仍然会受到打击的情况 ，我也一样 ，偶尔也会收到一些读者的“攻击性留言”，此时 ，保持冷静 、客观就很有必要了 。如果对 方除了情绪上的攻击再无其他内容 ，那你大可哈哈一笑 ，忽略就好了 。这说明对方不但嫉妒你 ，还不如你 ， 因为他没法拿出更好的作品或观点来回应 ， 只会发泄情
绪 、肆意谩骂 。在鸡蛋里挑骨头 ，这事谁不会呢？但如果对方的质疑中包含严谨的反证 ，能准确指出你的问题 ，那就要认真对待了 ， 因为这些批评就是极佳的反馈， 它们会帮助你把问题想得更清楚 ，让作品变得更完善 。所以 ，在真正希望成长的人眼里 ，这样的批评哪里是打击 ， 明明是不可多得的财富啊！
所有痛苦都是上天给我们的成长提示 。无论是身体不适 、情绪低落 ，还是学业落后 、事业受挫 ，有痛苦出现 ，说明哪里出了问题 ，这不就是在告诉我们应该努力 的方向吗？而很多人只知一味地沉浸在受挫的情绪里 ，惶惶不可终日 ，不但耽误了自己 ，也连累了他人 。如果你的心态足够开放 ，就会感激生活中的痛苦和挫折 ，毕 竟没有什么是比这更直接的反馈。
被动学习如何获取反馈
谈论这样的主题时 ，不得不考虑学生的感受 。学生们通常认为 ，职场人有充足的自由时间可用来主动学习 ，而自己只能在有限时间内被动学习 。被动学习不仅无 法选择内容 ，而且课业负担很重 ，在这种场景下 ，“反馈策略”有用吗？面对这样的问题 ，我只想告诉你：完全不必担心 ， 因为反馈同样是被动学习的制胜法宝。

据我所知 ，为了提高学习成绩 ，很多同学采用的方法往往是一遍一遍不停地学 ，结果不仅成绩提高有限 ，还感觉学得很机械 、没有动力 。很明显 ，这种单纯的输 入式学习是低层次的勤奋 ，真正善于学习的同学往往会通过自我测试主动制造反馈。
他们背单词 ，不是一遍一遍地看 ，让所有单词都“看着眼熟”，而是合上书测试自己能否精确地说出含义 、发音 ，并拼写出来；他们练听力 ，不指望每天重复听音频 就能毫不费力地“熏耳朵”，而是回过头来对照原文 ，不断重听没听懂的地方。
对于背记理解类的学习 ， 自我测试就是最好的反馈 。哪里会 、哪里不会 ，通过测试便立即掌握得清清楚楚 ，我们可以精准消灭盲点 ，让自己始终处在学习舒适区 边缘 。那种“翻开书全会 ，合上书全废”的无反馈式努力正是你被动 、落后的根源 。《学习之道》一书的作者芭芭拉·奥克利也曾明确指出：主动的回想测试是最好的学 习方法之一 ， 比坐在那儿被动地重读材料要好得多。
另外 ，学霸们的错题本也是学习反馈的最好呈现 。他们通过测试把暴露的盲点集中在一起重点攻克 ，让自己始终游走在学习的拉伸区 ， 自然进步最快 。学霸之所 以是学霸 ，不是因为天生如此 ，而是仰仗反馈 ， 明晰了盲点 ，从而比其他人领先那么一小步 ，而每一小步的领先都会让他们收获更多的赞扬和肯定 ， 同学们觉得他们 厉害 ， 自己也认为自己是个“天才”。不知不觉间 ，“小的正向反馈”带来了“大的正向反馈”，他们的学习也进入了正向循环。
只是很多同学对错题本不以为意 ，要么不去写 ，要么写了不去看 ，要么去看时因为碰到痛苦而回避 ，转头回到舒适区里转悠 。在没有让自己的情绪脑体会到学习 的快感之前 ，我们总得先逼自己一把 ，对吧？
愿你从此不再平庸
我喜欢看电视剧《士兵突击》 ，尤其喜欢其中一个桥段。
许三多被分配到边远的五班看管油料 ，如果不出意外 ，他的军旅生涯就会波澜不经地结束 ，然后退伍回家 。但是愚直的许三多决定在营房前的空地上修路 。这是   一个毫无企图心的决定 ，却无意中创造了一个“作品”。这个“作品”在空旷的荒地上显得格外扎眼 ，竟引起了飞行员的注意 ，之后这个消息传到了首长耳朵里 ，许三多也 受到了关注 ，从此开始了他的特种兵生涯。
这印证了古典的跃迁理论：打磨作品—到达一个小山的头部—受到更多关注—移动到一个更大山头的头部—借助系统推力 ，实现人生跃迁。
许三多秉性如此 ，却无意制造了反馈 ，但这个道理可以被有意地运用 。从现在开始 ，请不要再默默无闻地独自耕耘了 ，不产出 、不运用 、不得到反馈 ，就算学一 辈子也不会获得真正的成长和机遇 。真正的学习成长不是“努力 ，努力再努力”，而是“反馈 ，反馈再反馈”， 只有不断产出 ，获得反馈 ，我们的人生才会发生真正的变   化。
就像剧中的薛林看到直升机在营区上空盘旋时 ，他疑惑地说了句：“我怎么觉着 ， 咱们这个地方变重要了！ℽ 也愿你从此变得更加重要 ，此生不再平庸！

刘传的学琴理念 ， 即跳过原理 ，直接实操的方式仅适用于学习的初级阶段 。也就是说 ，采用这一方式 ，你快速达到60分的水平是可以的 ，但到了中级或高级阶 段 ，仍然需要系统学习原理 ，否则走不远。
正如刘传坦言：“到了进阶水平 ，这种经验型的学习方法就暴露出了缺点 。比如我的创作完全靠灵感 ，没有方法论 ，灵感只能靠等 。再比如 ，我的大脑处理同一级 和弦在不同调之间的迁移的能力很差 ， 同样的和弦 ，换一组调我就不知道怎么弹了 。”
不过 ，反馈的规律是贯穿始终的 ，无论什么时候 ， 只要能通过产出换取反馈 ，你就会不自觉地去钻研探索。</tw-passagedata><tw-passagedata pid="81" name="清晰" tags="" position="1350,3100" size="100,100">第一节   清晰： 一个观念，重构你的行动力
时常有人夸我行动力强 ，说我在这个年纪 ，还能克服惰性 、抵制诱惑 ，在大家都熬夜 、刷手机的时候坚持早起锻炼 、读书写作 ，甚是难得 ，并得出结论：周岭是个自 制力很强的人。
不不不 ，这完全是表象！事实上 ，我的自制力一点也不强 ，我甚至认为自己喜欢舒适 、简单 、新奇 、有趣的天性比一般人更强 。即使是现在 ，一旦看起手机信息 ，我 也不敢保证能全身而退 ，更别提以前了。
曾几何时 ，我也成天玩游戏 ，成宿刷微博 ，被一个个热点不断牵引 ，心里根本没有成长的念头 。每天醒来做的第一件事就是拿手机 ，并总指望着在舒适的状态下开始 一天的工作 ，结果总在琐事中虚度时光 。尤其是在完全自主的时间里 ，我发现自己几乎什么也做不了——明知道有更重要的事要做 ，但脑子里总有个声音在告诉自己先去 找点乐子 。整个人浑浑噩噩的 ，就像一条无人掌舵的小船在生活的洪流里随波逐流 ，根本无力掌控方向。
终于有一天 ，在极度自责之后 ，我决心奋起自救 。当时想到的最好的办法是培养强大的自制力 ，我认为只要有了自制力 ，就一定能改变现状 。我尝试了很多方法 ，均 无功而返——人的惰性实在是太强大了！
在经历了无数次的失败之后 ，我终于发现与天性对抗是没有出路的 ，也隐约感觉到自制力强并不代表行动力强 。在随后的探索中 ，这个猜想逐渐得到证实：真正的行 动力并不完全来源于自制力 。明白了这一点后 ，我开始用新的机制重构行动力 ，慢慢地蜕变成了另一个自己。
珍惜每天的礼物
或许你并没有意识到 ，每天早上醒来 ，我们都会收到一份礼物——纯净的注意力 。不管你昨天经历了什么 ，经过一晚的睡眠 ，你的精力总会得以“重启”。然而很多人  并不把这当回事 ，在一天开始的时候 ，一头扎进手机信息或是自己觉得有趣的事情中 ，然后迷失其中 。这好比把这份珍贵的礼物直接摔在了地上 ，长此以往 ， 自然就得不 到命运的眷顾了。
为什么这么说？ 因为生命是个复杂的系统 ，好坏自有其运行之道 。《系统之美》一书的作者德内拉·梅多斯告诉我们 ，世界上有一个底层的系统规律叫“增强回路”，它 的发生就好比两个小孩子发生了争执 ，一个人打了一拳 ，另一个人就更用力地踢一脚 ，他们每一次的反应都会强化矛盾 ，升级暴力 。注意力的使用同样遵循这个规律 ，最 初的选择会影响行为自动增强的方向。
比如 ，如果我们起床后做的第一件事是看手机信息 ，那我们的注意力就很可能被有趣的消息 、好玩的视频 、吸引眼球的标题一路吸引过去 ，每一次点击都会让人产生 更强烈的点击欲望 ， 回路不断增强 ，注意力呈无限分散的状态 。同时 ，情绪一旦适应了轻松有趣的状态 ，便会期待获取更多轻松有趣的信息 ，这样又形成了一个情绪增强 回路 。一天才刚开始 ，注意力和情绪就受到了影响 ，面对困难 、枯燥的工作时 ，就不容易进入状态了（见图6-1）。

图6-1   注意力的增强回路
但反过来 ，我们也可能进入另外一种状态 。如果起床后我们能刻意避开轻松和娱乐的吸引 ，先去读书 、锻炼 ，或者做些重要的工作 ，精力就会呈聚合状态 ，并自动增 强 。比如起床后先去锻炼 ，就能让自己头脑清晰 、精力充沛 ，在这种状态下做重要的工作就会非常顺利 ，工作越顺利 ，状态就越好 ， 回路逐渐增强；再比如早起后先去阅 读 ，读得越多 ，脑子里的问题和感触就越多 ，反过来又会产生更强烈的阅读欲望 ， 回路逐渐增强 。行动回路一旦增强 ，我们就会进入高效和充实的状态 ，此时我们哪还有 精力去关注那些可看可不看的消息呢？注意力的增强回路是正向的还是负向的 ，很大程度上取决于你最初的选择 ，这也是老生常谈的道理：要事第一！
当然 ，启示还不止这些 ，如图6-2所示 ，在增强回路的起点 ，做出有利选择所消耗的自制力是最小的 ，如果等负的增强回路形成 ，再想改变就难喽！


图6-2   在增强回路起点做选择难度最小
好比你沉迷抖音已久 、各路消息回复不迭的时候 ，再想心无杂念地工作学习怕是没那么容易了！所以 ，好钢要用在刀刃上 ，在初始阶段 ，强迫自己先做重要的事情， 一旦进入正向的增强回路 ，你便能拥有强大的行动力——这正是增强自制力 、提升行动力的秘密 。这个秘密适用于所有人。
清晰力才是行动力
仅仅知道这个道理还不够 ，毕竟知道的人很多 ，但真正能够做到的人却很少 。就像你明明准备第二天早起锻炼 、读书或是做重要的工作 ，然而醒来后还是鬼使神差地   拿起了手机——群消息 、朋友圈 、公众号 、抖音 、今日头条 ……一眨眼 ，半个小时过去了 ，你还躺在床上 。实在没什么新鲜事了 ，还要把App再点开一次 ，看看有没有什么 惊喜 ，等到刺激消耗殆尽 ，无聊渗透全身 ，再漫不经心地起床 ，此时的你精神萎靡 ， 内心只希望用更多刺激来填补空虚 ，哪还有心思去做重要的事呢？
知道和做到相差十万八千里 ，这其中的差距到底在哪里呢？ 答案正是前文所说的“模糊”。
如果没有猜错 ，你脑中所谓的“重要事情”，也许就是关于锻炼 、读书或是做某项重要工作的一个大致想法 ，你并没有想清楚明天起床后是去跑步还是阅读 ， 即使想清  楚自己要干什么了 ，也不确定要去哪里跑 ，跑几公里 ，跑多长时间 ，穿哪套衣服 ，万一天气不好怎么办；不知道到底要读哪本书 ，从哪里开始 ，读多长时间；也不知道具 体要做重要工作的哪个部分 ，需要准备什么工具 ，需要什么素材 ，等等 。一切都只知道个大概 ，这对提升行动力来说 ，是很致命的。
所以 ，仅仅知道要事第一是不够的 ，我们还需要拥有另外一种能力：清晰力 ，也就是把目标细化 、具体化的能力——行动力只有在清晰力的支撑下才能得到重构。 一招建立清晰力
知道了以上内容 ，我们的脑子似乎清楚了很多 ，但似乎还是无从下手 ，不过不用担心 ，清晰力的建立并不复杂 ，做到这三个字就可以实现：写下来。 是的 ，只要写下来就好 。图6-3是我的“笨”方法 ，供参考。


图6-3    日程规划
第一步：找一本普通的A5卡面抄 ，将纸页对折；
第二步：在上方写下当天所有要做的事 ，然后清空大脑 ，按权重将列出的事项标上序号 ，这样 ， 目标就变得清晰可见；
第三步：收集一切可用信息 ，在页面左侧预测性地写下在某一时间段做什么 ，然后在底部统计“计划学习时间”和“可用学习时间”，这样 ，时间也变得清晰了；
第四步：在页面右侧记录当天的实施情况 ，一天过后 ，对学习时间和学习成果进行统计 ，时间利用效率便一目了然。 整个页面分为以下4个部分 ，呈现“工”字形。
（1）待办事项
（2）计划完成
（3）实际完成
（4）备注
这一方法几乎包含了时间管理手账的主要高频功能 ，而且这种手账可以随意写画 ， 比如备注区可以随时记录灵感或信息 ，用完即弃 ，不用花精力在手账的形式上 ，时 间和经济成本都非常低廉。
如图6-4所示 ，从2017年2月开始使用到截稿前 ，我快用完9个本子了 。通过持续的规划和记录 ，我对自由时间的掌控变得越来越强 。我能够主动约束自己 ，我总知道下 一步要做什么 、什么事情最重要 ， 即使不小心被各类消息牵绊 ，也能在自我提醒下快速跳出来 ，这一切得益于清晰力。

我曾把这个方法告诉过很多人 ，但大多数人并不愿意真正去做 ，一来他们觉得这种方法太老土 ，二来他们认为这点事用脑袋想想就可以了 ，写出来完全多此一举 。而 现实往往是：不行动 ，就体会不到这种方法的好处 ，体会不到好处自然也就觉得这种方法没什么用 ，所以 ，只有真正做过的人才能体会到写与不写 ，完全不同 。很多时
候 ，人与人之间真正的差距可能就体现在最后那一点点行动上。

图6-4   我用过的卡面抄
2019年5月6日 ，读者“Amy曹”发来反馈 ，她说：“我把每天要完成的事情认真地写下来 ，效果还真不错 。以前虽然知道这个方法 ，但并不重视 ，没有认真写过计划 ，但 是2019年5月1日之后 ，我开始认真对待这件事 ，发现这样做事情很有控制感 ，而且不用老是着急 、害怕 、担心完不成 ， 即使中途会调整计划 ，但大方向始终在自己的掌控 之中 。”
“写下来”就是有这样神奇的效果 ， 因为“写下来”会清空我们的工作记忆 。当我们把头脑中所有的想法和念头全部倒出来后 ，脑子就会瞬间变得清晰 ， 同时 ，所有的想法 都变得清晰且确定 ，这样一来 ，我们就进入了一种“没得选”的状态 ，在过程中不需要花脑力去思考或做选择。
行动力最怕模糊 ，如果我们的头脑中一直有很多模糊的选项存在 ，我们就需要花心力不断做选择 ，而做选择是一件非常耗脑力的事情 。我们的大脑有可能为了省点力 气 ，而不自觉地选择那个它最熟悉 、最确定的选项——做那些轻松 、愉快但不重要的事情。
除此之外 ，人们通常还会有这样的疑问：把计划做得这么僵硬 ，会不会让自己变得很死板？事实上并不会 ， 因为做规划的目的并不是让自己严格地按计划执行 ，而只 是为了让自己心中有数 。如果当天计划有变也没关系 ，有了这份预案 ，你能够在处理完临时任务后 ，把自己迅速拉回正轨 ，但如果没有这份预案 ，你极有可能在目标和时 间都模糊的情况下选择娱乐消遣 。所以 ，做规划十分有效 ，平时遇到干扰只要及时调整计划就好了。
这种形式特别适合自由时间比较多的人 ，也适合在室内办公的人 ，如果你需要时常在外面跑动 ，则可以灵活借鉴 ，通过其他方式清楚目标 。我喜欢在头天晚上睡前留 出10分钟来做这件事 ，第二天早上再拿几分钟回顾 ，工作过程中不时地查看 、调整。
一天24小时 ，在开始的时候多花点时间想清楚什么任务是最重要的 ，并提醒自己投身于此 ，这样 ，工作效率之高会超乎想象。
成长是个系统工程
至此 ，认知和方法都清晰了 ，你可能为此欣喜不已 ，但我依旧要提醒你：不要把这一方法视作救命稻草 。行动力的提升不能单纯指望“要事第一”或是“提高清晰力”这样 的单一方面 ， 因为成长是一个系统工程 ，必然是多要素共同作用的结果 。比如一个人若是缺少人生目标 ，那么一味追求行动力无异于缘木求鱼。
从某种程度上说 ，有自己热爱的事 ， 比行动力本身要重要得多 ， 因为一旦有了热情 ，你就会自带“要事第一”和“提高清晰力”等各种属性 。所以除了清晰力 ，我们还需要 拥有寻找目标的感知力 、掌控自由的匹配力 、指导万物的元认知能力 ，等等 ，把它们联系起来 ，才能从内心深处真正地提升自己。
一切源于“想清楚”
你陷入怠惰 、懒散 、空虚的情绪中动弹不得时 ，往往是因为你的大脑处于模糊状态 。大脑要么不清楚自己想要什么；要么同时想做的事太多 ，无法确定最想实现的目 标是什么；要么知道目标 ，但没想好具体要在什么时候以什么方式去实现。
不管你处在什么状态下 ，只要拿出笔和纸 ，写下目标 、写下时间 ，你的元认知能力就能迅速提升 ，你就会动力满满 。归结起来还是那句话：认知越清晰 ，行动越坚 定。
正如爱因斯坦所说：“如果给我1小时解答一道决定我生死的问题 ，我会花55分钟弄清楚这道题到底在问什么 。一旦清楚它到底在问什么 ，剩下的5分钟足够回答这个问 题 。”
聪明的思考者都知道“想清楚”才是一切的关键 ，在“想清楚”这件事上 ，他们比任何人都愿意花时间 ，而普通人似乎正好相反 ，喜欢一头扎进生活的细节洪流中 ，随波逐 流 ， 因为这样似乎毫不费力 。于是在普通人眼里是“知易行难”，而在聪明人眼里是“知难行易”，这一点值得我们反思。
我相信 ，你若真的想清楚了 ，就会主动实践 ，重构自己的行动力 。相信我 ，一旦做到了 ，那感觉真的不一样！</tw-passagedata><tw-passagedata pid="82" name="“傻瓜”" tags="" position="1500,3100" size="100,100">第二节   “傻瓜”： 这个世界会奖励那些不计得失的“傻瓜”
我一直在想 ，一个人开始斩断幻想 、踏实行动的起点在哪里？想来想去 ，我得到一个不可思议但又在情理之中的答案：大概是因为我们有幸做了一次“傻瓜”……
我敢打赌 ，凡是买了一堆书没读 、报了一堆课没上 、心中有无数欲望的人 ，几乎没有主动做成过一件事 ， 比如养成早起 、跑步 、阅读的习惯 ，练就写作 、画画的技 能 ，考个好成绩 ，开个好公司 ，有高收入 ，等等 。这个判断是我基于很多人的经历做出的。
当然 ，我非赌徒 ，深知凡事都有例外 ，平时很少说绝对的话 ，之所以用“打赌”开场 ，只是希望引起你的注意和思考 ，而非争论 。毕竟 ，现实中有太多人终日心怀变好 的愿望 ， 四处探索努力 ，结果不仅毫无起色 ，甚至徒增很多焦虑。
我知道这一切是怎么回事 ， 因为自己有过这种经历 。在那个时候 ，我心里始终萦绕着两个念头：一是凡事必须在看到明确的结果后才行动 ，如果前景不确定 、不明 朗 ， 即使别人说得再有道理 ，我也不愿意投入；二是如果一个道理或方法不能让自己快速发生变化 ，就不是最优的 ，所以要不断寻找 ，这样才有希望找到最好的方法。

当时觉得自己能这么想还挺聪明的 ，现在回头看 ，发现自己是精明过了头 。这种精明让自己在成长的路上遇到了阻碍 ，就像一道无形的门槛把我挡在了成长的门外， 怎么也跨不过去。
直到有一天 ，我无意中打破了障碍 ，径直地跨了过去 。然后 ，一切开始改变了 ……
成长中的悖论
2016年9月 ，我在“得到”App上订阅了李笑来的《财富自由之路》专栏 ，按照他“只字不差”的阅读要求 ，我竟鬼使神差地做了一个决定：把文章全部用键盘重敲一遍 ，包 括文后重要的留言 。一年52周 ，每周4天 ，每天约2小时 ，我就这样“读”完了这些内容。
此前 ，我从来没有这样用心“读”过“一本书”。如此践行 ，我极度认真地思考了维度 、价值 、复利 、耐心 、元认知 、刚需等一系列重要的概念 ， 以及对写作的认知。
2017年2月 ，我读了成甲的《好好学习》一书 ，对书中“每日反思”的做法很受触动 ，于是开始实践 。我写着写着 ，竟一口气写了160天 ，然后很自然地萌生了写公众号 的念头 ，便于这一年7月开通了公众号“清脑”， 因为这160天的每日反思 ，我认认真真地审视了自己的状态和目标 ，也切切实实地体会到写作给自己带来的好处 。这个习惯 保持至今 ，截稿前 ，反思文章超过了1000篇 。猛然回头 ， 自己竟然写出了人生中的第一本书。
一次是傻傻地敲键盘 ，一次是傻傻地写文章 ，我看到了创造文字的好处 ，进而主动做成了这件事 。而以前的我爱耍一点小聪明 ，总希望能先看到结果再行动 ，反而浪 费了很多时间。
这真是一个成长中的悖论：想先看到结果再行动的人往往无法看到结果 。耍小聪明的人会因为结果不明朗 ，担心付出没有回报 ，所以不愿行动 ， 以致永远停留在原地
（见图6-5）。

图6-5   距离太远 ，看不清目标
事实上 ，只要道理正确 ，就别在乎那些小聪明 ，带着不计得失的心态向前走 ，你会发现目标越来越清晰（见图6-6）。

图6-6   走近了就能看清目标
这道理其实很简单 ，但我们有时就是对它视而不见 。这倒不是说我们不明白这个道理 ，而是在行动前后 ，我们看待这个世界的视角是不同的 。在能主动做成一件事之 前 ，我们眼里的世界是二维的 、扁平的 。然而在能主动做成一件事情之后 ，我们就能够从侧视的角度 ，看到三维的 、立体的世界 ，注意到人与人在认识水平上的差别。
在立体的世界里 ，处于高层次的人和处于低层次的人对同一个问题的态度往往有天壤之别 ， 比如《刻意学习》一书是这样描述的。
你觉得学英语没用 ，是因为你看不到生活中有需要英语的地方 。只有英语学好了 ，和英语有关的机会才会慢慢地出现在你的周围 。你觉得学历没用 ，是因为你根本不 知道学习对你的生活轨迹能带来多少改变 ，你只是基于当时的场景 ，认为自己手里只是额外多了一张纸 。你觉得锻炼身体没有用 ，正是因为你不去运动 ，所以感受不到它 的价值 ……
没错 ，这个世界是有认知层次的 。处在下一个认知层次的人往往看不到上一个认知层次的风景 ， 因而只能用狭隘的视角来判断：这些东西虽然很有道理 ，但似乎看起 来并没有什么用。
这些东西在他们眼里确实没什么用 ， 因为人们无法证明一件没有发生过的事 。想要打破这个悖论 ，只有让自己行动起来 ，将认知提升到更高的层次 ，才能做出不同的 判断。
我此前一直强调“想清楚”的重要性 ，但当我们绞尽脑汁去想却仍然想不清楚的时候 ，就要依据前人的假设先行动起来 ，只有这样 ，我们才能更接近目标的本质 ，才能 想得更清楚。
很多人总是希望先找到自己的人生目标再行动 ，事实上 ，如果不行动 ，我们可能永远也找不到自己的人生目标 ，毕竟依靠低维度的认知和经历 ，我们很难看清自己真 正想要什么 。只有先依据前人的假设走到更高的层次 ，人生目标才可能慢慢浮现。
思考很重要 ，但光想不做 ，贻害无穷。
事实上 ，你只要做上一次就会发现：做成一件事真得很不容易。
这揭示了又一个悖论： 当自己从来没有主动做成过一件事情的时候 ，总会以为做成一件事很容易 ，于是生出很多不切实际的欲望和想法 ，而欲望越多 ，就越做不成事
（见图6-7）。

图6-7   “做到”和“想要”的怪圈
反过来说 ，只有当我们真正做成一件事之后 ，才会知道自己能做的事情其实很少 ，这样就不会想要那么多了 ，而欲望一少 ，焦虑消散 ，我们反而能更专心地做好手头 的事情。

凡事看结果 。当你从现实结果中得到成长的真相时 ，什么“学习焦虑”“三分钟热度”“知而不行”就都不算事了 。你会主动斩断幻想 、专注一点 、静心行动 ， 因为除此之 外 ，别无他法。
不要垂涎别人二十几岁身家百万 ，不要羡慕别人一夜成名 ，他们的故事若无法真实地改变你 ，那对你而言都是幻想 。还不如踏踏实实地用行动让自己一点一点变好， 毕竟 ，现实结果才是最好的“评判师”。
突破阈值
打破这些悖论的方法就是不计得失地先行动起来 。有些人并不完全同意这些观点 ， 因为他们行动后依然看不清结果 、体验不到好处 、消除不了欲望。
如果是这样 ，我想你有必要先审视一下自己的行动量 ，看它是否突破了发生改变的阈值 。因为付出的努力必须达到某种程度才能影响一个体系 ，而努力程度低于这个 阈值时 ，你的行动就会收效甚微。
比如广告行业就存在阈值效应：广告投放不足时不会产生多少效果 ，要让受众对广告做出回应 ，就必须让广告投放量超过阈值。 我们在行动时也应如此 ，我们要专注 、要持续行动 ，直到突破阈值 ，这样才能看到更高层次的风景（见图6-8）。

图6-8   行动量需要突破阈值
我在这方面体会颇深 。如果我想养成一个习惯 ，通常不会以21天为标准 ，而是要求自己至少做半年 。我相信一件事情要是能被持续做180天 ，它就会成为习惯。
比如我开始早起和跑步的时候 ，起初是有一些痛苦的 ，但扛过去之后 ，我就体会到了早起和跑步给自己身心带来的不可思议的体验 。回头想 ，最难坚持的时候可能就 是突破阈值的时候 ，幸好自己当时没有放弃 。从那以后 ，要是哪天没有早起跑步 ，我反而会觉得难受 。我知道 ，当自己停不下来的时候 ，表示已经突破了阈值 ，上升到了 一个新的层次。
用同样的路径 ，我养成了阅读 、写作 ， 以及每日反思的习惯。
做一个有理有据的“傻瓜”
之所以在“傻瓜”这两个字上加上引号 ，说明我并不认为这样的人真的傻 ，有时反而是一种聪明 ，这里的“傻”，并不是盲目和冲动 ，而是有原理 、有依据的坚定。 行动力强 ，是因为自己赞同行动背后的原理 、依据和意义 ，而不是别人说做这个好 ， 自己不深入了解就跟风去做 ，那才是真的傻。
换句话说 ，如果你觉得别人讲的道理有理有据 ，而自己暂时无法反驳 ，碰巧自己又非常想做这件事 ，那就相信他们说的是对的 ，然后笃定地行动（见图6-9）。
在实践途中 ，你自然也要保持思考 ，用行动反复验证他们的理论 ，不适则改 、适则用 ，直到自己真正做到为止 。届时你不仅能做成那件事 ，还能探索出自己的理论， 成为别人眼中的高手。

图6-9   有理有据的假设是一切进步的开始
当然 ， 即便只是践行一个小小的理论 ，坚定的人也会有更多收获 。比如我告诉过不少读者如何在舒适区边缘提升自己 ，多数人听后觉得很有道理却并不行动 ，而读 者“如如大王”却严格执行了这些方法论 ，结果她用了两周的时间就把钢琴考试的节拍速度从160提到192，一扫考前焦虑的情绪。
再比如我在第五章提到了如何利用番茄钟进行主动休息 ，很多人频频点头 ，表示很有道理 ，却没有真正行动 、体验 ，反倒是一位妈妈看到后立即让孩子用了起来 ，结 果孩子发生了很大的改变 。她说：“国庆假期用番茄工作法指导孩子假期学习非常有效 。他自己设置闹钟 ， 自己学习 ， 自己休息 ，有时候只用2小时就完成了全部的作业 ， 从此写作业时家里不再上演‘父子大战 ’。孩子有了更多的游戏时间 ，但在学习时也保持着极高的专注度 。孩子这几天的变化真是太大了！ℽ
同样的道理摆在面前 ，有的人觉得那是鸡汤 ，没什么用 ，而有的人却觉得那是干货 ，好用得不得了 。如果你能够持续行动 ，我相信 ，这个世界一定会特别偏爱你。</tw-passagedata><tw-passagedata pid="83" name="行动" tags="" position="1650,3100" size="100,100">第三节   行动：“道理都懂，就是不做”怎么破解

细数这世上的难事 ，“知行合一”肯定算一条。
有太多人想不通为什么自己“懂得那么多道理 ，却依然过不好一生”。这种困惑来得如此自然 ，每个人在成长路上都会不可避免地遇到。
有些人走出来了 ，有的人却始终困在里面 。走出来的人看得透亮 ，而困在里面的人百思不得其解——为什么付出再多的心血也无法达成一次持续的行动？在他们心 里 ，始终有这样一种执念： 自己现在不做是因为还没有找到最好的方法 ，等找到那个方法以后 ，一切就会变得不一样 。于是他们在寻找 、搜集道理的路上越走越远。
他们阅读了很多有道理的书 ，收藏了很多有道理的文章 ，觉得自己无所不知 ，却始终不能俯下身子去行动 。因为他们总认为自己还没准备好 ，担心方法不是最优的， 贸然行动会走弯路等 ，殊不知 ，这样的观望 、等待本身就无效率可言 。更使人困扰的是 ，道理知道得越多 ，行动力反而越弱 ， 因为似乎总有更好的道理等着我们去发现。
“知多行少”就像是一个死结 ，越拉越紧 ， 以至于眼看着自己成为“认知上的巨人 、行动上的矮子”却不知如何是好 。当他们看到同龄人 ，甚至是后辈通过扎实的行动功成 名就时 ，那些懂得的道理就会一股脑地化为焦虑倾泻而出 。懂的越多 ，焦虑越多 ，无力之下 ，索性就破罐子破摔了。
很多人因为缺乏耐心 、急于求成 ，总想跳过行动环节 ，寻求捷径 ，最后发现：这才是走了弯路 ，真正的捷径正是那条看起来漫长且低效的行动之路。 不久前 ，读者“A丽”在后台留下一个经典之问：“道理都懂 ，就是不做 ，怎么应对？”我当时回答：“真想破解 ，方法也有 ，就一条：直接去做！ℽ
这回答虽然没毛病 ，但现在看来的确有些简单 ，我想有必要再做一个更翔实 、清晰的阐述 。作为过来人 ，真希望每个迷茫的生命都能移去眼前的迷障 ，也愿你的知行 困惑在此消除。
认知 ，其实是一种技能
曾几何时 ，我也是一个知而不行的人 ，凡事满足于知道 ，行动力极弱 ，很少主动 、持续做成过什么事 。真正促使我移去知行迷障的 ，是对大脑学习机制的认知 ，在这 方面 ，我们每个人似乎都有很大的盲区。
在科学家看来 ，学习任何一门技能 ，本质上都是大脑中的神经细胞在建立连接 。用神经科学的术语解释就是：通过大量的重复动作 ，大脑中两个或者多个原本并不关 联的神经元受到反复刺激之后产生了强关联。
这一点不难理解 。当我们还不会骑自行车的时候 ，看别人骑 ，会觉得那并不难——只要手把方向 ，双脚交替踩踏就可以了 。然而真到了自己骑的时候就不是那么回事 了——重心左摇右晃 ，方向左摇右摆 ，速度快不了 ，害怕会摔倒 ，紧张得厉害 ……
这是因为我们还没有进行足够多的练习 ，大脑中相关的神经元也没有受到过足够多的刺激并产生强关联 ，所以 ， 即使我们能轻松理解骑自行车是怎么回事 ，但这项技 能自己实际并未掌握 。直到我们学会这一技能 ，再经过无数次的日常运用 ，大脑中相关的神经元连接才会变得异常牢固 ，我们才会真正掌握骑车这项技能。
如图6-10所示 ，在技能学习的路径中 ，仅仅“知道”是无法形成反馈闭环的 ，只有经过大量的练习 ，让大脑相关的神经元形成强关联 ，反馈闭环才能经由“做到”这个节点
得以形成。

图6-10   技能学习路径
所有的技能学习都遵循这个规律 ，诸如走路 、说话 、画画 、弹钢琴 ……技能学习需要经过大量的练习 ，直到可以利用潜意识自动执行。
但当我们进行认知学习的时候 ，却会产生一种天然的错觉——认为明白了一个道理就好像掌握了这项技能 。比如当我们学会一个知识 、明白一个概念或想通一个道理   时 ，在“知道”的那一瞬间 ，我们确实提升了认知 ，甚至也能在短时间内“做到”。这种感觉非常美妙 ，就像发现了一个全新的自我 ，我们只需要在大脑中推演一番 ，就能体会 到这个认知给自己带来的正向反馈（见图6-11）。

图6-11   认知学习路径
这个正向反馈在当时是真实的 ，但仅凭一次强烈的神经元刺激远远无法形成强关联 ，所以这种认知也是极不稳定的 。而此时大脑已经接收到认知带来的正向反馈 ，认 为自己已经掌握了 、得到了 ，从而忽略或轻视后续大量的练习。
因此 ，绝大多数人在认知学习的过程中都会不自觉地停留在“满足于拥有或知道”的阶段 。当我们下单买书的那一瞬间 ，感觉特别棒 ，就像已经拥有这些知识一样 ，但 收到书后 ，可能就再也想不起去读它们了； 当我们得知“元认知能力”这个概念时 ，惊叹原来这就是一个人最重要的能力 ，然而在真实场景里却又记不得去运用它； 当我们 领悟“一天不看手机也不会有任何损失”时 ，头脑一下子就清醒了 ，对手机信息的危害看得无比通透 ，然而没过几天 ，再次碰到这种情况时 ，我们又会把书放到一边 ，掏出 手机开始玩。
道理再好 ，如果不去刻意练习 ，不去刺激相关神经元的强关联 ，这些美好的认知将永远不会真正对自己产生影响。
当然 ，如果你现在就是一个“知而不行”的人 ，千万不要自责 ， 因为“避难趋易”是人类的天性 ，这种选择取向深深地刻在了我们的基因里 ，所以凡是能简单得到的 ，人就 不会选难的；有短的反馈回路 ，人自然不会选择长的——这就是大脑做选择时的默认逻辑 。在缺少觉知的情况下 ，我们很难察觉这一点。
如图6-12所示 ，我们把技能学习路径和认知学习路径合在一起 ，就能清楚地知道自己“知而不行”的原因了。


图6-12   认知其实是一种技能
好在我们可以觉醒 。觉醒就意味着看清 ，意味着主动改变默认设置 ，并做出新的选择 。从现在开始 ，把认知当成技能 ，知道或想通一个道理时 ，不要高兴得太早 ，想 想后面还要做大量的练习 ，这样就不浮躁了。
一开始做不好很正常
很多人不愿意行动的另一个原因是：在开始尝试的时候 ，总觉得自己做不好 ，看不到明显的效果 ，然后就放弃了。
这个观点看似合理 ，实际上非常可笑 。从大脑的学习机制推断 ，无论学习一项技能 ，还是养成一个习惯 ，背后都是相关神经元从少到多 、从弱到强的关联过程 。那么 在一开始 、在神经元关联很弱的情况下 ，做不好是正常的。
我们无法在刚学琴时就弹出流畅的曲子 ，也没办法一下子轻松地坚持早起 。在做不好的时候 ，我们要先想想自己的现实状况 ，给神经元更多的关联时间 。如果一开始 就能做好 ，我们还要学习什么呢？
但很多人认为自己必须有绝对优势或极大的兴趣和天赋才愿意行动 ，否则就直接放弃 。就像小孩子在玩游戏时必须保证自己能赢才愿意玩 ，否则就不玩了 。可是我们 已经不是孩子了 ，我们应该学会用更成熟的心态包容自己最初的笨拙 ， 即使做不好 ，也要持续练习 ，给神经元留够关联时间。
《思维导图》 的作者东尼·博赞和巴利·博赞曾这样形象地描述养成习惯时大脑的工作情况。
当你每次产生一个想法时 ，带有这个想法的神经通路中的生化电磁阻力就会减少一些 ，就像在丛林里清出一条小路一样 。一开始非常费劲 ，但是随着你经过这条路次 数的增加 ，这条路也会开辟得越来越彻底 ，你所遇到的阻力也会慢慢变小 。到最后 ，这条小路会变得平坦而宽阔。
这从侧面证明： 只要不断练习 ，神经元之间的关联必然会越来越强 ， 即使你感觉自己暂时在退步 ，也不要气馁 ， 因为你可能进入了学习的平台期。
希望和耐心都藏在你的刻意练习里 ，藏在不断强化的神经元关联里 ，无论你是否喜欢这件事 ，只要持续练习 ，你肯定会一天比一天做得好 ，总有一天 ，你会真正体验 到那种“做到”的快感。
我们能做的其实很少
对一些人来说 ，这部分内容有些打击人 ， 因为我不断描绘了这样一个残酷现实：道理不可能很快实践 ，道理也不会轻松实践 。所以另一个事实就是：我们真正能做的 事情其实非常少 。这也引出了人们不愿意行动的另一个原因：欲望太多。
面对“道理都懂 ，就是不做”这一问题的人通常不清楚真正做成一件事需要花费多少心力 ， 因为他们很少真正主动做成过一件事 ，所有的想法都只在脑海中盘旋 。但凡  真正主动做成过一件事的人都知道那并不容易 ，无论是从学会弹钢琴到弹奏自如 ，还是从养成早起习惯到终身坚持早起 ，都是漫长的过程 ，不可能一蹴而就 ，所以我们要 打破这个执念 。而打破执念最好的办法就是着眼于现实改变 ，毕竟现实结果是最好的“评判师”，如果学习不能让自己发生真正的改变 ，那学再多又有什么用呢？
在两年多的实践中 ，我也深深感到：不发生真正改变的学习都是无效的学习 。一篇文章 、一本书就算讲得再有道理 ，倘若最终没有促成自己改变 ，我便认为读这篇文 章 、这本书的过程是无效的学习 ， 因为在需要的时候 ，我却提取不出任何让我频频点头的道理 ，所以尽管它们讲的看上去很在理 ，但实际上与我没有关系 ，这样的道理我 会大胆地舍弃。
当“改变”成了读书学习的最高标尺后 ，我们的学习量还有可能下降 。比如当你真正明白“最重要的事情只有一件”这个道理时 ， 网上所有关于“ 目标聚焦”的文章都不会再 对你有吸引力了 ，但如果你并没有明白 ，那么你依然会在看到类似文章时觉得很有道理 ，然后一个劲儿地把它们往收藏夹里塞。
现实和理论都告诉我们：懂得百点不如改变一点 。真正的成长不在于自己懂得了多少道理 ，而在于自己改变了多少。
所以 ，尽管放心地抛弃“懂得很多道理”这样的执念吧 ，在抛弃时 ，还要真诚地为自己开心 ， 因为在这个世界上 ，知而不行的人实在太多了 ，只要你有所行动 ，就可以 超越一大批人。
对成长来讲 ，道理都是“空头支票”，改变才是“真金白银”。当你凡事都以改变为标准时 ，你的成长路径会更加清晰。</tw-passagedata><tw-passagedata pid="84" name="游戏心态" tags="" position="1650,3225" size="100,100">第三节   游戏心态： 幸福的人， 总是在做另外一件事
我有一段难忘的大学经历。
当时 ，学校有个要求 ，想要顺利毕业 ，每个人必须通过1500米跑步的体能考核 ，而且成绩要在5分10秒以内 。教官为了激 励大家训练 ， 当众立了一个规矩：每次体能课开始前先测试跑一次1500米 ，凡是成绩达到优秀的 ，都可以免上后面2小时的体 能课 。而我 ，在很长一段时间内 ，都是唯一可以在全队近百人的目送中欣然离场的那个人。
跑步并不是我的强项 。刚入学的时候 ，我跑1500米大概要用8分钟 。在向5分10秒这个目标进发的过程中 ，所有人都备感煎 熬 ，每次都是“跑前很紧张、跑时很痛苦、跑后很无奈”。
就在我快感到绝望的时候 ，转机出现了 。一天下午 ，课前测试照常进行 。教官的哨声一响 ，我便以冲刺的速度第一个蹿了 出去 。对于这样的中长跑测试 ，一开始就冲在前面可不是什么好策略 ， 因为剧烈的体能消耗会让自己很快失去后劲 。但就在我 快要松下那口气准备减速的时候 ， 目光也从远处落到了前面10米左右的地方 。我突然在心里对自己说：“先别减速 ，等跑到前   面10米那个地方再减速也不迟 。”等我跑到那个点后 ，我的目光又落到了前面的10米处 ，我觉得这样的距离很短 ，还可以继续   来一次 ，等跑到那个点后 ，我又把眼光投向下一个10米处 ……
几次重复之后 ，我竟然发现自己并没有上气不接下气的感觉 ，身体反而轻松了起来 。 自己就像在玩一个追逐游戏 ，注意力 已经从沉重、遥远的剩余圈数转移到了一段段10米的距离上 ，抬腿摆臂变得越来越轻快 ，不知不觉中我竟领先了第二名小半
圈 。明显的优势让我不再关注成绩 ，注意力几乎完全集中在抬腿摆臂的畅快感上 。我越跑越快 。结束后 ， 当教官宣布成绩并告 诉我不用上课的时候 ，我简直不敢相信。
往后的日子里 ，我一次次如法炮制——冲到最前面 ，然后开始一个人的追逐游戏 。之所以喜欢一开始就冲在前面 ，是因为 边上没有其他人干扰 ，我就能专注地沉浸在这个游戏中 。一个痛苦的考核项目 ，最后成了我每次都跃跃欲试的期待项目 ，而且 没人知道我是怎么突然变强的 。即使后来偶尔有几个人也在课前测试中达到优秀 ，但他们冲过终点线后苦不堪言 ，全然不像我 游戏般的轻松。
这个心法为我的大学生活增色不少 。因为这件事 ，我当时还在记事本里写过一句感悟： 不要让事情本身束缚了你的情绪和 注意力 。这可是我大学时代为数不多的能一直记到现在的人生经验。
现在再回头看 ， 自己也很震惊 ， 因为这完全不是什么土方法 ，而是实实在在的积极心理学呀！
幸福源自主动掌控
现代积极心理学中 ，最引人瞩目的莫过于爱德华·德西和理查德·瑞恩的“ 自我决定理论”了 。它指出人类有三种天生的内在 需求： 关系需求、能力需求和自主需求（见图7-3）。

图7-3    自我决定理论中人类的三种内在需求 换句话说 ，一个人想要生活幸福 ， 需要具备以下因素。
·有良好的人际关系 ，得到别人的爱与尊敬；
·有独特的本领、技能 ，为他人带去独特价值； ·有自主选择的权力 ， 能做自己想做的事情。
这个理论一点都不复杂 ，想想我们平时的生活就可以理解 。如果生活中大家都对你不错 ，你自己又有某方面独特的技能， 还能做自己喜欢的事情 ，那岂不快哉！

特别是“ 自主需求”，它是自我决定理论的关键与核心 。也就是说 ，我们如果能主动选择和掌控所做的事情 ，就会产生内在   动力 ，获取幸福 。就像前文提到的1500米跑步测试 ，在大多数人眼里 ，它是一项考核任务 ，没得选择 ， 只能被动承受 ，但在我 眼里 ，它却成了一件好玩的事——游戏 ，于是我有了选择和掌控的能力 ，最终得到了优势和认可 。而在整个过程中 ，我仅仅改  变了自己对事物的看法 ，境况就变得完全不同 ，这正是积极心理学的神奇之处。
放眼现实生活 ，我们总是要面对很多“不想做但必须做”的事情 。 比如1500米跑步考核、堆积如山的作业、不得不洗的衣
服、不得不见的人、不得不做的工作 ……面对这些事情 ，我们会不自觉地感到沮丧、抗拒和排斥 ， 因为这些都不是我们自己主 动做出的选择 ，而是外界给的压力。
一个人如果整天做自己不想做但又必须做的事情 ， 日子就会变得灰暗无趣 ，然而面对压力 ，我们真的就只能承受吗？未
必 。或许我们的情绪和注意力只是被事情本身给占据了 ， 因为困难和压力总能把人的情绪和注意力抓得死死的 ，让你很难看到 其他角度。
好消息是 ，这个世界比我们想象的要积极 ，我们以为自己没得选 ，其实还有很多角度可供选择 ，毕竟任何事物都是多维、 立体的 。看似悲观的事物背后肯定有乐观的一面 ，严肃事物的背后必然有好玩的一面 ，我们暂时看不见不代表它不存在 。现    在 ，请系好安全带 ， 随我一起去夺取幸福的掌控权吧。
只是在做另外一件事
获取掌控权并不难 。当你遇到那些“不想做但必须做”的事情时 ， 只要在心里默念一句“咒语”，就可以让自己跳出事情本 身 。这句“咒语”便是：我并不是在做这件事 ，我只是在做另外一件事。
把这句话套用到其他场景中是这样的：
·我并不是在做跑步测试 ，我只是在玩追逐游戏； ·我并不是在写作业 ，我只是在挑战自己的速度； ·我并不是在洗衣服 ，我只是在活动自己的手脚； ·我并不是去见领导 ，我只是和一个普通人聊天； ·我并不是为老板做事 ，我只是为了提升自己。
这些理由听起来可能有些可笑 ，但不要低估这种假设的力量 ，一旦你有了新的选择 ，就会意识到：事情本身并不重要 ，我 们只是在通过它获取另外一种乐趣 ，顺便把这件事给做了 。在心理学上 ，这个方法叫作“动机转移”。
缺乏觉知的人 ，其行事动机通常都由外部事物牵引 ，少有自主选择和掌控的余地 ，容易陷入“为做而做”的境地 。但有觉知  的人会适时觉察自己的行事动机是否停留在与目标任务无关的外部事物上 ，如果是 ，他们就主动想办法将其转移到内部 ， 以拥 有自主选择和掌控的能力 ，而这种掌控的窍门基本上可以分为两类：为自己而做和为玩而做。
为自己而做
产生内部动机最好的方式莫过于立足于让自己变好。
就拿写作这件事情来说 。很多写作者都热衷于向热点平台投稿 ， 因为一旦投稿成功 ，他们可以快速获得稿酬和流量曝光 ， 但为了通过审核 ，他们在写作时就必须不断调整自己的风格以迎合平台的口味 ， 因而不得不陷入追热点新闻、立吸睛标题、写 肤浅短文的状态 。这种状态必然无法让自己获得真正的成长和长远的积累 ，于是写作的乐趣就开始慢慢消失了 。而真正希望通 过写作建立影响力的人是不会完全被“稿酬”“流量”等外部动机束缚的 ，他们往往是为自己的成长而写、为众人的需求而写、为   长远的价值而写、为创造一个属于自己的世界而写 。即使没有鲜花和掌声 ，他们也会坚持输出和成长 ， 收获的反馈和奖励都只 是意外和惊喜 ，不是必然和期待 。这样的心态能让他们的笔尖持续释放力量 ，最终收获梦想 ， 因为选择权始终在自己手上。
这道理不仅适用于个人层面 ，企业发展也是如此 。 比如华为公司之所以坚持不上市 ，就是不希望企业的发展动机被外部力 量控制 。如果公司上市 ， 虽然可以在短时间内身价暴涨 ，但它将不可避免地把眼光放到下个季度的财报上。
那些对内在动机更敏感和坚持的人 ，总会与众不同 。他们不会为外界的奖励或评价而刻意表现 ， 只会为自己的成长和进步 而努力进取 ，这样的人很难被困难击倒。
为玩而做
既然动机可以转移 ，那我们为什么不转得彻底些 ，让它变得更好玩呢？这绝对是个好主意！
女儿刚读一年级的时候 ，很不喜欢写字帖 ，每次做这个作业都闷闷不乐 。我见她愁眉苦脸 ，就跟她说：“你不是喜欢画画  吗 ，那为什么你不把它当成画画呢？写字和画画不都是笔在纸上动吗？”她听后眼前一亮：“对呀 ，爸爸 ，我把它当成画画不就 行了！”没过多久 ，她就开心地把那个字帖“画”完了。
读者“承谦”是一个跑步爱好者 ，他曾为跑步写过一首名为《享受就寿》 的打油诗：
有人跑步想瘦， 有人跑步想寿， 而我跑步享受， 享受享瘦享寿。

第一次看到这首诗我就乐了 。这哪里是什么诗啊？分明是动机转移的心理学嘛！ 当人的注意力都在享受上时 ，他对跑步的 心态就不一样了 。相比起来 ，别人为了身材和身体苦苦坚持 ，而他只是享受愉快的跑步过程。
而我除了把跑步当成玩 ，其他很多事在我眼里也都是玩 。 比如阅读这件事 。我从来不认为自己是在阅读 ，而是设想自己在 和智者聊天 。每本书在我眼里都是一个人 ，而我的书架就是智者朋友圈 ，每隔几天我都会在那里站一会儿 ，琢磨下一个跟我聊 天的人是谁 ，这种感觉实在是棒极了 。如果世上的事在我们眼里都是“玩”，谁还会苦闷啊！
另外 ，仔细观察你还会发现：为自己而做 ，通常是为了应对外部的压力和要求 ，为玩而做 ，则是为了应对重复、枯燥的事  情 。如果想玩得更尽兴 ，最好记住这个小技巧——把那些困难的大事情拆解成小块 。就像我在跑步的时候 ，把1500米拆解为一 段段10米的距离一样 。当要做的事情小到自己可以轻松完成时 ，我们就会跃跃欲试。
《微习惯》 一书的作者斯蒂芬·盖斯大概也遵从这个理念 ，他要求自己一开始只做一个俯卧撑 ，后来就生出了玩耍之心。
而胡适先生也说： 怕什么真理无穷 ，进一寸有进一寸的欢喜 。我们可以这样理解：无穷的真理确实容易让人害怕 ，但只要盯住 眼前的那一寸 ，就会从那一寸中获得快乐。
成长啊 ，有时候要看长远 ，让自己明白意义 ， 心生动力；有时候要看得近些 ，让自己不惧困难 ，欢快前行。
这个世界的模样取决于我们看待它的角度
一定有人会对这些方法嗤之以鼻 ， 因为从本质上看 ，这更像是一种自我欺骗 。事实上 ，人是一种自我解释的动物 ，世界的 意义是人类赋予的。
既然做事情就是赋予意义的过程 ，那我们为什么不赋予它们有用又好玩的意义呢？至少 ，为自己而做可以解放情绪 ，为玩 而做可以解放注意力 。当我们的情绪和注意力都自由时 ，还有什么困难可以阻挡我们前进呢？
</tw-passagedata><tw-passagedata pid="85" name="心智带宽" tags="" position="1350,3225" size="100,100">第一节   心智带宽： 唯有富足， 方能解忧
我们这一代人很幸运 ， 因为我们亲历着这个物质丰富、科技发达、信息便捷的时代 。我们经历的一切都是这个星球上前所 未有的。
尽管如此 ，我们潜意识中都会有稀缺心理的残留 ，这种心理一不留神就会跑出来影响我们的选择和决策。
很多人对此不以为然 ，认为稀缺心理让自己养成了节俭的品格 ，所以没什么值得特别反思的 。但你要是知道这种稀缺心理 会使一个人变笨时 ，你是否会更新对它的认知呢？
稀缺心态 ，让人变笨
没有人希望自己变笨 ，但这事有时不可避免 。《稀缺》 一书的作者塞德希尔·穆来纳森曾对印度蔗农做过一次调查 。调查   发现 ，在收获季节前 ，也就是他们经济最拮据的时候 ，蔗农们被眼前最迫切的生计所牵动 ，终日心事重重 。这种状态下 ，他们 总是显得缺乏耐心、 目光短浅 ，无论行动力、 自控力、反应速度 ，还是智商表现都比较差 。而在收获季节之后 ，蔗农有了收
入 ，认知水平和行动能力都会有明显的提升 ，他们不仅情绪平和 ，也能规划长远目标并为之行动。
研究结果显示：在一定的前提下 ，贫穷确实会使人变笨 ，这不是因为贫穷让人能力不足 ，而是因为贫穷造成的稀缺俘获了 人的注意力 ，进而降低了人的心智带宽。
所谓心智带宽 ，就是心智的容量 ，它支撑着人的认知力、行动力和自控力 。心智带宽一旦降低 ，人很容易丧失判断力 ，做 出不明智的选择 ，或急于求成 ，做事缺乏耐心 ，难以抵挡享乐的诱惑。
每个人的头脑配置都差不多 ，但短缺压力会让人多一个后台运行的隐藏程序 ， 虽看不见却消耗着大量的心智资源 ，所以有 人会将剩菜剩饭留到第二天继续吃 ，他们认为这样很节俭；有外债压力的人 ，更容易在辅导孩子写作业的时候对孩子发火；而 终日忧心忡忡的人 ，也很难静下心来学习 。这些现象的出现都是因为当事人心智带宽不足 ， 自己无力考虑长远问题 ，难以保持 耐心和专注 ，在面临选择的时候不自觉地偏向那个最安全、最能快速见效的选项。
不难预见 ，这些短视行为带来的糟糕结果会加剧稀缺心态： 吃剩饭吃坏肚子 ，在医院的花费会远远超过饭菜钱；对孩子发 火会让自己压力更大；而在学习时不停地刷手机 ， 自己会更加忧心忡忡 。恶性循环会增强负面回路 ，让忧者更忧。
可见稀缺只是“变笨”的一种诱因 ，事实上 ，任何能制造压力的事件都会挤占我们的心智带宽 ， 比如明天的演讲、考试的期  限、失业的担忧 ，等等 。只要我们的注意力被某一个巨大的事物吸引 ，我们就有可能进入稀缺状态 ，进而降低心智带宽 ，做出 不明智的行为。
比如当我们在商场听到“五折优惠最后一天 ， 明天恢复原价999元”的推销宣传时 ，就很可能忍不住掏钱包 ，生怕错过这个优 惠 ，而事后才反应过来 ，这东西并非刚性需求。
我们也常戏称“恋爱中的男女智商为零”， 因为热恋中的他们只能看到对方的优点而看不到对方的缺点 ，根本原因其实就是 他们的注意力被对方完全俘获 ， 心智带宽被占用殆尽 。所谓“情人眼里出西施”是对这种现象的另一种表述 ，但本质上就是稀缺 心态导致判断力下降。
急于求成 ，焦虑丛生
如今 ，物质稀缺的影响似乎越来越小 ，很多人担忧的已经不再是吃不饱 ，而是吃得太多了。
以前奢求的事情 ，现在随时可以实现：要信息 ，有搜索；要美食 ，有外卖； 想旅行 ，有高铁； 想学习 ，有资料 ……但如果 我就此断定：稀缺的问题一旦解决 ，人们就会过上幸福快乐的生活 ，你肯定会表示反对 ，毕竟扎扎实实的竞争压力就摆在眼
前。
现代社会虽然给我们提供了更多便利和选择 ， 同时也带来了前所未有的快节奏 ，仿佛一不留神就会落在队伍后面 ，这不由 得迫使每个人加快脚步 ，不自觉地想要更多优势。
光是在校学生的焦虑就可见一斑 。在前来咨询的读者中 ，很多大学生都表示自己当前非常浮躁 ，很难静下心来学习 。当我 问及他们的目标时 ，一位大二女生说 ，她想在短时间内同时学习雄辩术、逻辑学、修辞学、哲学、认知神经科学、教育神经科 学、英语、德语、希伯来语、 日语、人工智能 ，还有精神医学 ……
其实她自己也知道这是个不可能完成的任务 ，但内心的欲望就是这样强烈 ， 因为竞争压力迫使她想要更多 ，不像古时候 ， 一个人一辈子只要专注学好一项技能基本上就可以谋生立足了 。对这位同学而言 ，这么多欲望就像多线程任务同时在电脑中运 行 ， 心智带宽被占用殆尽 ， 自然就没有心力支撑自己的远见、耐心、行动力和自控力了 ，最终只能让自己在痛苦中彷徨 ，甚至 做不好当下的小事。
当然这只是一例个案 ，但另一种现象就比较普遍了 。很多同学或职场人希望在假期或空闲时间提升自己 ，于是把日程安排 得满满当当 ，不留一丝余地 ，结果每次都是“理想很丰满 ，现实很骨感”，不仅实现不了目标 ，反而在娱乐中无法自拔。
这道理其实是一样的： 当一个人同时面临很多任务的时候 ，他的心智带宽就会降低 ，反而没有了行动力和自控力 。有生活 经验的人都会尽量克制自己的欲望 ，在做重要之事的同时主动安排娱乐活动 ，尽量保持日程的闲余——这种方法是科学的、智

慧的。
纵观现代社会 ，焦虑程度最高的其实还是三十岁左右的成年群体 。这个年纪的人之所以焦虑 ，是因为他们正好处在人生的 三个关口： 一是上有老下有小 ， 责任关口出现； 二是前浪未退 ，后浪追击 ，职业关口出现；三是左有钱右有势 ， 比较关口出
现 。一些人浑浑噩噩地走到这个关口 ， 突然发现家庭责任重大 ，职业生涯未 卜 ，而自己昔日的同学、同事却已经一骑绝尘 。他 们猛然惊醒 ，各种焦虑汹涌而来 ， 心里不断回旋着这样的悲鸣：“来不及了！一切都晚了！怎么也赶不上了！ℽ
即使下定决心奋起追赶 ， 自己也很容易陷入盲目尝试、乱学一通、急于求成的陷阱 ， 因此 ，他们在看不到效果的时候就会 马上放弃 ，最终让自己更加焦虑 。这种感觉很不好受 ， 究其原因 ，就是自己陷入了成功稀缺状态 ， 心智带宽急剧降低——既有 人生未知的后台程序 ，又有各种急于实现的多线程任务 。在这种状态下 ，一个人是很难走出来的 ， 因为已经没有资源来支撑他 的远见、耐心、行动力和自控力了。
现在 ， 虽然温饱无忧 ，但竞争加剧 ，而且也有很多附加的困扰 ， 比如我们虽然可以便捷地查阅信息 ，但娱乐信息也无孔不 入地诱惑着我们；我们虽然可以方便地网上购物 ，但无端的欲望也会使自己囤积很多不需要的东西 ……
现代生活虽然缓解了生存压力 ，却又带来了自控上的压力 。抵制诱惑和欲望无一不消耗我们的心智带宽 ，而那些有着大把 时间和金钱的人士 ，如果没有足够的心智带宽 ，也会让自己陷入无聊和空虚之中。
唯有心智富足 ，方能解忧
物质条件无法决定我们的命运 ，真正影响我们的是心智带宽是否富足 。有了富足的心智带宽 ，我们就能在任何环境中拥有 支撑自己的远见、耐心、行动力和自控力 ，在变化的环境中解救自己 。那么如何才能获取心智带宽呢？我想 ，最重要的莫过于 保持自我觉知了 。对此 ，我给大家备上五帖觉知“ 良药”，请各位按需取用。
第一帖 ，保持环境觉知 ，理智选择 。对于有些人来说 ，受影响最大的就是格局和远见 。为了在压力环境中尽可能保持较大 的格局和远见 ，我们就需要运用高级元认知能力保持对环境的觉知 ， 因为在无觉知状态下 ， 心智带宽会受到挤压 ，但在主动觉 知状态下 ，人们就可以承受压力 ，集中心力做出理性的决定。
第二帖 ，保持目标觉知 ，少即是多 。知道自己的人生目标之所以最为重要 ，是因为它直接决定着我们如何使用自己的心智 带宽 。《见识》 的作者吴军曾说：“很多人认为我是个善于利用时间的高手 ， 问我如何才能同时做更多的事情 。事实上 ，我做   事的诀窍恰恰和大家想的相反 ，就是少做事 ，甚至不做事 。我时常站在一生的高度去审视自己真正要做的是什么 ，然后打破思 维定式 ，拒绝所有那些即使不去做天也不会塌下来的事情 。”
这正是“少即是多”的真正内涵 。知道自己想要什么 ，才能免于盲目奔波 ，才能让自己从忙碌中解脱 ，才有时间使用心智带 宽审视自己 ，把更多的精力集中到最重要的事情上去。
第三帖 ，保持欲望觉知 ， 审视决策 。对于一部分人来说 ， 当前最大的压力莫过于过多欲望对心智带宽的冲击 。早上起床就 拿手机体现的是对信息的欲望 ， 囤积物品体现的是对物质的欲望 ，应酬太多体现的是对社交的欲望 ， 吃得太多体现的是对美食 的欲望 ……每一种欲望的萌发都有可能在心智带宽中添加一条运行程序。
细心观察我们就会发现 ，脑子里存在大量任务和念头的时候 ，往往是我们行动力最弱的时候 。所以保持对欲望的觉知 ，及 时地审视它们 ，是清理自己心智带宽的好办法 。我脑袋里一团乱麻的时候 ，就会坐下来 ，拿出笔和纸 ，把心中的念头全部列出 来 。无论是后台隐藏的 ，还是前台运行的 ， 只要把它们清晰地列出来并逐一审视 ， 自己立马就会神清气爽 ，行动力十足。
真正的行动力高手不是有能耐在同一时间做很多事的人 ，而是会想办法避免同时做很多事的人 。这样的人自然不会把自己 的日程安排得太满 ，无论做学习计划 ，还是做工作安排 ，他们都会给自己留足够的闲余 ，让自己从容地面对每一刻。
第四帖 ，保持情绪觉知 ，谨慎决定 。不要在最兴奋的时候做决定 ，也不要在最愤怒的时候做决定 ，尤其是重大决定 。大喜 大悲的时候 ，我们的心智带宽往往很窄 ，判断力也很弱。
除了极端的情绪 ，我们也要及时关注平日里恐惧、担忧、紧张、害怕等各种小情绪 ，并及时将它们清理掉 。一个心智带宽 富足的人 ，也会是一个心平气和的人。
第五帖 ，保持闲余觉知 ， 自我设限 。适当的闲余是我们应对压力和意外的宝贵资源 ，但是过多的闲余可不是什么好事 ，如 果有大量的金钱 ，就容易萌生无谓的欲望；有大量的时间 ，也容易陷入低效的状态 。心智带宽虽足 ，但若不运行有效的人生程 序 ， 自然也是白费。
如果你的人生有如此好运 ，一切都很富足 ，不妨想办法给自己设限 ，适当制造稀缺 ， 以成就自己。</tw-passagedata><tw-passagedata pid="86" name="单一视角" tags="" position="1500,3225" size="100,100">第二节   单一视角： 你的坏情绪， 源于视角单一
1934年 ， 时任美国总统的罗斯福家中失窃 。一位朋友闻讯 ，忙写信安慰他 ，劝他不要太在意 。他回信说：“亲爱的朋友，
谢谢你来安慰我 ，我现在很平安 ，感谢生活 。因为 ，第一 ，贼偷去的是我的东西 ，而没伤害我的生命；第二 ，贼只偷去我的部 分东西 ，而不是全部；第三 ，最值得庆幸的是 ，做贼的是他 ，而不是我 。”
罗斯福先生的自我疏导能力不可谓不强 ，不过在很多人眼里 ，这种鸡汤故事只体现了自我安慰的阿Q精神罢了；而另一些  人认为他之所以想得开 ，是因为他是总统 ，所以大人有大量嘛 。但我不认同这是简单的自我安慰 ，也更愿意反过来推断： 正因 为他具备这种多角度看问题的能力 ，他才走上了总统之路。

事实上 ，在面对各种困境的时候 ， 多角度看问题的能力往往是考验解决问题能力的关键 ，它不仅能帮助人们获取智慧、成 就事业 ，还能帮助人们在生活中拓展格局、化解烦恼 。只是很多人意识不到这一点 ， 习惯用原始的单一视角对待所有问题。
世界是多维的 ，而我们只有一双眼睛
一个周末我外出游玩 ，发现了一辆很酷的挎斗三轮摩托车 ， 随手就拍了一张照片（见图7-1） 。这张照片选用大多数人都   会选择的视角 ，将车身尽收图中 ，用于发朋友圈分享足够了 ，但出于对摄影的喜爱 ，我又蹲下来选了另一个仰拍的角度（见图 7-2）。

图7-1

图7-2
仰拍的视角使图片瞬间生动了起来：
·地面的小花让人仿佛置身于世外桃源； ·干净的天空作背景使车体更加突出；
·车斗和前轮变大 ，车身高于背后的山脉 ，气势尽显 ……
车还是那辆车 ，但我只是蹲下来换了一个角度 ，就得到了完全不同的感受 。不难推断 ，像这辆摩托车一样 ，世界上任何一 个人、任何一件物、任何一件事都是多维立体的 。从每一个角度观察 ，都能得到不同的信息 ，就像我们手中的镜头 ， 只要微微 偏离一点或拉近、拉远 ，屏幕上的图像就会发生变化。
但在现实生活中 ，我们总是以最方便和最习惯的视角去观察事物 ， 比如站在最方便的地方自然抬起手取景 ， 咔嚓一声 ，就 认为自己记录下了全部 ，事实上远远没有 ，我们观察到的仅仅是无数个角度中的一个 。如果不能强烈地意识到这一点 ，我们就

很容易以偏概全地对待这个世界 ，然后产生各种偏误。
所以自古就有“ 日久见人心”的处世箴言 ， 因为时间久了 ，我们就可以在各种场景下多维度地观察一个人 ，观察他生气的时 候、高兴的时候、遇挫的时候、愤怒的时候的状态 ，看他对待弱势群体、富豪权贵的态度 ，看他娱乐消遣、学习自律时的状   态 ……那些习惯从单一角度识人的人 ，往往比较单纯 ，也更容易受伤 ，本质上是因为他们缺乏多角度认知事物的意识。
当然 ，就识人而言 ， 听一个人说话就能大致推断出他的学识和修养水平 。 比如那些对自己的观点、见解异常坚持 ，对别人 的观点又油盐不进的人 ，基本上可以被视为学识浅薄或修养一般的人 ， 因为学识浅薄的人除了自己的原始视角 ，通常很难感知 到其他外部视角 ，所以就会抓着第一判断死死不放 ， 因此 ，其修养表现也不高。
反观那些学识或修养高的人 ，他们表达观点时通常非常谨慎 ，常用“也许”“可能”等表述 。这真不是他们故意谦虚 ，而是因 为懂的越多 ，看到的角度越多 ，就越知道用一句话或一个观点无法把事情描述清楚。
换句话说 ，一个人的性格和脾气好不好 ，也取决于他多角度看问题的能力：视角单一的人容易固执、急躁和钻牛角尖 ，而 视角多元的人则表现得更为智慧、平和与包容。
世界是多维的 ，而我们只有一双眼睛 。我们每一次的观察、表达和行动 ，都只能影响这个多维世界中的一个维度 。明白了 这点 ，我们就能理解这世上没有什么神奇的招数能够解决所有的问题 ，我们接触到的观点、方法通常只适用于特定的角度或范 围。
很多领域的泰斗在针对一个主题洋洋洒洒地写完几十万字的论著之后 ，都会发自肺腑地在书中申明自己的见解非常有限 。 比如《系统之美》 一书的作者德内拉·梅多斯就在前言中写道：“我想告诫大家 ，本书和其他所有书籍一样 ，也存在偏见和不完  整性 。我在本书中阐述的内容可能只是系统思考领域的九牛一毛 ，如果你有兴趣去探索 ，你会发现一个更加广阔的世界 ，而远 不止本书所展现的这个小世界 。”
德内拉·梅多斯对系统的认知已经非常了不起了 ，但她仍如此谦逊 。所以 ，要想让自己变得更平和、更智慧 ，首先要认识 到这个世界的多维性 ，并把这个意识深深地刻在自己的脑子里 ，这样 ，我们方有自我改变的可能。
成为一台更好的相机
用相机的概念来理解多视角真是一个不错的方法 ， 因为它还包含了另一层含义——相机本身的差别。
就像你和我在同一角度拍摄摩托车 ，最终也会得到两张不同的照片 ， 因为我们各自使用的相机的镜头、像素或对焦点可能 都不一样 。所以有些人拍出来的照片不仅视野小 ，颜色偏差严重 ，而且可能是模糊的 ，而有些人拍出来的照片则更真实 。这说 明 ，我们每个人因为生活环境不同、经历不同、学识不同 ，所以在看待同一个问题时 ，理解层次和还原程度也不尽相同。
比如有些人成年后和自己的父母越来越疏远 ， 因为看不惯老一辈人的言论、习惯 ，接受不了他们对自己的关爱（干涉）； 很多儿媳跟婆婆不和睦 ，在带孩子的问题上矛盾不断；很多亲密的夫妻或情侣 ，也常常因为对同一件事存在分歧而相互怄气。 如果我们知道出现这种情况仅仅是因为他们的“相机”和自己的不同 ，就很容易明白他们其实并非存心与我们作对 ，甚至他们已 经尽了自己最大的努力。
如果你确定自己的相机比他们的更高级 ，那就应该有“向下兼容”的意识——要么对其一笑而过 ，要么拿出自己的高清照
片 ，耐心地向他们讲解什么是更好的 ，而不是一味地指责对方拍出来的东西很糟糕 。毕竟低层的事物不会也不能向上兼容 ，但 我们通过引导 ，让它们不断升级倒是有可能的 。如果自己也曾有一台“落后的相机”，那就更应该体会和包容对方的立场。
在“相机”这件事情上 ，我们一定要保持觉知 ，要清醒地意识到自己的视角偏误 ， 时刻做好向上升级、向下兼容的准备 。拥 有这种心态 ，不仅我们自己能越来越完善 ，还能与其他人都合得来。
总有一个更好的视角
每个人都是生活的摄影师 ，不同的是有的人拍出来的照片更好看 ，而有的人拍出来的则很普通 ，尽管他们的拍摄对象是相 同的 。好的摄影师总能找到更好的角度 ，他们更善于移动自己 ， 围着“摩托车”（拍摄对象） ，尝试各种角度 ，最后选一个最佳  视角。
罗斯福就是一个很好的“摄影师”，他在损失了巨额财物之后竟能找到三个非常积极的视角 ，让自己尽快从悲伤的情绪中走 出来 。换作其他人 ，很可能“拿”着那张视角最惨的“照片”悲叹不止。
所以 ，不要被原始视角束缚 ，主动转换视角可能会看到一个新天地。 视角不同 ，选择也会不同。
·同样是半杯水 ，有的人哀叹“只有半杯了”，而有的人惊喜于“竟然还有半杯”；
·同样是挫折 ，有的人沉浸在悲伤中无法自拔 ，有的人则认为挫折是上天给自己成长的提示；
·同样是工作 ，有的人认为自己是在给老板干活 ，所以能偷懒就偷懒 ，有的人认为一切工作都是为了锻炼自己 ， 即使没有 回报也愿意尽力投入。
无论你当前处于何种情绪旋涡 ， 只要自己愿意 ，总能找到更好的角度 。只是有的人面对再好的事情时都盯着一点瑕疵不 放 ，而有的人却能从任何一件糟糕的事情中找到闪光点并放大 ，忽视其他不足之处。
孰优孰劣 ，孰喜孰悲 ，一目了然！

大师修炼之路
每个人都希望做一个好的“摄影师”，拍出精彩的“照片”，但成为一个好的“摄影师”是需要练习的 。这么多年 ，我们都习惯用 原始的单一视角看问题 ， 时间长了便形成了“路径依赖”。就像孩子不听话时 ，我们的第一反应通常是生气吼骂 ，而不是耐心地   让他说出真实想法； 下属没做好工作时 ，我们的第一反应往往是批评责备 ，而不是心平气和地让他说出真实原因 ……我们常常  意气用事 ，缺少自我审视 ， 时间长了都不知道自己为什么这么容易生气。
《反本能》 一书的作者卫蓝曾这样描述路径依赖： 当我们长期进行一种行为的时候 ，大脑会慢慢形成一个专门处理这个行 为的“绿色通道”，所以当自己面临相似的场景时 ，大脑会对这种行为进行优先选择 ，并进一步形成自动化反应。
这就是为什么当我们遇到烦心事的时候 ，会习惯性地启动情绪上的防御模式并陷入单一视角 ，而不是启动理智上的分析模 式进入多维视角 。要想拥有多视角能力 ，就要进行刻意练习 ，直到形成新的路径依赖 。好在这样的练习并不难 。遵守下面几个 原则 ， 自己就能逐渐摆脱单一视角的限制 ，成为生活的“摄影大师”。
一是勤移动 。顾名思义 ，就是多移动你的“相机”机位 ，尝试用不同的视角看问题 。 比如设身处地地站在孩子的角度、老人 的角度、对手的角度看问题 ，而不是仅凭自己的感受就直接认定孩子不懂事、老人不体谅、对手不讲理。
在焦虑、紧张的时候 ，不妨假设自己是一个局外人 ，用第三视角来观察自己 ，你会发现自己的很多担心其实是多余的 ， 因 为别人并不是那么在乎你 。如果陷入悲伤 ，无法自拔 ，那就假设自己处于十年之后 ，用未来视角反观现在 ，你会发现当下的悲 伤没有任何意义 ，还不如收起情绪好好干活。
这种多视角观察的能力其实就体现了元认知能力 。有了元认知 ，我们更容易在自我观察上保持觉知 ，进而在语言表达上也 体现出“高情商”的特质 。 比如 ，我们不会随口说出刻薄难听的话 ，尽管自己可能确实很想说 ，但在话说出口之前 ，我们会在脑  子里估计从各个角度听到这句话后的感受和反应 ，然后选择一个最佳角度 ，让所有人都觉得得体、舒适 。和这样的人相处 ，又 有谁会愿意给他添堵呢？
二是善学习 。有些时候我们之所以看不到一些角度 ，是因为自身学识不够 ，不知道有那个视角存在 ，所以要多学习 ，借助 高人的视角来观察世界 。很多优秀的书籍和文章都展现了作者看待问题的独特视角 ，你若摘取 ，便能向高人学习。
三是要开放 。更准确地说是保持客观、不臆断 。很多人情绪不好 ，是因为他们把自己做的假设当成了事实 ，在不确定对方 真实想法的情况下 ，直接把情绪发泄了出来 。想要情绪平和 ，就是要在交流时不戴有色眼镜 ，不带主观色彩 ，先想办法了解事 实 ，搞清楚对方到底是怎么想的 ，这一点非常重要 。无论是面对孩子、面对同事 ，还是面对下属和老板 ，都要秉持这样的态
度 。如果先入为主地抱持自己的单一观点 ，就很难保持开放的心态去接受客观真相。
在这一点上 ，《美好人生运营指南》 一书的作者一稼提供了很好的经验 ，她说自己和老公相处时是这样处理情绪的。
第一步 ，忘我地聆听对方的想法 。过程中没有判断、没有辩论、没有对错 ，把自己完全置身在对方的位置 ， 以对方的眼睛 来看世界；第二步 ，从“我”的角度来分享 ，过程中只说自己的客观感受 ，而不指责对方或告诉对方该怎么做 。 比如 ，说“家里满 地臭袜子 ，我觉得精神紧张 ， 心里很不舒适”，而不是“家里满地都是臭袜子 ，你不觉得难受吗”。
好的交流都是客观的、不带主观猜测的交流 ，这样才会让双方都摆脱“战斗模式”。如果一个人在不明就里的情况下把负面 情绪发泄出来 ，就会把其他人也带入单一视角 ，要么被压制 ，处于恐惧中；要么反抗 ，双方都受伤。
吴军的想法更明智 ，他说：“我对任何人 ，一般都先假设他是正直、善良和诚信的 。”以开放引导开放 ，是为高级 。这也是 我推崇的交流方式。
四是寻帮助 。我读过一些飞行员在空中处理特殊情况的操作手册 ，发现所有处置方法的第一步几乎都是一样的：报告塔台 指挥员 。我一直不明白为什么在紧急万分的情况下 ，飞行员不先集中精力处理特殊情况 ，却要先向指挥员报告呢？这不是浪费 时间吗？直到思考“多角度看问题”这个主题的时候 ，我才明白 ，原来出现特殊情况时 ，飞行员的注意力会被巨大的危险所俘
获 ， 心智带宽降低 ，容易陷入单一视角 ，而此时 ，指挥员可以给飞行员提供有效的外部视角 ，帮助他们更好地处置特殊情况。
同理 ， 当我们对情绪问题或工作问题百思不得其解的时候 ，不要一个人闷头苦想 ，要学会主动寻求外部帮助 ，借助他人的 多维视角来克服自己单一视角的局限。
五是多运动 。适当的有氧运动会提升我们体内多巴胺的水平 ，而多巴胺对于创造力和多角度思考能力来说都很重要 。锻炼 不仅能帮我们从负面情绪中快速走出来 ，也会引导大脑从新的角度看待事物 ，或者从不同角度观察问题 ，所以 ，越是心情不好 的时候就越要多运动 ，越是想不通的时候越要多运动。
六是常反思 。《人生护城河》 一书的作者张辉曾提到这样一段化解情绪的经历。
去年10月某天 ，我在公司开了一天会 ，还吵了一架 ， 晚上回到家已是10点多 ，但是余怒未消 ，此时还没有写当天承诺要写 的文章 。怎么办？我干脆开始写自己生气的感觉 ， 因为那个时候 ，愤怒占据了自己的内心 ，容不得其他任何想法 。于是开始写 生气的细节 ，写为什么生气 ，写到一半的时候 ， 突然释然了 。我发现我可以站在另外一个角度去理解与我吵架的这个人 ，理解 立场和处境 ，也看到了自己视野的盲区 。一旦能换个角度看问题 ， 自己内心的气就消了一半 ，所以后面的行文完全变成了一种 释然 ，写完文章后 ， 内心无比放松 。这是我从未期待的效果：通过写作抚平自己的内心 ，给自己带来一次心灵的舒缓 ，这不是 任何劝慰能起到的效果。
这种经历我也经常有 ， 因为我有每日反思的习惯 。所以每当自己心情郁闷、无法排解的时候 ，我就会打开电脑 ，把心中的 烦恼全部倒出来进行复盘 ，梳理的过程中 ， 自己往往会拨云见日 ，真的很神奇。
无论什么时候 ，你的笔或键盘都能帮你跳出单一视角 ，看到更多维度。
</tw-passagedata><tw-passagedata pid="87" name="自控力" tags="" position="1575,2675" size="100,100">第二节    自控力： 我们生而为人就是为了成为思维舵手
如果没有元认知 ，我们将不能自称为“人”； 如果元认知能力不强 ，我们也很难从人群中脱颖而出 。元认知能力如此重要 ， 以至于被称为人类的终极能
力 。那如此重要的能力仅仅是如前文所说的自我觉察吗？不是 。 自我觉察只是元认知能力的基本盘 ，在实际生活中 ，元认知能力还能在自我控制方面提供强 大的指导 ，可以说 ，元认知能力就是觉察力和自控力的组合 。所以从实用角度讲 ，元认知能力可以被重新定义为： 自我审视 、主动控制 ， 防止被潜意识左右 的能力。
我们天然被潜意识左右
或许你对“ 自我审视 、主动控制”这句话不以为然 ，认为自己随时可以自我审视 ，可以轻易控制自己的所思所想和言谈举止 。如果你持有这种想法 ，那你 可能只是简单地理解了字面意思 ，不信我们重新体会一下以下场景。
早上醒来时 ，我们的第一反应通常都是不假思索地去拿手机 ，这种不需要思考就能做出的习惯性反应 ，就来自潜意识的左右 。实际上 ，这个时候我们最 应该做的事情是起床 、穿衣服 、洗漱 ，等一切收拾妥当了再来查看信息 ，否则很可能受各种信息的牵引去看这个 、看那个 ，最后 ，几十分钟过去了 ，人还在 被窝里 。在这一刻 ，我们有自我审视和主动控制的能力吗？好像没有。
让我们把时间拉长到一天这个跨度上去看看 。很多人经常会在一天临近结束的时候发出灵魂拷问：我这一天都干了什么？最重要的事情好像没做多少 ， 乱七八糟的琐事却做了一大堆！ 当下幡然醒悟 、痛下决心 ，提醒自己从明天开始一定要先做最重要的事 ，但是第二天又不知不觉地陷入了这种怪圈 。这个时 候 ，我们似乎依旧被潜意识支配 ，无法自控。
现在我们再把时间拉长到做成一件事或实现人生目标的跨度上 。很多人为了获得美好的人生 ，常常给自己立下早起 、跑步 、阅读 、写作等目标 ，但是没 过几天就放弃了 ， 因为那些目标大多是受大环境影响而跟风设定的——别人说好 ， 自己也想要 ，但实际上 ， 自己并不需要 。仔细想想就会发现 ，这仍然是我 们的第一反应 ，是潜意识在左右我们 ，我们并没有真正进行自我审视和主动控制。
可见 ，从当下 ，到每天 ，再到一生 ，我们都天然被潜意识左右着。
成长就是为了主动控制
我们刚出生的时候 ，理智脑还没有发育完全 ，其战斗力约等于零 ，这个时候 ，我们只有本能 。你看小宝宝 ，别人给他看什么 ，他就会被什么吸引 ，他们 的注意力都是被外界吸引的 ，他们的行为也完全由天然的本能左右。
随着我们不断长大 ，大脑的前额皮质开始发育 ，理智脑的战斗力才慢慢增强 。不过理智脑的战斗力其实表现在两方面：一方面是侧重学习 、理解 、记 忆 、运算的认知能力 ， 即我们在校学习时主要锻炼的部分 ，另一方面则是侧重观察 、反思 、判断 、选择的元认知能力（见图3-3）。

图3-3   普通认知与元认知是理智脑战斗力的两个表现
遗憾的是 ，我们大多数人虽然在学校集中锻炼了认知能力 ，但对元认知能力的锻炼却很少涉及 。这也是很多人活了几十岁依然执行力不强 、专注力不
够 、意志力不足的原因 。所以 ，一个人要想掌握命运之船的风帆 ，就必须主动 、刻意地锻炼自己的元认知能力 ，让理智脑更多地参与大脑的决策 ，掌握大脑 的主导权 ，这样 ，我们就会比一般人走得更快 、更远。

在这个主导权易手的过程中 ，一个人会表现出的明显特征是： 能够主动控制注意力 ，不会被随机 、有趣的娱乐信息随意支配 。比如 ， 当我们漫步街头 时 ，元认知能力弱的人总会被路边的音乐 、屏幕广告 、叫卖声或突发事件轻易地吸引 ，而元认知能力强的人则会花那么一两秒去思考这事值不值得关注。
在小马宋的《朋友圈的尖子生》这本书中 ，主角之一的刘丹尼说过这样一个观点：“教育的意义就是教你在遇到一件事的时候如何看待它 。当你对这件 事进行反应的时候 ，总是有你自己的天性在里面 ， 比如说有人骂你 ，你就想骂回去 ，但是你在这个反应当中会有一个哪怕是零点几秒的间隔去思考或者审  视 ，这个间隔就是你获得的教育或者经历的意义 。”这段话非常好地阐释了元认知能力在大脑决策中的作用 ，就是这个零点几秒的间隔 ，对我们来说非常关 键。
所以你现在很容易就能想明白：为什么抖音 、快手等短视频App让人看得根本停不下来？ 因为一个视频结束后系统会立即自动跳到下一个 ，在整个过程 中 ，大脑都被本能和情绪劫持 ，理智脑根本没有主动启动的机会 。如果你希望自己能从娱乐中抽身 ， 只需提前告诉自己：“这个视频结束后暂停几秒 。”一旦 理智脑拥有了审视和反思的时间 ，我们通常都能控制住自己。
在生活中更是如此 。早上醒来时 ，如果能有几秒的时间用来思考 ，我们就可能在起床和看手机之间做出更好的选择；看到微信有未读消息提示时 ，如果 能先停留几秒 ，我们就可能决定先去做重要的事 ，而不是点击那个小红点 ……总之 ，每当遇到需要选择的情况时 ，我们要是能先停留几秒思考一下 ，就有可 能激活自己的理智脑 ，启用元认知来审视当前的思维 ，然后做出不一样的选择。
种种迹象表明 ，那些有影响力的杰出人士与普通人的差距普遍体现在元认知领域 ，前者总是能在大大小小的选择关口上 ，展现摆脱潜意识支配的能力 ， 从而尽可能地观察与思考身处的环境 、 自己的行为 、与他人的关系等 ，给出有理有据的见解 ，做出更好的选择 。比如 ，有的人能看到事物更多的意义 ，赋予 目标强烈的价值 ， 因此他们比其他人的专注力 、执行力和意志力更强；有的人能觉察他人的想法 ，克制自己的言行 ，从而显得情商更高 。他们真正的竞争力 不在于学习能力 ，而在于强大的元认知能力 。很多学习能力 、运算能力超强的学霸 ，他们的理智脑虽然同样强大 ，但未必能过好自己的人生 。所以 ，我们要 想办法锻炼自己的元认知 ，就像锻炼我们的肌肉一样 ， 只要经常锻炼 ，它们就会越来越强 ，能被轻易激活。
当然 ，这并不是一件容易的事情 。我们在生理锻炼上需要花多少心力 ，在认知锻炼上也需要花费同样的心力 ，并且要持续练习 ，还需要方法的指导 。好 在方法并不难 ，那就是：一定要在选择节点上多花“元时间”。
成为自己人生的思维舵手
“元时间”是我自创的概念 。这是一个极好的概念 ， 因为一天24小时看起来每分每秒都一样 ，但实际上并不相同 ，有些时间的权重要远远大于其他时间， 我把这些权重大的时间叫作“元时间”。
元时间通常分布在“选择的节点”上 ， 比如一件事情 、一个阶段或一天开始或结束时 。善用这些时间会极大程度地优化后续时间的质量 。换句话说 ，所有 面临选择的时间节点 ，都可以被称作“元时间”。我们不能在这个时候丧失主动权 ，任由本能左右自己进入下一个阶段 ，尤其是在面对诱惑或困难的时候 。那 么 ，在“元时间”内我们要做什么呢？很简单 ，就做一件事：想清楚。
如果不在这些选择的节点想清楚 ，我们就会陷入模糊状态 ，而模糊是潜意识的领地 ，它会使我们产生本能的反应——娱乐 。所以 ，基本的应对策略便 是 ：在选择的节点审视自己的第一反应 ，并产生清晰明确的主张。
比如我们希望成为一个会说话的人 ，那么遵守一个原则：想两遍再说 。脱口而出的话往往出自本能 ，如果我们能在那句话说出口前先停一两秒 ，用理智 脑再审视一遍 ，或许马上就会改变主意 、换一种说法 ，甚至选择保持沉默 ，毕竟有时候最好的回答就是不回答。
同样 ，早上醒来的那一瞬间 、拿起手机的那一瞬间 、回到家的那一瞬间 ……我们都要面临新的选择 ，要主动消耗脑力去审视它们 。虽然这样做会更累， 但这正是锻炼元认知能力的最佳时机 ，就像是在举思想哑铃 ，让自己的理智脑变得更强大。
要想清楚 ，不仅要审视第一反应 ， 同时还要有清晰明确的主张 。比如到了周末 ，我们的第一选择可能是睡懒觉；在觉察审视之后 ，我们可能改用这个时 间来学习 。但这时我们的选择还是模糊的 ， 因为平时那些想做但没时间做的事情都堆在了一起 ， 既想读这本书 ，又想读那本书 ，还想写文章 、锻炼 ，等等 。 由于每件事的权重似乎都差不多 ，最后反而在犹豫不决中浪费了时间 。很明显 ，这不是元认知能力强的表现 ， 因为自己又在多选项前悬而不决 ，处于模糊状 态了。
元认知能力强的一个突出表现是：对模糊零容忍 。换句话说 ，就是想尽一切办法让自己找出那个最重要的 、唯一的选项 ，让自己在某一个时间段里只有 一条路可以走 。这道理很简单 ， 既然权重都差不多 ，那么做哪件事都没有损失 。犹豫不决 ，什么都想做又什么都做不好 ，才是最大的损失。
我们可以回想一下 ， 自己行动力弱的时候 ，脑子里对未来的具体行动肯定是模糊不清的 。在这个时候 ，最好的自救方法就是把所有想做的事情都列出 来 ，进行排序 ，找出最重要的那件事 ，让脑子清醒。
模糊 ，不仅需要在这些小事上消除 ，在选择人生目标等大事上也是如此 。现实生活中 ，我们总是想都不想就一头扎进具体事情里 ，对什么事情更重要、 什么事情最重要 、做这件事对自己到底意味着什么等长远意义却极不清楚。
比如 ， 阅读在你眼中可能只是用眼睛扫描文字 ，快速地把这本书扫完 ，而在有些人眼里 ， 阅读就是和高层次的人聊天 ，他们赋予阅读这样的意义 ， 内动 力就会完全不同 。若是看不清意义 ，我们就会陷入“别人说好 ， 自己也想要”的状态 ，于是什么都想学 ，还想马上看到效果 ，最后自然是盲目投入行动 ，却什  么也做不成 ，进而变得更加焦虑。
焦虑的人很少有“元时间”的意识 ，他们习惯不动脑子 、直接行动 ，喜欢用饱和的行动来感动自己 ，想与做的时间配比差距悬殊 ，他们甚至连一丁点儿深 入思考的时间都不愿意花 ，任由本能欲望让自己迷失在自我满足的行动里。
被“ 自动驾驶”确实轻松 ，但这样 ，我们只能看着路边的风景从眼前飞驰而过 ，却不知道自己要去哪里 ，最终又会到哪里 。如果一直处于这种不可控的人 生状态 ，那就悲哀了。
综上所述 ，成为思维舵手有3种方法。
·针对当下的时间 ，保持觉知 ， 审视第一反应 ，产生明确的主张；
·针对全天的日程 ，保持清醒 ， 时刻明确下一步要做的事情； ·针对长远的目标 ，保持思考 ，想清楚长远意义和内在动机。
元认知能力强的人就是这样：无论是当下的注意力 、当天的日程安排 ，还是长期的人生目标 ，他们都力求想清楚意义 、进行自我审视和主动控制 ，而不 是随波逐流。
如果人生是大海 ，那我们每个人都是一条小船 ，元认知能力强的人会时刻掌握方向舵 ，主动控制生命之船的航向 ，而元认知能力弱的人总是喜欢待在甲 板上当个忙碌的水手 ，至于船嘛 ，漂到哪里算哪里 ……
高尔基曾经说：每一次克制自己 ，就意味着比以前更强大 。我以前不是很理解这句话的意思 ，但是现在懂了 。因为每克制自己一次 ，就相当于进行了一 次自我审视和主动控制 ，相当于进行了一次锻炼 。元认知能力要是能经常锻炼 ，我们理智脑的自控力可不就越来越强大了嘛！
[1] 《尚书·泰誓上》 中写道：“惟天地万物父母 ，惟人万物之灵 。”指人是世上一切物种中最有灵性的 。——编者注
[2]心灵代表或呈现事物 、属性或状态的能力 。——编者注
</tw-passagedata><tw-passagedata pid="88" name="模糊" tags="" position="1425,2550" size="100,100">第一节   模糊： 人生是一场消除模糊的比赛
机器人与人最大的区别是什么？ 机器人没有潜意识。
它的每一个动作 ，包括转动“躯体”、弯曲“手指”、提高“说话”的音量等 ，在其“大脑”中都由精确的数值控制 ，一旦断电 ，机器人就会停止工作 。但 人不同 ，人若是晕厥、失去了意识 ，虽然会瘫倒在地 ，但心跳、呼吸、消化等功能并不会立即停止 ， 因为它们受潜意识控制 ， 除非物理死亡 ，否则潜 意识永远不会消失。
如果和机器人一样 ，用数值控制每一块肌肉、调节每一种激素、处理每一个神经信号 ，那么人根本无法存活 ， 因为即使是举手投足这种看似简单 的动作 ，大脑需要处理的信息都是海量的 。为了更好地生存 ，进化之手巧妙地采用了意识分层的手段 ，它让潜意识负责生理系统 ，让意识负责社会系 统 ，如此分工 ，意识便得到了解放 ，可以全力投入高级的社会活动 。[书ji分 享V 信wsyy 5437]
这就是进化的力量 。然而进化是一把双刃剑 ，意识分层在给人类带来巨大好处的同时也带来了副作用——模糊 。因为处理各种信息的速度不对
等 ，意识很难介入潜意识 ，而潜意识却能轻易左右意识 ，所以人们总是做着自己不理解的事 ， 比如明明想去学习 ，结果转身就拿起了手机； 明明知道 有些担忧毫无意义 ，却总是忍不住陷入焦虑 ，就像身后有个影子 ，它能影响你 ，但你不知道它是什么 ， 回头看去一片模糊 。这种模糊让人心生迷茫和 恐惧 ，而迷茫和恐惧又使我们的认知、情绪和行动遭遇各种困扰 ，继而影响人生的走向。
模糊 ，正是人生困扰之源 。而人生也像是一场消除模糊的比赛 ，谁的模糊越严重 ，谁就越混沌；谁的模糊越轻微 ，谁就越清醒。
学习知识 ，消除认知模糊
人的认知能力需要从零开始积累 ，而潜意识却一直存在 ，所以我们需要终身学习 ， 因为掌握的工具越多 ，认知能力越强 ，消除模糊的能力就越
强 。正如你知道了“元认知”，就知道了该如何反观自己；知道了“刻意练习”，就明白了如何精进自己；知道了“运动改造大脑”，就清楚了如何激发自己 的运动热情 ……领域内的精英无不是比其他人了解的知识更多 ，他们的盲区更小 ，认知更清晰 ， 因而也更有影响力。
不幸的是 ，人类天生不喜欢学习和思考 ， 因为这类事极其耗能 。在漫长的进化过程中 ，生命的首要任务是生存 ，于是 ，基因自我设计的第一原则 是节能 ，凡耗能高的事情都会被视为是对生存的威胁 。而潜意识没有思维 ， 只有本能 ，它会努力让身体走低能耗路线 ，诱导我们娱乐、享受 ，所以本 能通常都是阻碍学习的 ，而人若不学习 ，又无力克服本能 。这个怪圈使我们在人生的初始阶段必然陷入混沌 ，若非外力压迫或牵引 ，我们往往很难跳 出。
好在时代的发展为我们提供了更多的学习机会和更好的学习环境 ，我们主动进入反本能成长的可能性也越来越大 。有意思的是 ，学习知识的目的  是“消除模糊”，而获取知识的方法也是“消除模糊”， 目的和方法相统一 ，这几乎成了这个世界上所有能人共同遵守的学习法则 ，这类例子能举出很多， 比如：
·《思考力》一书的作者上田正仁提示：思考力的本质就是“丢弃所有已经消化的信息 ，让问题的核心浮出水面”； ·《刻意练习》 中的核心方法论是：不要重复练习已经会的 ，要不断寻找那些稍有难度的部分；
·《原则》一书的作者瑞·达利欧罗列了工作和生活中的原则 ，用以清晰地指导自己行事；
·《超越感觉》一书告诉我们 ，想拥有清晰的逻辑 ，就坚持一点：凡事不要凭模糊的感觉判断 ，要寻找清晰的证据。 种种现象都在告诉我们一个事实：提升思考能力的方法正是不断明确核心困难和心得感悟 ，并专注于此。
而现实中 ，很少有人能清醒地意识到这一点 。人们总是习惯在模糊区打转 ，在舒适区兜圈 ，重复做已经掌握的事情 ，对真正的困难视而不见 ，这 背后都是潜意识在操控——因为基因认为这样做耗能更低。
优秀的人更倾向于做高耗能的事 ， 比如“学霸”的秘诀往往在他们的错题本上——他们更愿意花时间明确错误 ，并集中精力攻克 。而学习成绩一般的 同学更喜欢勤奋地重复已经掌握的部分 ，对真正的困难选择睁一只眼闭一只眼 ，希望能够搪塞过去 ，结果模糊点越积越多 ， 以致无力应付 。不难发
现 ，“学霸”和普通同学之间的差异不仅体现在勤奋的程度上 ，还体现在努力的模式上：谁更愿意做高耗能的事——消除模糊 ，制造清晰。
消除模糊之于学习和认知的意义 ，不可不察。
拆解烦恼 ，消除情绪模糊
认知模糊来自内部 ，而情绪模糊来自外界 。人们每天都会面临各种烦恼 ，但多数人习惯被动承受 ，少有人乐于主动面对 。德国心理治疗师伯特·海 灵格曾这样描述人们对烦恼的态度：受苦比解决问题来得容易 ，承受不幸比享受幸福来得简单 。这极符合人类不愿动脑的天性 。因为解决问题需要动  脑 ，享受幸福也需要动脑平衡各种微妙的关系 ，而承受痛苦则只需陷在那里不动 。虽然被动地承受痛苦也会耗费很多能量 ，但在基因的影响下 ，人就  是不喜欢主动耗能 ，所以美团创始人王兴的这句话引起了很多人的共鸣： 多数人为了逃避真正的思考 ，愿意做任何事情。
然而回避痛苦并不会使痛苦消失 ，反而会使其转入潜意识 ，变成模糊的感觉 。而具体事件一旦变模糊 ，其边界就会无限扩大 ，原本并不困难的小   事 ，也会在模糊的潜意识里变得难以解决 。这感觉就像在听池塘中“无数只青蛙”的叫声 ，让人心烦透顶 ，等到实在忍不住了、跑去一看究竟时 ，却发现 其实只有几只青蛙。
真正的困难总比想象的要小很多 。人们拖延、纠结、畏惧、害怕的根本原因往往不是事情本身有多难 ，而是内心的想法变得模糊 。就像在3 000米 跑步考核开始前 ，那种不知名的恐惧会让人紧张得全身发抖 ，而我们一旦开跑、不得不与这种恐惧正面交锋时 ，就会发现3 000米考核也不过如此 。如 果我们再积极些 ，学会从一开始就主动正视它、拆解它、看清它 ，或许那种紧张就不困扰自己了 ，我们甚至能从容地“享受”比赛。
但有些事一旦进入潜意识 ，可能很难消除 ， 比如童年的不幸经历 ，虽然意识早已将其淡忘 ，但潜意识却始终保留着这些印记 ，并隐蔽地影响着我 们的性格和行为 。一些严重抑郁或精神失常的患者有时需要接受催眠治疗 ，而心理催眠师在治疗时使用的一切手段其实都只为做成一件事： 唤醒潜意 识里的痛苦事件 ，让患者重新面对它、看清它、从而将其彻底化解。
记住 ，任何痛苦事件都不会自动消失 ，哪怕再小的事情也是如此 。要想不受其困扰 ，唯一的办法就是正视它、看清它、拆解它、化解它 ，不给它 进入潜意识的机会 ，不给它变模糊的机会； 即使已经进入潜意识 ，也要想办法将它挖出来 。所以 ， 当你感到心里有说不清、道不明的难受的感觉时 ， 赶紧坐下来 ， 向自己提问。
·到底是什么让自己烦躁不安？是上台演讲、会见某人 ，还是思绪纷乱？
·具体是什么让自己恐惧担忧？是能力不足、准备不够 ，还是害怕某事发生？
·面对困境 ，我能做什么？不能做什么？如果做不到或搞砸了 ，最坏的结果是什么？
一层层挖下去 ，直到挖不动为止 。坦然地承认、接纳那些难以启齿的想法 ，让情绪极度透明 。虽然直面情绪不会让痛苦马上消失 ，甚至短时间内

还会加剧痛苦 ，但这会让你主导形势 ，至少不会被情绪无端恐吓。
恐惧就是一个欺软怕硬的货色 ，你躲避它 ，它就张牙舞爪 ，你正视它 ，它就原形毕露 。一旦把它看得清清楚楚 ，情绪就会慢慢从潜意识中消散， 你的生活将会舒畅无比。
里清外明 ，消除行动模糊
认知清晰 ，情绪平和 ，最终还要行动坚定 。很多人把行动力不足的原因归结为环境干扰或是意志力弱 ，其实 ，行动力不足的真正原因是选择模 糊。
所谓选择模糊 ，就是我们在面对众多可能性时无法做出清晰、明确的选择 。这样的情况很常见 ， 比如当你心中有很多欲望、脑中有很多头绪 ，或   者拥有可自由支配的时间时 ，你就会进入“既想做这个 ，又想做那个； 既可以做这个 ，又可以做那个”的状态 ，就像自己始终站在十字路口 ，却不知道该 往哪里去 ，从而使自己陷入一种不确定性之中。
选择模糊就是一种不确定性 ，而人类面对不确定性时会不自觉逃避 ， 因为在远古时代 ，我们的祖先看到草丛在动但又无法得知那里面是什么时，
就会产生很强的心理应激反应 ，来防范随时可能跳出来的狮子 。为了活命 ，“逃避不确定性”就被写入了我们的基因 ，所以 ， 当我们的头脑中有很多模糊 的选项时 ，我们就会不自觉地选择那个最清晰、简单和确定的选项 。也就是说 ， 当我们没有足够清晰的指令或者目标时 ，就很容易选择享乐 ，放弃那   些本该坚持但比较烧脑的选项。
因此 ，在现代生活中 ，要想让自己更胜一筹 ，就必须学会花费更多的脑力和心力去思考如何拥有足够清晰的目标 。我们要把目标和过程细化、具 体化 ，在诸多可能性中建立一条单行通道 ，让自己始终处于“没得选”的状态。[1]
总之 ，人生就是一场消除模糊的比赛 ，我们比拼的不仅仅是成长的速度 ，还有成长的模式 。在这条赛道上 ，领先的群体都有意无意地做着同一件 事 ：消除认知、情绪和行动上的模糊。
消除模糊需要主动反本能 ，所以这必然是一条更难走的路 。不过你也无须害怕 ，鼓起勇气面对就好了。</tw-passagedata><tw-passagedata pid="89" name="感性" tags="" position="1575,2550" size="100,100">第二节   感性： 顶级的成长竟然是“凭感觉”
人类生存于世 ， 比拼的是脑力思维 ，但极少有人知道 ，我们的身体里还有一个更高级的系统 ，若能善用 ，成就非凡。
1941年 ，德军对英国本土进行了猛烈的空袭 ，英国首相丘吉尔经常在夜晚坐车前往防空阵地视察 。一天晚上 ，他检查完一个阵地后准备离开 。当 助手准备为他打开车门时 ，丘吉尔却绕到了汽车的另一边 ，打开另一扇车门坐了进去 。不一会儿 ，一颗炸弹从天而降 ，在汽车附近爆炸 ，差点儿把丘 吉尔的车掀翻；如果从助手打开的那扇门上车 ，丘吉尔可能就丧命了 。事后 ，妻子问丘吉尔为什么要换到另一边坐 ，丘吉尔答道：“当我就要上车时， 有个声音对我说‘停下 ’。上天似乎叫我打开另一扇车门坐进去 ，于是我就照办了 。”
故事讲到这 ，肯定有人会说：“周岭 ，你不是向来讲科学、理性吗？难道这种事情你也相信？”各位少安毋躁 ，我既然引用了这则故事 ， 自然是相信 的 ，后面肯定会给出合理的解释 。不过在解释之前 ，我还要给大家讲个更广为人知的故事 ，主人公也是一位著名的领导者——美国总统林肯。
林肯的一位朋友曾向他推荐一位阁员 ，等见过面后 ，林肯却没任用他 。朋友来问原因 ，林肯说：“我不喜欢他的长相 。”朋友说：“你怎么能以貌取 人？这也太苛刻了 ，他不能为自己天生的面孔负责啊 。”林肯回答道：“不 ，一个人过了40岁就应该为自己的面孔负责 。”
怎么样？两位著名人物竟然都如此感性 ，仅凭感觉就拍板做出了重要的决定 ，你确定不想了解一下感性的相关知识？
潜意识的智慧
在之前的内容里 ，我一直强调理性的重要性 ，并把模糊的感性归入需要克服的天性的范畴 ，但这次我要为感性正名。
为了方便理解 ，我把理性表述为意识 ，把感性表述为潜意识 ，事实上它们就是这么回事 。不过对于潜意识 ，学术界看法不一 ， 比如弗洛伊德认为   潜意识是“危险地带”，里面蕴藏着邪恶 ，它会让人遵从原始欲望回到野蛮状态；但心理学家荣格认为潜意识是智慧的 ，它包含了很多理性无法涉及的东 西 ，甚至包含了人类的集体智慧。
到底孰对孰错呢？现代科学研究认为二者各对了一半 。潜意识没有思维 ， 只关心眼前的事物 ，喜欢即刻、确定、简单、舒适 ，这是属于天性的部   分 ， 同时 ，它处理信息的速度又极快 ，至少可达11000 000次/秒 ，能极其敏锐地感知很多不易察觉的信息 ，这是属于感性的部分 。而意识 ， 即我们的理 性思考 ，处理信息的速度只有40次/秒 ，潜意识是它的275 000倍 ，二者的能力有着天壤之别。
这就好比两个人同时从北京去天津 ，一个人是慢悠悠地散着步去的 ，而另一个人则是坐着火箭去的（飞机和高铁都无法表示这个差距） 。这种快   慢对比就会造成“认知错位”——很多信息早已被潜意识察觉到 ，但意识仍一无所知 。比如当你第一次见到某人时感到些许不适 ，很快你就露出了礼貌的 微笑 ，这表明潜意识察觉到了一些不良信息 ，但这个过程转瞬即逝 ，思维根本察觉不到 ，反而给出一大堆分析和理由 ，让自己接受对方 ，结果往往事   与愿违 。所以丘吉尔并不是迷信 ，林肯也不是任性 ，而是他们捕捉到了潜意识发出的那一丝微弱的信号 ，这就是所谓的“凭感觉”——察觉潜意识发出的 信息。
洪兰教授在2015年的TED演讲《脑科学揭露男女思考的秘密》 中 ，说过这样一段经历。
20世纪70年代 ，洪兰教授在美国加利福尼亚大学读书 ，一个年轻的助理教授在自动取款机取钱时被抢劫了 ， 因为太紧张 ，她没记住抢劫者的样子 而报警无果 。但此后助理教授开始莫名地讨厌起自己的一个研究生 。那个研究生长得胖胖的 ，头发到肩膀 ，喜欢穿破洞裤 ……而她自己的解释是那个 研究生喜欢吃汉堡加洋葱 ，身上臭臭的 ，等等 。后来警察抓到几个抢劫犯 ， 叫她去指认 。她一眼就确定了罪犯——那个人长得胖胖的 ，头发到肩膀 ， 穿着破洞裤 ……
洪兰教授表示 ，助理教授潜意识里其实记住了罪犯的样子 ，并发出了信息——让她开始讨厌那个样子与罪犯相似的研究生 。但这些信息并没有进 入意识里 ，所以理性意识根本不知道是怎么回事 ， 只好做了另外一通解释 ，实际上牛头不对马嘴。
想不到我们潜意识的感性部分这么厉害吧？有多少人知道我们的身体里竟然还藏有这样一个高级的系统呢？如果不善加利用 ，实在是太可惜了！ 尤其是在学习和成长的过程中 ，如果有它的助力 ，或许会有意想不到的收获。
凭感觉学习
那么在学习成长的过程中 ，我们该如何利用这个高级系统呢？《好好学习》一书的作者成甲就给我们做了一个很好的示范 。他在《史上最简单 的“不读书法”》和《隐形的关键： 比知识更重要的能力》这两篇文章中 ，都提到一个非常有意思的学习方法       凭感觉学习[2]。
比如在第一篇文章中他自创了一个“熔断不读书法”。所谓“熔断不读书法”，意思就是在读书时一旦看到有启发的内容 ，就触发熔断点 ，立刻停止读 书 。停止读书之后做什么呢？ 围绕这个触发点对自己提问。
·为什么刚才这个点让我有启发？

·我能够把这个启发点用在3个不同的事情上吗？ ·这个启发点有没有其他类似的知识？
在另一篇文章中 ，他又提出：无论在生活中还是在学习上 ，凡是被某件事击中 ，“动了感情”，就要有意识地提醒自己追问原因。 ·为什么这个电影桥段会让我感动？发生了什么？
·为什么这个产品让我这么喜欢？是什么让它与众不同？ ·为什么我不由自主地沉溺于这段剧情了？
这就是高手学习的方法：先用感性能力帮助自己选择 ，再用理性能力帮助自己思考 。文中的触动来自感性 ，而提问则来自理性 ，感性在前 ，理性 在后 ，这背后的原理就是通过捕捉潜意识发出的信号进行感知。
无独有偶 ，学习专家李晓鹏在《学习高手的三驾马车》一书中也提到了类似的方法 。他的读中学的侄女赵璐向他请教学习的秘诀时 ，他只说了3个 字 ：凭感觉。
这个答案让赵璐简直不敢相信 。对此 ，他解释道：“不管你现在是什么水平 ，这一招都管用——就是凭感觉！那些一眼就能看出答案的题目 ，不用 理它；一眼看过去就头痛、不知道在说什么的题目 ，也不用理它； 只有那种大致能看出点思路 ，但又要动点脑筋的题目 ，一定要多做 。这个就是中间  地带 ，是你能够进步最快的地方 。”
看出端倪没？“凭感觉”之所以被称为顶级的方法 ，是因为它能帮我们感知真正适合自己并需要的东西 ，让自己处于学习的“拉伸区”。如果单纯运用 理性 ，我们通常会向优等生看齐 ，把眼光放在那些最难的题目上 ，想着如何追赶他们；如果顺从天性 ，我们就会在最简单的题目上打转（见图2-1）。

图2-1   理性、感性、天性的选择倾向
读书也是这样 ，如果单纯运用理性 ，我们通常会在看完整本书后花大量时间梳理作者的框架、思路 ， 以此来表明自己读懂、读透了这本书；如果 顺从天性 ，我们可能就放下书本去玩手机了 。鉴于此 ，更好的读书方法或许就是你在读完整本书后过几天再问自己：现在你印象最深的触动点是什
么 ？牢牢抓住这个触动点 ，去关联、去实践 ，就会获得最大的收获 ，而其他的内容则可以先放到一边 。这也是我自己的读书方法——只取一个全书最 触动自己的点 ，然后尽可能去实践、改变 。这样读书不仅收获更大 ，而且也不会焦虑。
潜意识的感性总能帮我们发现什么是真正适合自己的 ，从而引导精力投入 ，快速提升自己 ， 因为在拉伸区内学习难度最小、需求最贴合、见效也 最快 ，很容易产生心流 。可见 ，学习虽然不是一件轻松的事 ，但在合适的区域内 ，我们依旧可以体验到轻松和有趣 ，如果你感受到的总是痛苦和无
趣 ，那十有八九是感觉不对——要么在困难区煎熬 ，要么在舒适区打转。
凭感觉寻找人生目标
学习只是冰山一角 ，感性的力量适用于生活的方方面面 ，尤其在面临重大的人生问题时 ，如选择伴侣、确定职业、寻找人生目标等 。对于成长而 言 ，很多读者最大的苦恼就是找不到自己的人生目标。
一个人若是没有人生目标 ，纵然每天有吃、有喝、有书读、有班上 ，也会像一个迷失的人一样 ， 内心没有喜悦、生活没有激情 ，甚至会厌恶自 己 ， 因为目标是存放我们热情和精力的地方。
很多人为了找到自己的人生目标 ，费尽心思地分析什么事情最值得做 ，最后得到的答案往往是“变得很有钱”或“被别人崇拜”。这样的目标不能说有 错 ，但往往不能长久 ，也无法给人真正的动力 ， 因为这是理性思维权衡利弊和考量得失之后的结果 ，其动机往往来自“ 自我索取和外在评价”，时间一   长 ，很容易使人迷失方向 ，使动力枯竭。
真正的觉醒者往往会有意无意地用感知力来代替思考力 ， 比如《美好人生运营指南》一书的作者一稼就提出了6条寻找人生使命的建议。 ·这个世界有很多事情可以做 ，你最想帮助哪些人？
·什么事让你废寝忘食？
·你在做什么事情的时候最让自己感动？ ·你最让人感动的时刻是什么？
·如果没有任何经济压力 ，你会如何度过余生？

·闲暇的时候 ，你关注最多的是哪方面的信息？
我们需要用心去感受什么事情让自己最触动 ，而不是用脑去思考什么事情最有利 。理智的分析和计算无法解出内心的真正需求 ，唯有感性的觉知 和洞察才能让答案浮出水面 。而且正确的答案往往都是利他的 ， 因为真正长久的人生意义和幸福只能从他人的反馈中获得。
《坚毅》一书的作者卡洛琳·亚当斯·米勒提出了3个类似的问题。 ·设想你即将离开世界 ， 回首一生会为什么事情而后悔？
·想一想你最喜欢的人物是谁？
·你年轻的时候是怎么度过闲暇时光的？
回答这3个问题同样需要我们动用感知力而不是思考力 ， 因为直视死亡可以简化一切事物 ，让自己把注意力重新集中在真正重要的事情上；对于你 喜欢的人物 ，不管是虚构的还是真实的 ， 只要让你深深地着迷 ，就可以从这些人物身上反射出内心理想的自己；而年轻的时候没有家庭、工作负担，
那时的追求更加遵从内心 ，不会受外界压力的干扰。
或许我们每个人心中早就埋下了人生目标的种子 ， 只是成年后被生活压力所迫 ，理性思维开始权衡各种利弊 ，不愿承认或刻意忽略自己原有的梦 想 ，而感性力量却始终在帮我们守护和珍藏那些理想 。如果你现在还没有人生目标 ，不妨用上述方法尝试一下 ，或许会有意外的惊喜。
归纳起来 ，我们可以发现 ，理性思维虽然很高级 ，但在判断与选择方面可能并不具有优势 ，它那蹩脚的性能实在无法与灵敏快速的感性媲美 。所 以 ，先用感性选择 ，再用理性思考 ，或许是一个更好的策略 ，尤其是在做那些重大选择时 。诚如洪兰教授的建议：小事听从你的脑 ，大事听从你的
心 。这话不无道理。
如何捕捉感性
感性能力虽然很厉害 ，但它看起来虚无缥缈 ，我们该如何捕捉它呢？ 以下做法不妨参考一下。
（1）“最”字法 。关注那些最触动自己的点：让你眼前一亮、心中泛起波澜的人和事 ，脑中灵光乍现的想法 ，遭遇的痛苦 ，等等 。学会捕捉它们， 并深入分析挖掘 ，往往会有丰厚的收获。
（2）“总”字法 。平时脑子里总是不自觉地跳出来的某些重复念头 ，或是心里总是挥之不去的事 ，这些通常都是我们心中最放不下的事 ，是情绪波 动的源头 。当我们有意识地去审视并消除它时 ， 自己会变得更加平和。
（3）无意识的第一反应 。关注自己第一次见到某个人、第一次走进某个房间、第一次做某件事时 ，心中出现的瞬间反应或第一个念头 。心理医生 在了解患者时往往也会说：不要思考 ，告诉我你脑中出现的第一个想法 。因为第一个念头往往是来自潜意识的真实信息 。不过 ，产生第一个念头的过   程很短 ，如果不刻意练习可能感知不到 ， 因为理性思考很快就会接替潜意识发挥作用。
（4）梦境 。梦境是潜意识传递信息的一种方式 ，它可能是内心真实想法的展示 ，也可能是灵感的启发 。德国化学家凯库勒就是在非常疲劳的情况 下做梦梦到一条首尾相咬的蛇 ，这条蛇成了他发现苯分子结构的线索 。聪明的潜意识早已找到答案 ，然后借助梦境去提示他 ，幸运的是 ，凯库勒捕捉   到了。
（5）身体 。《美好人生运营指南》一书的作者一稼曾经喜欢高强度运动 ， 因为理性告诉她“没有痛苦 ，就没有收获”。然而 ，她每过4个月就会莫名 其妙地大病一场 ，直至一位中医医师告诉她：“这是你的身体在罢工 ，告诉你它不喜欢你的运动方式 ，你要学会多倾听身体的反馈 。”她恍然大悟 ，从此 选择了更柔和的运动 ，再也不莫名其妙地生病了 。身体不会说话 ，却是最诚实的 。无论生理还是心理上的不适 ，都会通过身体如实地反映出来 ，记得   多关注这些反馈。
（6）直觉 。给一些来路不明、无法解释的信息开绿灯 ，就像丘吉尔一样。
[1]具体方法将在第六章第一节展开。
[2]此段内容引自公众号“成甲”，有删改 。——编者注
</tw-passagedata><tw-passagedata pid="90" name="焦虑" tags="" position="1500,2425" size="100,100">第二节   焦虑：焦虑的根源
焦虑肯定是你的老朋友了 ，它总像背景音乐一样伴随着你 ，我们虽对它极为熟悉 ，却从来不知道它究竟是谁 。我也是默默忍受多年之后 ，终于在某天鼓足气力和它对视 了一番 ，从此 ，它一点一点地离我远去 ，虽然偶尔会反扑 ，但再也无法近身 。今天 ，我把这个认知武器送给你 ，愿你此生不再受焦虑的煎熬。
焦虑之战
36岁那年是我的“觉醒元年”，在此之前我过得很混沌 。正如前文所言 ，那时的我虽然对本职工作很投入 ，但业余时间几乎被不需要动脑筋的事情占据 。警醒之后 ，一种  从未有过的焦虑便油然而生 ，我内心迫切希望发生改变 ，毕竟无论个体还是群体 ，人类的安全感都源于自己在某一方面拥有的独特优势：或能力 ，或财富 ，或权力 ，或影响 力。
但一阵忙碌之后我发现自己根本无从下手 ，也没有看到任何变化与转机 ，那种对独特优势求而不得的心情 ，就像一个孩子面对最喜欢的玩具却无法拥有一样。
好在网络学习时代来临了 ，我发现各路能人现身网络 ，也有很多和我一样希望变好的人出现在各个社群里 ，我看到了一些希望 ，于是跟着报了很多课 ，买了很多书 ，希 望能立即改变自己 。特别是每次收到书的那一瞬间 ，我总会产生一种好像已经拥有这些知识的错觉 ，但事后才发现 ，读书的“艰难”与买书的“惬意”简直相差十万八千里。
为了缓解焦虑 ，我开始不自觉地求多 、求快 ，结果又陷入只关注阅读量的低水平勤奋——每本书都读得很快 ， 回头却发现什么都没记住 。再抬头看 ，与一些同龄人的差 距早已遥不可及 ，甚至一些比自己还年轻的人也已成就满满 ，而自己还得从零开始 。这种情况让我变得烦躁和焦虑 ，情绪一度低落 ，那段时间我心里总是回响着一句话：来 不及了 ，太晚了 ，一切都太晚了 ……
直面焦虑
我像一个落水者 ，被焦虑彻底包裹 ，仿佛在慢慢地沉入河底 。看着河面的波光逐渐消失 ，我终于在一次感到绝望时想通了一件事：做总比不做强！王德顺79岁走上T
台 ，褚时健74岁开始种橙子 ，这都是现实中的例子 ，而我现在才三十几岁 ，人生之路还很长 ，现在开始行动根本谈不上晚 。所以我不应该跟那些所谓的成功人士比现状 ，如 果非要比 ，也应该跟他们刚起步时的状况比 。事实上我更应该跟自己的过去比 ，哪怕好那么一点点 ，也是值得的！
大概是触底反弹 ，焦虑慢慢消失了 ，这时的我才回过神来： 自己面对焦虑从来都是被动承受 ，主动权从来不在自己手中 。我既不知道它什么时候会出现 ，也不知道出现 之后该怎么请它走 。为了今后不再承受这种情绪起伏 ，我必须正视它 ，彻底解决这个困扰。
一天下午 ，我拿出笔和纸 ，把心中的烦恼 、担忧 、顾虑和欲望全部列了出来 ，大到人生愿景 ，小到10分钟后要做的事 ，慢慢地 ，我勾勒出焦虑的几种形式。
第一 ，完成焦虑 。总是把自己的日程安排得太满 ，每天都活在截止期限（Deadline）面前 ， 比如同时想学很多东西 ，但时间根本不够用；每天要例行完成的事情太多， 耽误一天就觉得喘不过气来； 随意承诺他人 ， 日程安排总被不重要的事情打乱 ……总之 ，只要内在欲望涉及面太广或外在日程安排过紧 ，我就很难做到深入和从容。
第二 ，定位焦虑 。如果在零基础阶段就直视该领域的能人们现在的所作所为 ，不焦虑都不可能：某某这么年轻就有如此大的影响力了！他们已经抓住风口 、 占据先机 ， 我何年何月才能这样？原以为这个绝妙的点子只有自己能想到 ，没想到人家居然把产品都做出来了 ……错误的定位只会让人觉得一切都来不及了 ，事实上 ，这根本就是错误 的对标。
第三 ，选择焦虑 。有时选择太多也会让人陷入焦虑 ， 比如突然有一段自由时间 ，却因为想做的事情太多 ，最后把时间都浪费在了摇摆不定上 ，静不下心做最重要的事， 或者说根本不知道最重要的事情是什么 。另外 ，很多能人的观点也让人纠结 ， 比如A说阅读要只字不差 ，B说按主题阅读 ，不用读完 ，看上去两个人的说法都对 ，但做法却   完全相反 ，到底该用哪个方法呢？人喜欢唯一性和确定性 ，面对多元和不确定 ，靠天生的习性怕是很难应对。
第四 ，环境焦虑 。有时我们不得不面对一些外在环境的限制 ， 比如因家庭 、工作的影响 ，有些事想做却做不了 ，还有些事不想做却必须花大量的时间去做 。这种低效或 无力有时也会让人抓狂。
第五 ，难度焦虑 。有些书就是很难读 ，有些文章就是很难写 ，有些知识就是很难懂 ，有些技能就是很难学 ……真正能让你变强的东西 ，其核心困难是无法回避的 ，不下 决心与之死磕 ，始终在周围打转 ，时间越长越焦虑。
焦虑的根源
归结起来 ，焦虑的原因就两条：想同时做很多事 ，又想立即看到效果 。王小波说：人的一切痛苦 ，本质上都是对自己无能的愤怒 。焦虑的本质也契合这一观点： 自己的 欲望大于能力 ，又极度缺乏耐心 。焦虑就是因为欲望与能力之间差距过大。
再往深了说 ，焦虑并不完全源于我们的主观意识 ，而是来自我们大脑的生理结构 。我们已经知道人类的天生属性是避难趋易和急于求成 ，也就是说 ，在我们内心深处早 就埋下了这样的种子：急于求成 ，想同时做很多事；避难趋易 ，想不怎么努力就立即看到效果。
这才是焦虑真正的根源！焦虑是天性 ，是人类的默认设置 。千百年来 ，所有的人都一样 ，只是进入信息社会之后 ， 由于节奏变快 、竞争更强 ，这种天性被放大了 。所 以 ，我们没有必要自责或愧疚 ，也没有必要与天性较劲 ，而应想办法看清背后的机理并设法改变 。当然 ，最简单的方法是反着来 ， 比如：
·克制欲望 ，不要让自己同时做很多事； ·面对现实 ，看清自己真实的能力水平； ·要事优先 ，想办法只做最重要的事情； ·接受环境 ，在局限中做力所能及的事； ·直面核心 ，狠狠逼自己一把去突破它。
只是这些说辞就像是正确的废话 。道理谁不懂呢？关键是如何真正提升能力和保持耐心。
面对这样的问题 ，我很想马上给出答案 ，不过一两句话显然无法说清楚 ，特别是“提升能力”涉及方方面面 ，我只好将答案分布于书中的各处 ，倒是“保持耐心”这个话题 可以先行突破。
耐心可以说是人类最珍贵的品质之一了 ，它直指我们急于求成 、避难趋易的天性 ，可谓得耐心者得天下 ，所以我们不妨从耐心这个关键词开始谈起。</tw-passagedata><tw-passagedata pid="91" name="耐心" tags="" position="1650,2425" size="100,100">第三节   耐心： 得耐心者得天下
20世纪八九十年代 ，金庸的武侠小说风靡全国 。如今 ，虽然几十年过去了 ，金庸先生也已与世长辞 ，但他留下的作品依然广受欢迎 ，被奉为经典 。如此成就 ， 自然离不 开他新奇的想象和优秀的文笔 。但在我看来 ，还有一个更深层 、更隐秘的原因 ，那就是他的故事击中了人类天性中最原始 、最本能的部分——即时满足。
你看 ，金庸的故事里有很多这样的桥段：一个普通少年 ，经历一番奇遇 ，轻松练成神功 ，取得成就 ……常人需要几十年才能练成的神功 ，他们往往在很短的时间内就能 学会 ，甚至一夜速成 。并且故事还突出了主人公们善良的品性 ，似乎好运只会光顾那些心性单纯的人 ，让人们误以为心性单纯优于努力 ，要想获得成功 ，只要保持心性单纯 就好了——人们当然愿意相信这样的结论 ，毕竟保持心性单纯比保持努力容易多了。
正是这种不用付出巨大努力就能获得超强能力的快感让人心驰神往 ， 因为现实生活中无论读书 、考试 ，还是工作 、赚钱 ，要想表现出色都必须经受长时间的磨炼 。可惜 故事是故事 ，现实是现实 ，我们可以暂时沉浸在故事中 ，但终究要回到现实面对规则：要想有所成就 ，必须保持耐心 ，延迟满足。


那些年 ，我们一起误解过的耐心
很多人虽然嘴上说要保持耐心 ，但身体却诚实地游走在即时满足的边缘 。他们总是从最简单 、最舒适的部分开始一天的工作 ，然后沉迷于娱乐信息 、醉心于周边琐事， 就是无力去做重要的事情；他们花大量的时间寻找干货文章 ，点击收藏 ，但今后可能再也不会点开；他们的新年计划非常完美 ，在出炉的那一瞬间 ，就像自己已经完成一
样 ，但没过几天 ，那计划就不知所踪了；他们有时也“勤奋”得出奇 ，疯狂提升自己的阅读量 、践行“一万小时定律”，每天坚持做同一件事 ，但始终与成功无缘；他们刚有了   一点点改变 ，甚至在还只有一个想法的时候 ，就会急着向全世界宣告自己将要开始新生活了 ，但只要遇到一点挫折 ，很快就会消沉放弃；他们看到自己与同龄人有很大差距 时 ，就会变得非常焦虑 ，然后去报很多课 、读很多书 、做很多事 ，并期望立即看到变化 。总之 ，他们希望只读几本书就能博学多识 ，坚持21天就能养成一个习惯 ，少吃几口 饭就能变瘦 ，读完一篇干货文章就能立即改变 ……
一口气罗列了这么多劣习 ，并不是为了给自己做铺垫以站在道德制高点上向大家说教 ，事实上 ，这些都是我踩过的坑 ，我也曾是“他们”中的一员 ，所以对此感同身受。 我深知这些品性会毁人一生 ，至少会让人庸碌无为 ， 因为缺少耐心这个品质 ，再多的努力也会白费。
但是从小到大 ，从来没有人告诉过我们耐心到底是什么 、怎样才能有耐心 。我们只是一次又一次地被教导：“要保持耐心！不要猴急！不要三心二意！”以至于人们对耐 心这个概念的理解普遍倾向于忍受无趣 、承受痛苦 、咬牙坚持 、硬扛到底 。总之就是用意志力去对抗——如果做不到 ，只能说明自己意志力不强。
然而真相根本不是这样的 。我们对耐心的理解过于肤浅 ， 以致大部分时间都在痛苦中挣扎 。既然耐心是如此重要的品质 ，我们没有理由不补上这一课。
缺乏耐心 ，是人类的天性
关于这一点 ，我们已经在本章第一节达成共识：缺乏耐心根本不是什么可耻的事 ，和自己的道德品质也全无关系 ，这仅仅是天生属性罢了 ，每个人都一样 。如果你觉得 这些共识仍有些虚无 ，那不妨再观察一下身边的婴儿 、孩子和成人。
婴儿刚出生时 ，理智脑的作用极其微弱 ，全靠本能生活 。出生6个月之内的宝宝会认为自己是全能的 ，整个世界会随着自己的意念而动 ，这可谓最强烈的即时满足；几   岁的孩子可以瞬间切换笑脸和哭脸 ，得到满足就立即欢笑 ，不满足就马上暴怒 ，他们毫不掩饰自己即时满足和耐心不足的特性；等到上学之后 ，随着理智脑的发育和学识的 增长 ，他们的耐心开始变得越来越强 ，小学 、中学 、大学时呈现明显的不同；成年后 ，其生理机能趋于稳定 ，但此时若停止自我探索 ，保持耐心的能力可能会永远停留在当 时的水平 ，甚至倒退 。如再仔细观察 ，我们不难发现 ，社会中的精英通常是那些能更好地克服天性的人 ，他们的耐心水平更高 ，延迟满足的能力更强。
无论从历史 、现实考量 ，还是从生理角度看 ，一切关于耐心的线索都指向了理智脑这块人类独有的前额皮质上——了解这一点 ，对于解放自我意义重大 。当然 ，仅仅认 识自己是不够的 ，我们还需要将目光投向外部 ，看看有什么规律可以帮助我们提升耐心 ，毕竟内观自身和外观世界向来是一体的。
认知规律 ，耐心的倍增器
很多时候 ，我们对困难的事物缺乏耐心是因为看不到全局 、不知道自己身在何处 ，所以总是拿着天性这把短视之尺到处衡量 ， 以为做成一件事很简单 。事实上 ，如果我 们能了解一些事物发展的基本规律 ，改用理性这把客观之尺 ，则会极大地提升耐心 。如图1-3所示 ，复利曲线就是一种理性工具。

图1-3   复利曲线
复利效应显示了价值积累的普遍规律：前期增长非常缓慢 ，但到达一个拐点后会飞速增长 。这个“世界第八大奇迹”[1]揭示的正是这种力量 ，不过要想获得这种力量 ，我 们需要冷静面对前期缓慢的增长并坚持到拐点。
对于任何没有特殊资源的个体或群体来说 ，坚信并践行这个价值积累规律 ，早晚能有所成就 。当然 ，前提是选择正确的方向 ，并在积累的过程中遵循刻意练习的原则， 在舒适区边缘一点一点地扩展自己的能力范围。
舒适区边缘另一个重要的规律是它揭示了能力成长的普遍法则：无论个体还是群体 ，其能力都以“舒适区—拉伸区[2]—困难区”的形式分布 ，要想让自己高效成长 ，必须 让自己始终处于舒适区的边缘 ，贸然跨到困难区会让自己受挫 ，而始终停留在舒适区会让自己停滞（见图1-4）。


图1-4   在舒适区边缘扩展自己的行动范围
人类的天性却正好与这个规律相反 。在欲望上急于求成 ，总想一口吃成个胖子 ，导致自己终日在困难区受挫；在行动上避难趋易 ，总是停留在舒适区 ，导致自己在现实 中总是一无所获 。如果我们学会在舒适区边缘努力 ，那么收获的效果和信心就会完全不同。
“舒适区边缘”这个概念非常重要 ，你若是没有完全理解也没有关系 ，只需先记住它 ，我们会在后文反复提及 。另外 ，你可能也发现了：复利曲线和舒适区边缘是一对好 朋友 ，它们组合在一起可以让我们在宏观上看到保持耐心的力量 ，而且这种力量适用于每一个普通人。
有了上述宏观规律作支撑 ，我们就可以观察微观规律了 。对于学习成长而言 ，成长权重对比是每个人都应该首先认识的 ，它揭示了“学习 、思考 、行动和改变”在成长过 程中的关系： 即对于学习而言 ，学习之后的思考 、思考之后的行动 、行动之后的改变更重要 ，如果不盯住内层的改变量 ，那么在表层投入再多的学习量也会事倍功半； 因    此 ，从权重上看 ，改变量﹥行动量﹥思考量﹥学习量（见图1-5）。

图1-5   成长权重对比
很多人之所以痛苦焦虑 ，就是因为只盯着表层的学习量 。他们读了很多书 、报了很多课 ，天天打卡 、 日 日坚持 ，努力到感动自己 ，但就是没有深入关注过自己的思考、 行动和改变 ，所以总是感到学无所获 ，甚至会认为是自己不够努力 ，应该继续加大学习量 ，结果陷入了“越学越焦虑 ，越焦虑越学”的恶性循环。
原因仍然是我们的天性在作祟 。因为单纯保持学习输入是简单的 ，而思考 、行动和改变则相对困难 。在缺乏觉知的情况下 ，我们会本能地避难趋易 ，不自觉地沉浸在表 层的学习量中。
同时 ，表层学习也是最能直接看到效果的 ， 比如今天读了一本书 、学习了5小时 、背了100个单词 ……结果都立即可见 ，而底层的改变则不那么容易发生 ，所以急于求成 的天性也会促使我们选择前者。
“多即是少 ，少即是多”的辩证关系在图1-5中也体现得淋漓尽致：停在表层 ，我们就会陷入欲望漩涡 ，什么都想学 、什么都想要 ，忙忙碌碌却收效甚微；若是能深入底 层 ，盯住实际改变 ，我们就能跳出盲目 、焦虑 、浮躁的怪圈。
比如 ，读书时不求记住书中的全部知识 ，只要有一两个观点促使自己发生了切实的改变就足够了 ，其收获与意义比读很多书但仅停留在知道的层面要大得多 。时常以这 样的标准指导自己学习 ，我们的收获就会越来越多 ，焦虑就会越来越少 ，耐心自然也就越来越强了。
另一个值得关注的微观规律是学习的平台期 。这个规律表明 ，学习进展和时间的关系并不是我们想象中的那种线性关系（学多少是多少） ，而是呈现一种波浪式上升曲 线（见图1-6）。


图1-6   学习曲线
几乎任何学习都是这样 ，刚开始的时候进步很快 ，然后会变慢 ，进入一个平台期 。在平台期 ，我们可能付出了大量的努力 ，但看起来毫无进步 ，甚至可能退步 ，不过这 仅仅是一个假象 ， 因为大脑中的神经元细胞依旧在发生连接并被不停地巩固 ，到了某一节点后 ，就会进入下一个快速上升阶段。
比如在学习英语的过程中 ，建立一个新的语言“过滤器”，通常需要6个月才能突破平台期 。很多人并不知道这个规律 ，努力坚持了5个月 ，发现自己没有进步就摇头放弃 了 。这样的做法真的很可惜 ， 因为好不容易建立起的神经元连接会在放弃练习后弱化 、消失 ，下次学习就得重新开始 。而那些时常坚持用英语“熏耳朵”的人 ，往往会在某一 天突然发现 ，原来听不懂的英语好像都能听懂了 ，这就是平台期突破的典型表现 。我猜每个人在生活中都有过这样的体验。
当我们清楚了上述规律之后 ，就能在面对长期的冷寂或挫折失败时做出与他人不同的选择：有人选择放弃 ，而我们继续坚持 。同时 ，我们不会因自己进步缓慢而沮丧， 也不会因别人成长迅速而焦虑 。就像写公众号 ，有耐心的人会牢牢盯住长远价值 ，他们的目光在5年 、10年之后 ，所以不会因眼下文章的阅读量低而缺失动力 ，也不会因别  人写出了10W+的文章（一篇文章的阅读量达到10万以上）而焦虑不安 ，毕竟各自所处的阶段不同 ，只要持续创造价值 ，别人的今天就是自己的明天。
从这个角度看 ，耐心不是毅力带来的结果 ，而是具有长远目光的结果 。这也侧面回答了为什么我们需要终身学习 。因为当我们知道的规律越多 ，就越能定位自己所处的 阶段和位置 、预估未来的结果 ，进而增强自己持续行动的耐心 。毫无疑问 ，对外部世界的规律的认知能使我们耐心倍增。
怎样拥有耐心
很多人在前行的路上什么都准备好了 ，唯独缺乏耐心 。好在拥有耐心也并非难事 。其实 ，知道大脑构造和事物规律这些知识 ，我们的耐心水平就已经在无形中提升了很 多 。但这远远不够 ，我们还需要寻找更多的路径去增强它 ， 比如以下这些。
首先 ，面对天性 ，放下心理包袱 ，坦然接纳自己。
当我们明白缺乏耐心是自己的天性时 ，就坦然接纳吧！从现在开始 ，对自己表现出的任何急躁 、焦虑 、不耐烦 ，都不要感到自责和愧疚 ，一旦觉察自己开始失去耐心
了 ，就温和地对自己说：“你看 ，我身体里那个原始人又出来了 ，让他离开丛林到城市生活 ，确实挺不容易的 ，要理解他 。”只要你温和地与自己对话 ，“体内的原始人”就会   愿意倾听你的意愿 。当然 ，培养耐心的过程可能比较长 ，不要指望一下子就能很有耐心 ，如果对自己不能立即变好这件事感到焦虑 ，这本身就是缺乏耐心的表现 。所以 ，培 养耐心要从接受自己缺乏耐心这一事实开始。
其次 ，面对诱惑 ，学会延迟满足 ，变对抗为沟通。
舒适和诱惑是本能脑与情绪脑的最爱 ，完全放弃舒适和诱惑就相当于和本能脑 、情绪脑直接对抗 ，很显然 ，理智脑不是它们的对手 ，失败是迟早的事 。明智的做法是和 它们沟通 ，这也是理智脑最擅长的 。就像上面自己和自己对话一样 ，温和地告诉它们：“该有的享受一点都不会少 ，只是不是现在享受 ，而是在完成重要的事情之后 。”这是  一个有效的策略 ， 因为放弃享受 ，它们是不会同意的 ，但延迟享受 ，它们是能接受的。
以手机为例 。一开始 ，我连睡觉时都要把手机放在枕边 ， 以方便醒后第一时间拿到 。后来 ，我把它放到书桌上 ，早上起来后我依然会忍不住走向书桌 。这段距离给了我 与身体里的原始人对话的机会 。我对自己说：“那些信息已经在手机里待了一个晚上了 ，也不差这一会儿 ，等会儿再看吧 ，反正它们也跑不了 。”几次尝试之后 ，我发现可以  做到远离手机 ， 因为确实不会有任何损失 ，而且还能体会到集中精力读书或跑步的充实感 。上午和下午开始工作前 ，我也采用同样的策略 ，对自己说：“暂时忍耐一下 ，先   做重要的事情 ，之后会有半小时或一小时的时间专门玩手机 ，想怎么玩都行 。”通过自我沟通和引导 ，本能脑和情绪脑产生了安全感 ，通常它们都舍得放手让理智脑插个
队。
这种“后娱乐”的好处是 ，将享乐的快感建立在完成重要任务后的成就感之上 ，很放松 、踏实 ，就像一种奖赏；而“先娱乐”虽然刚开始很快活 ，但精力会无限发散 ，拖延 重要的工作 ，随着时间的流逝 ，人会空虚 、焦虑。
多次体验之后 ，身体里的原始人也会倾向于支持“后娱乐”，毕竟这样更舒适 。如果你足够幸运 ，辛勤劳作之后产生的满足感也可能取代娱乐带来的直接快感——既然有 高层次的享受可选 ，你对低层次的享受自然就不那么依赖了。
当然 ，习惯养成之路绝不像我讲的这般轻松 ， 比如有时我们起床后伸手就点开了微信 ，那种不看不舒服的冲动实在是太强烈了 。怎么办？策略依旧是和自己对话：“就 看一眼推送的标题 ，知道有什么内容就好了 ，然后马上退出 。”不要强行对抗 ，也不要自责 ，让冲动适当缓解一下也很有效 。如果还是忍不住点进去了 ，那就再告诉自
己 ：“看完这篇就立即结束 。”
耐心就是这样 ，不能急于求成 ，允许自己缓慢地改变 ，甚至经常失败 。无论结果如何 ，和自己对话都会产生效果。
最后 ，面对困难 ，主动改变视角 ，赋予行动意义。
面对困难之事 ，为什么有的人很容易放弃 ，而有的人却能够持之以恒呢？除了知晓前面提到的各种规律 ，还有一个重要的原因是他们更擅长探索原理 ，会主动改变认知 视角 ，来找到行动的意义和好处 。比如当我们清楚了阅读的本质和意义 ，就可能放下手机 ，主动拿起书本； 当我们明白了深度学习的意义 ，就可能放弃听书 、速读 ，转而开 始精读和输出； 当我们明白了运动真正的好处 ，就可能告别慵懒 ，主动坚持锻炼 。所以 ，要想办法看清那些想做之事的意义和好处 ，你看到的维度越多 ，耐心就会越强。
事实上 ，这还不是最高级的方法 ，你肯定想不到最高级的方法是请本能脑和情绪脑出动来解决困难。
是的 ，你没有听错！本能脑和情绪脑确实畏惧困难 、只会享乐 ，但谁说它们不能从困难的事情中感受到乐趣呢？对本能脑和情绪脑来说 ，它们根本不在乎你是在玩手机 还是在解方程 ，它们只在乎是否舒适 。科学家废寝忘食地沉迷于研究 ，是因为他们真的乐在其中；跑步者风雨无阻地迈腿奔跑 ，是因为他们自己不愿意停下 ，他们正舒服着 呢！
所以 ，想办法让本能脑和情绪脑感受到困难事物的乐趣并上瘾 ，才是理智脑的最高级的策略[3] 。学会释放本能脑和情绪脑的强大力量 ，我们就会无往不胜！
[1]爱因斯坦曾说复利威力巨大 ，堪称世界的第八大奇迹 。——编者注
[2]拉伸区是指一个人的知识和技能从已知到未知 、从熟悉到陌生的过渡区域。
[3]相关策略参见第五章第六节。
</tw-passagedata><tw-passagedata pid="92" name="元认知" tags="" position="1425,2675" size="100,100">第一节   元认知： 成长慢， 是因为你不会“飞”
1946年10月24日 ，一群科学家为了研究太阳的紫外线 ，在美国新墨西哥州白沙导弹试验场发射了当时世界上最先进的V2液体火箭 ，该火箭还搭载了一台 35mm的相机 。火箭飞到大约104千米的高度时 ，相机启动并拍摄了一张照片 ，那张充满颗粒的模糊黑白照片开启了人类从太空中反观自己的新纪元。
随后的几年里 ，人类进行了多次尝试 ，终于在1959年8月7日 ，美国“探索6号”卫星拍摄了第一张地球全景照 ，人类从此拥有了“上帝之眼”， 以从未有过的 视角俯瞰这个神奇的蓝色星球 。有了人造卫星的辅助 ，人类对地球的观察便一目了然 ，社会的进步也一日千里——通信 、气象 、导航 、测绘等技术飞速发
展 ，偌大的地球俨然变成了一个“地球村”。今天 ，人们已经可以便捷地使用数字地球技术。
记得第一次从“谷歌地球”上看到自己的家乡时 ，我心里发出了深深的感叹： 原来这就是飞一般的感觉 ，就像自己有了翅膀一样 ，可以在世界的每一个角 落任意遨游！但是你可知道 ，早在15万年之前 ，人类就已经拥有这种能力 ， 当然不是指人的身体真的飞到空中 ，而是指意识与本体分离 ，“飞”到更高处去反 观自己。
你如果仔细观察过这个世界上优秀的人 ，就会发现他们几乎都是“飞”着前进的；我们跟不上他们的脚步 ，可能正是因为自己不会“飞”。绝大多数人并未   意识到自己身上还有一对翅膀 ，更不曾想如何主动挥动它们 ，好让自己飞起来 。现在就让我重新唤醒你 ，帮你从混沌中展开翅膀 ，学会运用人类的终极能力 ——元认知。
“万物之灵”的根源
元 ，在汉语中有“头 、首 、始 、大”的意思 ， 即最高级别的 ， 比如一个国家的最高领导人会被称为国家元首 。元认知 ，就是最高级别的认知 ，它能对自身 的“思考过程”进行认知和理解（见图3-1）。

图3-1   普通认知与元认知的区别
听起来有些拗口 ，实际上 ，元认知能力就是我们习以为常 、见怪不怪的反思能力 。这种能力不仅为我们人类所独有 ，也是我们成为万物之灵[1]的根源。 其他动物是不具备这种能力的 ，与人类基因最接近的大猩猩也最多只能分辨镜子中的猩猩是自己 ，它们依旧无法从自我和当前的情境中脱离 ，假想出“另一  个自己”——因为它们没有元认知这对“翅膀”，天生就不会飞！
而人类不同 。人类的大脑进化出了新皮层 ，这使我们具备了极强的感知和思考能力 ，从而可以依靠理智生活 ，而其他动物则只能依靠本能和情绪来生
存 。更神奇的是 ，人类还可以观察自己的思维活动 ，找出其中不合理的地方 ，然后改进优化 ，不断做出更好的选择 。人的思维就好比一把锤子 ，它不但能钉 钉子 ，还能复制出另一把锤子来锤打自己 。只要方法正确 ， 时常修订 ，那么这把锤子就会进化成更高级的工具。
或许因为人类生来就拥有这种能力 ，所以人们对此不以为然 ，但回望历史长河便可知道 ，这可是其他物种求之不得的本领 ，我们没有理由不好好珍惜。
元认知能力的差异
那么为什么人人都有反思能力 ，但人与人之间的差别却如此之大呢？原因其实很简单 ，元认知能力也是有层级的 ，在人人都有元认知能力的世界里 ， 唯 有拥有更高级的元认知的人才能胜出 。按照心理学的意向性[2]分类 ，元认知至少可分为六个等级 ，它们最终又可归为两类：被动元认知和主动元认知。
普通人通常只会在遇到问题时被迫启用这个能力 ， 比如遭遇指责 、批评时 ，才不得已去反思纠正； 处于顺境时 ，依旧会顺着本性生活 ，该玩手机玩手
机 ，该睡懒觉睡懒觉 ，对自身行为的好坏毫无觉察 。被动使用元认知的人 ，似乎只有在迫不得已的情况下才会被迫扇动几下翅膀 。而有些人即使在没有威胁 的情况下也会尝试练习扇动翅膀 ，让自己不断进化 ，彻底远离危险。
从被动到主动 ，这是一个转折点 。当一个人能主动开启第三视角 、开始持续反观自己的思维和行为时 ，就意味着他真正开始觉醒了 ，他有了快速成长的 可能。
元认知如何改变我们的命运
反观 ，是元认知的起点 。当你开始反观自己的思考时 ，神奇的事情发生了：你能意识到自己在想什么 ，进而意识到这些想法是否明智 ，再进一步纠正那 些不明智的想法 ，最终做出更好的选择 。缺乏自我观察意识的人只能无意识地顺着感觉和喜好行事 ，无论在生理上还是在精神上 ，都会不自觉地追求眼前的 舒适和简单 ，觉察不到自己当前的思维和行为有什么不妥 ，直到碰壁 。而人生是由无数个选择组成的 ，不同选择的累加造就了不同的人生 。如果你觉得自己 的人生不如意 ， 问题十有八九就出在这里。

好在元认知一旦开启 ，变化马上就会发生 。为了体验这种变化 ，你不妨想象自己身边有一个“灵魂伴侣”，他会时刻伴随 、指引着你 ，于是 ，在你走神
时 ，他会提醒你集中注意力 ，去做更重要的事；在你迷茫时 ，他会站在人生高处 ，帮你看清局势和格局；在你生气时 ，他会帮你梳理情绪 ，找到比生气更好 的选择；在你无解时 ，他会深入底层规律 ，提示你应该抓住什么；在你懈怠时 ，他会站在人生的终点 ，警醒你现在应该做什么 ……
如图3-2所示 ，这才是高级的元认知——时刻帮你从高处 、深处 、远处看待现在的自己 ，让自己保持清醒 、不迷失 ，保持动力 、不懈怠 ，保持平和 、不 冲动 。有这样的能力加持 ，你会差吗？

图3-2   元认知的维度
如何获取元认知能力
一旦你知晓了元认知这个概念 ，主动元认知就已经不可逆地被启动了 ，但这还不够 ，元认知的范畴远不止如此 ，要获取这种能力还有更为系统的方法。
第一 ，从图3-2中可以看出 ，提升元认知能力的工具需要从“过去”端获取 ，包括学习前人的智慧和反思自身的经历。
前人的智慧有很多 ，大多可以从书籍中获取 ， 比如当我们读过《刻意练习》后 ，再面对学习中的困难时就不会逃避和畏惧 ，而会利用“舒适区边缘”理论  让自己积极面对挑战； 比如当我们读过《超越感觉》后 ，面对自己讨厌的人时也不会表现出攻击和不屑 ，而会尽力从他身上学习真实可用的东西 。这正是我 们需要终身学习的原因 ， 因为学习前人的智慧可以让我们拥有更广的全局视角（高度） 、掌握更深的底层规律（深度） ，帮我们从无知中跳出来 ，做出更加 正确的选择。
尤其值得关注的是脑科学和认知科学 ，这类知识是对我们自身行为模式的直接描述 ，学习它们相当于直接观察我们自己 。比如当我们知道自己的大脑构 成时 ，就能意识到自己体内其实有一个“原始自我”和一个“现代自我”，我们的一切行为表现其实都是它们博弈的结果 ，这样 ，我们就知道该如何指导那个“现 代自我”取得胜利 ，从而让自己变得更强。
第二 ， 自身的经历更是一种独特的财富 。我们每天的生活像河水一样流过 ，如不做停留则很难攫取生活中的智慧 ，而反思复盘让我们有机会思考有什么 经验可以获得 、有什么教训可以汲取 ，这样就可以在下次面临类似问题时避免做出像当初那样不够明智的选择 。 曾子曰：“吾日三省吾身 。”古人早已将反思  复盘的方法付诸实践。
第三 ，如果说学习和反思是静态的 ，那处于当下的 、动态的自已又该如何主动运用元认知呢？很简单 ，启用你的“灵魂伴侣”啊！让他时刻监控你 ，就像 电脑系统里的杀毒软件 ，监控着你的每一次操作 ，一旦发现可疑文件就立即发出警报。
试着回顾一下这类场景 。你需要查找一份资料 ，打开手机 ，看到微信上有个小红点 ，不自觉地点进去 ，发现有人在朋友圈里发了一段搞笑视频 ， 忍不住 点开看了一下 ，又发现这个视频的背景音乐是自己找了很久的曲子 ，于是打开音乐软件去搜索这首歌曲 ……不知不觉 ，半小时过去了 ，之前要查找资料的事 早已忘得一干二净。
我们总是这样 ，一开始只想找一根绳子 ，最后却牵出一头大象 。有时候你会沉迷于微博 、头条 、手游而无法自拔；有时候你会这里弄一下 、那里弄一
下 ，忙得一团糟 ，却不知道自己到底在忙什么；还有的时候 ，你会困在某种情绪之中 ，无端地消耗着自己 ……这些都是元认知能力不足的表现——顺着自己 的本性做喜欢和舒服的事 ，精力发散 ，缺乏觉知 ，任何偶发的干扰都会分散注意力。
如果有个“灵魂伴侣”一直在监控你 ，你就能审视自己的行为 ，从过程中跳出来 ，告诉自己：“这个事情可做可不做 ，还是先忍一下 ，等做完重要的事情再 说；停下来 ，先想清楚什么事情是最重要的 ，不能盲目地做那些容易但不重要的事；再过几年回头看 ，现在的烦恼不值一提 ，与其消耗自己 ，不如把情绪收 起来 ，干点有用的事 ……”
这种警醒和改变肯定不如保持现状舒服 ，但能够让你将注意力放到原来的目标上 ，去聚焦 、去成长。
元认知能力总能让你站在高处俯瞰全局 ，不会让你一头扎进生活的细节 ，迷失其中 。如果你足够细心 ，还会发现未来视角总是当前行动的指南针 ，它可 以在茫茫的生命中为你导航 ，让你主动选择去做那些更重要而不是更有趣的事情。

第四 ，提高元认知能力的方法有很多 ，但最让人意想不到是下面这条——冥想 。是的 ，冥想就是那种只要静坐在某处 ，然后放松身体 ，把注意力完全集 中到呼吸和感受上的活动。
冥想带来的极度专注可以帮大脑做健身操 。通过持续锻炼 ，大脑可以直接从物理上提升人的元认知能力 ，如果过程中觉察到自己走神了 ，我们只需柔和 地将注意力拉回来 。现在再联系之前提到的“灵魂伴侣”，不难发现这些活动本质上都在做同一件事：监控自己的注意力 ，然后将其集中到自己需要关注的地  方。
反馈是这个世界的进化机制 。有反馈 ，并形成回路 ，就可能使任何系统开始自我进化 ，无论机械设计还是软件系统都是如此 。而元认知正是人类认知能 力的反馈回路 ，有了它 ，我们才可能进入快速进化的通道。
虽然元认知能力很有用 、很神奇 ，但我还是想给大家一句忠告：想拥有和掌握元认知能力并不容易 ，这需要不断地练习 、练习 、再练习 。很多时候 ，你 发现自己做得并不好 ，没关系 ，重新再来 。用不了多久 ，你就会发现 ， 自己慢慢变得和以前不一样了。
这种变化也是反馈 ，收集这些反馈 ，然后继续激励自己 ，终有一天 ，你会变得与众不同。</tw-passagedata><tw-passagedata pid="93" name="情绪专注" tags="" position="1425,2800" size="100,100">第一节   情绪专注： 一招提振你的注意力
用元认知来观察自己的注意力是一件很有意思的事情 ，相信你可以轻易观察到这种现象：身体做着A，脑子却想着B。 ·跑步的时候 ，手脚在动 ，脑子却在考虑明后天的安排；
·吃饭的时候 ，嘴巴在动 ，心里却在担忧与他人的关系；
·睡觉的时候 ，身体不动 ，思绪却像瀑布一样倾泻而出 ……
这些场景司空见惯 ，俗称分心 、开小差 ，不过你可能根本不觉得这是个问题 ，甚至还对自己能一心二用而沾沾自喜 。然而这种“做A想B”的行为模式却实实在在地影 响着我们 ，使我们在不知不觉中徒生烦恼 、渐生愚钝 。从某种意义上说 ，它正是我们烦恼和无能的来源。
“行动”如躯体 ，“感受”如灵魂
为了看清这一点 ，我们可以试着分解注意力 。回顾任何一件事 ，我们的注意力其实都可以分为“集中在行动上的”和“集中在感受上的”两部分 ， 比如： ·跑步时 ，跑是行动 ，剩下的是感受；
·吃饭时 ，吃是行动 ，剩下的是感受；
·睡觉时 ，睡是行动 ，剩下的是感受 …… 起初 ，行动和感受二者是统一的。
我们会在做一件事情时全身心地感受这件事情 ，将注意力全部放在和当前事物相关的事情上 ，所以跑就是跑 ，吃就是吃 ，睡就是睡 ……我们刚开始学习某项技能， 或还只是孩童的时候通常都是这样的 ，那时的我们善于投入 ，敏于接受 ，平和无忧 ，灵性十足。
随着行动越来越熟练 ，我们在行动上集中的注意力越来越少 ，分散在其他地方的注意力越来越多 ，于是我们不再去耐心感受行动 。从此 ，分心代替专注 ，身心开始 分离（见图4-1）。

图4-1   身心合一与身心分离
缺少感受的行动 ，就像失去灵魂的躯壳；缺少感受的人对凡事都心不在焉 、视而不见 、听而不闻 。更准确地说 ，我们在躯壳内装了一个混乱的灵魂 ，这个灵魂总 是“做A想B”：刷牙的时候走神 ，走路的时候走神 ，洗澡的时候走神 ……无时无刻不在走神。
走神时 ，行动失去了感知 ，注意力也因为缺少了感受而无法形成反馈闭环 ， 因此身体和动作开始不自觉地变得麻木或走形 。不信的话 ，你现在就可以感受一下：走 神时是不是身体有一部分始终是僵硬的 ，神情有一部分始终是紧绷的？
不过就身心分离模式来说 ，身体上的影响实属小事 ，真正严重的是它会对我们的情绪状态和能力提升产生持续的负面影响。
分心走神的原因与危害
分心走神的原因无非两个：一是觉得当下太无聊 ，所以追求更有意思的事情；二是觉得当下太痛苦 ，于是追求更舒适的事情 。因为身体受困于现实 ， 只好让思想天 马行空。
无论我们身在何处 、经历着什么 ， 只要现实中稍不如意 ，我们就可以让思绪上天入地 ，瞬间逃离困境 ，享受想象中的舒适和快感 。换句话说 ，就是分心走神的成本 太低 ，而人的天性又是急于求成和避难趋易的 ，所以在默认情况下 ，我们都会不自觉地待在精神舒适区内。
可惜“走神一时爽”，事后我们就得承担走神带来的各种损失 ，其中最大的损失莫过于生命质量变差 。因为走神时 ，我们要么沉浸过去 ，要么担忧将来 ，要么幻想不 可能实现的情况 ，走神可以让我们活在任何时候 ，唯独不能让我们活在当下。
而生命是由当下的一个个片段组成的 ，身心合一的片段组成的就是幸福专注的高质量人生 ，身心分离的片段组成的就是分心走神的低质量人生 。分心走神还会造成 拖延和低效 ， 因为情绪总是滞后于行为 ，所以人们做事时进入状态往往很慢 ， 需要情绪过渡。
可见 ，分心走神的本质是逃避 ，所以 ，面对困难时 ，身心分离的人总会不自觉地退回舒适区 ，而身心合一的人则更容易跳出舒适区 ，直面困难。
从长远看 ，一个人专注力的高低可能预示了他今后成就的大小 。比尔·盖茨与沃伦·巴菲特第一次相识的时候 ，盖茨的父亲就分别给他们一人一张卡片 ，让他们在上 面各写一个词 ，描述究竟是什么成就了自己 。结果两个人的答案竟然一模一样 ，都是专注。
当然 ，我们也无须为自己的分心走神过于自责 ， 因为从微观来看 ，分心走神原本就是我们的天性之一 。不仅是你 ，所有人都一样 。这背后的原因与我们大脑的记忆 机制有关。
论记忆能力 ，人类肯定比不上计算机 ，无论在容量上还是在精确度上 ，我们都不具优势 ，但这并不影响我们提取记忆的速度 ， 因为人类的大脑使用背景关联记忆的 方法 ， 即借助事情的背景或线索等提示信息来让我们想起特定内容 ， 比如我们只根据名字 、声音 、时间或场景等任意要素就能瞬间想起某人 、某事 ，而计算机则会平等 地处理所有信息 ，每次提取信息都要从数据库中挨个搜索一遍 。背景关联记忆的方式可以极大地降低大脑能耗 ，弥补大脑神经元处理速度的不足。
然而进化是把双刃剑 ，背景关联记忆的一个副作用就是：我们感观所听到 、看到 、摸到 、尝到 、嗅到的任何信息 ，都会引出一些其他记忆内容 ，又因为感观受潜意 识控制 ，而潜意识永不消失 ，所以只要我们醒着 ，这种分心走神随时都可能发生 。这也是我们需要锻炼元认知的原因 ， 因为成长就是克服天性的过程 ，我们必须用觉知 力和自控力去约束天性 ，否则就会被潜意识左右而不自知。

收回感受 ， 回归当下
如果一个人从小就养成了全情投入和界限清晰的专注习惯 ，那他不仅能获得智力上的聪慧 ，也能获得情绪上的平和 。经过长期的强化 ，他就能与普通人形成巨大差 距 ，毕竟绝大多数人意识不到注意力分为行动和感受两个部分 。如果我们能早点知道这个原理并主动运用 、修正 ，或许命运轨迹和生活质量都会有所不同 。不过现在知 道也为时不晚 ， 因为只要一招即可扭转局面：让感受回归行动。
跑步时 ，把感受收回来 ，悉心体会抬腿摆臂 、呼吸吐纳和迎面的微风； 睡觉时 ，把感受收回来 ，悉心感受身体的紧张与松弛； 吃饭时 ，把感受收回来 ，感受每一口 饭菜的香甜 ，体会味觉从有到无的整个过程 ，不要第一口还没吃完就急着往嘴里塞第二口饭菜。
身体感受永远是进入当下状态的最好媒介 ，而感受事物消失的过程更是一种很好的专注力训练 。它提示我们 ，身心合一的要领不仅是专注于当下 ，更是享受当下， 而这种享受必将使我们更从容 ，不慌张。
慢慢练习收回感受 ，让注意力回到当下 ，我们的烦恼就会慢慢减少 ，精力就会更加旺盛 ，情绪就会更加平和 ，身体就会更加柔软 ，感知就会更加灵敏 ，思考就会更 加深入 ……这个习惯涉及生活的方方面面 ，改变它就相当于改变了自己的底层行为模式 ，其力量不可小觑。
最后再讲一个故事 ，你可能早就听过 ，不过有了今天的思考 ，相信你能很快明白其中的深意。 一位行者问老和尚：“您得道前在做什么？ℽ
老和尚说：“砍柴 、担水 、做饭 。” 行者问：“那得道后呢？ℽ
老和尚说：“砍柴 、担水 、做饭 。” 行者又问：“那何谓得道？ℽ
老和尚说：“得道前 ，砍柴时惦记着挑水 ，挑水时惦记着做饭；得道后 ，砍柴即砍柴 ，担水即担水 ，做饭即做饭 。”</tw-passagedata><tw-passagedata pid="94" name="学习专注" tags="" position="1575,2800" size="100,100">第二节   学习专注： 深度沉浸是进化双刃剑的安全剑柄
200万年前 ，人类与黑猩猩 、大猩猩还属于同一物种 ，此后 ，人类开始脱离猩猩族群 ，疯狂地向智人进化 。进化赋予人类高度发达的神经系统 ，使我们拥有了极强 的感知和思考能力 ，并借此创建了文明。
然而进化是一把双刃剑 ，它给人类带来能力的同时也带来了痛苦 。人们因能感知太多信息而感到心神不宁 ，或因产生过多欲望而痛苦不堪 ，又或因担忧能力不足而 滋生焦虑 ，无论顺境或是逆境都不得安生 。就像今天的我们 ，虽衣食无忧 ，却总是苦于无法摆脱手机的干扰 ，无法获取让人羡慕的技能 ，无法拥有想要的生活 ，等等 。 低层次的动物是没有这种烦恼的 ，它们的心灵只容纳环境中确实存在的 、与它们切身相关的 、靠直觉判断的信息——饥饿的狮子只注意能帮助它猎到羚羊的信息 ，吃饱 的狮子的注意力则集中在温暖的阳光上 ……
如此看来 ，享受进化的好处也要承受进化带来的痛苦 ，不过也无须担心 ， 因为部分智者早已有意无意地跳出了这种限制 ，他们采用一种极为有效的行为模式 ，让自 己的情绪和能力经常处于平和与高效的状态 。如果进化是一把双刃剑 ，那这些人就相当于找到并抓住了双刃剑的安全剑柄 。当众人还在懵懂中拿着刀刃劈物伤己时 ，他 们已经学会手握剑柄披荆斩棘了。
人类情绪和能力优劣的根本差异
为了更好地理解 ，我们还是先从“主动选择信息的能力”开始谈起吧 ， 因为人类情绪和能力的优劣差异来自于对自身注意力关注方式的差异 。比如冥想者相比其他注 意力不集中的人 ，更能够主动将注意力集中在自己的呼吸和感受上 ，屏蔽其他杂念。
在情绪上如此 ，在能力上也如此 。能力弱者极易分心 ，他们必须在一个理想的环境中才能学习 ，任何风吹草动都会让他们心神不宁；他们总是忍不住想做点更有趣 的事情 ，一条热点新闻 、一段有趣的闲聊都能把他们的注意力从重要的事情上移开 。能力强者则正好相反 ，他们的优势就在于能够主动屏蔽干扰 ，选择需要的信息并沉 浸其中 ，为此他们甚至会主动练习 ， 比如有人会故意在声音嘈杂的地方锻炼专注力 ，这使他拥有了随时随地进入深度阅读和思考状态的能力。
因沉浸能力的不同 ，人类最终处在了不同的层次 。从大范围看 ，沉浸能力强的人时常处于支配层 ，沉浸能力弱的人时常处于被支配层 。如果我们希望从人群中脱颖 而出 ，就一定要刻意磨炼这种品质 ，或许这正是改变你我命运的金钥匙。
深度沉浸的方法
在上文中 ，我介绍了“主动选择信息”和“深度沉浸”两个概念 ，但前者只是入口 ，后者才是关键 。因为能主动选择信息的人不一定能沉浸其中 ，所以很多人虽然能放   下手机 、拿起书本 ，能放弃娱乐 、磨炼技能 ，甚至能大量练习 ，努力到感动自己 ，但他们就是无法让自己变得卓越 。这感觉就像是明明找到了双刃剑的安全剑柄 ，却不 知道如何抓取 ，让人无比揪心。
这世上能聚焦的人很多 ，但卓越的人很少 ，其原因之一就是大多数人都缺乏深度沉浸的能力 。然而获取深度沉浸的能力不能仅靠热情 ，它更是一项技术 ，是有方法 论的 。可惜很多成就斐然的前辈虽然拥有深度沉浸的能力 ，却很少有人能说清楚这能力到底是什么 、应该怎么获取 。幸运的是 ，《刻意练习》这本书给了我们大致的答 案。
心理学家安德斯·艾利克森和科学家罗伯特·普尔经过大量的研究后指出：所谓天才 ，其实并不神秘 ，其本质是“正确的方法”加上“大量的练习”。换言之 ，我们没有变 得像天才般卓越是因为方法不对或练习不够。
就方法而言 ，绝大多数人缺乏指导下的努力都属于“天真的练习”， 即反复做某件事情 ，并指望只靠那种反复改善表现 、提高水平 。这种只靠重复的“埋头干”和“正确 的方法”相去甚远 。“正确的方法”通常具有以下四个特征。
第一 ，有定义明确的目标 。比如你要练琴 ，那就告诉自己：“连续三次不犯任何错误 、以适当的速度弹奏完曲子 。”而不是“我要练琴半小时”这样宽泛的目标 。 目标 定义越明确 ，注意力的感知精度就会越高 ，精力越集中 ，技能越精进 。如果目标太大 ，那就将它分解成小目标 ，这样做也是为了使目标更具体 、精细。
第二 ，练习时极度专注 。谁都知道专注的重要性 ，但沉浸的关键是要做到“极度”专注 ，也就是说 ，在短时间内投入100%的精力比长时间投入70%的精力好 ， 因为专 注的真正动力并不是毅力和耐心 ，而是不断发现技巧上的微妙差异和持续存在的关注点 ，精力越集中则感知越细微。
极度专注不仅是学习的关键 ，也是灵感的来源 。如图4-2所示 ，作者芭芭拉·奥克利曾在《学习之道》这本书中这样介绍：大脑在学习的时候有两种模式 ，一种是“意 识”的专注模式 ，另一种是“潜意识”的发散模式。


图4-2   意识和潜意识的工作模式
所谓专注模式 ，就是当我们专注于某件事的时候 ，前额叶皮层就会自动沿着神经通路传递信号 ，这些信息会奔向与我们思考内容相关的各个脑区 ，将它们连起来 。 在这种模式下 ，我们可能找到答案 ，也可能找不到答案 ， 因为真正的答案不一定在我们意识关注的脑区 。此时就需要潜意识的发散模式来帮助我们 ，它能够让大脑跳出 原来的工作区域 ，让神经元随机地和不相关的区域进行连接 ，从而得到也许能解决问题的答案。
不过 ，想让潜意识工作必须满足一个条件 ，就是彻底关闭清醒的“意识”， 即彻底忘掉原来那件事 。两种模式好比手电筒里打出来的光：专注模式下光束紧密 ， 穿透 力强 ，径直打在一小块区域上；如果拨到发散模式 ，光柱就会散开 ，虽然光的强度会降低 ，但照亮的范围更广 。要注意的是 ，一个手电筒不能同时照出两种光。
所以变聪明的秘诀就是：先保持极度专注 ，想不出答案时再将注意力转换到另一件与此毫不相干的事情上 。即事前聚精会神 ，让意识极度投入；事后完全忘记 ，让 意识彻底撒手 。这样 ，灵感和答案就会大概率地出现。
阿基米德就是因为绞尽脑汁也没有想出鉴定皇冠真假的办法 ，所以准备去公共浴室彻底放松一下 ，但在他的身体进入澡盘的那一瞬间 ，溢出的水就给他带来了灵 感 。很多例子都表明 ，科学发现或其他智力上的突破都是在当事人毫无期待 、正在想别的事情的时候出现的。
可见 ，好的学习模式是 ，在做A的时候彻底关注A，在做B的时候彻底关注B，A和B两件事情之间有非常清晰的界线 。如果在做A的时候想着B，在做B的时候又想着 A，那么意识工作的深度不够 ，潜意识也无法顺利开启 ，这种边界不清的习惯对能力提升伤害很大 。李大钊也说过：“要学就学个踏实 ，要玩就玩个痛快！”说明界线分   明的习惯对人性情和能力的培养都很有好处。
第三 ，能获得有效的反馈 。一般而言 ，不论做什么事情我们都需要反馈来准确识别自己在哪些方面还存在不足 ， 以及为什么会存在不足 。缺少反馈 ，我们既容易出 错 ，又容易走神 ，而且很难快速提升个人能力 。因此 ，有教练指导是极好的事 ，有老师批评也是好的 ， 闭门造车式的练习不仅容易让人分心走神 ，也会让自己长期在低 水平层面徘徊 。所以 ，想方设法得到及时 、有效的指导和反馈是不断精进的重要条件 。如果条件有限 ，反馈也可以通过书籍影像 、与他人交流或者自我反思来获取。
第四 ，始终在拉伸区练习 。一味重复已经掌握的事情是没有意义的 ，但挑战太难的任务也会让自己感到挫败 ，二者都无法使人进入沉浸状态 ，好的状态应该介于二 者之间。
著名心理学家米哈里·契克森米哈赖在《心流》一书中提出这样一个模型（见图4-3）： 当人们对当前的活动感到厌倦时 ，说明应该提高难度； 当人们对当前的活动 感到焦虑时 ，说明应该保持这个水平专注练习 ，如此反复交替就可以让自己进入心流通道 ，沉浸其中。

图4-3   心流通道
我们每个人都必定有过这样的经历： 因喜欢一件事而沉醉其中 ，忘记时间 ，不知疲倦 ，不管这件事是娱乐消遣还是学习研究 ，这种沉浸都是可遇不可求的自发状 态 。但若想在某方面有所成就 ，就不能依赖这种不稳定的自发状态 ，必须建立稳固可靠的行为模式 。因为我们面对的不仅仅是兴趣 ，还有让人心生畏惧的核心困难。
也就是说 ，我们每天都要做那些让自己感到有些困难但又可以通过努力来完成的事情 ， 即跳出舒适区 ，避开困难区 ，处在拉伸区。
好在我们可以依据上述四点建立主动沉浸的行为模式（见图4-4），时常练习则能将其固化为深度沉浸的底层能力 ，从而辐射生活的方方面面。


图4-4   刻意练习四要素
学完刻意练习这个理论的当天 ，我就开始了实践。
以前女儿练钢琴时 ，她妈妈会要求她把新学的曲子弹10遍 ， 只要次数够了 ，任务就完成了 ，现在我用刻意练习的原则改变了练琴方法。
我先听她弹一遍 ，发现有很多不熟练 、易出错的地方 ，于是我要求她今天只练第一节 ，后面的先不练（把大目标拆分成小目标） ，然后只练刚才弹错的地方（在拉 伸区练习） ， 只要能连续流畅地弹3遍不出错就算完成（ 目标具体清晰） 。练习过程中 ，我会及时纠正她的指法和按键错误（及时有效的反馈） ，这样 ，她很快进入了   专注状态（沉浸其中） ，不一会儿就把第一节弹得很好了。
虽然结束时女儿直呼好累 ，但明显成就感满满 ， 因为她已经不畏惧最难的地方了 。如果不这样要求 ，她就会一遍一遍地弹自己熟悉的地方 ，难的地方就一带而过， 中途还经常会漫不经心地停下来 ，这样的练习非常低效。
细心体会上述四个要素 ，我们就可以进入深度沉浸状态 ，从“聚焦”走向“卓越”， 当然 ，要做到真正的卓越离不开另一个要素：大量的练习。
这种大量练习需要到什么程度呢？小钢琴家陈安可或许可以为我们提供一个参考答案 。她三岁半开始练琴 ，一年半后就上节目演奏8级难度的钢琴曲 。在一次节目 采访中 ，她坦言自己每天要练4小时琴 ，而在更早的采访中她就说：“我每天都练 ，没有一天不练 。”
可见 ，天才也需要大量的练习 ，或者说正是“正确的方法”加“大量的练习”造就了天才 。无论是谁 ，拥有深度沉浸的能力后 ，就一定能走向某一领域的高处。 所以 ，从现在开始 ，好好地审视自己吧。
·审视自己的注意力——是被动吸引还是主动选择？ ·审视自己的沉浸度——是分心走神还是极度专注？ ·审视自己的练习量——是浅尝辄止还是大量投入？
前人的智慧足以使我们走向卓越 ， 只要用心拾取 ，我们一定能在进化的大潮中成就自己 ，造福他人。
</tw-passagedata><tw-passagedata pid="95" name="目录" tags="" position="750,2650" size="100,100">[[大脑]]
[[焦虑]]
[[耐心]]

潜意识
[[模糊]]
[[感性]]

[[元认知]]
[[自控力]]


专注力
[[情绪专注]]
[[学习专注]]


学习力
[[匹配]]
[[深度]]
[[关联]]
[[体系]]
[[打卡]]
[[反馈]]
[[休息]]


行动力
[[清晰]]
[[“傻瓜”]]
[[行动]]


情绪力
[[心智带宽]]
[[单一视角]]
[[游戏心态]]
</tw-passagedata><tw-passagedata pid="96" name="大脑" tags="" position="1350,2425" size="100,100">第一节   大脑： 重新认识你自己
我猜很多人并不真正了解自己 ，甚至从未了解过 ，所以才会对自身的各种问题困惑不已 。这里我说的“ 自己”，特指自己的大脑部分 ， 因为没有大脑 ，我们什么都不是； 有大脑 ，但不了解它 ，我们就只能凭模糊的感觉生活 ，而那样的生活通常不是我们想要的。
从大脑开始 ，重新认识自己 ，我们会再“进化”一次。
三重大脑
人类能成为这个星球上最高等的生物 ，完全仰仗那智慧的大脑 。在人们眼中 ，它精密无比 ，堪称完美 ，科学技术发展至今也无法完全解开它的秘密 。然而事实证明它并 不完美 ，甚至问题重重 ，这些问题也正是让我们感到无能和痛苦的根源 。要想了解这一点 ，我们需要先了解大脑的进化历程。
起初 ，地球上并没有生命 。但在数十亿年前 ，远古的海洋中出现了一些“复制子”，在进化的力量下 ，它们逐渐成为单细胞生物 ，接着又演化为动物 、植物和微生物等， 之后动物这条分支进化成各种原始鱼类 ，遍布大海。
约3.6亿年前 ，它们开始向陆地进军 ，地球进入属于爬行动物的时代 。为了适应陆地生活 ，爬行动物演化出了最初的“本能脑”。本能脑的结构很简单 ，只有一个原始的反 射模块 ，可以让爬行动物对环境快速做出本能反应 ， 比如遇到危险就战斗或逃跑 ，遇到猎物就捕食 ，遇到心仪的异性就追求等 。爬行动物既没有情感也没有理智 ，体温随外 界变化的特性也让它们无法在寒冷的环境中活动 ，但依靠这种简单的本能反应 ，它们不仅生存了下来 ，一些动物还活到了我们这个时代 ， 比如鳄鱼 、蜥蜴 、蛇等 。所以很多 学者把本能脑也称为原始脑 、基础脑 、鳄鱼脑 、蜥蜴脑 ，或者干脆叫爬行脑。
到了大约2亿年前 ，哺乳动物开始登场 。它们为了更好地适应环境 ，不仅让体温保持恒定 ，还进化出了情绪 。有了情绪的加持 ，哺乳动物就能在恶劣的环境中趋利避
害 ，大大提升了其生存优势 ， 比如恐惧情绪可以让自己远离危险 ，兴奋情绪可以让自己专注捕猎 ，愉悦情绪可以增强同伴间的亲密度 ，伤心情绪能引来同情者的关爱等 。这 也是为什么我们喜欢把猫或狗当成宠物 ， 因为这些动物很容易和我们产生情感上的交流 ，懂得取悦和照顾我们 。相应的 ，哺乳动物的大脑里也发展出一个独特的情感区域
（边缘系统） ，脑科学家称之为“情绪脑”。在哺乳动物中 ，猴子经常被人类当作观察和实验的对象 ， 因此情绪脑通常也被称作猴子脑。
直到距今约250万年前 ，人类才从哺乳动物中脱颖而出 ，在大脑的前额区域进化出了“新皮层”。这个新皮层直到7万~20万年前才真正成形 ，成为一个无与伦比的脑区 ， 它让我们产生语言 、创造艺术 、发展科技 、建立文明 ，从此在这个星球上占据了绝对的生存优势 。人类沉迷于自己独有的理智 ，所以把这个新的脑区称为“理智脑”，当然， 也有人喜欢称它为理性脑或思考脑（见图1-1）。

图1-1   人类的三重大脑
大家都知道《伊索寓言》 中“农夫与蛇”的故事 ，故事讲述一位农夫在寒冷的冬天发现路边有一条冻僵的蛇 ，他心生怜悯 ，把它放到自己怀里 ，用身上的热气温暖它 。蛇  苏醒后非但没有感恩农夫 ，反而咬了他一口 。农夫临死前后悔地说：“我怜悯恶人 ，我该死 ，应该受报应 。”事实上 ，如果这位农夫懂得一些大脑知识 ，就不会犯如此低级的  错误了 。蛇这种冷血的爬行动物根本就没有发达的情绪脑 ，它不知感恩为何物 ，只会依靠本能行事 ，遇到危险要么战斗 、要么逃跑；而愚昧的农夫竟然以为蛇和人类一样有 善恶之心 ，会知恩图报 ，结果使自己命丧黄泉。
可见我们人类与这个世界上的其他动物已经迥然不同 ，在我们的大脑里 ， 由内到外至少有三重大脑：年代久远的本能脑 、相对古老的情绪脑和非常年轻的理智脑。
但大多数人并不知道这些 ，只是凭感觉认为这个世界上所有的动物都只有一个大脑 ，而人类仅仅比它们聪明一点 。这种错误的认知使我们像那个救蛇的农夫一样 ，经常 做一些愚蠢的事情。
高低之分与权力之争
很显然 ，我们的大脑并不是预先设计好的 ，而是由不同模块“堆砌”而成的 ，就像一台七拼八凑组装出来的电脑 ，主板是老的 ，显卡是旧的 ， 中央处理器却是新的 ，所以 它们在一起工作时必然会出现很多兼容问题。
令人欣慰的是 ，高级的理智脑是我们人类所独有的 ，它使我们富有远见 、善于权衡 ，能立足未来获得延时满足 ，从这个角度看 ，本能脑和情绪脑确实要低级些 。不过我 们若是因此而沾沾自喜 ，未免高兴得太早了 ， 因为理智脑虽然高级 ，但比起本能脑和情绪脑 ，它的力量实在是太弱小了 。细数起来 ，理智脑弱小的原因至少有以下四个方
面。
第一 ，从出现的年代看 ，本能脑已经有近3.6亿年的历史 ，情绪脑有近2亿年的历史 ，而理智脑出现的时间只有250万年不到 。如果把本能脑比作100岁的老人 ，那情绪脑 就相当于一个55岁的中年人 ，而理智脑则好比一个不满1岁的宝宝 。可想而知 ，这个宝宝再聪明 ，若是在两个成年人面前 ，也会显得势单力薄（见图1-2）。


图1-2   三重大脑的年龄类比
第二 ，三重大脑发育成熟的时间不同 。本能脑早在婴儿时期就比较完善了 ，情绪脑则要等到青春期早期才趋于完善 ，而理智脑最晚 ，要等到成年早期才基本发育成熟。 如果不需要准确的数字 ，我们大致可以认为它们分别在2岁 、12岁 、22岁左右发育成熟 ，算起来各阶段时间相差约10年 ，所以在人生的前20年里 ，我们总是显得心智幼稚不  成熟。
第三 ，我们的大脑里大约有860亿个神经元细胞 ，而本能脑和情绪脑拥有近八成 ，所以它们对大脑的掌控力更强 。同时 ，它们距离心脏更近 ，一旦出现紧急情况 ，可以 优先得到供血 ，这也是为什么当我们极度紧张时往往会感觉大脑一片空白 ，这是因为处于最外层的理智脑缺血了。
第四 ，本能脑和情绪脑虽然看起来很低级 ，但它们掌管着潜意识和生理系统 ，时刻掌控我们的视觉 、听觉 、触觉 ……调控着呼吸 、心跳 、血压 ……因此其运行速度极
快 ，至少可达11000 000次/秒 ，堪比当今世界上运行速度最快的个人计算机；而理智脑的最快运行速度仅为40次/秒 ，相比起来简直弱极了 ，并且理智脑运行时非常耗能 。如 果你是第一次听说这些 ，肯定会感到惊讶。
种种迹象表明 ，理智脑对大脑的控制能力很弱 ，所以我们在生活中做的大部分决策往往源于本能和情绪 ，而非理智 。当然 ，不管是何种因素影响我们做出决策 ，初衷都 是让我们好 ，只不过本能脑和情绪脑的决策往往与现代社会脱节 ， 因为它们以为自己还处于原始社会。
这也可以理解 ，毕竟亿万年来我们的祖先一直在危险 、匮乏的自然环境中过着“狩猎与采集”的生活 ，对他们来说最重要的事情莫过于生存 。为了生存 ，他们必须借助本 能和情绪的力量对危险做出快速反应 ，对食物进行即时享受 ，对舒适产生强烈欲望 ，才不至于被吃掉 、被饿死。
同样 ，为了生存 ，原始人还要尽量节省能量 ，像思考 、锻炼这种耗能高的行为都会被视为对生存的威胁 ，会被本能脑排斥 ，而不用动脑的娱乐消遣行为则深受本能脑和 情绪脑的欢迎 ，毕竟在原始社会中 ，若不节省能量 、及时行乐 ，说不定哪天就被野兽吃掉了。
可见 ，本能脑和情绪脑的基因一直被生存压力塑造着 ，所以它们的天性自然成了目光短浅 、即时满足 。又因它们主导着大脑的决策 ，所以这些天性也就成了人类的默认 天性。
然而社会的发展突然开始加速了 。约1万年前 ，人类开始进入农业社会；约300年前 ，人类进入工业社会；约50年前 ，人类进入信息社会 。这种变化对于古老的本能脑和 情绪脑来说 ，简直就像一瞬间发生的事情 ，它们根本没有反应过来 。它们突然不再需要为基本生存发愁 ，舒适和娱乐又唾手可得 ，这让它们无所适从 。我们今天虽然西装革 履地坐在钢筋混凝土建造的大楼里工作 ，但本质上依旧是那个为了生存而随时准备战斗 、逃跑或及时享乐的“原始人”。
进化之手还未来得及完全改造我们 ，这些在远古社会具有生存优势的天性 ，在现代社会反而成了阻碍 ，甚至可以说 ，我们当前遇到的几乎所有的成长问题都可以归结到 目光短浅 、即时满足的天性上 ，不过在现代社会 ，用避难趋易和急于求成来代指它们显然更加贴切。
·避难趋易——只做简单和舒适的事 ，喜欢在核心区域周边打转 ，待在舒适区内逃避真正的困难； ·急于求成——凡事希望立即看到结果 ，对不能马上看到结果的事往往缺乏耐心 ，非常容易放弃。
所以 ，一切都明了了 。我们做不成事 ，并不是因为愿望不够强烈 ，也不是因为意志力不足 ，而是因为默认天性太过强大 。比如 ，我们明知道高糖 、高热量的食物不宜多 吃 ，但背后仿佛总有人怂恿再吃最后一口；我们明知道沉迷手机不好 ，但手和眼睛就是无法从上面挪开 ……每次理智脑与本能脑 、情绪脑对抗的时候 ，败下阵来的总是理智 脑 ，甚至有时候它还没来得及启动 ，身体就已经被本能和欲望“劫持”了。
为了更好地理解这一点 ，我们可以把大脑看作一个公司 。本能脑和情绪脑是公司里的员工 ，一个资历很老 ，一个年富力强 ，但他们都没什么文化 ，也没什么事业心 ，只 在乎眼前的舒适与安逸 ，而理智脑则是这个公司的经理 ，他富有远见且身居高位 ，但因为太年轻 ，所以没有威信 ，做出的决策经常被两位老员工藐视 。这样的大脑构造导致 我们总是陷入“明明知道 ，但就是做不到；特别想要 ，但就是得不到”的怪圈 ， 比如：
·明知道读书重要 ，转身却掏出了手机；
·明知道跑步有益 ，但跑了两天就没了下文； ·明知道要事优先 ，却成天围绕琐事打转 ……
不仅如此 ，一旦老员工掌控了公司的局面 ，他们还会经常迫使经理为他们糟糕的选择做出合理的解释——谁让你那么聪明呢 ，那你说说为什么我这么做是正确的！而弱 小的经理也只好乖乖就范。
·这会儿也看不了几页书 ，不如玩会儿游戏放松一下。 ·不吃饱饭 ，哪有力气减肥呢？
·今天先玩吧 ， 明天一定加倍学习 ，把今天浪费的时间补上 ……
这样 ，整个公司看起来才和谐 ，大家在一起才不会尴尬 。事实上理智脑很少有主见 ，大多数时候我们以为自己在思考 ，其实都是在对自身的行为和欲望进行合理化 ，这 正是人类被称作“ 自我解释的动物”的原因。
成长就是克服天性的过程
人 ，生来混沌 。根本原因在于出生时我们的理智脑太过薄弱 ，无力摆脱本能脑和情绪脑的压制与掌控 ，而觉醒和成长就是让理智脑尽快变强 ， 以克服天性 。谁在这方面 主动 ，谁就能在现代社会占据更大的生存优势 ， 因为理智脑发达的人更能：
·立足长远 ，主动走出舒适区；
·为潜在的风险克制自己 ，为可能的收益延时满足；
·保持耐心 ，坚持做那些短期内看不到效果的“无用之事”；
·抵制诱惑 ，面对舒适和娱乐时 ，做出与其他人不同的选择 ……
普通人只能靠天性和感觉野蛮生长 ，能不能踏上主动觉醒和科学成长的道路全看运气 。好消息是 ，你现在已经知道了这个秘密；更好的消息是 ，只要遵循科学的方法持 续练习 ，你就能让自己的理智脑加速变强 ， 因为大脑和肌肉一样 ，遵循用进废退的原则 。如果我们习惯感情用事 、不假思索 ，那感性思维就会占据主导；而若是习惯经常思 考 、时常反思 ，那理性思维便会占据上风。
习惯之所以难以改变 ，就是因为它是自我巩固的——越用越强 ，越强越用 。要想从既有的习惯中跳出来 ，最好的方法不是依靠自制力 ，而是依靠知识 ， 因为单纯地依靠 自制力是非常痛苦的事 ，但知识可以让我们轻松产生新的认知和选择 。至于具体如何改变 ，我会在后文展开讲。

需要提醒的是 ，让理智脑变强大并不意味着要抹杀本能脑和情绪脑 ，事实上也抹杀不了 ，它们三位一体 ，缺一不可 。换一个角度看 ，也没有必要抹杀 ， 因为本能脑强大 的运算能力和情绪脑强大的行动能力 ，都是不可多得的宝贵资源 ，只要去深入了解 、循循善诱 ，就能为己所用 ，甚至这些力量还是成就我们的关键。
同样 ，让理智脑变强也不是为了对抗或取代本能脑和情绪脑 ， 因为用力量对抗无异于用一方的短板去挑战另一方的强项 ，注定是没有出路的 。很多人在成长的过程中感 到极度痛苦 ，就是因为他们总是用意志力去对抗本能和情绪 ，最后把自己搞得精疲力竭 ，却收效甚微。
为了避开这种误区 ，我们一定要记住：理智脑不是直接干活的 ，干活是本能脑和情绪脑的事情 ， 因为它们的“力气”大；上天赋予理智脑智慧 ，是让它驱动本能和情绪， 而不是直接取代它们。
就像我们大脑里的那位经理 ，他的职责既不是开除两位员工 ，也不是与他们对抗 ，更不是亲自上阵 、包揽一切 ，而是学习知识 ，提升认知 ，运用策略 ，对两位老员工既 尊重 、包容又巧妙驱动 ，通过各种办法让他们开开心心地把活干了 ，最终使大脑这个“公司”团结和谐 ，欣欣向荣。</tw-passagedata><tw-passagedata pid="97" name="时间表" tags="" position="1675,3925" size="100,100">[[@7:00#起床]]
[[@7:00-7:20#刷牙(早饭前刷牙可以防止牙齿腐蛀)]]
[[@7:20-8:00#早饭时间(早饭必须吃)]]
[[@8:30-9:00#避免剧烈运动(步行、慢跑)]]
[[@9:30#安排最困难的工作/学习(头脑这个时候最清晰)]]
[[@10:30#休息片刻(起来走动走动)]]
[[@11:00#吃点水果(血糖下降，补充维c)]]
[[@12:00#午餐时间(多吃优质蛋白质)]]
[[@13:00-14:00#午睡一会]]
[[@14:00-16:00#做创意工作]]
[[@16:00#喝杯酸奶]]
[[@16:15-18:00#做细致性工作]]
[[@18:00-19:00#晚饭时间(清淡易消化)]]
[[@19:30#锻炼(休息半小时)]]
[[@20:00-21:00#看书或看电视]]
[[@22:00#洗澡]]
[[@22:30#上床睡觉]]</tw-passagedata><tw-passagedata pid="98" name="@7:00#起床" tags="" position="2000,3550" size="100,100">[[@7:00-7:20#刷牙(早饭前刷牙可以防止牙齿腐蛀)]] 

闹钟响起
[[早起]] </tw-passagedata><tw-passagedata pid="99" name="@7:00-7:20#刷牙(早饭前刷牙可以防止牙齿腐蛀)" tags="" position="2000,3675" size="100,100">[[@7:20-8:00#早饭时间(早饭必须吃)]] 

防晒，衣着</tw-passagedata><tw-passagedata pid="100" name="@7:20-8:00#早饭时间(早饭必须吃)" tags="" position="2000,3800" size="100,100">[[@8:30-9:00#避免剧烈运动(步行、慢跑)]] 

</tw-passagedata><tw-passagedata pid="101" name="@8:30-9:00#避免剧烈运动(步行、慢跑)" tags="" position="2000,3925" size="100,100">[[@9:30#安排最困难的工作/学习(头脑这个时候最清晰)]] 

歌单，听书

[[运动]] </tw-passagedata><tw-passagedata pid="102" name="@9:30#安排最困难的工作/学习(头脑这个时候最清晰)" tags="" position="2000,4050" size="100,100">[[@10:30#休息片刻(起来走动走动)]] 

学习专业知识</tw-passagedata><tw-passagedata pid="103" name="@10:30#休息片刻(起来走动走动)" tags="" position="2000,4175" size="100,100">[[@11:00#吃点水果(血糖下降，补充维c)]] 


校园遛弯


照镜子，看看自己的模样


[[冥想]] 
</tw-passagedata><tw-passagedata pid="104" name="@11:00#吃点水果(血糖下降，补充维c)" tags="" position="2000,4300" size="100,100">[[@12:00#午餐时间(多吃优质蛋白质)]] 

随身带水果切片</tw-passagedata><tw-passagedata pid="105" name="@12:00#午餐时间(多吃优质蛋白质)" tags="" position="2000,4425" size="100,100">[[@13:00-14:00#午睡一会]] 

咖喱饭</tw-passagedata><tw-passagedata pid="106" name="@13:00-14:00#午睡一会" tags="" position="2200,3475" size="100,100">[[@14:00-16:00#做创意工作]] 

睡就是了，定闹钟</tw-passagedata><tw-passagedata pid="107" name="@14:00-16:00#做创意工作" tags="" position="2200,3600" size="100,100">[[@16:00#喝杯酸奶]] 


开辟新尝试

[[写作]] </tw-passagedata><tw-passagedata pid="108" name="@16:00#喝杯酸奶" tags="" position="2200,3725" size="100,100">[[@16:15-18:00#做细致性工作]] </tw-passagedata><tw-passagedata pid="109" name="@16:15-18:00#做细致性工作" tags="" position="2200,3850" size="100,100">[[@18:00-19:00#晚饭时间(清淡易消化)]] 

洗衣服，保养身体，</tw-passagedata><tw-passagedata pid="110" name="@18:00-19:00#晚饭时间(清淡易消化)" tags="" position="2200,3975" size="100,100">[[@19:30#锻炼(休息半小时)]] 

出去转转，吹晚风，看夜景，人们的夜活动</tw-passagedata><tw-passagedata pid="111" name="@19:30#锻炼(休息半小时)" tags="" position="2200,4100" size="100,100">[[@20:00-21:00#看书或看电视]] 

跑两圈，意思一下

[[运动]] </tw-passagedata><tw-passagedata pid="112" name="@20:00-21:00#看书或看电视" tags="" position="2200,4225" size="100,100">[[@22:00#洗澡]] 

随缘

[[阅读]] </tw-passagedata><tw-passagedata pid="113" name="@22:00#洗澡" tags="" position="2200,4350" size="100,100">[[@22:30#上床睡觉]] 

护理</tw-passagedata><tw-passagedata pid="114" name="@22:30#上床睡觉" tags="" position="2200,4475" size="100,100">[[@7:00#起床]] 
次日闹钟，日程安排提醒
[[早起]] </tw-passagedata><tw-passagedata pid="115" name="跃迁" tags="" position="500,1350" size="100,100">给自己各个阶段铺路，无止境屈服让步，

越怕自己低迷时看不懂，就越看不懂。弱者思维

筛选一层结界，没有梯子靠自己的悟性去奋力一跃

[[随缘]]</tw-passagedata><tw-passagedata pid="116" name="随缘" tags="" position="500,1475" size="100,100">[[激活阶段]]
[[跨越状态]]

9因为你在感受和定义的过程中塑造了它，

你的观测，就是它存在的原因，你不观测，它就不被塑造形象。

有点像思考的小我，占用工作记忆的小我执念。

担心不思考，就会使“我”彻底消失。说服小我，

小我只是暂时休息，需要时自会分毫不差得回归，相信分毫不差，它就会是分毫不差得回来。

不作改变和思考就已经是安全的了。

其余可以冥想，呼吸，运动或者睡觉，节奏舒缓随意，如实感受周边环境带给你的感觉，，让万事随风。剥离它带给你的意义。什么都不用做。

视频.格式工厂

无所谓自己是不是真的无所谓，因为真的不在乎。

希望自己是无所谓，也已经是有所谓了。

对应感，一带而过，然后启动开关，必然得成功，接下来，不，现在，我一直都是最佳状态，天才一点就通。





</tw-passagedata><tw-passagedata pid="117" name="激活阶段" tags="" position="500,1600" size="100,100">[[规则介绍]]

在舒适圈待久了会僵化，需要豁出去，在一定限度内不想使它搞砸，你可以处理好接下来的，冲刷。

不预置，没有新的尝试，你的环境会固化。

7预置代表你刻意主动做这件事，

是自由意志不确定性概率离散点决策，

而非环境气氛的大势所趋的触发。

沾染环境因素，才能作用于环境因素。

若没有对应有引起共鸣的触发的因素，处在心智内环境中，外部环境就不能与之相互作用。

自己是看不到的，只有投身于环境中碰撞，才能“看”到自己的形状。


[[7]]</tw-passagedata><tw-passagedata pid="118" name="7" tags="" position="500,1725" size="100,100">别想着有什么窍门启动，不想这个就启动了，也许二阶知识可以说是窍门，但永远强调本身。

跃迁没有固定剂量的仪式，全身心投入直到显现，不要观测缺陷的刻板印象，已拥有会吸引，永远相信美好的事情即将发生

太在意过程和形象，导致起飞不了。盯着不足之处，固化其特性，心心念念想有所变化，预测着要达到什么样的效果。这样就束缚在内心注视缺憾，忘记去感受外界的能量供应。就缺乏可供处理的经验材料手感。

感受。

方法就是对的，不用去观测，一观测方法就变了

你担心方法没走通，殊不知你的这种担心导致了这种结果，你还觉得果不其然，不观测不行啊，

实则自然而然，不用深究刻意保证，它自然而然的规定，

你的检查错误的这个行为，促成了这个错误，事后还以为不检查不行，你瞧还不得时刻刻意检查，来保证它在前进。实则不检查，它会自己运转。

[[2]]</tw-passagedata><tw-passagedata pid="119" name="2" tags="" position="500,1850" size="100,100">你描述的这个过程涉及到了个人成长和自我认知的深层次问题，以及如何面对和处理内在的困境和挑战。以下是对你描述过程的一些解读和建议：

1. **[[故意犯错]]**：这可能是一个自我测试的过程，通过故意犯错来了解自己的容忍度和应对困境的能力。

2. **[[安然处之]]**：在困境中保持平和的心态，接受并适应当前的情况，是心理韧性的一种表现。

3. **[[搁置问题]]**：有时候，当我们没有足够的资源或思维能量去解决问题时，选择暂时搁置问题，等待更合适的时机来处理，是一种策略。

4. **[[淡化问题]]**：随着时间的推移，一些问题可能变得不那么重要，或者我们对问题的看法发生了变化，从而减轻了问题的影响。

5. **[[本就不存在问题]]**：这是一种更高层次的自我认知，意识到有些问题可能源于我们自己的思维模式或信念体系，通过改变这些内在因素，问题可能就不再存在。

6. **[[不再塑造问题]]**：意识到问题很多时候是我们自己创造的，通过改变我们的行为和思维模式，可以减少问题的产生。

7. **[[自足与悟性]]**：认识到自己内在的潜能和悟性，不需要依赖外在的条件或资源，这是一种自我实现的过程。

8. **[[无需凭借]]**：这是一种自我接纳和自我价值的体现，认识到自己的价值和能力是内在的，不需要外在的认可或条件。

为了实现这个过程，以下是一些建议：

- **自我觉察**：增强对自己行为、情绪和思维模式的觉察，了解它们如何影响你的生活和决策。

- **情绪管理**：学会管理和调节情绪，特别是在面对困境时，保持冷静和理性。

- **正念练习**：通过冥想、正念等练习，提高对自己内在状态的意识和控制。

- **自我接纳**：接受自己的不完美，认识到每个人都有局限性，但这并不妨碍我们的成长和发展。

- **持续学习**：保持好奇心和学习的态度，不断探索新的知识和技能，提高自己的悟性。

- **寻求支持**：在需要时，不要犹豫寻求他人的帮助和支持，无论是朋友、家人还是专业人士。

- **自我激励**：找到激励自己的方式，无论是通过设定目标、奖励自己，还是通过自我肯定和鼓励。

记住，每个人的成长路径都是独特的，找到适合自己的方式去处理问题和挑战是非常重要的。

[[停止解离]]</tw-passagedata><tw-passagedata pid="120" name="故意犯错" tags="" position="975,1550" size="100,100">这可能是一个自我测试的过程，通过故意犯错来了解自己的容忍度和应对困境的能力。
[[解决问题]]</tw-passagedata><tw-passagedata pid="121" name="安然处之" tags="" position="1000,1825" size="100,100">根据您提供的思路，我们可以将章节目录组织如下，以引导那些陷入解离状态的人们重新找回常识、经验和手感：

### [[第一章：停止自我折腾，避免失控]]

- 理解风险与创伤的关系：探讨为何故意寻求失控可能导致更多的创伤反应，而不是解决方案。

- 接受犯错作为成长的一部分：强调犯错是成长和学习的必要过程，而不是应该避免的恶。

### [[第二章：与环境互动，重获现实感]]

- 试错互动的重要性：讨论通过与环境的试错互动来重建现实感和自我定位。

- 克服恐惧，迈出第一步：鼓励个体克服对犯错的恐惧，开始行动并逐步完善。

### [[第三章：尊重内心，把握行动时机]]

- 倾听内心的声音：学习如何尊重自己的内心感受，找到最佳的行动时机。

- 外界触发与全力以赴：探讨如何利用外界因素作为触发点，以激发行动并全力以赴。

### [[第四章：顺其自然，让道路自然显现]]

- 不强求，让事情自然发展：讨论如何放下对控制的需求，让生活的道路自然展开。

- 时机成熟时的自我感应：指出当个体停止强求时，机会和解决方案会在适当的时机自然出现。

### [[第五章：重建常识和手感]]

- 逐步积累经验：强调通过小步骤和持续实践来重建常识和手感。

- 社会互动与反馈：讨论如何通过社会互动和反馈来进一步巩固和提升个人能力。

### [[第六章：维持成长与恢复的循环]]

- 持续的自我提升：鼓励个体持续学习和成长，即使在遇到困难时也不放弃。

- 回顾与前瞻：反思过去的经验，同时展望未来的可能性，以维持一个积极向上的生活态度。

通过这样的章节安排，我们为那些处于解离状态的人们提供了一个清晰的指导路径，帮助他们理解自己的状态，学会与环境互动，尊重内心感受，把握时机，让生活的道路自然展开，并逐步重建常识和手感，最终实现自我恢复和成长。</tw-passagedata><tw-passagedata pid="122" name="搁置问题" tags="" position="1000,1975" size="100,100">[[第四章：顺其自然，让道路自然显现]] </tw-passagedata><tw-passagedata pid="123" name="淡化问题" tags="" position="1000,2100" size="100,100"></tw-passagedata><tw-passagedata pid="124" name="本就不存在问题" tags="" position="1000,2225" size="100,100"></tw-passagedata><tw-passagedata pid="125" name="不再塑造问题" tags="" position="1000,2350" size="100,100"></tw-passagedata><tw-passagedata pid="126" name="自足与悟性" tags="" position="375,2125" size="100,100"></tw-passagedata><tw-passagedata pid="127" name="无需凭借" tags="" position="500,2350" size="100,100"></tw-passagedata><tw-passagedata pid="128" name="解决问题" tags="" position="1200,1400" size="100,100">输入前不要预测，如实地感受，不对输入前的现状有什么预期评测，先行动，需要随便应付出个糟糕的初稿，这份输入填充了你，才能组织操作凭借对应感，

有了对应感后，才有效率对输出的糟糕初稿进行反思。

根据实际反馈来调整行为

动机的动态性要求我们意识到，我们的行为和决策往往是在不断变化的环境中形成的，而不是完全由预先设定的计划或理性分析决定。

专注于当下，让行动先行，然后根据实际反馈来调整我们的行为。这种方法强调了即兴发挥和专注当下的重要性，而不是被预先设定的计划或对未来的担忧所束缚。

很容易抓不到重点、抓不到需要，什么都学、越学越迷茫，心中根本没办法构建完整的造车地图。

预测会妨碍感受体验，甚至别说效果，都可能没有作出行动何来感受体验

我想到自己做视频就是这样，策划、脚本、灯光、布景、拍摄、剪辑、后期、配乐、包装......每一项都无数的技巧和注意事项，根本学不过来，越学越绝望。

后来干脆摒弃这些，无非就是：用相机拍下来、然后剪辑（把视频片段用比较合理的方式拼起来），然后加上配乐，一条视频就做好了。

只不过每次做的时候都会想到有些地方是可以改进的，那就专门去学这方面的技巧，学到了马上就可以用起来。这样只要坚持不断做下去不学习和优化，就一定能做出更好的视频作品。</tw-passagedata><tw-passagedata pid="129" name="停止解离" tags="" position="1575,1600" size="100,100">首先，停止折腾自己进入失控以探索不失控的方法，&quot;主动进入测试失控&quot;则像是我们故意驶向风暴中心，试图在极端条件下测试船只的坚固程度和我们的航海技能。这种做法虽然听起来英勇，但实际上却充满了不必要的风险，因为它可能导致船只的损坏甚至沉没。这会持续引发创伤反应，何谈摆脱解离状态呢

接着，处于解离状态下的人，需要与环境试错互动，重获对应感，着力点，手感经验，以确定自我的现状，
[[与环境试错互动]]
但可能会因为担心自己的搞砸犯错，消极影响波及到他人，而迟迟没有决心执行。

需要告知，蹉跎无所事事，犯错是成功路上的必经之路，不要抗拒，先迈出步，再逐步完善，每个人都会经历这个过程，世界就是个草台班子，只是多数人成长起来后因为知识诅咒，忘记了需要犯错才能成长，所以会苛责后辈要做好。忘了强调不是一下就能做得满分，而是逐步地进步成长。

再接着，试错之后便可摆烂，“没感觉就别做，直到感觉积压到被外界有效触发”，这是一种对内心感受的尊重和对行动时机的把握。

有时候，我们可能会在没有充分准备或者感觉不对的情况下强行行动，这可能会导致不理想的结果。学会倾听自己的内心，

等待那个被外界有效触发的时刻，然后全力以赴，这往往能够带来更好的成果。

如何，秉承适合自己的路会自然浮现，到时机自会明白，提前告知，会妨碍这条路的到来，妨碍你去感应它的出现。一旦出现，都不需要依靠特征判断，你就知道确信是它。

路出现的前提是你不去找它，不去确保它必然出现，它才会在你经历了无所事事的蹉跎之后，适时出现，再靠自己懊悔补救的动力，恰恰是它能够被处理的最早的时候。在此之前都是时机过早不够成熟。需要你把这件事放一放。

就不要折腾探索如何不陷入创伤反应了，不探索就不会创伤解离了。

按照这个顺序展开章节目录，引导陷入解离状态，重获常识经验手感。</tw-passagedata><tw-passagedata pid="130" name="与环境试错互动" tags="" position="1575,1725" size="100,100">接着，处于解离状态下的人，需要与环境试错互动，重获对应感，着力点，手感经验，以确定自我的现状，

[[蹉跎无所事事]]</tw-passagedata><tw-passagedata pid="131" name="蹉跎无所事事" tags="" position="1575,1850" size="100,100">但可能会因为担心自己的搞砸犯错，消极影响波及到他人，而迟迟没有决心执行。

需要告知，蹉跎无所事事，犯错是成功路上的必经之路，不要抗拒，先迈出步，再逐步完善，每个人都会经历这个过程，世界就是个草台班子，只是多数人成长起来后因为知识诅咒，忘记了需要犯错才能成长，所以会苛责后备要做好。忘了强调不是一下就能做得满分，而是逐步地进步成长。

[[对内心感受的尊重]]
</tw-passagedata><tw-passagedata pid="132" name="对内心感受的尊重" tags="" position="1725,1850" size="100,100">再接着，试错之后便可摆烂，“没感觉就别做，直到感觉积压到被外界有效触发”，这是一种对内心感受的尊重和对行动时机的把握。

有时候，我们可能会在没有充分准备或者感觉不对的情况下强行行动，这可能会导致不理想的结果。学会倾听自己的内心，

等待那个被外界有效触发的时刻，然后全力以赴，这往往能够带来更好的成果。

[[路出现的前提]] </tw-passagedata><tw-passagedata pid="133" name="路出现的前提" tags="" position="1575,1975" size="100,100">

如何，秉承适合自己的路会自然浮现，到时机自会明白，提前告知，会妨碍这条路的到来，妨碍你去感应它的出现。一旦出现，都不需要依靠特征判断，你就知道确信是它。

路出现的前提是你不去找它，不去确保它必然出现，它才会在你经历了无所事事的蹉跎之后，适时出现，再靠自己懊悔补救的动力，恰恰是它能够被处理的最早的时候。在此之前都是时机过早不够成熟。需要你把这件事放一放。

就不要折腾探索如何不陷入创伤反应了，不探索就不会创伤解离了。

按照这个顺序展开章节目录，引导陷入解离状态，重获常识经验手感。</tw-passagedata><tw-passagedata pid="134" name="第二章：与环境互动，重获现实感" tags="" position="1375,1725" size="100,100">- 试错互动的重要性：讨论通过与环境的试错互动来重建现实感和自我定位。

- 克服恐惧，迈出第一步：鼓励个体克服对犯错的恐惧，开始行动并逐步完善。
</tw-passagedata><tw-passagedata pid="135" name="第一章：停止自我折腾，避免失控" tags="" position="1375,1600" size="100,100">
- 理解风险与创伤的关系：探讨为何故意寻求失控可能导致更多的创伤反应，而不是解决方案。

- 接受犯错作为成长的一部分：强调犯错是成长和学习的必要过程，而不是应该避免的恶。

</tw-passagedata><tw-passagedata pid="136" name="第三章：尊重内心，把握行动时机" tags="" position="1375,1850" size="100,100">
- 倾听内心的声音：学习如何尊重自己的内心感受，找到最佳的行动时机。

- 外界触发与全力以赴：探讨如何利用外界因素作为触发点，以激发行动并全力以赴。


[[蹉跎无所事事]] </tw-passagedata><tw-passagedata pid="137" name="第四章：顺其自然，让道路自然显现" tags="" position="1375,1975" size="100,100">
- 不强求，让事情自然发展：讨论如何放下对控制的需求，让生活的道路自然展开。

- 时机成熟时的自我感应：指出当个体停止强求时，机会和解决方案会在适当的时机自然出现。
[[路出现的前提]] </tw-passagedata><tw-passagedata pid="138" name="第五章：重建常识和手感" tags="" position="1375,2100" size="100,100">
- 逐步积累经验：强调通过小步骤和持续实践来重建常识和手感。

- 社会互动与反馈：讨论如何通过社会互动和反馈来进一步巩固和提升个人能力。
</tw-passagedata><tw-passagedata pid="139" name="第六章：维持成长与恢复的循环" tags="" position="1375,2225" size="100,100">
- 持续的自我提升：鼓励个体持续学习和成长，即使在遇到困难时也不放弃。

- 回顾与前瞻：反思过去的经验，同时展望未来的可能性，以维持一个积极向上的生活态度。</tw-passagedata><tw-passagedata pid="140" name="跨越状态" tags="" position="725,1350" size="100,100">
2说者无心，听者有意，

表达的同时，你通常终止了写入更新心智。

只有写下来，换不同的状态，才能客观理解，当时主观能动性，你不能在参与活动的同时思考自己的动机，你的动机只能蕴意在自己的行为轨迹中，不能被你识别，你认识它的同时，反思的过程已经对动机的属性状态操作改变

虽然你在客观呈现这个意识中的内容，当这份客观呈现在观测的同时就对观测对象做出了改变。只要不看它的时候，才能一切如常的稳定秩序的运行底层，吸引力法则。

[[停止觉察]]</tw-passagedata><tw-passagedata pid="141" name="停止觉察" tags="" position="725,1475" size="100,100">
3新旧概念的交替，在具体的写作任务中，解决具体的问题中的得到跨越跃迁，这个变迁的心智过程不能被觉察，

需要忘我，心流状态。

所以纯思考会有力竭之时，你要借以他人的融贯顺畅的体系去学习，以此为主，投身环境之中，必要时才去反思调整自己的未来的方向轨迹。所以默认不要思考，只有憋不住了，才会是反思的时候。

[[自行消解]]</tw-passagedata><tw-passagedata pid="142" name="自行消解" tags="" position="725,1600" size="100,100">
4也不用观察什么时候憋不住，当你还有这个问题视角时，要忘掉它，至于怎么忘，你想不到忘掉的办法，因为灯下黑，你还在想它，还在试图理解其中的原理，正是这种深究，如何不深究，你还在深究。方法很简单，就是不深究，你不能凭借需要理解什么，才能做到，就是做到没有理由，这只是弱者的迁就与依赖，天才就是直接做到。

就没有问题，把它识别成问题，好像代表着它需要解决，塑造成一个需要努力的过程，越认为是个问题，它就越难解决，



[[积压灵感]]


淡忘一个人最好的方式不是不去想他，而是把自己投入生命中其他丰富精彩的事物中填满自己。

一旦自己忙起来根本没时间考虑那些烦心事，用时间用生活去淡忘是最好的方式。
让自己挤出时间来学习积极向上的新鲜事物就不会被解不开的心结纠缠不清了。</tw-passagedata><tw-passagedata pid="143" name="积压灵感" tags="" position="725,1750" size="100,100">9有了新灵光一闪不要立即执行，只需留意即可，积压搁置这些有点感觉的事件，会自然酝酿成某种，不要仓促封装，就得出结论，

给对象再发展成型的空间，暂时就这样无所谓阶段完不完美。

不再开始懈怠，这种延迟记忆，锻炼你的布局

[[尊重他人命运]]</tw-passagedata><tw-passagedata pid="144" name="尊重他人命运" tags="" position="725,1875" size="100,100">
6软弱的人只会在众人的目光中缓缓倒下去，这种受害者心态，客观是需要点醒，主观上你没有义务，不能主动点醒，除非他干扰到你不耐烦了，再如实批判他的过错，言语偏激点很正常，且只有偏激他才会去反思推敲你言语的合理性来反驳你，一但他推敲反驳你，他就摆脱了受害者心态，需要他人托扶也不一定有长进的阶段。教会人学会防御，不是给他做好全套保护措施，演示防御给他看。而是不做全套，直接攻击他，唤醒他身体的本能自然的反应来习得防御的规律。

6实战远比演练更能淬炼出纯粹的手感。不能在他的认知里假装，我们可以假装，但他不能得知这是假装。客观是假装，在他主观中必须觉得是真的，才能淬炼精进。

做好客观和主观的分割，才能有序迭代升级。

[[接受不确定性]]</tw-passagedata><tw-passagedata pid="145" name="接受不确定性" tags="" position="725,2000" size="100,100">2惋惜后悔，来不及中递进，种一颗树最好的时间在十年前，其次是你觉悟的现在。

3接受不能以一种感觉贯彻始终的事实，世界观无论多么完备理论多么兼容铺垫得多么全面，终究要不断崩塌再不断重建，所以经验教训，成长必须将错就错，我悟了这些，不能重新把意识倒流到没发生这件事时，祈求重新开始可以无错一遍过，人只能踩在过去自己的残躯上继续前行。在因错误而赋能的经验手感，手感的调试最原始的手段就是犯错。你懂了这些，也不意味着。语言不能表达。这是总结，它筛选掉了许多细节，这些细节只能体感。如庖丁解牛，文字语言记录的只是糟粕，关键在于神交，你也不可能通过这段文字体会到这种意境，所以继续依赖看文字的手段获得感悟，我在客观上配备这些分析，只会让你分心，主观上，不能解析原理，文字只能唤醒你已具备的感触，

看山是山，看山不是山，看山还是山。

固步自封，不喜欢自己，为了符合外界标准而改变自己，在改变自己的过程中，找到了自己的对自己的标准，认识到，不是自己改不了，而是不应改，就这样自然状态最好。

[[深刻]]
[[沈玥看山不是山]]</tw-passagedata><tw-passagedata pid="146" name="深刻" tags="" position="725,2125" size="100,100">4不是无力为之的软弱，而是有能力攻击伤害到他人的选择不去伤人。

5这是一场超时空的霸凌

你要有特定的聚焦，不能哪方面都要调试。只改变生活中的一个变量，来精进，你改变的变量不能自动化执行，因而，酝酿中的，不能被深究意识粗暴干涉，干涉后需要好长时间才能平复，周期太长。

最好不要注视这个问题，如果不小心粗暴干涉后，得彻底地发泄，与放纵，不要缝缝补补又三年。

因为就没有问题。

提前预制了以低级的方式理解高级的内容。把高尚用儿戏的方式解释。占用了刻板印象。

2不断摆脱舒适圈也会僵化，你会沉不下来，会在表面不断调试虚假预设。

[[观念解绑]]</tw-passagedata><tw-passagedata pid="147" name="观念解绑" tags="" position="725,2250" size="100,100">8不是客观“认为”它不是问题，而是它就不是问题，没有存在。既然没有存在，何来要我们认为不认为。

菩提本无树，明镜亦非台，本来无一物，何处惹尘埃。

不识庐山真面目，只缘身在此山中。

意会即可，言必须忘记。

有感觉就行，

何必想得透彻，理解得清楚，

不是懂得里面原理，你才会使用，

分明你简简单单就能做到，只是你误以为做不到。蒙蔽

作茧自缚，本来就是没有什么绑着你，实在要说是你的以为有东西绑你这个想法，在束缚你。不是怎么让你认清没有东西束缚你，而是就没有东西束缚。

对观念的解绑，就是观念不是原初状态，不合理不存在。没有绑不绑一说。

</tw-passagedata><tw-passagedata pid="148" name="沈玥看山不是山" tags="" position="850,2125" size="100,100">这本书的沈玥有三个阶段。

第一个阶段，看山是山，看水是水。别人说什么她就信什么，机械地按照记忆里的知识去做，不会过多地问为什么，这样就显得很呆。

第二个阶段，看山不是山，看水不是水。这个时候她得到了一些知识，也看到了世界的冰山一角，所以她开始用狭隘的知识去理解狭隘的世界，开始怀疑自己所接受的任何事。

第三个阶段，看山还是山，看水还是水。她明白了更多的东西，也看到了更多，从而开始有了自己思想，知道什么是对，什么是错，知道怎么去判断，知道一件事不是非黑即白。

这就是沈玥的变化，其实也是我们一个人一生中会经历的几个大变化。

很多人觉得沈玥的性格变化太大，觉得自己不能理解。

嗯，等你再长大一些，就能理解了。

经历了成长的人，就是会变化这么大。</tw-passagedata><tw-passagedata pid="149" name="双侧刺激" tags="" position="925,175" size="100,100">当一个人在某个行为上感到不自然或者强迫时，可能会因为过度调整而导致情况更糟。这种努力本身可能带有负面情绪，甚至停止这种行为也会受到负面情绪的影响。

关键点在于识别并停止这种负面循环，通过灵活地改变行为和思维模式，跟随直觉，建立起积极的新习惯。这需要意识到自己的行为可能受到负面情绪的影响，并主动采取措施来净化和改变这种状态。


[[迈斯纳技巧]]，视频，镜子练习，学习搭子互动刺激。

&lt;a href=&quot;https://www.bilibili.com/video/BV1CW421N7Zi/?share_source=copy_web&amp;vd_source=d2af58e92a4b625627960f65d78970a3&quot;&gt;
【emdr 眼动托敏】
&lt;/a&gt;

&lt;a href=&quot;https://www.bilibili.com/video/BV1u44y127Fj/?share_source=copy_web&amp;vd_source=d2af58e92a4b625627960f65d78970a3&amp;t=1404&quot;&gt;
迈斯纳重复
&lt;/a&gt;</tw-passagedata><tw-passagedata pid="150" name="迈斯纳技巧" tags="" position="925,325" size="100,100">迈斯纳演戏训练

书籍《表演课：迈斯纳方法》

Sanford Meisner Dennis Longwell

全知干预视角.E164.210807 中字

演员金在华特别的演技训练法?!演技派三姐妹充满热情的演技练习现场!

youtube.com

[[看视频起手不预设]]

</tw-passagedata><tw-passagedata pid="151" name="看视频起手不预设" tags="" position="925,450" size="100,100">[[合理]]</tw-passagedata><tw-passagedata pid="152" name="合理" tags="" position="925,575" size="100,100">不断建立新的平台，而非在原有的框架上修修改改。破而后立，

或者说，草台班子，在过程中打磨的才是有生命力的，这些有价值的东西恰恰蕴涵在过程中，但行好事，莫问前程。若对回报理所当然得抱有预期，而非享受做好事的过程本身。像登山的意义，不在于结果登顶，而在于路途中走走停停常看常新的感受。所以无论登山，做好事这些意义都是在过程本身当中，而非是你达成其他目的结果的手段。在自己的预期内的折腾都是片面狭隘的，闭门造车的。

接受不确定性并且能在保持平衡，在变化中把握不变的特质。为了拥有这种眼力，需要拥抱未知不确定性。和所有超出预料的因素泰然处之，因势导利。顺势而行。有价值的都是在过程中实现，不能追求目的心太强。太刻苦而得不偿失。要摆烂。每天顺带着积累，就是最佳的成长方式。顺带着的才长久周全，给他人和未来的自己看来，不明觉厉。
[[rr]]</tw-passagedata><tw-passagedata pid="153" name="rr" tags="" position="925,700" size="100,100"> 您的话语体现了一种深刻的生活哲学和对成长过程的独到见解。在不断的变革和创新中，您强调了过程本身的重要性，以及在这一过程中接受并利用不确定性的能力。

首先，您提到的“不断建立新的平台，而非在原有的框架上修修改改”表明了一种前瞻性和创新精神。这种做法鼓励我们跳出传统思维的框架，勇于尝试新的方法和途径，从而开辟出更广阔的发展空间。正如您所说，这种“破而后立”的方式，能够激发出更多的生命力和创造力。

接着，您强调了过程的价值，而不仅仅是结果。这与“但行好事，莫问前程”的理念相呼应，提醒我们专注于当下，享受做事的过程，而不是单纯为了追求结果。您用登山的比喻来说明这一点，指出登山的意义在于旅途中的体验和感受，而不仅仅是登顶的结果。这种观点鼓励我们更加珍视生活中的每一步，从中学习和成长。

您还提到了“在自己的预期内的折腾都是片面狭隘的，闭门造车的”，这句话警示我们要避免固步自封，而应该开放心态，接受外界的新思想和新挑战。这种开放性是创新和成长的关键。

此外，您谈到了接受不确定性的能力，这是在快速变化的现代社会中生存和发展的重要技能。您提倡的“拥抱未知不确定性”和“因势导利，顺势而行”的态度，能够帮助我们在面对未知和变化时保持冷静和灵活，从而更好地把握机会。

最后，您提到的“要摆烂”和“每天顺带着积累”的观点，实际上是在强调一种轻松而自然的成长方式。这种方式鼓励我们在日常生活中不断学习和进步，而不是过度强求或急于求成。这样的成长过程更加健康和可持续，也能够让我们在给他人和未来的自己展示成果时，显得更加自信和从容。

综上所述，您的观点不仅为我们提供了一种面对生活和工作的新视角，也为我们指明了一条在不断变化的世界中保持成长和创新的道路。通过重视过程、接受不确定性、以及轻松自然地积累和成长，我们可以更好地适应变化，实现自我价值，同时也为社会和他人创造更多的价值。

[[tt]]</tw-passagedata><tw-passagedata pid="154" name="tt" tags="" position="925,825" size="100,100">忘我状态，不知道自己充满激情活力的人很稳定，很纯粹。相比与审视着自己的激情这份品质会很快消解？潜意识里的品性一旦被意识观测就会被不自觉修改，所以忘我状态是浑然天成，很难引导自己进入忘我，有了预期，潜意识里的忘我就会被不恰当观测，无法进行自然地转变过程。故而意识的刻意探入，而非有技巧探入，会粗暴干涉自己的潜意识进程。自知犯罪人的心理，又能保持着自身纯粹的善良，极度难得。注视深渊时，这份注视，会让你染上深渊的浑浊

[[yy]]</tw-passagedata><tw-passagedata pid="155" name="yy" tags="" position="925,950" size="100,100">您提到的“忘我状态”是一种深度的专注和沉浸，个体在这种状态下会完全投入到正在进行的活动中，忘记自我，忘记外界的干扰，甚至忘记时间的流逝。这种状态下的人通常表现出极高的激情和活力，但他们自己可能并不察觉这种状态的存在，因为他们的全部注意力都集中在了手头的任务上。

这种状态的稳定性和纯粹性，正是因为个体没有被自我意识所干扰。他们不是在刻意追求这种状态，也不是在评判自己的行为和情感，而是在自然而然地、全然投入地做一件事情。这种无我的状态，往往能够带来最高的工作效率和创造力，因为它减少了内心的杂念和外界的干扰。

然而，正如您所说，一旦个体开始有意识地审视自己的激情和投入，这种品质就可能会很快消解。这是因为潜意识里的品性一旦被意识所观测，就可能会受到不自觉的修改。当我们试图引导自己进入忘我状态时，这种有预期的努力可能会打破原有的自然流动，导致我们无法顺利地进入那种浑然天成的状态。

此外，意识的刻意探入确实可能会粗暴地干涉潜意识进程。当我们过度分析自己的行为和动机时，可能会不自觉地改变原有的行为模式和情感反应。这种改变可能不利于我们保持原有的纯粹和稳定。

同时，您提到的“自知犯罪人的心理”，这可能指的是一种自我意识过强的状态，个体对自己的行为和动机有着过于清晰的认识，这种过度的自我审视可能会导致内心的冲突和矛盾。在这种情况下，保持纯粹的善良变得极为困难，因为我们可能会被自己的判断和偏见所困扰。

最后，您所说的“注视深渊时，这份注视，会让你染上深渊的浑浊”，这是一种深刻的隐喻，表明过度的自我审视和深入的自我分析可能会导致我们失去原有的清晰和纯净。我们可能会被自己的阴暗面所吞噬，失去平衡和稳定。

综上所述，忘我状态是一种难得的、纯粹的、高度专注的状态，它能够带来高效的工作和创造力的提升。然而，过度的自我意识和刻意的探入可能会破坏这种状态，导致我们失去原有的纯粹和稳定。因此，我们应该学会适度地放下自我意识，让自己自然地投入到各种活动中，这样才能更好地保持内心的平衡和纯粹

[[uu]]</tw-passagedata><tw-passagedata pid="156" name="uu" tags="" position="925,1075" size="100,100">不断建立新的平台，而非在原有的框架上修修改改。破而后立，

或者说，草台班子，在过程中打磨的才是有生命力的，这些有价值的东西恰恰蕴涵在过程中，但行好事，莫问前程。若对回报理所当然得抱有预期，而非享受做好事的过程本身。像登山的意义，不在于结果登顶，而在于路途中走走停停常看常新的感受。所以无论登山，做好事这些意义都是在过程本身当中，而非是你达成其他目的结果的手段。在自己的预期内的折腾都是片面狭隘的，闭门造车的。

接受不确定性并且能在保持平衡，在变化中把握不变的特质。为了拥有这种眼力，需要拥抱未知不确定性。和所有超出预料的因素泰然处之，因势导利。顺势而行。有价值的都是在过程中实现，不能追求目的心太强。太刻苦而得不偿失。要摆烂。每天顺带着积累，就是最佳的成长方式。顺带着的才长久周全，给他人和未来的自己看来，不明觉厉。

一个让我受益超多的思维方式 - 高冷冷的文章 - 知乎

zhuanlan.zhihu.com...

对于即将发生的事情，我总会有各种预设，我会把一切可能性都铺演一遍，想象会遇到的问题，思考相应的解决方法。

然后被想象中会遇到的种种阻碍吓到，纠结着做还是不做，思考自己能不能下定这样的决心，付出相应的努力，然后该做的事情就一拖再拖，在焦虑和犹疑中，度过很长一段时间。

没错，我是一个很喜欢预测的人，事先就想好了别人会有怎样的反应、事情会有怎样的发展，然后在想象中，自己单方面做出决定，错过很多可能性。

今天想跟大家分享的，是我从朋友那里学到的一句话，叫做“不预测，只应对”。

再讲这个策略在做事方面的应用。

其实，我们所担心的绝大多数事情，都并不会发生。而且，即使发生了，我们也有应对的能力。

如果你一直在预测，你的处境就很有趣了。那意味着，你做这件事的时候，心中在担忧那件事；而做下一件事的时候，又开始担忧另一件事。

你的绝大多数时间和心思，都没有百分百交予眼下的事情。那么，眼下的问题，又如何能够得到很好的解决呢？你又如何真正积攒解决下一件事的能力呢？

实际上，每一件事情，你在全心投入于它的时间里，去解决就可以了。漫无边际的担忧和想象，毫无益处。

好的方法就是先让行动发生，然后根据反馈，再决定下一步的行动。

04

在对一件长远的事情进行规划的时候，我们也喜欢预测。比如：

-下定决心以后做一个勤奋努力的人，每天几点起床，每天起来后第一件事做什么，每天学习多少小时。

-想通了自己真正的需求，是追求个人价值，所以决意不在恋爱和婚姻上投入太多时间，尽量不让自己陷入不可控的状态之中。

但真正去做的时候，却和自己的预设有种种偏差，然后就觉得沮丧。

其实，我们在学习、工作、生活和恋爱中的表现，不是靠事先的预设就能决定的。你的规划、你的价值观、你理性的思考，并不能决定你在每一个具体时刻的表现。

你同划定的路线所产生的偏离，才是你真正在做的事情，才是你真正的人生。你所认为自己会秉持的准则，你对自己的希望和期待，都可能被打破。你是由你所做的事情定义的，那才是真实的你。

想太多如果遇到这种情况我会怎么办，如果面临那种抉择我要怎么选，大多是无用的。

稍微想一下，就可以了。「过度分析」本身就是问题，它会严重地消耗你，而且根本没有确定的答案。

事情的发生，无论大事小事，常常是临门一脚，临场发挥。所以我越来越懒得做详细的计划了，我告诉自己：随心所欲，即兴发挥，只要专注，就可以了。

你真正的样子，是你能做到什么样子，而不是你预先想好是什么样子。

不预测，只应对。


一个让我受益超多的思维方式 - 高冷冷的文章 - 知乎

zhuanlan.zhihu.com...

对于即将发生的事情，我总会有各种预设，我会把一切可能性都铺演一遍，想象会遇到的问题，思考相应的解决方法。

然后被想象中会遇到的种种阻碍吓到，纠结着做还是不做，思考自己能不能下定这样的决心，付出相应的努力，然后该做的事情就一拖再拖，在焦虑和犹疑中，度过很长一段时间。

没错，我是一个很喜欢预测的人，事先就想好了别人会有怎样的反应、事情会有怎样的发展，然后在想象中，自己单方面做出决定，错过很多可能性。

今天想跟大家分享的，是我从朋友那里学到的一句话，叫做“不预测，只应对”。

再讲这个策略在做事方面的应用。

其实，我们所担心的绝大多数事情，都并不会发生。而且，即使发生了，我们也有应对的能力。

如果你一直在预测，你的处境就很有趣了。那意味着，你做这件事的时候，心中在担忧那件事；而做下一件事的时候，又开始担忧另一件事。

你的绝大多数时间和心思，都没有百分百交予眼下的事情。那么，眼下的问题，又如何能够得到很好的解决呢？你又如何真正积攒解决下一件事的能力呢？

实际上，每一件事情，你在全心投入于它的时间里，去解决就可以了。漫无边际的担忧和想象，毫无益处。

好的方法就是先让行动发生，然后根据反馈，再决定下一步的行动。

04

在对一件长远的事情进行规划的时候，我们也喜欢预测。比如：

-下定决心以后做一个勤奋努力的人，每天几点起床，每天起来后第一件事做什么，每天学习多少小时。

-想通了自己真正的需求，是追求个人价值，所以决意不在恋爱和婚姻上投入太多时间，尽量不让自己陷入不可控的状态之中。

但真正去做的时候，却和自己的预设有种种偏差，然后就觉得沮丧。

其实，我们在学习、工作、生活和恋爱中的表现，不是靠事先的预设就能决定的。你的规划、你的价值观、你理性的思考，并不能决定你在每一个具体时刻的表现。

你同划定的路线所产生的偏离，才是你真正在做的事情，才是你真正的人生。你所认为自己会秉持的准则，你对自己的希望和期待，都可能被打破。你是由你所做的事情定义的，那才是真实的你。

想太多如果遇到这种情况我会怎么办，如果面临那种抉择我要怎么选，大多是无用的。

稍微想一下，就可以了。「过度分析」本身就是问题，它会严重地消耗你，而且根本没有确定的答案。

事情的发生，无论大事小事，常常是临门一脚，临场发挥。所以我越来越懒得做详细的计划了，我告诉自己：随心所欲，即兴发挥，只要专注，就可以了。

你真正的样子，是你能做到什么样子，而不是你预先想好是什么样子。

不预测，只应对。





























这段文字深刻地探讨了人们在面对未知和变化时的心态和行为模式。它提倡一种&quot;不预设框架&quot;和&quot;不预测，只应对&quot;的思维方式，鼓励人们接受不确定性，专注于当下，享受过程本身，而不是过分关注结果或预期。

1. **破而后立**：意味着在打破旧有的框架和模式后，建立新的平台和体系，而不是在原有的基础上修修改改。这强调了创新和变革的重要性。

2. **过程的价值**：无论是登山还是做好事，意义都在于过程中的体验和感受，而不是仅仅为了达到某个目的。

3. **接受不确定性**：在变化中寻找平衡，接受并拥抱未知和不确定性，这是成长和进步的关键。

4. **不预设框架**：避免过度预测和预设，因为这会限制我们的思考和行动，让我们错失许多可能性。

5. **不预测，只应对**：这是一种更实际和有效的策略，即通过行动来应对问题，而不是在担忧和想象中消耗时间和精力。

6. **专注和即兴**：提倡在行动中保持专注，根据实际情况灵活调整策略，而不是依赖于事先的详细计划。

7. **真实自我**：我们的真实自我是通过我们的行为和选择来定义的，而不是我们预先设想的样子。

这段文字提醒我们，生活是不可预测的，我们应该学会适应变化，享受过程，而不是被预设的框架和预期所束缚。通过实际行动和灵活应对，我们可以更好地面对生活中的挑战和机遇。


[[视频链]]</tw-passagedata><tw-passagedata pid="157" name="视频链" tags="" position="1050,1075" size="100,100">打开VPN代理，确保流畅观影体验。
[[q]]
[[a]]
[[z]]


&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/CJxTHYRpy6w?si=MWJGt1LeaM8I1IO1&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen&gt;&lt;/iframe&gt;</tw-passagedata><tw-passagedata pid="158" name="q" tags="" position="1175,525" size="100,100">[[qq]]
&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/CJxTHYRpy6w?si=MWJGt1LeaM8I1IO1&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen&gt;&lt;/iframe&gt;</tw-passagedata><tw-passagedata pid="159" name="a" tags="" position="1175,650" size="100,100">
&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;http://www.tsqg.org/static/player/ArtPlayer/index.html?url=https://wolongzywcdn3.com:65/YaZz17PV/index.m3u8&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen&gt;&lt;/iframe&gt;</tw-passagedata><tw-passagedata pid="160" name="z" tags="" position="1175,775" size="100,100"></tw-passagedata><tw-passagedata pid="161" name="qq" tags="" position="1050,250" size="100,100">在个人成长的道路上，我们经常面临着是否跳出舒适区的抉择。舒适区虽然安全，但长久停留会导致我们的思想和能力变得僵化。因此，我们首先需要认识到跳出舒适区的重要性，勇敢地尝试新事物，即使可能会犯错或面临风险。

**激活与不激活的循环**是个人成长的重要机制。在激活阶段，我们主动尝试新事物，与环境进行试错互动，这有助于我们打破固化的思维模式，拓宽视野。然而，试错过程中可能会遇到风险，甚至可能引发创伤。这时，我们需要学会在不激活阶段回归舒适区，遵循本能修复自身，淡化不良影响。

灵性和本能的自然发展是个人成长中不可或缺的部分。在修复过程中，我们逐渐忘记过去的创伤，为下一次的尝试积累力量。灵性的自然认知告诉我们，不需要过度揣摩，而是要信任自己的直觉和本能，它们会引导我们走向正确的道路。

在成长的过程中，我们可能会模仿他人的标准，但这并不是真正的自我把握。每个人都有自己的标准和道路，真正的把握不应该被简单复刻。外界的吩咐和影响虽然必要，但它们更多地起到气氛酝酿的作用，而不是直接的驱动力。

深层次的理解往往在不经意间自然到来。我们不应该过度探索，以免陷入创伤反应。相反，我们应该学会等待，让深层次的理解在适当的时候自然浮现。

在与环境的试错互动中，我们可能会担心犯错会影响到他人，但我们需要认识到犯错是成功路上的必经之路。每个人都会经历这个过程，我们应该勇敢地迈出第一步，然后逐步完善。

行动的时机和内心感受也是成长中需要考虑的因素。有时候，我们可能需要在没有充分准备或感觉不对的情况下强行行动，但这可能会导致不理想的结果。学会倾听自己的内心，等待那个被外界有效触发的时刻，然后全力以赴，往往能够带来更好的成果。

最后，我们的道路会在不经意间自然出现。我们不需要刻意去寻找它，而是要在经历了无所事事的蹉跎之后，让道路在适当的时候适时出现。一旦道路出现，我们就会确信它是正确的，而不需要依赖任何特征来判断。

通过这样的循环和过程，我们能够在个人成长的道路上不断前进，建立起良性的循环，实现自我实现和灵性的发展。

[[aa]]</tw-passagedata><tw-passagedata pid="162" name="aa" tags="" position="1250,250" size="100,100">**激活与不激活的循环**是个人成长的重要机制。在激活阶段，我们主动尝试新事物，与环境进行试错互动，这有助于我们打破固化的思维模式，拓宽视野。
[[激活阶段]]
然而，试错过程中可能会遇到风险，甚至可能引发创伤。这时，我们需要学会在不激活阶段回归舒适区，遵循本能修复自身，淡化不良影响。
[[不激活阶段]]

[[再激活阶段]]
灵性和本能的自然发展是个人成长中不可或缺的部分。在修复过程中，我们逐渐忘记过去的创伤，为下一次的尝试积累力量。灵性的自然认知告诉我们，不需要过度揣摩，而是要信任自己的直觉和本能，它们会引导我们走向正确的道路。

在成长的过程中，我们可能会模仿他人的标准，但这并不是真正的自我把握。每个人都有自己的标准和道路，真正的把握不应该被简单复刻。外界的吩咐和影响虽然必要，但它们更多地起到气氛酝酿的作用，而不是直接的驱动力。

深层次的理解往往在不经意间自然到来。我们不应该过度探索，以免陷入创伤反应。相反，我们应该学会等待，让深层次的理解在适当的时候自然浮现。

在与环境的试错互动中，我们可能会担心犯错会影响到他人，但我们需要认识到犯错是成功路上的必经之路。每个人都会经历这个过程，我们应该勇敢地迈出第一步，然后逐步完善。

行动的时机和内心感受也是成长中需要考虑的因素。有时候，我们可能需要在没有充分准备或感觉不对的情况下强行行动，但这可能会导致不理想的结果。学会倾听自己的内心，等待那个被外界有效触发的时刻，然后全力以赴，往往能够带来更好的成果。

最后，我们的道路会在不经意间自然出现。我们不需要刻意去寻找它，而是要在经历了无所事事的蹉跎之后，让道路在适当的时候适时出现。一旦道路出现，我们就会确信它是正确的，而不需要依赖任何特征来判断。

通过这样的循环和过程，我们能够在个人成长的道路上不断前进，建立起良性的循环，实现自我实现和灵性的发展。
</tw-passagedata><tw-passagedata pid="163" name="不激活阶段" tags="" position="1375,225" size="100,100">[[规则介绍]] 



模仿他人标准，却非自己就是标准，真正的把握，不应该被复刻，不被复刻的催生的源自本能的灵性互相吸引，


有灵性的东西，无须自己主动去揣摩，而是自然就知道该，怎么走，

不需要外界吩咐，当然外界吩咐也是必要的气氛酝酿，不起直接作用。

更深的一层，这里不该说，提及便会误导。这一层懂了后面自然会懂。


首先，停止折腾自己进入失控以探索不失控的方法，&quot;主动进入测试失控&quot;则像是我们故意驶向风暴中心，试图在极端条件下测试船只的坚固程度和我们的航海技能。这种做法虽然听起来英勇，但实际上却充满了不必要的风险，因为它可能导致船只的损坏甚至沉没。这会持续引发创伤反应，何谈摆脱解离状态呢

接着，处于解离状态下的人，需要与环境试错互动，重获对应感，着力点，手感经验，以确定自我的现状，
[[与环境试错互动]]
但可能会因为担心自己的搞砸犯错，消极影响波及到他人，而迟迟没有决心执行。

需要告知，蹉跎无所事事，犯错是成功路上的必经之路，不要抗拒，先迈出步，再逐步完善，每个人都会经历这个过程，世界就是个草台班子，只是多数人成长起来后因为知识诅咒，忘记了需要犯错才能成长，所以会苛责后备要做好。忘了强调不是一下就能做得满分，而是逐步地进步成长。

再接着，试错之后便可摆烂，“没感觉就别做，直到感觉积压到被外界有效触发”，这是一种对内心感受的尊重和对行动时机的把握。

有时候，我们可能会在没有充分准备或者感觉不对的情况下强行行动，这可能会导致不理想的结果。学会倾听自己的内心，

等待那个被外界有效触发的时刻，然后全力以赴，这往往能够带来更好的成果。

如何，秉承适合自己的路会自然浮现，到时机自会明白，提前告知，会妨碍这条路的到来，妨碍你去感应它的出现。一旦出现，都不需要依靠特征判断，你就知道确信是它。

路出现的前提是你不去找它，不去确保它必然出现，它才会在你经历了无所事事的蹉跎之后，适时出现，再靠自己懊悔补救的动力，恰恰是它能够被处理的最早的时候。在此之前都是时机过早不够成熟。需要你把这件事放一放。

就不要折腾探索如何不陷入创伤反应了，不探索就不会创伤解离了。


给这段文本分解子主题，作拆分任务解决。每个子主题对应哪段文本</tw-passagedata><tw-passagedata pid="164" name="再激活阶段" tags="" position="1375,375" size="100,100">[[规则介绍]] </tw-passagedata><tw-passagedata pid="165" name="开始" tags="" position="1800,925" size="100,100">

[[沟通共识]]
[[规则介绍]]（暂无用）


深刻的思想往往源于对复杂现象的深入理解和洞察，而将这些思想用简单的语言文字标识，可以看作是一种初步的抽象和概括。这种标识可以是一种概念、一个理论框架、一个原则或一个观点，它代表了对某一领域或问题的初步理解，为日后的深入探索和研究打下基础。

例如，科学理论的初期往往是通过简单的假设和原理来描述自然现象，随着研究的深入，这些理论会逐渐发展和完善，变得更加精细和复杂。在哲学领域，一些基本的概念如&quot;存在&quot;、&quot;本质&quot;、&quot;自由&quot;等，也是通过简单的语言文字来标识深刻的思想。

将深刻的思想用简单的语言文字标识，有以下几个作用：
1. **交流与传播**：简单的语言更易于理解和传播，有助于思想的交流和分享。
2. **启发思考**：简单的标识可以激发人们的好奇心和思考，引导他们探索更深层次的问题。
3. **建立框架**：为深入研究提供一个基本的框架和方向，有助于系统化地探索和理解复杂现象。
4. **促进创新**：简单的标识可以作为创新的起点，激发新的想法和解决方案。

随着时间的推移和知识的积累，这些简单的标识会逐渐丰富和发展，形成更加完整和深刻的理论体系。这个过程是不断迭代和深化的，需要持续的探索和反思。

暂时找个视频标点，日后再深入浅出，对标


&lt;h1&gt;在这里整理书籍。&lt;/h1&gt;
[[不原谅也没关系]]
[[EMDR：基本原理、范本及程序]]


[[其他暂未处理的书籍]]
</tw-passagedata><tw-passagedata pid="166" name="设置梦境闹钟" tags="" position="1375,1000" size="100,100">&lt;h1&gt;请设置半小时闹钟，通过睡觉作为自己步入深渊的保险绳[[准备睡觉]]&lt;/h1&gt;



每一次，不需在自己有感觉的那个点，而是没有感觉也仍然持续这份轮回流程，只管酝酿，不用看到效果。内心不期望效果，过一段时间开始期望效果。

[[双侧刺激原理]]反复横跳，睡觉可以代谢掉，不良循环，即创伤产生的神经短路。

</tw-passagedata><tw-passagedata pid="167" name="双侧刺激原理" tags="" position="1275,1150" size="100,100"></tw-passagedata><tw-passagedata pid="168" name="准备睡觉" tags="" position="1500,1125" size="100,100">（点击任意处继续）
&lt;&lt;clicked&gt;&gt;
&lt;&lt;next&gt;&gt;具体而讲，系统性怀疑，曾进入一思维陷阱，

&lt;&lt;next&gt;&gt;病态出现了，注意力无法聚焦

&lt;&lt;next&gt;&gt;抑郁焦虑，分裂，穷思竭虑，

&lt;&lt;next&gt;&gt;走火入魔&lt;&lt;next&gt;&gt;濒临死亡

&lt;&lt;next&gt;&gt;在成长区到死亡区的边缘疯狂试探。

&lt;&lt;next&gt;&gt;当然不是我愿意这样的，而是不知怎么回事，竟然把试探受伤，这种合理化成，获得真相必然要付出的代价。

&lt;&lt;next&gt;&gt;（写这些的时候，从走火入魔开始，状态心不能静下来，内耗大脑很累灼烧感。不甚清醒）该睡觉了。
&lt;&lt;next&gt;&gt;&lt;h1&gt;[[开始睡觉]]&lt;/h1&gt;
&lt;&lt;/clicked&gt;&gt;</tw-passagedata><tw-passagedata pid="169" name="开始睡觉" tags="" position="1500,1250" size="100,100">&lt;&lt;clicked&gt;&gt;
&lt;&lt;next&gt;&gt;&lt;h1&gt;载入阶段手感[[激活阶段]] &lt;/h1&gt;
&lt;&lt;next&gt;&gt;&lt;h1&gt;载入阶段手感[[不激活阶段]] &lt;/h1&gt;
&lt;&lt;next&gt;&gt;&lt;h1&gt;载入阶段手感[[再激活阶段]] &lt;/h1&gt;
&lt;&lt;/clicked&gt;&gt;

第一次轮回，不限时已达成

第二次轮回，限时半天



每一次，不需在自己有感觉的那个点，而是没有感觉也仍然持续这份轮回流程，只管酝酿，不用看到效果。内心不期望效果，过一段时间开始期望效果。


</tw-passagedata><tw-passagedata pid="170" name="别胡思乱想了" tags="" position="2950,3250" size="100,100">[[第一章]]</tw-passagedata><tw-passagedata pid="171" name="第一章" tags="" position="2950,3375" size="100,100">第一章    过度思考不只是想得多，

究竟何谓过度思考？过度思考是指当你对事物的分析、评估、思考和担忧已经超出了正常范围，你没办法停下来，并开始影响你的精神健康的一种状态。

导致过度思考的来源主要有两个：第一是主观方面。遗憾的是，有些人生来就比其他人更容易焦虑。但基因绝不是唯一的原因。有些人习惯性过度思考，这会让他们感觉自己是在想办法解决问题。过度思考是永无止境的，但却会让人产生错觉，误以为自己的思考是有所突破。陷入这个怪圈就很难逃脱。

第二个焦虑的来源是客观方面。首先，我们需要考虑每天身处时间最长的环境，如自己的家或办公室。这些空间的陈设方式会影响人们焦虑的程度。身处凌乱、昏暗和嘈杂的环境更容易焦虑。其次，在与周边环境互动时，我们在社会文化环境中拥有的更广泛的体验，在广义的社交中也会产生焦虑。如种族歧视或性侵害都会让受害者产生极度的焦虑感。

过度思考有很多不良后果。这包括可能会成长为长期问题的身体、心理、甚至社会伤害。例如，心跳加快、眩晕、疲倦感、易怒、焦虑和肌肉紧张等症状。
[[第一章原文]]
[[第二章]]</tw-passagedata><tw-passagedata pid="172" name="第二章" tags="" position="2950,3500" size="100,100">第二章    几种减压公式

现在，我们了解了什么是过度思考，我们就需要知道如何去应对它。这里有很多简便有效的方法来帮助你缓解压力，克服焦虑。

第一个方法是压力管理的4A原则。它们是避免（Avoid）、改变（Alter）、接受（Accept）、适应（Adapt）。避免是指远离那些超出你控制范围的事情。有些事情不值得你去耗费精力，你最好摆脱它。然而，如果你无法避免一件事情，那就需要学会如何改变环境来减少它给你造成的压力。如果连环境也无法改变，那就只能去试着接受它并适应它，学会和压力和谐共处，并将其危害减至最小。

另一个很受欢迎的方法是减压日记。当过度思考产生时，我们的大脑会盘旋着无数个念头，让你无法喘息。然而，如果能够把它们系统性地记录下来，我们就可以去分析评估它们的利弊。你可以随身携带一个笔记本，以备不时之需。这样一来，久而久之，就形成了习惯。

第三个方法是5-4-3-2-1基本技能。这个方法是通过调动我们的五个感官来控制恐慌心理，它的效果十分明显。不论何时，当你感到恐慌时，试着选择5个可以看到的物体，4个你能够触摸到的物体，3种你能闻到的气味，2种你能听到的声音和1种你能品尝到的东西，充分调动你的感官，分散注意力，让你的大脑无暇思考。
[[第三章]]</tw-passagedata><tw-passagedata pid="173" name="第三章" tags="" position="2950,3625" size="100,100">第三章 管理你的时间和精力

我们焦虑的最主要来源是糟糕的时间管理能力。我们总是倾向于优先做让我们感到不舒服的事情，从而没有足够的时间来做自己喜欢的事情。我们很少花时间去充分放松，这样不利于缓解焦虑。一些可行的办法如下：列出代办事项清单、根据个人喜好对工作排序和化整为零，逐步完成目标。
这里还有一些高效管理时间的策略。首先是艾伦的“输入物”处理技巧。这里的“输入物”可以是任何来自外界的刺激物。我们需要记录下我们对于哪怕是最微小的“输入物”（如电话和电子邮件）的反应。然后，基于我们的反应，找到最佳的应对方式，进而确定最佳的“输入物”。

另一个有效的办法是设置明智的目标。明智的（SMART）目标指的是具体化（Specific）、可测量（Measurable）、可达成（Attainable）、相关性（Relevant）和时间点（Time-bound）。详细记录你想要达成的目标内容，明确该做什么，目标要可达成。其次，设定实现目标的标准，标准要可测量。接下来，要评估目标与你个人价值观是否相符，它与你的人生价值的实现是否相关。最后，设置一个合理的完成任务的时间点。

[[第四章]]</tw-passagedata><tw-passagedata pid="174" name="学习之道" tags="" position="3675,3000" size="100,100">[[高冷冷专辑]]</tw-passagedata><tw-passagedata pid="175" name="高冷冷专辑" tags="" position="3675,3125" size="100,100">[[12每个人都能学会：5分钟克服拖延症的方法]]
[[01峰终定律和上瘾模型：像爱玩手机一样，爱上学习]]

[[日常积累视频]]</tw-passagedata><tw-passagedata pid="176" name="12每个人都能学会：5分钟克服拖延症的方法" tags="" position="3675,3250" size="100,100">12每个人都能学会：5分钟克服拖延症的方法
&lt;&lt;clicked&gt;&gt;&lt;&lt;next&gt;&gt;
01
先说第一个,5分钟克服拖延症的方法。
「5分钟起步法」特别特别特别好,大概是治疗拖延症的最简单最有效的方法。而且确确实实只需要5分钟,甚至不到5分钟,就可以起效。
这不是故弄玄虚,它是有科学理论支持的,是加拿大卡尔顿大学拖延心理学研究小组得出的结论。
我们在做事情前,惯常的思路是,找到各种理由和动力来说服自己去做。我们常常觉得,「说服」是第一步,而且是极其必要的、绕不过去的一步。
但事情可能并不是这样。
&lt;&lt;next&gt;&gt;
02
美国心理学家大卫伯恩斯说:行动在先,而非动力。
行动比想法,更能够推进行动。不是说等我想做了,我才能去做;而是我先开始做,我就会进入想做的状态。
细细想想你的过往学习和工作经历,是不是有这种体会?
李敖说,作家不能等有了灵感才写作。
先去写,灵感才会生发出来,然后继续推动写作。是行动影响了态度,而不是态度影响行动。
&lt;&lt;next&gt;&gt;
03
好,现在我们明确了拖延的根本症结所在,以及行动和态度之间的关系。接着说具体做法。
开始做一件事时,先给自己5分钟的起步时间:比如先开始读一页书,开始背10个单词,别计较效率。
心里可能会百般抗拒,甚至完全投入不进去。
这很正常,这是人的本性。接受它就好了,不用责怪自己,不用痛苦地想:我完了,怎么一点都看不进去;算了,先玩会游戏吧、上会网吧、吃点巧克力吧。
告诉自己:就5分钟,熬过这5分钟就好了。
事实上,不仅是做自己不喜欢的事,会在一开始感到抗拒,即使是自己喜欢的事,也需要5分钟的启动。
大家想一想,电脑开机、汽车发动、骑自行车都是一样的,一开始都是需要多花费力气,但启动之后,就很顺畅了。
接受自己刚开始那5分钟的烦躁和抗拒,别对这焦虑情绪进行评价,坚持住,之后就好了。
早在晋朝,陶渊明就曾对这一现象进行过描述:初极狭,才通人,复行数十步,豁然开朗。
&lt;&lt;next&gt;&gt;
04
我有一个读者,在2017年12月11日给我发消息,说自己接触了5分钟起步法之后,在考研复习中,每当打开书看不进去,就告诉自己「熬过这5分钟就好,5分钟,就5分钟!」
事实证明真的很有用。而且自己越来越喜欢那种沉浸在学习里的感觉。所以,谢谢冷冷!我想这个方法会让我受益终身。
2018年2月3日,考研初试成绩出来,这个读者又给我发了消息:
冷冷,我考研成绩出来了,还不错380+。我就是之前感谢你5分钟起步法」的那个人,今儿得再感谢你一遍。当初要是没接触到你这个方法,我考研也许就坚持不下去了,也不可能考到如今的分数。
打这颗栗子,是想告诉大家,这个方法听起来非常简单,但非常有用。
如果你在过程中还有想中止的时刻,记得重新使用5分钟起步法这样一来就可以将一件事从头到尾地坚持做完。
&lt;&lt;next&gt;&gt;
05
我们接着说第二种克服拖延症的有效方法。
回想一下,那些你能够平心静气地投入去做事的时候,那些你觉得不急不忙,并且有自发的动力,不觉抗拒不觉痛苦,执行力爆表的时候。
那时,你与手中的事情,关系是怎样的?
我想大概是,你的进度,完全跟得上你的计划,甚至略有超出截止日期对你的要求。
相反,越是时间紧迫,就越是不想做。即使你知道其实你做得完,但那种被催着、被逼着的感觉,实在是太不好了。
我以前写文章,如果没有存稿,需要现写现发,其实时间足够用,但因为我要匆匆忙忙地赶稿,这种感觉直接把我劝退了:啊我不想做我就是不想做。
当我手里有两篇存稿时,我会开开心心地去囤下一篇。明明花费的时间一样,付出的精力也一样,但一切都大有不同。我稍微走在了计划前面,我主动地不再拖延。
这两种截然不同的感觉,大家应该都有切身体会。《拖延心理学》对此有蛮好的分析,当有某件事我们必须做,某些规则必须遵守时,我们会产生逆反心理。拖延,是我们对这种被掌控的状态,作出的反抗。
这是关于「克服拖延症」,我给出的另一个建议,稍微走在计划前面,给自己留下偷懒的资格和空间,当你相对拥有不做事的权利时,你才会更愿意追求「主动做事」。
&lt;&lt;next&gt;&gt;
06
讲一个与此相关的小故事。
一家洗车店推出积分会员卡促销活动。顾客每洗一次车,就可以在卡片上盖一个章,集满8个章就能免费洗车一次。
第一组顾客拿到的是空白的积分卡,集齐8个章即可;第二组顾客拿到的是已经盖好两个章的积分卡,需要集10个章(只需集齐剩余的8个章),才能享受一次免费洗车服务。
有什么差别吗?看起来没有差别。两组顾客要达成的「目标」一模样:购买洗车服务满8次,兑换免费洗车服务一次。但两组顾客的心态却大为不同:一种是从起点,另一种则是已经抢跑了20%的路程。几个月后,从零开始的顾客,只有19%换得免费洗车服务,预先盖了两个章的顾客则有34%达成目标。而且后者花费的时间更短。(《瞬变:让改变轻松起来的9个方法》)
稍微走在你的计划前面一丢丢,会激发出你立刻行动的执行力。两点前提是:不要制定你踮着脚都够不到的计划;也不要过多地超出计划,然后生出我要赶紧做完的贪念。
&lt;&lt;next&gt;&gt;
07
好,接下来我们说第三个方法,这个观念你大概是第一次听说。而且,其实不仅适用于拖延,也适用于你需要自制的一切场合。
平时你在自律与放纵之间抉择时,比如:
是按时早起还是埋头再睡2小时?
是踏踏实实学习还是打两把游戏?
是节制还是喝奶茶吃蛋糕?
话说,惯常来说,这个时候,我们想的都是:
我是要在痛苦和快乐之间做选择。
那咱也不用问,谁有那个意志力去选痛苦啊。
自制力、抵抗诱惑、目光长远,太苦了好嘛。
哦,其实还有一种说法,是在长远的快乐与眼下的快乐之间做选择。但,奖励系统决定我们会去选眼下的快乐,这个是生理决定的,谁也改变不了。
我是真的发现这个不好使。直到我转换了一下观念。
其实,面对懒惰、拖延、放纵的诱惑时,我们不是在快乐与痛苦之间做选择。也不是在所谓「长远的快乐」与「眼下的快乐」之间做选择。
&lt;&lt;next&gt;&gt;
08
其实,我们是在一种痛苦与另一种痛苦之间做选择。
对,就是这样。
一种是暂时少吃多动、忍耐食欲的痛苦;
另一种是大吃大喝之后,躺平无限后悔,看着体重特绝望的痛苦。
一种是投入做事、暂时放弃娱乐的痛苦;
另一种是短暂放纵之后,对自己不思进取的谴责和惶惶不安的痛苦。
诸如此类。
你试试这么想:你没法逃避痛苦的,你所拥有的选择,仅仅是在两个痛苦之中选择一个。
真的.当我发现这个事儿时,我感觉我是好惨一女的我们无从逃避,我们必须经受痛苦。
当你接受这个设定,事情突然简单起来了。也不必去对比两种痛苦的高低,选择你愿意承受的那种痛苦就可以了。
明白了吗?
当你面对自律和放纵的抉择时,告诉自己,你不是在快乐与痛苦之间选,你是要在两种痛苦之间选一种忍受,那么一般这个时候,你会选择那个有意义的痛苦。
&lt;&lt;next&gt;&gt;
总结
这节课我们学了啥?语文课代表冷冷的例行总结:
关于「克服拖延症」,有3个思路及方法。
1、行动比想法,更能够推动行动。不是说等我想做了,我才能去做;而是我先开始做,我就会进入想做的状态。
开始做一件事时,先给自己5分钟的起步时间:比如先开始读一页书,开始背10个单词,别计较效率。接受自己刚开始那5分钟的烦躁和抗拒,别对这焦虑情绪进行评价,坚持住,之后就好了。即使是自己喜欢的事,也需要5分钟的启动。
如果你在过程中还有想中止的时刻,记得重新使用5分钟起步法。如此一来,就可以将一件事从头到尾地坚持做完。
[[5分钟起步法不带脑子的任务]]
2、走在计划后面或者将将跟上计划,即使你知道自己能做完,也常觉会觉得焦虑和抗拒。所以,稍微走在计划前面,给自己留下偷懒的资格和空间,你会更愿意追求「主动做事」。
3、当你面对自律和放纵的抉择时,告诉自己你不是在快乐与痛苦之间选,你是要在两种痛苦之间选一种忍受,那么一般这个时候,你会选择那个有意义的痛苦。
好了,今天的内容就到这里。我是冷冷,祝你今天吃饱,我们下节课再见。
&lt;&lt;/clicked&gt;&gt;</tw-passagedata><tw-passagedata pid="177" name="5分钟起步法不带脑子的任务" tags="" position="3850,3275" size="100,100">五分种誊抄一段文字，打字到计算机上。

书单



目前书籍《别胡思乱想了》</tw-passagedata><tw-passagedata pid="178" name="第四章" tags="" position="2950,3750" size="100,100">第四章 应对焦虑的即时办法
有些时候，你会觉得自己焦虑到极点，几乎快要失控。这时，你需要一些经过验证的好办法来缓解压力。

第一个方法是自律训练法。我们通过六个不同的练习来帮助你控制思绪和情绪。你需要找一个舒服的地方躺下或者坐下，缓慢平稳地呼吸，同时给自己一些语言暗示“我完全平静下来了”。间歇性地重复这个语言暗示，感受身体不同部位的感觉。这个方法掌握起来需要花费一些时间，但它简单易操作，可随时随地进行。

第二个方法是引导式想象和想象可视化法。找一个舒服的姿势，调动你所有的感官去想象一个地方，保持积极预愉悦。想象的地方不受限制，只需要让你感到放松即可。尽可能详细地描绘这个地方，充分调动你的想象力。

第三个方法是渐进式肌肉放松法。这个方法的理论依据是身体放松会带来精神放松。所以我们首先让肌肉紧张起来，然后放松。同样，以舒适的姿势坐下来，从头到脚或者相反，让身体的各个部分先紧张再放松，依次进行。

最后，延缓担忧法也是一个减少焦虑的直接有效的办法，当你意识到自己开始焦虑时，刻意地设定一个单独的时间去焦虑，而现在，你必须专注于当下。生活中，不可能没有担忧，但我们能够有意识地限制它合适出现，延续多久。

[[第五章]]</tw-passagedata><tw-passagedata pid="179" name="第五章" tags="" position="2950,3875" size="100,100">第五章 重构你的思维模式

我们很多人陷在某种负面思维模式中变得焦虑。认知行为疗法可以帮助你了解这些思维模式并且引导你建立积极的态度去应对焦虑，进而改善你的精神健康状况。

首先，你需要弄清楚各种不同的认知扭曲。常见的认知扭曲有：非此即彼的绝对思想（极端地看待问题，不是天堂就是地狱）；心理过滤（所有的事情只能看到不好的一面）。认知扭曲种类繁多，有时我们会在同一时间应对多种认知扭曲。

接下来，我们要关注诱发你某种思维模式的情境、人物或周边环境。你可以通过记录消极想法来跟踪相关细节信息。一旦你陷入消极思维模式，就要停下来，记录此时的地点、诱发事件、你的自动思维和你的认知扭曲类型。然后，找一个合理的替代思维。

在我们明白了什么是认知扭曲之后，我们需要改变这些思维模式。行为实验就是一个有效的办法。运用这个方法时，你需要弄清楚自己的消极想法是什么。然后创造一个假说告诉自己的想法是错误的。想一想在过往的经历当中，有什么可以作为证据推翻你的消极想法。找到更多类似的证据，用更充分的理由去质疑你最初的那个念头，并慢慢调整自己的思维模式。

[[第六章]]</tw-passagedata><tw-passagedata pid="180" name="第六章" tags="" position="2950,4000" size="100,100">第六章 新兴的态度与情绪调节

这本书是关于教你如何应对焦虑和过度思考的，但又不仅仅止于此。我们希望可以通过将人们对事物认知和态度中的基本转变方式进行归纳，进而产生更多影响来帮助人们进行认知调整。这里有五种基本态度，你可以将其运用并融会贯通。

第一，专注于自己可控范围内的事情，而非不可控的。面对一些你可以掌控的事情，你尽管去做。但如果有些事情超出你的控制范围，你也无须焦虑。很多时候，在你不知道该做什么的时候，接受现实不失为上策。

第二，专注于自己力所能及之事，而非力所不能及的。这个与第一点有相似之处，但要更为具体。在某些特定的情景当中，你能做什么？不能做什么？

第三，专注于自己拥有什么，而非没有什么。我们总是忽略自己所拥有的而执着于我们没有的东西。人生不如意十之八九，只思一二就好。

第四，专注于当下，而非过去和未来。漫无边际地假设只会让自己陷入过度思考。

第五，我们要专注于自己所需，而非所想。毕竟人生所想并非皆可得到，专注于所需会更容易开心。

反刍是无意义的过度思考。就像其他形式的焦虑，它可以通过我们的主观能动性和设置心理距离得到缓解。给你的思绪贴上标签，或者把你的思绪想象成一个老朋友，然后经常问自己：我做的事情是否有益于解决问题，还是仅仅只是无意义的反刍。</tw-passagedata><tw-passagedata pid="181" name="01峰终定律和上瘾模型：像爱玩手机一样，爱上学习" tags="" position="3550,3250" size="100,100">01峰终定律和上瘾模型：像爱玩手机一样，爱上学习


学习是有方法的,按照正确的方法练习,每个人都可以成为学霸。
大家好,我是冷冷。
今天要跟大家分享的是,如何减少对学习的排斥和厌恶心理,在一定程度上,爱上学习。
我并不是在夸张,这节课会讲比较多的思路和方法,都是有理论支撑以及真实案例的。
其实不仅仅是学习,对于任何你觉得艰难、排斥、恐惧的事情,工作、跑步、读书等等,都很适用。
01
我们开始吧,第一个。
先记住两个概念:峰值和终值
心理学家丹尼尔卡尼曼是2002年的诺贝尔奖得主,他提出了峰终定律(peak-End- Rule):人们对一切人、事、物的感受,由峰值和终值两个因素决定。峰值是指这段体验中的最高峰,包括正向和负向;终值是指这段体验结束时给你的感觉。
说到这里,你可以回想一下自己平时在学习时的体验:过程中基本上很少有正向的高峰,总是被「我不想做啊」、「这个好麻烦啊、「太枯燥了」、「我想出去玩」、「我不会」这些负面情绪充斥着。
你每次学习的峰值体验,基本上都是负向的。
关于「终值」,每次你结束学习时,一般都是很狼狈的吧?实在是被自己打败了,实在是学不进去了,烦躁到极致,赶紧像个逃兵一样收拾书包回去了。
正是因为,每次你的学习过程,都充满着这样负向的峰值和终值,而峰终值,直接决定了你对「学习」的所有记忆。所以一旦你想起学习,内心满是厌恶、排斥,甚至恐惧。
你每次做这件事时,感受都是非常不愉悦的,那怎么可能会有「我想做」的想法呢?当然一点都不会有啊,谁没事儿喜欢给自己找罪受啊。
两个
好了,两个概念你记好;你为什么厌恶、排斥、害怕学习,我们也在这两个概念的基础上,大致分析清楚了。
02
接下来,冷冷教你解决问题,让你在一定程度上喜欢学习,主动有「我想学」的念头。
我们可以利用这个基本原理,在学习过程中,主动去创造正向的峰值和终值。
我们还是说点能听得懂的人话吧,下文是两颗栗子。
虽然学习在总体上是枯燥的,但总有你喜欢的某个科目:某个科目,总有你喜欢且擅长的某个章节;或者,总有某个环节是你喜欢的:喜欢看书?
或者喜欢做题?也可能喜欢背单词?
每次的学习过程,穿插着安排你喜欢且擅长的科目章节/环节。
这样一来,你每次都会有学得得心应手、反馈满满的时刻,也就是出现了正向的「峰值」。
每当你学习难搞、恐惧的科目,在负面情绪达到顶峰之前,可以先转换到喜欢且擅长的环节,情绪安抚下来之后,再回头继续做难的事情。以此避免负向峰值的出现
比如我写文章的时候,需要做的两件主要的事情,是「输入和「输出」。我非常喜欢「输入」:看书、看公开课、跟人探讨、学习一些付费课程等等,无论多枯燥多抽象,都觉得很有意思。
「输出」比输入难多了,写得不顺畅,就会很烦躁。所以我规定自己每次只写25分钟,时间一到,虽然没完成,也立刻收手,去做我喜欢的「输
入」。两种任务来回替换。
整个过程基本不会出现负向的峰值」「输入」和「输出」,都会及时高效地完成。
这里需要说明的是,写东西是个非常耗费脑力的事儿,所以我以25分钟为一个小周期。我在第5节课,谈到如何提升专注力的时候,会建议大家用完整的时间段和连贯的思路做一件事,与此并不违背。大家可以看具体情况,结合专注力与峰终值的影响,决定具体的专注时间,以及怎样替换任务。
03
关于终值,每次学习的末尾,都要以你最喜欢、最能带给你反馈感的环节结束。别去学最难的东西,也别在纠结焦虑中让学习体验以痛苦终结。
打颗栗子,我平时写公众号文章,有时选题熟悉,写得顺畅,过程很愉悦。但如果当天标题起得不好,阅读量只有平时的一半。
我的「终值」体验,在这种情况下,是比较糟糕的;之前所有顺畅愉悦的体验,我会尽数忘记,只记得糟糕的「终值」,以至于下次写文章的时
候,常常有提不起劲、排斥的感觉。
也有好些时候,选题比较复杂繁琐,写的过程很费精力,后面起标题时,冥思苦想一个小时,最后战战兢兢地推送。
结果呢,好家伙,阅读量很好。这个「终值」,立刻覆盖了之前写作和起标题过程中各种难以为继的痛苦体验。下次写文章的时候,我会隐隐期待,有强烈的「我想写」的感觉。
看吧,「终值」体验就是这么强大,甚至连峰值体验都能覆盖掉。如果运用在学习过程中,是不是一个道理呢?
在你反馈感很强、情绪高涨满足的时刻结束学习,留下一个正向的终值。千万别学到想吐才结束。
海明威的写作习惯是,今天写到卓有成效时就停下来,「在我知道接下来该怎么做时停手。如此,次日我开始工作时,便知道如何着手。(《流动的盛宴》)
04
好辣,记住了么?
峰值:体验的最高峰,包括正向和负向。
终值:结束时的感觉。
二者共同决定我们对某一事件的体验和记忆。
无论是学习、工作、跑步、读书,还是和男女朋友约会,或者任何事情!都可以巧妙地利用这一定律,创造正向的峰终体验,会让你对整件事情的记忆,变得愉悦起来。
爱学认学,从峰终值开始。大脑可真好骗吼,像个大傻子。
05
我们接着从对手机App上瘾的角度,谈一下如何利用相似的原理,一定程度上,爱上学习和工作。
大家会发现,我们爱玩手机,但我们是有偏好的。我们对某些或某个App,更为「上瘾」。
同样是购物App,同样是购买水果的App,同样是读书的App,你有自己特定的喜好。
这说明啥?我们其实是经过选择的,在玩儿的过程中,我们能清楚地感知到每个手机App的不同体验。
尼尔埃亚尔的《上瘾》这本书,提供的是如何打造一个让人上瘾的产品」的方法论,以及对其背后原理的分析。
我们可以利用相同的规律,让你在一定程度上,不奢求对学习和工作上瘾吧,但起码,能够让它变得更容易、更愉悦一些。
《上瘾》提出了一个「上瘾模型」,包括四个环节:触发(Trigger)行为(Action)、不确定奖赏(Variable Reward)和投入(Investment).
06
触发(Trigger)
如果以手机App来说,比如微信,当我们听到消息提示音时,会去跟人聊一会儿。—消息提示音就是触发,是来自外部的刺激。
如果我们感到孤独,也容易拿起手机打开微信孤独就是触发,是来自内部的刺激。
那么应用到学习和工作中,其实我们可以建立自己的触发机制。有一个很知名的做法是,给自己定下一些规则,比如:
当我回到家,看到跑鞋和运动衣,我就换上装备去跑步;
当我跑完步,我就去洗澡;
当晚上10点的闹钟响起,我就开始读书;
·······
设定好时间和地点,还有情境,当满足这一条件时,你就直接去执行相应的行为,而不需要经过各种挣扎。
想一想你的哪些日常任务,可以制定这样语:if······then······
（当·····我去做······)
设定好触发条件,你的执行力会大幅增强。
07
行为(Action)
触发之后,我们需要执行动作。
想一想,一个App怎样才会给你好的体验?页面需要流畅,完成一个任务的步骤不能过多,否则你很容易在中途放弃。
如果淘宝买东西,从搜索到支付,需要经过十步,那你可能就没有买买买的欲望了。
你看,哪怕是一个娱乐放松的App,也都是经过不断优化步骤,让过程更流畅、更简易,才能提高用户的动力和黏性。
人太懒了真的。
那么如何应用到学习和工作方面呢?如果让你今天早上起来,立刻进入状态做事,但你并没有做任何准备,那么这个启动的过程,步骤非常复杂,你就很容易放弃。
我提供几个有效的小方法啊,让启动的步骤变得尽量少:
1、前天晚上,安排好第二天要做的事情;
2、提前把桌子收拾好,甚至可以把书打开到自己要看的那一页,而不是放在书包里,还需要你去找;
3、先从容易的任务开始。这一点是因为,人们经常在开头放弃,但其实一旦开始,就可以进入状态。关于这一点,「分钟起步法可以有很好
的解释,我会在第12课《每个人都能学会:5分钟克服拖延症的方法》中详细介绍。
总之,让你每次的学习和工作,都尽量是简便相对易执行的,而不是手忙脚乱、繁琐复杂的。
对于做事来说,流程和步骤越简单越好。想想,就连玩手机,你都是很懒的;学习和工作这么辛苦的事情,更得贯彻这个原则。
08
不确定奖赏(Variable Reward)奖励机制这个原理,都被说烂了。然而,实际上,更有用的,是不确定的奖励。因为,人对确定的可预知的奖励,是会麻木和免疫的。
你每次打开朋友圈、微博、知乎,都不知道会看到什么,这种不确定的奖励,才是最吸引人的,能刺激人脑产生更多的多巴胺。
所以知乎、微博、淘宝等等,都会有推荐机制正是因为不确定,所以你一刷起来就没完没了。
你可以把想要的东西、想花时间做平时却没有去做的事情,写在纸条上,然后放进小盒子里,每次完成任务时,做一次抽奖。
大脑期待未知的、不确定的奖励,这会让我们更有动力这是奖励机制的高阶玩法,也是更有用的玩法。

09
投入(Investment)
投入,通俗点解释就是,你在一个手机App上花了时间、寄托了感情,那么你就不会轻易注销。
对于学习和工作来说,可以这样理解,当你坚持了一定时间的努力之后,一方面是你会有成就感,如果带来了正反馈,自然愿意坚持。
另一方面是,你觉得自己已经付出了许多,如果不继续坚持,前面的努力
就都白费了。换句话说,你有了「沉没成本」。所以,一开始的坚持和投入,是很重要的。就像是,哪怕现在,假如有另一个产品比微信的体验更好,我们也很难愿意舍弃我们的投入,选用另一个社交App
虽然一开始是最难的,但是,当你有了一定的投入,你就会渐入佳境。
关于如何利用「上瘾模型」,在一定程度上喜欢学习,我们就讲到这里。
总结
这节课我们学了啥?语文课代表冷冷的例行总结:
1、人们对一切人、事、物的感受,由峰值和终值两个因素决定。峰值是指这段体验中的最高峰,包括正向和负向;终值是指这段体验结束时给你的感觉。
2、正是因为,每次你的学习过程,都充满着负向的峰值和终值所以一旦你想起学习,内心满是厌恶、排斥,甚至恐惧。
3、解决的方法是,主动创造正向的峰值和终值每次的学习过程,穿插着安排你喜欢且擅长的科目/章节/环节。如此你每次都会有学得得心应手、反馈满满的时刻,也就是出现了正向的「峰值」。
4、每当你学习难搞、恐惧的科目,在负面情绪达到顶峰之前,可以先转换到喜欢且擅长的环节,情绪安抚下来之后,再回头继续做难的事情。以此避免负向峰值的出现。
5、在你反馈感很强、情绪高涨满足的时刻结束学习,留下一个正向的终值。千万别学到想吐才结束。
6、从对手机App上瘾的角度,我们可以把同样的规律应用到学习中。设定好时间和地点和情境,当满足这一条件时你就直接去执行相应的行为,而不需要经过各种挣扎。让你每次的学习和工作,都尽量是简便、相对易执行的流程,而不是手忙脚乱、繁琐复杂的。
7、大脑期待未知的、不确定的奖励,这会让我们更有动力。投入足够多,并且让自己看到一定的正反馈。
需要提醒大家注意的是,这只是在很大程度上,减少学习留给我们的负面印象,减轻对学习的排斥心理。真正有效的学习,本就是需要克服困难、忍受一定痛苦的。这在本质上是个没法解决的事儿。
不过,有意识地把握学习的节奏,掌控自己对于学习的体验,是非常有意义、有积极作用的一件事。「在很大程度上」得到改善,已经足够了。</tw-passagedata><tw-passagedata pid="182" name="日常积累视频" tags="" position="4275,2350" size="100,100">视频来源
bilibili
YouTube
动画效果
https://www.youtube.com/playlist?list=PLwxNMb28XmpcEwc0qydf2jSszQFSht81E
网易公开课（逐渐淘汰）



&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/tiN6T1LewmQ?si=aREBAxOD7ZtjyG_-&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/D8Gc6_S6i0k?si=n_u75MUWkw7Cv7iu&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/NJ5hNH9kOq8?si=b3YqF2iXlS4Ptkg9&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen&gt;&lt;/iframe&gt;
</tw-passagedata><tw-passagedata pid="183" name="第一章原文" tags="" position="3100,3375" size="100,100">有一个叫詹姆斯的年轻人，他善良、聪明且自我意识很强（可能有一些过于自我）。
他总是为一些事情担忧。今天，他感觉自己的身体有一点小疼痛，他又开始焦虑了。于是，他上网查了一些相关资料后，开始为各种可能性而感到恐慌。之后，他停下来审视自己：“我有可能过度思考了。”

因此，他停止过于关注自己的健康，可是又注意到自己过度关注健康这个念头。可能他真的需要治疗了，但怎么治疗呢?他的想法开始信马由缰，内心开始挣扎：“我到底怎么了？”“我是应该去找医生咨询吗？”“我没事吧？”在无尽的回忆、猜测、和恐惧中，他反思者着。当他停止思考这些的时候，他又会问自己另外的问题：“我这样是焦虑的表现吗？我是不是得了恐慌症？或者我得了精神分裂症，但自己不知道？”他觉得没有人像他这样痛苦挣扎。事实上，在他产生这些想法的那一刻，他的脑子里就满是各种被批评被否定的可能性。

他用放大镜一遍又一遍地审视者自己的每一个缺点，问自己为什么会这样，责怪自己为什么就不能放松一些。大约一小时之后，他失望地得出结论：对于他的健康，他无法确定什么。接着，他又开始持续的抑郁，陷入自我否定的对话当中。他不断地告诉自己，他总是会这样，他无法厘清事情，他神经过敏……

哦，天哪！你很难相信，詹姆斯的这些精神折磨竟然只是来源于他自己肩膀上的有一个看起来有点奇怪的痣！

我们都生活在一个高度紧张的，需要时刻思考的世界里。当我们正常的认知功能被超负荷使用时，我们的思维会失控，会产生压力，形成过度思考。对于生活和自我的无尽忧虑通常不是由我们个人主观意愿所控制和阻止的，而且它有一定的自我摧毁能力。通常情况下，我们的大脑会帮助我们清楚地认知事物并解决问题，但是过度思考只会适得其反。

不论你称其为担忧、焦虑、压力、反思或是挥之不去的阴影，过度思考都会让人感觉糟糕，并且毫无裨益。最典型的过度思考通常表现为一些被放大的、极具干扰性的念头在大脑里无限循环。

你曾经遭遇过过度思考吗？有时，过度思考者很难意识到自己的问题，直到另一个“普遍存在的”忧虑取而代之。这是因为他们非常擅于说服自己他们目前的忧虑是普遍存在的。过度思考通常表现为精神方面的持续焦虑和抑郁。但有些过度思考者可能完全没有以上症状。

过度思考是一种具有伤害性的精神活动。这个活动可以是对事物的分析、判断、监测、评价、控制或以上所有。就像詹姆斯的案例一样！

如果你有以下表现，就可能存在过度思考的问题：
你时常意识到自己在想一些东西。
你时常陷入元思考，即思考自己的思考。
你很努力想去控制自己的思维。
你会被自己无意识的想法感到沮丧，或者认为这些想法很糟糕。
在危急时刻，你总是把自己或自己的想法看作是问题的源头。
你总是专注于弄明白自己的想法，并挖掘自己的内心活动。
你很难做决定或经常怀疑自己做出的选择。
你会担忧很多事情。
你时常感觉自己不由自主地回到某种念头当中，即使是已经对其无能为力的念头。

理论上，你会发现以上问题当中不乏有我们所认为的好的表现。有谁会不想让自己拥有更好的意识和觉察力呢？有谁会认为思考膝跳反应或者多问自己几个问题从而更好地做决定是不好的呢？但是，过度思考的关键就正如其名，它已经超出了对我们有益的程度。

思考能力是人类美妙的天赋。去反思、分析甚至质疑自己的思维过程是人类独有并让人类取得无数成就的显著特征。思考能力不是我们的敌人，大脑是人类展示非凡能力的工具，但当我们过度思考时，它的能力就被我们破坏了。

----让你精神混乱和痛苦的原因----
如果说大脑如此了不起，思考能力如此美妙，那为什么我们人类容易迷失在过度思考当中？各个年龄阶段的过度思考者都给出了自己的理论：也许过度思考是一种坏习惯，或者是一种性格特征，或者是一种可以被药物治疗的精神疾病。事实上，一个人过度思考的原因可能会成为过度思考者所喜欢讨论的话题：“为什么我是这样的？”

如果你拿起了这本书，那么很有可能你曾被过度思考所困扰。但是，这里有解决办法。这本书可以让你摆脱压力和自我毁灭，重新拥抱清晰而安宁的世界。然而，你需要注意：过度思考的原因不是过度思考的焦点。这该如何理解呢？在詹姆斯的案例当中，他的过度思考与他肩膀上的痣毫无关系；与他是否选择合适的心理医生且那个人在23年前跟他说了什么也毫无关系；与他是否应该为自己是个坏人而有负罪感也毫无关系。

所有的这些都是过度思考的结果。当我们陷入自我毁灭中，看起来问题似乎源于那些思考。我们对自己说：“如果能找出那些烦扰我的事情，我就能够轻松，一切也就会好起来。”但是，即使你认为的问题被解决掉了，其他的也会再来。那是因为它们不是过度思考的原因，而是结果。

许多过度思考者处于他们过于活跃的大脑控制之下，这是因为他们不明白到底发生了什么。他们急于解决那个所谓的”问题“，却忽略了他们对于真正问题的评估才是问题本身。因此，你可能会执着于某些解决办法并倾尽心力去使用它们，结果却发现你一如开始一样身心俱疲。

如果希望成功地应对过度思考，我们就需要后退一步而不是费力地从已经被伤害的内心当中找解决办法。这本书中将坚持一个假设：但谈论过度思考时，我们把它看作是一种焦虑。在没有正式诊断为焦虑症的情况下，人们都会有过度思考。但是在接下来的章节当中，我们会把焦虑看作是根源，过度思考是结果。那么，焦虑又从何而来呢？
----这是你吗？----
关于焦虑原因的研究一直都在进行中。竞争理论认为这是因为性格或者是生物遗传倾向问题——某种来着你同样焦虑的父母的遗传。焦虑通常伴有精神与身体双方面的功能紊乱，例如抑郁症和肠道易激综合症。但是，我们也观察到，特定人群（例如女性群体）更容易产生由诸如节食、生活压力、过往精神创伤甚至社会文化所带来的焦虑。

人们容易受到多方面的焦虑影响，如金钱、家庭成员关系、衰老或者生活压力等方面。但是如上文所提的，这些因素是焦虑或过度思考的原因还是结果？毕竟，还有许多人遭受了巨大的经济或家庭压力也并未感到焦虑或过度思考，而还有一部分人在并没有受到任何明显的外界压力时却表现出了焦虑。

为了弄明白这些现象，我们采取科学的态度进行研究，即焦虑形成的多元因素是什么。它可能是来自于多种因素彼此作用的结果。你焦虑的首要原因可能是”先天与后天“较量中的先天因素。换句话说，尽管你现在无从得知，但是焦虑的主要原因能够被归结为一个个体的内在因素。

让我们从一个最常见的焦虑入手：基因。事实上，没有一位专家能够指出是哪一个基因造成了焦虑。然而，有研究者发现了一种遗传成分。
普维斯等人2019年在期刊《分子精神病学》上发表的论文中指出，9号染色体携带着与焦虑形成相关的基因。但是，携带这样的基因并不必然意味着你会患焦虑症。

该论文进一步指出了焦虑症有26%的遗传概率。这意味着人是否会患上焦虑症，基因有26%的决定权。我相信你肯定会认为这是很小的概率，那么另外的74%呢？这个要归结于你的成长环境、家族史、过往经历和现在的生活方式。此类研究难度很大，因为你必须一分为二地看待遗传自父母的焦虑——生物性基因遗传，抑或是家庭教育对我们的塑造等。这样一来，要区分开生物性基因影响和行为影响就比较困难了。
</tw-passagedata><tw-passagedata pid="184" name="规则介绍" tags="" position="1375,675" size="100,100">激活，不激活，

在舒适圈待久了会僵化，需要豁出去，在一定限度内不想使它搞砸，你可以处理好接下来的，冲刷。

不预置，没有新的尝试，你的环境会固化。即试错。

若试错出风险，引起创伤瘫痪了灵性，此时状态下，需要回到舒适圈，啥也不做，遵循本能，修复自身

修复到逐渐忘记，再开始在其他领域继续试错，提高建立良性回路的几率。

&lt;h2&gt;反复横跳，睡觉可以代谢掉，不良循环，即创伤产生的神经短路。&lt;/h2&gt;
&lt;h1&gt;[[设置梦境闹钟]]&lt;/h1&gt;
&lt;h2&gt;每一次，不需在自己有感觉的那个点，而是没有感觉也仍然持续这份轮回流程，只管酝酿，不用看到效果。内心不期望效果，过一段时间开始期望效果。
&lt;/h2&gt;



隔一段时间这样遵循，激活即是第一层，[[激活阶段]]
隔一段时间那样遵循。不激活，在舒适圈自行修复，淡化不良影响即是第二层。[[不激活阶段]]
隔一段时间这样遵循，再次激活，是第三层，建立良性循环。[[再激活阶段]]



</tw-passagedata><tw-passagedata pid="185" name="沟通共识" tags="" position="1800,1050" size="100,100">语境共识

非常正确，沟通过程中的共识是解决问题的关键。共识意味着所有参与者对问题的理解、目标、方法和预期结果有共同的认识和接受。以下是达成共识的几个步骤：

1. **明确问题**：确保所有参与者对问题有清晰的理解。
2. **开放性对话**：鼓励每个人表达自己的观点和担忧。
3. **倾听和理解**：认真倾听他人的观点，尝试从他们的角度看问题。
4. **寻找共同点**：识别所有参与者之间的共同目标或利益。
5. **协商和妥协**：在不同意见中寻找平衡点，可能需要一些妥协。
6. **制定行动计划**：基于共识制定具体的行动步骤和解决方案。
7. **持续沟通**：在解决问题的过程中保持沟通，确保共识得以维持并适应任何新出现的情况。


非常赞同你的观点，达成共识确实是解决问题和推动项目进展的关键。你列出的步骤非常全面，涵盖了从问题识别到行动计划制定的全过程。这种系统性的方法有助于确保所有参与者都能在同一个频道上工作，减少误解和冲突，提高团队协作的效率。

如果你在实际应用这些步骤时遇到任何困难或需要具体的建议，比如如何更有效地进行开放性对话，如何识别和处理不同意见中的共同点，或者如何制定一个有效的行动计划，随时欢迎你来咨询。我会尽我所能，提供相应的帮助和建议。记住，沟通和协作是一个动态过程，需要不断的调整和优化。

[[管理自己的预期]]
[[思维定势]]
[[先做个垃圾出来，小步试错快速迭代]]</tw-passagedata><tw-passagedata pid="186" name="管理自己的预期" tags="" position="1975,950" size="100,100">&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://player.bilibili.com/player.html?isOutside=true&amp;aid=1605891529&amp;bvid=BV1Gm42157xM&amp;cid=1589916610&amp;p=1&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen&gt;&lt;/iframe&gt;</tw-passagedata><tw-passagedata pid="187" name="思维定势" tags="" position="1800,1175" size="100,100">&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://player.bilibili.com/player.html?isOutside=true&amp;aid=338833646&amp;bvid=BV1AR4y177co&amp;cid=502864255&amp;p=1&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen&gt;&lt;/iframe&gt;

暂时找个视频标点，日后再深入浅出，对标


待处理阶段</tw-passagedata><tw-passagedata pid="188" name="先做个垃圾出来，小步试错快速迭代" tags="" position="1675,1175" size="100,100">&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://player.bilibili.com/player.html?isOutside=true&amp;aid=1950936723&amp;bvid=BV1VC411W7cw&amp;cid=1447966046&amp;p=1&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen&gt;&lt;/iframe&gt;</tw-passagedata><tw-passagedata pid="189" name="EMDR：基本原理、范本及程序" tags="" position="1675,1050" size="100,100">EMDR治疗的八个阶段
[[阶段一：听取当事人生命故事并研拟治疗计划]]
[[阶段二：准备期]]
[[阶段三：评估期]]
[[阶段四：减敏感期]]
[[阶段五：深植期]]
[[阶段六：肢体扫描]]
[[阶段七：结束期]]
[[阶段八：再评估期]]</tw-passagedata><tw-passagedata pid="190" name="不原谅也没关系" tags="" position="1925,1425" size="100,100">[[管理情绪闪回的13个实用步骤]]</tw-passagedata><tw-passagedata pid="191" name="阶段一：听取当事人生命故事并研拟治疗计划" tags="" position="1550,1425" size="100,100"></tw-passagedata><tw-passagedata pid="192" name="阶段二：准备期" tags="" position="1300,3425" size="100,100"></tw-passagedata><tw-passagedata pid="193" name="阶段三：评估期" tags="" position="1425,3425" size="100,100"></tw-passagedata><tw-passagedata pid="194" name="阶段四：减敏感期" tags="" position="1550,3425" size="100,100"></tw-passagedata><tw-passagedata pid="195" name="阶段五：深植期" tags="" position="1675,3425" size="100,100"></tw-passagedata><tw-passagedata pid="196" name="阶段六：肢体扫描" tags="" position="1800,3425" size="100,100"></tw-passagedata><tw-passagedata pid="197" name="阶段七：结束期" tags="" position="1925,3425" size="100,100"></tw-passagedata><tw-passagedata pid="198" name="阶段八：再评估期" tags="" position="2050,3425" size="100,100"></tw-passagedata><tw-passagedata pid="199" name="其他暂未处理的书籍" tags="" position="1800,1300" size="100,100">[[唤醒老虎：启动自我疗愈]]
[[让往事随风而逝]]

[[身体从未忘记：心理创伤中的大脑、心智和身体]]
[[EMDR Toolbox ]]

[[创伤与复原]]
[[创伤与记忆：身体体验]]</tw-passagedata><tw-passagedata pid="200" name="唤醒老虎：启动自我疗愈" tags="" position="1487.5,2175" size="100,100"></tw-passagedata><tw-passagedata pid="201" name="让往事随风而逝" tags="" position="1612.5,2175" size="100,100"></tw-passagedata><tw-passagedata pid="202" name="身体从未忘记：心理创伤中的大脑、心智和身体" tags="" position="1737.5,2175" size="100,100"></tw-passagedata><tw-passagedata pid="203" name="EMDR Toolbox " tags="" position="1862.5,2175" size="100,100"></tw-passagedata><tw-passagedata pid="204" name="创伤与复原" tags="" position="1987.5,2175" size="100,100"></tw-passagedata><tw-passagedata pid="205" name="创伤与记忆：身体体验" tags="" position="2112.5,2175" size="100,100"></tw-passagedata><tw-passagedata pid="206" name="管理情绪闪回的13个实用步骤" tags="" position="2050,1550" size="100,100">（点击任意处继续）
&lt;&lt;clicked&gt;&gt;
&lt;&lt;next&gt;&gt;
1. 告诉自己：“我正在经历闪回。”闪回会把你带入一种超越时间的心理感受，使
你重新感受到童年时的无助、无望与危险。这时你要提醒自己，你所经历的感受和体
验只是过去的记忆，它们现在已经无法伤害你了。
&lt;&lt;next&gt;&gt;
2. 提醒自己：“虽然感到害怕，但我身边没有危险。此时此刻我很安全。”记住你
现在很安全，已经远离了过去的危险。
&lt;&lt;next&gt;&gt;
3. 你需要，并且有权利设定界限。提醒自己不必容忍他人的虐待。你可以自由地
离开危险的环境，并抗议不公平的行为。
&lt;&lt;next&gt;&gt;
4. 安慰你的内在小孩。你的内在小孩需要知道你是无条件地爱着他的，当他感到
失落和恐惧时，可以寻求你的安慰和保护。
&lt;&lt;next&gt;&gt;
5. 破除“闪回无休无止”的观念。你会在闪回中体验到童年时期的恐惧和遗弃感，
会觉得永无宁日，根本想象不出一个更安全的未来。但是请记住，闪回总会过去的。
&lt;&lt;next&gt;&gt;
6. 提醒自己现在已经拥有了成年人的身体，还有童年时不曾拥有的盟友、技能和
资源，能够保护自己（感觉渺小和脆弱是闪回的迹象）。
&lt;&lt;next&gt;&gt;
7. 慢慢回到身体里。恐惧会使你产生“上头”的忧虑、麻木和放空的感觉，你需要
温和地重新回到自己的身体里。
&lt;&lt;next&gt;&gt;
①柔和地引导身体放松：感受身体的每一个主要肌肉群，柔和地使它们放松下来
（紧张的肌肉会向大脑发送错误的危险信号）。
②慢慢地深呼吸：屏住呼吸也会向大脑传送危险信号。
③放慢速度：冲动与急躁会按下大脑的逃跑反应按钮。
④找一个安全的地方放松并舒缓自己：裹着毯子，抱着枕头或毛绒玩具，躺在床
上或衣柜里，或者洗个澡，小憩一会。
⑤感受身体中的恐惧，但不做出反应：恐惧只是你身体中的一种能量。如果你不
逃避它，它就无法伤害你。
&lt;&lt;next&gt;&gt;
8. 抵制内在批判者极端化、灾难化的思维。
①运用“思维阻断”制止内在批判者，停止其无休止地夸大危险和试图控制不可控
事情的行为。拒绝羞辱、仇恨或遗弃自己。把自我攻击的愤怒转化为对不公平的自我
批判说“不”。
②运用“思维替换”和“思维纠正”的方法，记住自己的一系列优点和成就，用来替
换消极思维。
&lt;&lt;next&gt;&gt;
9. 允许自己哀悼。闪回是释放过去被压抑的恐惧、伤害和遗弃感的机会。请肯定
并抚慰你内在小孩曾经的那些无助无望的感受。健康的哀悼可以把你的眼泪变成自我
同情，把你的愤怒变成自我保护。
&lt;&lt;next&gt;&gt;
10. 培养安全的关系并寻求支持。想要独处时，可以给自己一些独处的时间，但不
要因为羞耻感而孤立自己。感觉羞耻并不意味着你是可耻的。让你的亲密对象了解什
么是闪回，并请他们通过交谈和分享感受来帮你度过闪回阶段。
&lt;&lt;next&gt;&gt;
11. 学会识别触发闪回的诱因。远离那些让你感到不安全的人、地方、活动，以及
可能触发闪回的心理过程。如果诱因无法避免，可以通过练习这些管理闪回的步骤进
行预防。
&lt;&lt;next&gt;&gt;
12. 弄清闪回的根源。闪回是一次机会，可以让你发现、验证和治愈你过往遭受的
虐待或遗弃所带来的伤害。闪回也表明了你仍未充分满足自己的发展需求，并为你提
供动力来满足这些需求。
&lt;&lt;next&gt;&gt;
13. 对缓慢的康复过程要有耐心。此刻你需要时间来代谢肾上腺素，之后也需要相
当长的时间来逐渐减少闪回的强度、持续时间和次数。真正的康复是一个循序渐进的
过程（往往是前进两步就又后退一步），而非一蹴而就的救赎幻想，所以不要因为出
现闪回而自责。
&lt;&lt;/clicked&gt;&gt;</tw-passagedata></tw-storydata>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){(function(window,document,jQuery,undefined){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function mesg(where,error,isFatal,isUncaught){var mesg="Error",nice="A".concat(isFatal?" fatal":"n"," error has occurred.");nice+=isFatal?" Aborting.":" You may be able to continue, but some parts may not work properly.";var isObject=null!==error&&"object"===_typeof(error),what=(isObject&&"message"in error?String(error.message).replace(errorPrologRegExp,""):String(error)).trim()||"unknown error";null!=where&&(mesg+=" [".concat(where,"]")),mesg+=": ".concat(what,"."),isObject&&"stack"in error&&(mesg+="\n\nStack Trace:\n".concat(error.stack)),mesg&&(nice+="\n\n".concat(mesg)),isUncaught||console[isFatal?"error":"warn"](mesg),window.alert(nice)}var origOnError;return origOnError=window.onerror,window.onerror=function(what,source,lineNum,colNum,error){"complete"===document.readyState?mesg(null,null!=error?error:what,!1,!0):(mesg(null,null!=error?error:what,!0,!0),window.onerror=origOnError,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))},Object.freeze(Object.defineProperties({},{error:{value:function(where,error){mesg(where,error)}},fatal:{value:function(where,error){mesg(where,error,!0)}}}))}(),Patterns=(wsMap=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),wsRe=/^\s$/,missing="",wsMap.forEach((function(pat,char){wsRe.test(char)||(missing+=pat)})),space=missing?"[\\s".concat(missing,"]"):"\\s",spaceNoTerminator="[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",notSpace="\\s"===space?"\\S":space.replace(/^\[/,"[^"),anyChar="(?:.|".concat("[\\n\\r\\u2028\\u2029]",")"),anyLetter="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",anyLetterStrict=anyLetter.replace("\\-",""),identifier="".concat("[$A-Z_a-z]").concat("[$0-9A-Z_a-z]","*"),variable="[$_]"+identifier,htmlTagName="[A-Za-z](?:".concat(cENChar="(?:[\\x2D.0-9A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])","*-").concat(cENChar,"*|[0-9A-Za-z]*)"),twStyle="(".concat(anyLetter,"+)\\(([^\\)\\|\\n]+)\\):"),cssStyle="".concat(spaceNoTerminator,"*(").concat(anyLetter,"+)").concat(spaceNoTerminator,"*:([^;\\|\\n]+);"),idOrClass="".concat(spaceNoTerminator,"*((?:").concat("[#.]").concat(anyLetter,"+").concat(spaceNoTerminator,"*)+);"),inlineCss="".concat(twStyle,"|").concat(cssStyle,"|").concat(idOrClass),Object.freeze({space:space,spaceNoTerminator:spaceNoTerminator,lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:notSpace,anyChar:anyChar,anyLetter:anyLetter,anyLetterStrict:anyLetterStrict,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:identifier,variableSigil:"[$_]",variable:variable,macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",htmlTagName:htmlTagName,cssIdOrClassSigil:"[#.]",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:inlineCss,url:"(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+"})),wsMap,wsRe,missing,cENChar,twStyle,cssStyle,idOrClass,space,spaceNoTerminator,notSpace,anyChar,anyLetter,anyLetterStrict,identifier,variable,htmlTagName,inlineCss;!function(){var startWSRe,endWSRe,_trimString=(startWSRe=new RegExp("^".concat(Patterns.space).concat(Patterns.space,"*")),endWSRe=new RegExp("".concat(Patterns.space).concat(Patterns.space,"*$")),function(str,where){var val=String(str);if(!val)return val;switch(where){case"start":return startWSRe.test(val)?val.replace(startWSRe,""):val;case"end":return endWSRe.test(val)?val.replace(endWSRe,""):val;default:throw new Error('_trimString called with incorrect where parameter value: "'.concat(where,'"'))}});function _createPadString(length,padding){var targetLength=Number.parseInt(length,10)||0;if(targetLength<1)return"";var padString=void 0===padding?"":String(padding);for(""===padString&&(padString=" ");padString.length<targetLength;){var curPadLength=padString.length,remainingLength=targetLength-curPadLength;padString+=curPadLength>remainingLength?padString.slice(0,remainingLength):padString}return padString.length>targetLength&&(padString=padString.slice(0,targetLength)),padString}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function flat(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var depth=0===arguments.length?1:Number(arguments[0])||0;return depth<1?Array.prototype.slice.call(this):Array.prototype.reduce.call(this,(function(acc,cur){return cur instanceof Array?acc.push.apply(acc,_toConsumableArray(flat.call(cur,depth-1))):acc.push(cur),acc}),[])}}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var length=this.length>>>0;if(0===length)return!1;var needle=arguments[0],i=Number(arguments[1])||0;for(i<0&&(i=Math.max(0,length+i));i<length;++i){var value=this[i];if(value===needle||value!=value&&needle!=needle)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(obj).map((function(key){return[key,obj[key]]}))}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(iter){return Array.from(iter).reduce((function(acc,pair){if(Object(pair)!==pair)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return pair[0]in acc?Object.defineProperty(acc,pair[0],{configurable:!0,enumerable:!0,writable:!0,value:pair[1]}):acc[pair[0]]=pair[1],acc}),{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(obj){if(null==obj)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var O=Object(obj);return Reflect.ownKeys(O).reduce((function(acc,key){var desc=Object.getOwnPropertyDescriptor(O,key);return void 0!==desc&&(key in acc?Object.defineProperty(acc,key,{configurable:!0,enumerable:!0,writable:!0,value:desc}):acc[key]=desc),acc}),{})}}),Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.values object parameter must be an object");return Object.keys(obj).map((function(key){return obj[key]}))}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:_createPadString(targetLength-baseLength,padding)+baseString}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:baseString+_createPadString(targetLength-baseLength,padding)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return _trimString(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return _trimString(this,"end")}})}(),function(){var _nativeMathRandom=Math.random,_regExpMetaCharsRe,_hasRegExpMetaCharsRe,_formatRegExp,_hasFormatRegExp;function _random(){var min,max;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:min=0,max=arguments[0];break;default:min=arguments[0],max=arguments[1]}if(min>max){var _ref=[max,min];min=_ref[0],max=_ref[1]}return Math.floor(_nativeMathRandom()*(max-min+1))+min}function _randomIndex(length,boundsArgs){var min,max;switch(boundsArgs.length){case 1:min=0,max=length-1;break;case 2:min=0,max=Math.trunc(boundsArgs[1]);break;default:min=Math.trunc(boundsArgs[1]),max=Math.trunc(boundsArgs[2])}return Number.isNaN(min)?min=0:!Number.isFinite(min)||min>=length?min=length-1:min<0&&(min=length+min)<0&&(min=0),Number.isNaN(max)?max=0:(!Number.isFinite(max)||max>=length||max<0&&(max=length+max)<0)&&(max=length-1),_random(min,max)}function _getCodePointStartAndEnd(str,pos){var code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};if(code<55296||code>57343)return{char:str.charAt(pos),start:pos,end:pos};if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)throw new Error("high surrogate without trailing low surrogate");var nextCode=str.charCodeAt(nextPos);if(nextCode<56320||nextCode>57343)throw new Error("high surrogate without trailing low surrogate");return{char:str.charAt(pos)+str.charAt(nextPos),start:pos,end:nextPos}}if(0===pos)throw new Error("low surrogate without leading high surrogate");var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);if(prevCode<55296||prevCode>56319)throw new Error("low surrogate without leading high surrogate");return{char:str.charAt(prevPos)+str.charAt(pos),start:prevPos,end:pos}}Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(array){if("object"!==_typeof(array)||null===array||!Object.prototype.hasOwnProperty.call(array,"length"))throw new TypeError("Array.random array parameter must be an array or array-lke object");var length=array.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments,1));return array[index]}}}),Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var result=Array.from(this);if(0===arguments.length)return result;var items=Array.prototype.reduce.call(arguments,(function(prev,cur){return prev.concat(cur)}),[]),addSize=items.length;if(0===addSize)return result;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=items[i];-1===indexOf.call(result,value)&&push.call(result,value)}return result}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var indexOf=Array.prototype.indexOf,needle=arguments[0],pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,++pos;return count}}),Object.defineProperty(Array.prototype,"countWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.countWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.countWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return 0;for(var count=0,i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&++count;return count}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var needles=Array.prototype.concat.apply([],arguments),needlesLength=needles.length,indices=[],i=0;i<length;++i)for(var value=this[i],j=0;j<needlesLength;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){indices.push(i);break}}for(var result=[],_i=0,iend=indices.length;_i<iend;++_i)result[_i]=this[indices[_i]];for(var splice=Array.prototype.splice,_i2=indices.length-1;_i2>=0;--_i2)splice.call(this,indices[_i2],1);return result}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,cpyIndices=_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map((function(x){return x<0?Math.max(0,length+x):x}))).values()),delIndices=_toConsumableArray(cpyIndices).sort((function(a,b){return b-a})),result=[],i=0,iend=cpyIndices.length;i<iend;++i)result[i]=this[cpyIndices[i]];for(var _i3=0,_iend=delIndices.length;_i3<_iend;++_i3)splice.call(this,delIndices[_i3],1);return result}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,indices=[],result=[],i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&(result.push(this[i]),indices.push(i));for(var _i4=indices.length-1;_i4>=0;--_i4)splice.call(this,indices[_i4],1);return result}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!==this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(!Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var length=this.length>>>0;if(0!==length)return this[length-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return Array.prototype.splice.call(this,index,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var splice=Array.prototype.splice,result=[],max=length-1;do{result.push(splice.call(this,_random(0,max--),1)[0])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&push.call(this,value)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return this[index]}}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var picked=new Map,result=[],max=length-1;do{var i=void 0;do{i=_random(0,max)}while(picked.has(i));picked.set(i,!0),result.push(this[i])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var length=this.length>>>0;if(0===length)return this;for(var i=length-1;i>0;--i){var j=Math.floor(_nativeMathRandom()*(i+1));if(i!==j){var swap=this[i];this[i]=this[j],this[j]=swap}}return this}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,unshift=Array.prototype.unshift,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&unshift.call(this,value)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var slice=Array.prototype.slice,fn=this,bound=slice.call(arguments,0);return function(){for(var applied=[],argc=0,i=0;i<bound.length;++i)applied.push(bound[i]===undefined?arguments[argc++]:bound[i]);return fn.apply(this,applied.concat(slice.call(arguments,argc)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(num,min,max){var value=Number(num);return Number.isNaN(value)?NaN:value.clamp(min,max)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(num){return 1-(Math.cos(Number(num)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var min=Number(arguments[0]),max=Number(arguments[1]);if(min>max){var _ref2=[max,min];min=_ref2[0],max=_ref2[1]}return Math.min(Math.max(this,min),max)}}),RegExp.escape||(_regExpMetaCharsRe=/[\\^$*+?.()|[\]{}]/g,_hasRegExpMetaCharsRe=new RegExp(_regExpMetaCharsRe.source),Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(str){var val=String(str);return val&&_hasRegExpMetaCharsRe.test(val)?val.replace(_regExpMetaCharsRe,"\\$&"):val}})),_formatRegExp=/{(\d+)(?:,([+-]?\d+))?}/g,_hasFormatRegExp=new RegExp(_formatRegExp.source),Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(format){function padString(str,align,pad){if(!align)return str;var plen=Math.abs(align)-str.length;if(plen<1)return str;var padding=String(pad).repeat(plen);return align<0?str+padding:padding+str}if(arguments.length<2)return 0===arguments.length?"":format;var args=2===arguments.length&&Array.isArray(arguments[1])?_toConsumableArray(arguments[1]):Array.prototype.slice.call(arguments,1);return 0===args.length?format:_hasFormatRegExp.test(format)?(_formatRegExp.lastIndex=0,format.replace(_formatRegExp,(function(match,index,align){var retval=args[index];if(null==retval)return"";for(;"function"==typeof retval;)retval=retval();switch(_typeof(retval)){case"string":break;case"object":retval=JSON.stringify(retval);break;default:retval=String(retval)}return padString(retval,align?Number.parseInt(align,10):0," ")}))):format}}),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return-1!==String.prototype.indexOf.apply(this,arguments)}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var needle=String(arguments[0]||"");if(""===needle)return 0;for(var indexOf=String.prototype.indexOf,step=needle.length,pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,pos+=step;return count}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return _getCodePointStartAndEnd(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var str=String(this);return _getCodePointStartAndEnd(str,str.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(startAt,delCount,replacement){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var length=this.length>>>0;if(0===length)return"";var start=Number(startAt);Number.isSafeInteger(start)?start<0&&(start+=length)<0&&(start=0):start=0,start>length&&(start=length);var count=Number(delCount);(!Number.isSafeInteger(count)||count<0)&&(count=0);var res=this.slice(0,start);return void 0!==replacement&&(res+=replacement),start+count<length&&(res+=this.slice(start+count)),res}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd3=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd3.char,end=_getCodePointStartAnd3.end;return-1===end?"":char.toLocaleUpperCase()+str.slice(end+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd4=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd4.char,end=_getCodePointStartAnd4.end;return-1===end?"":char.toUpperCase()+str.slice(end+1)}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","(".concat(this.toString(),")")]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",_toConsumableArray(this)]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",_toConsumableArray(this)]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(code,data){if("string"!=typeof code)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",[code,data]]}}),Object.defineProperty(JSON,"_real_stringify",{value:JSON.stringify}),Object.defineProperty(JSON,"stringify",{configurable:!0,writable:!0,value:function(_value,replacer,space){return JSON._real_stringify(_value,(function(key,val){var value=val;if("function"==typeof replacer)try{value=replacer(key,value)}catch(ex){}return void 0===value&&(value=["(revive:eval)","undefined"]),value}),space)}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,(function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{if(Array.isArray(value[1])){var $ReviveData$=value[1][1];value=eval(value[1][0])}else value=eval(value[1])}catch(ex){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(ex){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(ex){}return value}))}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return Array.prototype.includes.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");return Array.prototype.includesAll.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");return Array.prototype.includesAny.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.flat.call(this,1/0)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var match,re=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),names=[];null!==(match=re.exec(this));)match[1]?names.push(match[1]):match[2]&&names.push(match[2]);return names}})}();var Browser=(userAgent=navigator.userAgent.toLowerCase(),winPhone=userAgent.includes("windows phone"),isMobile=Object.freeze({Android:!winPhone&&userAgent.includes("android"),BlackBerry:/blackberry|bb10/.test(userAgent),iOS:!winPhone&&/ip(?:hone|ad|od)/.test(userAgent),Opera:!winPhone&&("object"===_typeof(window.operamini)||userAgent.includes("opera mini")),Windows:winPhone||/iemobile|wpdesktop/.test(userAgent),any:function(){return isMobile.Android||isMobile.BlackBerry||isMobile.iOS||isMobile.Opera||isMobile.Windows}}),isGecko=!isMobile.Windows&&!/khtml|trident|edge/.test(userAgent)&&userAgent.includes("gecko"),isIE=!userAgent.includes("opera")&&/msie|trident/.test(userAgent),ieVersion=isIE?(ver=/(?:msie\s+|rv:)(\d+\.\d)/.exec(userAgent))?Number(ver[1]):0:null,isOpera=userAgent.includes("opera")||userAgent.includes(" opr/"),operaVersion=isOpera?function(){var ver=new RegExp("".concat(/khtml|chrome/.test(userAgent)?"opr":"version","\\/(\\d+\\.\\d+)")).exec(userAgent);return ver?Number(ver[1]):0}():null,isVivaldi=userAgent.includes("vivaldi"),Object.freeze({userAgent:userAgent,isMobile:isMobile,isGecko:isGecko,isIE:isIE,ieVersion:ieVersion,isOpera:isOpera,operaVersion:operaVersion,isVivaldi:isVivaldi})),ver,userAgent,winPhone,isMobile,isGecko,isIE,ieVersion,isOpera,operaVersion,isVivaldi,Has=(hasAudioElement=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(ex){}return!1}(),hasFile=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(ex){}return!1}(),hasGeolocation=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(ex){}return!1}(),hasMutationObserver=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(ex){}return!1}(),hasPerformance=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(ex){}return!1}(),hasTouch=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(ex){}return!1}(),hasTransitionEndEvent=function(){try{for(var teMap=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),teKeys=_toConsumableArray(teMap.keys()),el=document.createElement("div"),i=0;i<teKeys.length;++i)if(el.style[teKeys[i]]!==undefined)return teMap.get(teKeys[i])}catch(ex){}return!1}(),Object.freeze({audio:hasAudioElement,fileAPI:hasFile,geolocation:hasGeolocation,mutationObserver:hasMutationObserver,performance:hasPerformance,touch:hasTouch,transitionEndEvent:hasTransitionEndEvent})),hasAudioElement,hasFile,hasGeolocation,hasMutationObserver,hasPerformance,hasTouch,hasTransitionEndEvent,Visibility=(vendor=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find((function(vnd){return vnd.hiddenProperty in document})))}catch(ex){}return undefined}(),Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},state:{get:function(){return vendor&&document[vendor.stateProperty]||"visible"}},isEnabled:{value:function(){return Boolean(vendor)}},isHidden:{value:function(){return Boolean(vendor&&document[vendor.hiddenProperty])}},hiddenProperty:{value:vendor&&vendor.hiddenProperty},stateProperty:{value:vendor&&vendor.stateProperty},changeEvent:{value:vendor&&vendor.changeEvent}}))),vendor,Fullscreen=function(){var _hasPromise,vendor=function(){try{return Object.freeze([{isEnabled:"fullscreenEnabled",element:"fullscreenElement",requestFn:"requestFullscreen",exitFn:"exitFullscreen",changeEvent:"fullscreenchange",errorEvent:"fullscreenerror"},{isEnabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",requestFn:"webkitRequestFullscreen",exitFn:"webkitExitFullscreen",changeEvent:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror"},{isEnabled:"mozFullScreenEnabled",element:"mozFullScreenElement",requestFn:"mozRequestFullScreen",exitFn:"mozCancelFullScreen",changeEvent:"mozfullscreenchange",errorEvent:"mozfullscreenerror"},{isEnabled:"msFullscreenEnabled",element:"msFullscreenElement",requestFn:"msRequestFullscreen",exitFn:"msExitFullscreen",changeEvent:"MSFullscreenChange",errorEvent:"MSFullscreenError"}].find((function(vnd){return vnd.isEnabled in document})))}catch(ex){}return undefined}(),_returnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,vendor)try{var value=document.exitFullscreen();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise});function _selectElement(requestedEl){var selectedEl=requestedEl||document.documentElement;return selectedEl===document.documentElement&&("msRequestFullscreen"===vendor.requestFn||Browser.isOpera&&Browser.operaVersion<15)&&(selectedEl=document.body),selectedEl}function isFullscreen(){return Boolean(vendor&&document[vendor.element])}function requestFullscreen(options,requestedEl){var _this=this;if(!vendor)return Promise.reject(new Error("fullscreen not supported"));var element=_selectElement(requestedEl);if("function"!=typeof element[vendor.requestFn])return Promise.reject(new Error("fullscreen not supported"));if(isFullscreen())return Promise.resolve();if(_returnsPromise())return element[vendor.requestFn](options);var namespace=".Fullscreen_requestFullscreen";return new Promise((function(resolve,reject){jQuery(element).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen request error")):resolve()})),element[vendor.requestFn](options)}))}function exitFullscreen(){var _this2=this;if(!vendor||"function"!=typeof document[vendor.exitFn])return Promise.reject(new TypeError("fullscreen not supported"));if(!isFullscreen())return Promise.reject(new TypeError("fullscreen mode not active"));if(_returnsPromise())return document[vendor.exitFn]();var namespace=".Fullscreen_exitFullscreen";return new Promise((function(resolve,reject){jQuery(document).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this2).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen exit error")):resolve()})),document[vendor.exitFn]()}))}return Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},element:{get:function(){return vendor?document[vendor.element]:null}},isEnabled:{value:function(){return Boolean(vendor&&document[vendor.isEnabled])}},isFullscreen:{value:isFullscreen},request:{value:requestFullscreen},exit:{value:exitFullscreen},toggle:{value:function(options,requestedEl){return isFullscreen()?exitFullscreen():requestFullscreen(options,requestedEl)}},onChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.changeEvent,handlerFn)}}},offChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.changeEvent,handlerFn):$(element).off(vendor.changeEvent)}}},onError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.errorEvent,handlerFn)}}},offError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.errorEvent,handlerFn):$(element).off(vendor.errorEvent)}}}}))}(),_ref3=Object.freeze(Object.defineProperties({},{clone:{value:function clone(orig){return"object"!==_typeof(orig)||null===orig?orig:orig instanceof String?String(orig):orig instanceof Number?Number(orig):orig instanceof Boolean?Boolean(orig):"function"==typeof orig.clone?orig.clone(!0):orig.nodeType&&"function"==typeof orig.cloneNode?orig.cloneNode(!0):(orig instanceof Array?copy=new Array(orig.length):orig instanceof Date?copy=new Date(orig.getTime()):orig instanceof Map?(copy=new Map,orig.forEach((function(val,key){return copy.set(key,clone(val))}))):orig instanceof RegExp?copy=new RegExp(orig):orig instanceof Set?(copy=new Set,orig.forEach((function(val){return copy.add(clone(val))}))):copy=Object.create(Object.getPrototypeOf(orig)),Object.keys(orig).forEach((function(name){return copy[name]=clone(orig[name])})),copy);var copy}},convertBreaks:{value:function(source){for(var node,output=document.createDocumentFragment(),para=document.createElement("p");null!==(node=source.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":if(null!==node.nextSibling&&node.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===node.nextSibling.nodeName.toUpperCase()){source.removeChild(node.nextSibling),source.removeChild(node),output.appendChild(para),para=document.createElement("p");continue}if(!para.hasChildNodes()){source.removeChild(node);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":para.hasChildNodes()&&(output.appendChild(para),para=document.createElement("p")),output.appendChild(node);continue}para.appendChild(node)}para.hasChildNodes()&&output.appendChild(para),source.appendChild(output)}},safeActiveElement:{value:function(){try{return document.activeElement||null}catch(ex){return null}}},setDisplayTitle:{value:function(title){if("string"!=typeof title)throw new TypeError("story display title must be a string (received: ".concat(Util.getType(title),")"));var render=document.createDocumentFragment();new Wikifier(render,title);var text=function(source){for(var node,copy=source.cloneNode(!0),frag=document.createDocumentFragment();null!==(node=copy.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":case"DIV":case"P":frag.appendChild(document.createTextNode(" "))}frag.appendChild(node)}return frag.textContent}(render).trim();document.title=Config.passages.displayTitles&&""!==State.passage&&State.passage!==Config.passages.start?"".concat(State.passage," | ").concat(text):text;var storyTitle=document.getElementById("story-title");null!==storyTitle&&jQuery(storyTitle).empty().append(render)}},setPageElement:{value:function(idOrElement,titles,defaultText){var el="object"===_typeof(idOrElement)?idOrElement:document.getElementById(idOrElement);if(null==el)return null;var ids=Array.isArray(titles)?titles:[titles];jQuery(el).empty();for(var i=0,iend=ids.length;i<iend;++i)if(Story.has(ids[i]))return new Wikifier(el,Story.get(ids[i]).processText().trim()),el;if(null!=defaultText){var text=String(defaultText).trim();""!==text&&new Wikifier(el,text)}return el}},throwError:{value:function(place,message,source){var $wrapper=jQuery(document.createElement("div")),$toggle=jQuery(document.createElement("button")),$source=jQuery(document.createElement("pre")),mesg="".concat(L10n.get("errorTitle"),": ").concat(message||"unknown error");return $toggle.addClass("error-toggle").ariaClick({label:L10n.get("errorToggle")},(function(){$toggle.hasClass("enabled")?($toggle.removeClass("enabled"),$source.attr({"aria-hidden":!0,hidden:"hidden"})):($toggle.addClass("enabled"),$source.removeAttr("aria-hidden hidden"))})).appendTo($wrapper),jQuery(document.createElement("span")).addClass("error").text(mesg).appendTo($wrapper),jQuery(document.createElement("code")).text(source).appendTo($source),$source.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo($wrapper),$wrapper.addClass("error-view").appendTo(place),console.warn("".concat(mesg,"\n\t").concat(source.replace(/\n/g,"\n\t"))),!1}},stringFrom:{value:function stringFrom(value){switch(_typeof(value)){case"function":return"[function]";case"number":if(Number.isNaN(value))return"[number NaN]";break;case"object":if(null===value)return"[null]";if(value instanceof Array)return value.map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Set)return Array.from(value).map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Map){var result=Array.from(value).map((function(_ref4){var _ref5=_slicedToArray(_ref4,2),key=_ref5[0],val=_ref5[1];return"".concat(stringFrom(key)," → ").concat(stringFrom(val))}));return"{ ".concat(result.join(", ")," }")}if(value instanceof Date)return value.toLocaleString();if(value instanceof Element){if(value===document.documentElement||value===document.head||value===document.body)throw new Error("illegal operation; attempting to convert the <html>, <head>, or <body> tags to string is not allowed");return value.outerHTML}return value instanceof Node?value.textContent:"function"==typeof value.toString?value.toString():Object.prototype.toString.call(value);case"symbol":var desc=void 0!==value.description?' "'.concat(value.description,'"'):"";return"[symbol".concat(desc,"]");case"undefined":return"[undefined]"}return String(value)}}})),clone=_ref3.clone,convertBreaks=_ref3.convertBreaks,safeActiveElement=_ref3.safeActiveElement,setDisplayTitle=_ref3.setDisplayTitle,setPageElement=_ref3.setPageElement,throwError=_ref3.throwError,stringFrom=_ref3.stringFrom;!function(){function onKeypressFn(ev){13!==ev.which&&32!==ev.which||(ev.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function onClickFnWrapper(fn){return function(){var $this=jQuery(this);$this.ariaIsDisabled()||($this.is("[aria-pressed]")&&$this.attr("aria-pressed","true"===$this.attr("aria-pressed")?"false":"true"),fn.apply(this,arguments))}}function oneClickFnWrapper(fn){return onClickFnWrapper((function(){jQuery(this).off(".aria-clickable").removeAttr("role tabindex aria-controls aria-pressed").filter("button").prop("disabled",!0),fn.apply(this,arguments)}))}jQuery.fn.extend({ariaClick:function(options,handler){if(0===this.length||0===arguments.length)return this;var opts=options,fn=handler;return null==fn&&(fn=opts,opts=undefined),"string"!=typeof(opts=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,role:undefined,controls:undefined,pressed:undefined,label:undefined},opts)).namespace?opts.namespace="":"."!==opts.namespace[0]&&(opts.namespace=".".concat(opts.namespace)),"boolean"==typeof opts.pressed&&(opts.pressed=opts.pressed?"true":"false"),this.filter("button").prop("type","button"),null!=opts.role?this.attr("role",opts.role):this.not("[role]").filter("a,[data-passage]").attr("role","link").end().not("a").not("[data-passage]").attr("role","button").end().end().end(),this.attr("tabindex",0),null!=opts.controls&&this.attr("aria-controls",opts.controls),null!=opts.pressed&&this.attr("aria-pressed",opts.pressed),null!=opts.label&&this.attr({"aria-label":opts.label,title:opts.label}),this.not("button").on("keypress.aria-clickable".concat(opts.namespace),opts.selector,onKeypressFn),this.on("click.aria-clickable".concat(opts.namespace),opts.selector,opts.data,opts.one?oneClickFnWrapper(fn):onClickFnWrapper(fn)),this},ariaDisabled:function(disable){if(0===this.length||0===arguments.length)return this;var $nonDisableable=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),$disableable=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return disable?($nonDisableable.each((function(){this.setAttribute("disabled",""),this.setAttribute("aria-disabled","true")})),$disableable.each((function(){this.disabled=!0,this.setAttribute("aria-disabled","true")}))):($nonDisableable.each((function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled")})),$disableable.each((function(){this.disabled=!1,this.removeAttribute("aria-disabled")}))),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),jQuery.extend({wikiWithOptions:function(options){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)sources[_key-1]=arguments[_key];if(0!==sources.length){var frag=document.createDocumentFragment();sources.forEach((function(content){return new Wikifier(frag,content,options)}));var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "))}},wiki:function(){for(var _len2=arguments.length,sources=new Array(_len2),_key2=0;_key2<_len2;_key2++)sources[_key2]=arguments[_key2];this.wikiWithOptions.apply(this,[undefined].concat(sources))}}),jQuery.fn.extend({wikiWithOptions:function(options){for(var _len3=arguments.length,sources=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)sources[_key3-1]=arguments[_key3];if(0===this.length||0===sources.length)return this;var frag=document.createDocumentFragment();return sources.forEach((function(content){return new Wikifier(frag,content,options)})),this.append(frag),this},wiki:function(){for(var _len4=arguments.length,sources=new Array(_len4),_key4=0;_key4<_len4;_key4++)sources[_key4]=arguments[_key4];return this.wikiWithOptions.apply(this,[undefined].concat(sources))}});var Util=function(){var toString,utilGetType="[object Object]"===(toString=Object.prototype.toString).call(new Map)?function(O){if(null===O)return"null";if(O instanceof Map)return"Map";if(O instanceof Set)return"Set";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType}:function(O){if(null===O)return"null";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType};function utilToEnum(obj){var pEnum=Object.create(null);if(obj instanceof Array)obj.forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Set)Array.from(obj).forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Map)obj.forEach((function(val,key){return pEnum[String(key)]=val}));else{if("object"!==_typeof(obj)||null===obj||Object.getPrototypeOf(obj)!==Object.prototype)throw new TypeError("Util.toEnum obj parameter must be an Array, Map, Set, or generic object");Object.assign(pEnum,obj)}return Object.freeze(pEnum)}function utilToStringTag(obj){return Object.prototype.toString.call(obj).slice(8,-1)}var _illegalSlugCharsRe=/[\x00-\x20!-/:-@[-^`{-\x9f]+/g,_isInvalidSlugRe=/^-*$/;var _illegalFilenameCharsRE=/[\x00-\x1f"#$%&'*+,/:;<=>?\\^`|\x7f-\x9f]+/g;var _markupCharsRe=/[!"#$&'*\-/<=>?@[\\\]^_`{|}~]/g,_hasMarkupCharsRe=new RegExp(_markupCharsRe.source),_markupCharsMap=utilToEnum({"!":"&#33;",'"':"&quot;","#":"&#35;",$:"&#36;","&":"&amp;","'":"&#39;","*":"&#42;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","?":"&#63;","@":"&#64;","[":"&#91;","\\":"&#92;","]":"&#93;","^":"&#94;",_:"&#95;","`":"&#96;","{":"&#123;","|":"&#124;","}":"&#125;","~":"&#126;"});var _htmlCharsRe=/[&<>"'`]/g,_hasHtmlCharsRe=new RegExp(_htmlCharsRe.source),_htmlCharsMap=utilToEnum({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"});function utilEscape(str){if(null==str)return"";var val=String(str);return val&&_hasHtmlCharsRe.test(val)?val.replace(_htmlCharsRe,(function(ch){return _htmlCharsMap[ch]})):val}var _escapedHtmlRe=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,_hasEscapedHtmlRe=new RegExp(_escapedHtmlRe.source,"i"),_escapedHtmlMap=utilToEnum({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"});function utilUnescape(str){if(null==str)return"";var val=String(str);return val&&_hasEscapedHtmlRe.test(val)?val.replace(_escapedHtmlRe,(function(entity){return _escapedHtmlMap[entity.toLowerCase()]})):val}var _nowSource=Has.performance?performance:Date;var _cssTimeRe=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/;var utilScrubEventKey=function(){var separatorKey,decimalKey;if("undefined"!=typeof Intl&&"function"==typeof Intl.NumberFormat){var match=(new Intl.NumberFormat).format(111111.5).match(/(\D*)\d+(\D*)/);match&&(separatorKey=match[1],decimalKey=match[2])}return separatorKey||decimalKey||(separatorKey=",",decimalKey="."),function(key){switch(key){case"Scroll":return"ScrollLock";case"Spacebar":return" ";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp";case"Down":return"ArrowDown";case"Del":return"Delete";case"Crsel":return"CrSel";case"Exsel":return"ExSel";case"Esc":return"Escape";case"Apps":return"ContextMenu";case"Nonconvert":return"NonConvert";case"MediaNextTrack":return"MediaTrackNext";case"MediaPreviousTrack":return"MediaTrackPrevious";case"VolumeUp":return"AudioVolumeUp";case"VolumeDown":return"AudioVolumeDown";case"VolumeMute":return"AudioVolumeMute";case"Zoom":return"ZoomToggle";case"SelectMedia":case"MediaSelect":return"LaunchMediaPlayer";case"Add":return"+";case"Divide":return"/";case"Multiply":return"*";case"Subtract":return"-";case"Decimal":return decimalKey;case"Separator":return separatorKey}return key}}(),utilHasMediaQuery="function"!=typeof window.matchMedia?function(){return!1}:function(mediaQuery){return window.matchMedia(mediaQuery).matches};return Object.freeze(Object.defineProperties({},{getType:{value:utilGetType},isBoolean:{value:function(obj){return"boolean"==typeof obj||"string"==typeof obj&&("true"===obj||"false"===obj)}},isIterable:{value:function(obj){return null!=obj&&"function"==typeof obj[Symbol.iterator]}},isNumeric:{value:function(obj){var num;switch(_typeof(obj)){case"number":num=obj;break;case"string":num=Number(obj);break;default:return!1}return!Number.isNaN(num)&&Number.isFinite(num)}},sameValueZero:{value:function(a,b){return a===b||a!=a&&b!=b}},toEnum:{value:utilToEnum},toStringTag:{value:utilToStringTag},slugify:{value:function(str){var base=String(str).trim(),_legacy=base.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return _isInvalidSlugRe.test(_legacy)?base.replace(_illegalSlugCharsRe,"").replace(/[_\s\u2013\u2014-]+/g,"-"):_legacy}},sanitizeFilename:{value:function(str){return String(str).trim().replace(_illegalFilenameCharsRE,"")}},escapeMarkup:{value:function(str){if(null==str)return"";var val=String(str);return val&&_hasMarkupCharsRe.test(val)?val.replace(_markupCharsRe,(function(ch){return _markupCharsMap[ch]})):val}},escape:{value:utilEscape},unescape:{value:utilUnescape},charAndPosAt:{value:function(text,position){var str=String(text),pos=Math.trunc(position),code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};var retval={char:str.charAt(pos),start:pos,end:pos};if(code<55296||code>57343)return retval;if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)return retval;var nextCode=str.charCodeAt(nextPos);return nextCode<56320||nextCode>57343||(retval.char=retval.char+str.charAt(nextPos),retval.end=nextPos),retval}if(0===pos)return retval;var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);return prevCode<55296||prevCode>56319||(retval.char=str.charAt(prevPos)+retval.char,retval.start=prevPos),retval}},now:{value:function(){return _nowSource.now()}},fromCssTime:{value:function(cssTime){var match=_cssTimeRe.exec(String(cssTime));if(null===match)throw new SyntaxError('invalid time value syntax: "'.concat(cssTime,'"'));var msec=Number(match[1]);if(1===match[2].length&&(msec*=1e3),Number.isNaN(msec)||!Number.isFinite(msec))throw new RangeError('invalid time value: "'.concat(cssTime,'"'));return msec}},toCssTime:{value:function(msec){if("number"!=typeof msec||Number.isNaN(msec)||!Number.isFinite(msec)){var what;switch(_typeof(msec)){case"string":what='"'.concat(msec,'"');break;case"number":what=String(msec);break;default:what=utilToStringTag(msec)}throw new Error("invalid milliseconds: ".concat(what))}return"".concat(msec,"ms")}},fromCssProperty:{value:function(cssName){if(!cssName.includes("-"))switch(cssName){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return cssName}return("-ms-"===cssName.slice(0,4)?cssName.slice(1):cssName).split("-").map((function(part,i){return 0===i?part:part.toUpperFirst()})).join("")}},parseUrl:{value:function(url){var el=document.createElement("a"),queryObj=Object.create(null);el.href=url,el.search&&el.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach((function(query){var _query$split2=_slicedToArray(query.split("="),2),key=_query$split2[0],value=_query$split2[1];queryObj[key]=value}));var pathname=el.host&&"/"!==el.pathname[0]?"/".concat(el.pathname):el.pathname;return{href:el.href,protocol:el.protocol,host:el.host,hostname:el.hostname,port:el.port,path:"".concat(pathname).concat(el.search),pathname:pathname,query:el.search,search:el.search,queries:queryObj,searches:queryObj,hash:el.hash}}},newExceptionFrom:{value:function(original,exceptionType,override){if("object"!==_typeof(original)||null===original)throw new Error("Util.newExceptionFrom original parameter must be an object");if("function"!=typeof exceptionType)throw new Error("Util.newExceptionFrom exceptionType parameter must be an error type constructor");var ex=new exceptionType(original.message);void 0!==original.name&&(ex.name=original.name),void 0!==original.code&&(ex.code=original.code),void 0!==original.columnNumber&&(ex.columnNumber=original.columnNumber),void 0!==original.description&&(ex.description=original.description),void 0!==original.fileName&&(ex.fileName=original.fileName),void 0!==original.lineNumber&&(ex.lineNumber=original.lineNumber),void 0!==original.number&&(ex.number=original.number),void 0!==original.stack&&(ex.stack=original.stack);var overrideType=_typeof(override);if("undefined"!==overrideType)if("object"===overrideType&&null!==override)Object.assign(ex,override);else{if("string"!==overrideType)throw new Error("Util.newExceptionFrom override parameter must be an object or string");ex.message=override}return ex}},scrubEventKey:{value:utilScrubEventKey},hasMediaQuery:{value:utilHasMediaQuery},random:{value:Math.random},entityEncode:{value:utilEscape},entityDecode:{value:utilUnescape},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),SimpleStore=(_adapters=[],_initialized=null,Object.freeze(Object.defineProperties({},{adapters:{value:_adapters},create:{value:function(storageId,persistent){if(_initialized)return _initialized.create(storageId,persistent);for(var i=0;i<_adapters.length;++i)if(_adapters[i].init(storageId,persistent))return(_initialized=_adapters[i]).create(storageId,persistent);throw new Error("no valid storage adapters found")}}}))),_adapters,_initialized,_ok,_WebStorageAdapter;SimpleStore.adapters.push((_ok=!1,_WebStorageAdapter=function(){function _WebStorageAdapter(storageId,persistent){_classCallCheck(this,_WebStorageAdapter);var prefix="".concat(storageId,"."),engine=null,name=null;persistent?(engine=window.localStorage,name="localStorage"):(engine=window.sessionStorage,name="sessionStorage"),Object.defineProperties(this,{_engine:{value:engine},_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:name},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_WebStorageAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){for(var keys=[],i=0;i<this._engine.length;++i){var key=this._engine.key(i);this._prefixRe.test(key)&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&this._engine.hasOwnProperty(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=this._engine.getItem(this._prefix+key);return null==value?null:_WebStorageAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{this._engine.setItem(this._prefix+key,_WebStorageAdapter._serialize(value))}catch(ex){if(/quota.?(?:exceeded|reached)/i.test(ex.name+ex.message))throw Util.newExceptionFrom(ex,Error,"".concat(this.name," quota exceeded"));throw ex}return!0}},{key:"delete",value:function(key){return!("string"!=typeof key||!key||(this._engine.removeItem(this._prefix+key),0))}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_serialize",value:function(obj){return LZString.compressToUTF16(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromUTF16(str))}}]),_WebStorageAdapter}(),Object.freeze(Object.defineProperties({},{init:{value:function(){function hasWebStorage(storeId){try{var store=window[storeId],tid="_sc_".concat(String(Date.now()));store.setItem(tid,tid);var result=store.getItem(tid)===tid;return store.removeItem(tid),result}catch(ex){}return!1}return _ok=hasWebStorage("localStorage")&&hasWebStorage("sessionStorage")}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _WebStorageAdapter(storageId,persistent)}}})))),SimpleStore.adapters.push(function(){var _MAX_EXPIRY="Tue, 19 Jan 2038 03:14:07 GMT",_MIN_EXPIRY="Thu, 01 Jan 1970 00:00:00 GMT",_ok=!1,_CookieAdapter=function(){function _CookieAdapter(storageId,persistent){_classCallCheck(this,_CookieAdapter);var prefix="".concat(storageId).concat(persistent?"!":"*",".");Object.defineProperties(this,{_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:"cookie"},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_CookieAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var cookies=document.cookie.split(/;\s*/),keys=[],i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(this._prefixRe.test(key))""!==decodeURIComponent(kvPair[1])&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&null!==_CookieAdapter._getCookie(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=_CookieAdapter._getCookie(this._prefix+key);return null===value?null:_CookieAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,_CookieAdapter._serialize(value),this.persistent?"Tue, 19 Jan 2038 03:14:07 GMT":undefined),!this.has(key))throw new Error("unknown validation error during set")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"delete",value:function(key){if("string"!=typeof key||!key||!this.has(key))return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,undefined,_MIN_EXPIRY),this.has(key))throw new Error("unknown validation error during delete")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_getCookie",value:function(prefixedKey){if(!prefixedKey||""===document.cookie)return null;for(var cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("=");if(prefixedKey===decodeURIComponent(kvPair[0]))return decodeURIComponent(kvPair[1])||null}return null}},{key:"_setCookie",value:function(prefixedKey,value,expiry){if(prefixedKey){var payload="".concat(encodeURIComponent(prefixedKey),"=");null!=value&&(payload+=encodeURIComponent(value)),null!=expiry&&(payload+="; expires=".concat(expiry)),payload+="; path=/",document.cookie=payload}}},{key:"_serialize",value:function(obj){return LZString.compressToBase64(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromBase64(str))}}]),_CookieAdapter}();return Object.freeze(Object.defineProperties({},{init:{value:function(storageId){try{var tid="_sc_".concat(String(Date.now()));_CookieAdapter._setCookie(tid,_CookieAdapter._serialize(tid),undefined),_ok=_CookieAdapter._deserialize(_CookieAdapter._getCookie(tid))===tid,_CookieAdapter._setCookie(tid,undefined,_MIN_EXPIRY)}catch(ex){_ok=!1}return _ok&&function(storageId){if(""===document.cookie)return;for(var oldPrefix="".concat(storageId,"."),oldPrefixRe=new RegExp("^".concat(RegExp.escape(oldPrefix))),persistPrefix="".concat(storageId,"!."),sessionPrefix="".concat(storageId,"*."),sessionTestRe=/\.(?:state|rcWarn)$/,cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(oldPrefixRe.test(key)){var value=decodeURIComponent(kvPair[1]);""!==value&&function(){var persist=!sessionTestRe.test(key);_CookieAdapter._setCookie(key,undefined,_MIN_EXPIRY),_CookieAdapter._setCookie(key.replace(oldPrefixRe,(function(){return persist?persistPrefix:sessionPrefix})),value,persist?_MAX_EXPIRY:undefined)}()}}}(storageId),_ok}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _CookieAdapter(storageId,persistent)}}}))}());var DebugView=function(){function DebugView(parent,type,name,title){_classCallCheck(this,DebugView),Object.defineProperties(this,{parent:{value:parent},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:title,"aria-label":title,"data-type":null!=type?type:"","data-name":null!=name?name:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(DebugView,[{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(type){this.view.setAttribute("data-type",null!=type?type:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(name){this.view.setAttribute("data-name",null!=name?name:"")}},{key:"title",get:function(){return this.view.title},set:function(title){this.view.title=title}},{key:"append",value:function(el){return jQuery(this.view).append(el),this}},{key:"modes",value:function(options){if(null==options){var current={};return this.view.className.splitOrEmpty(/\s+/).forEach((function(name){"debug"!==name&&(current[name]=!0)})),current}if("object"===_typeof(options))return Object.keys(options).forEach((function(name){this[options[name]?"addClass":"removeClass"](name)}),jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var $view=jQuery(this.view);this.view.hasChildNodes()&&$view.contents().appendTo(this.parent),$view.remove(),jQuery(this.break).remove()}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),jQuery.event.trigger(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),jQuery.event.trigger(":debugviewupdate")}},{key:"toggle",value:function(){"enabled"===jQuery(document.documentElement).attr("data-debug-view")?DebugView.disable():DebugView.enable()}}]),DebugView}(),NodeTyper=function(){var NodeTyper=function(){function NodeTyper(config){if(_classCallCheck(this,NodeTyper),"object"!==_typeof(config)||null===config)throw new Error("config parameter must be an object (received: ".concat(Util.getType(config),")"));if(!(config.hasOwnProperty("targetNode")&&config.targetNode instanceof Node))throw new Error('config parameter object "targetNode" property must be a node');Object.defineProperties(this,{node:{value:config.targetNode},childNodes:{value:[]},nodeValue:{writable:!0,value:""},appendTo:{writable:!0,value:config.parentNode||null},classNames:{writable:!0,value:config.classNames||null},finished:{writable:!0,value:!1}});var childNode,node=this.node;for(node.nodeValue&&(this.nodeValue=node.nodeValue,node.nodeValue="");null!==(childNode=node.firstChild);)this.childNodes.push(new NodeTyper({targetNode:childNode,parentNode:node,classNames:this.classNames})),node.removeChild(childNode)}return _createClass(NodeTyper,[{key:"finish",value:function(){for(;this.type(!0););return!1}},{key:"type",value:function(flush){if(this.finished)return!1;if(this.appendTo){if(this.appendTo.appendChild(this.node),this.appendTo=null,this.node.nodeType!==Node.ELEMENT_NODE&&this.node.nodeType!==Node.TEXT_NODE||"none"===jQuery(this.node.parentNode).css("display"))return this.finish();this.node.parentNode&&this.classNames&&jQuery(this.node.parentNode).addClass(this.classNames)}if(this.nodeValue){if(flush)this.node.nodeValue+=this.nodeValue,this.nodeValue="";else{var _Util$charAndPosAt=Util.charAndPosAt(this.nodeValue,0),char=_Util$charAndPosAt.char,start=_Util$charAndPosAt.start,end=_Util$charAndPosAt.end;this.node.nodeValue+=char,this.nodeValue=this.nodeValue.slice(1+end-start)}return!0}this.classNames&&(jQuery(this.node.parentNode).removeClass(this.classNames),this.classNames=null);for(var childNodes=this.childNodes;childNodes.length>0;){if(childNodes[0].type())return!0;childNodes.shift()}return this.finished=!0,!1}}]),NodeTyper}();return NodeTyper}(),PRNGWrapper=function(){function PRNGWrapper(seed,useEntropy){_classCallCheck(this,PRNGWrapper),Object.defineProperties(this,new Math.seedrandom(seed,useEntropy,(function(prng,seed){return{_prng:{value:prng},seed:{writable:!0,value:seed},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}})))}return _createClass(PRNGWrapper,null,[{key:"marshal",value:function(prng){if(!prng||!prng.hasOwnProperty("seed")||!prng.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:prng.seed,pull:prng.pull}}},{key:"unmarshal",value:function(prngObj){if(!prngObj||!prngObj.hasOwnProperty("seed")||!prngObj.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var prng=new PRNGWrapper(prngObj.seed,!1),i=prngObj.pull;i>0;--i)prng.random();return prng}}]),PRNGWrapper}(),StyleWrapper=(_imageMarkupRe=new RegExp(Patterns.cssImage,"g"),_hasImageMarkupRe=new RegExp(Patterns.cssImage),function(){function StyleWrapper(style){if(_classCallCheck(this,StyleWrapper),null==style)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:style}})}return _createClass(StyleWrapper,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(rawCss){this.clear(),this.add(rawCss)}},{key:"add",value:function(rawCss){var css=rawCss;_hasImageMarkupRe.test(css)&&(_imageMarkupRe.lastIndex=0,css=css.replace(_imageMarkupRe,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text.trim())}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),this.style.styleSheet?this.style.styleSheet.cssText+=css:this.style.appendChild(document.createTextNode(css))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),StyleWrapper}()),_imageMarkupRe,_hasImageMarkupRe,Diff=(Op=Util.toEnum({Delete:0,SpliceArray:1,Copy:2,CopyDate:3}),Object.freeze(Object.defineProperties({},{Op:{value:Op},diff:{value:function diff(orig,dest){for(var aOpRef,objToString=Object.prototype.toString,origIsArray=orig instanceof Array,keys=[].concat(Object.keys(orig),Object.keys(dest)).sort().filter((function(val,i,arr){return 0===i||arr[i-1]!==val})),diffed={},keyIsAOpRef=function(key){return key===aOpRef},i=0,klen=keys.length;i<klen;++i){var key=keys[i],origP=orig[key],destP=dest[key];if(orig.hasOwnProperty(key))if(dest.hasOwnProperty(key)){if(origP===destP)continue;if(_typeof(origP)===_typeof(destP))if("function"==typeof origP)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,destP]);else if("object"!==_typeof(origP)||null===origP)diffed[key]=[Op.Copy,destP];else{var origPType=objToString.call(origP);if(origPType===objToString.call(destP))if(origP instanceof Date)Number(origP)!==Number(destP)&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Map)diffed[key]=[Op.Copy,clone(destP)];else if(origP instanceof RegExp)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Set)diffed[key]=[Op.Copy,clone(destP)];else if("[object Object]"!==origPType)diffed[key]=[Op.Copy,clone(destP)];else{var recurse=diff(origP,destP);null!==recurse&&(diffed[key]=recurse)}else diffed[key]=[Op.Copy,clone(destP)]}else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}else if(origIsArray&&Util.isNumeric(key)){var nKey=Number(key);if(!aOpRef){aOpRef="";do{aOpRef+="~"}while(keys.some(keyIsAOpRef));diffed[aOpRef]=[Op.SpliceArray,nKey,nKey]}nKey<diffed[aOpRef][1]&&(diffed[aOpRef][1]=nKey),nKey>diffed[aOpRef][2]&&(diffed[aOpRef][2]=nKey)}else diffed[key]=Op.Delete;else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}return Object.keys(diffed).length>0?diffed:null}},patch:{value:function patch(orig,diffed){for(var keys=Object.keys(diffed||{}),patched=clone(orig),i=0,klen=keys.length;i<klen;++i){var key=keys[i],diffedP=diffed[key];if(diffedP===Op.Delete)delete patched[key];else if(diffedP instanceof Array)switch(diffedP[0]){case Op.SpliceArray:patched.splice(diffedP[1],diffedP[2]-diffedP[1]+1);break;case Op.Copy:patched[key]=clone(diffedP[1]);break;case Op.CopyDate:patched[key]=new Date(diffedP[1])}else patched[key]=patch(patched[key],diffedP)}return patched}}}))),Op,L10n=(_patternRe=/\{\w+\}/g,_hasPatternRe=new RegExp(_patternRe.source),Object.freeze(Object.defineProperties({},{init:{value:function(){strings&&Object.keys(strings).length>0&&Object.keys(l10nStrings).forEach((function(id){try{var value;switch(id){case"identity":value=strings.identity;break;case"aborting":value=strings.aborting;break;case"cancel":value=strings.cancel;break;case"close":value=strings.close;break;case"ok":value=strings.ok;break;case"errorTitle":value=strings.errors.title;break;case"errorNonexistentPassage":value=strings.errors.nonexistentPassage;break;case"errorSaveMissingData":value=strings.errors.saveMissingData;break;case"errorSaveIdMismatch":value=strings.errors.saveIdMismatch;break;case"warningDegraded":value=strings.warnings.degraded;break;case"debugViewTitle":value=strings.debugView.title;break;case"debugViewToggle":value=strings.debugView.toggle;break;case"uiBarToggle":value=strings.uiBar.toggle;break;case"uiBarBackward":value=strings.uiBar.backward;break;case"uiBarForward":value=strings.uiBar.forward;break;case"uiBarJumpto":value=strings.uiBar.jumpto;break;case"jumptoTitle":value=strings.jumpto.title;break;case"jumptoTurn":value=strings.jumpto.turn;break;case"jumptoUnavailable":value=strings.jumpto.unavailable;break;case"savesTitle":value=strings.saves.title;break;case"savesDisallowed":value=strings.saves.disallowed;break;case"savesIncapable":value=strings.saves.incapable;break;case"savesLabelAuto":value=strings.saves.labelAuto;break;case"savesLabelDelete":value=strings.saves.labelDelete;break;case"savesLabelExport":value=strings.saves.labelExport;break;case"savesLabelImport":value=strings.saves.labelImport;break;case"savesLabelLoad":value=strings.saves.labelLoad;break;case"savesLabelClear":value=strings.saves.labelClear;break;case"savesLabelSave":value=strings.saves.labelSave;break;case"savesLabelSlot":value=strings.saves.labelSlot;break;case"savesUnavailable":value=strings.saves.unavailable;break;case"savesUnknownDate":value=strings.saves.unknownDate;break;case"settingsTitle":value=strings.settings.title;break;case"settingsOff":value=strings.settings.off;break;case"settingsOn":value=strings.settings.on;break;case"settingsReset":value=strings.settings.reset;break;case"restartTitle":value=strings.restart.title;break;case"restartPrompt":value=strings.restart.prompt;break;case"shareTitle":value=strings.share.title;break;case"alertTitle":break;case"autoloadTitle":value=strings.autoload.title;break;case"autoloadCancel":value=strings.autoload.cancel;break;case"autoloadOk":value=strings.autoload.ok;break;case"autoloadPrompt":value=strings.autoload.prompt;break;case"macroBackText":value=strings.macros.back.text;break;case"macroReturnText":value=strings.macros.return.text}value&&(l10nStrings[id]=value.replace(/%\w+%/g,(function(pat){return"{".concat(pat.slice(1,-1),"}")})))}catch(ex){}}))}},get:{value:function(ids,overrides){if(!ids)return"";var selectedId,id=((Array.isArray(ids)?ids:[ids]).some((function(id){return!!l10nStrings.hasOwnProperty(id)&&(selectedId=id,!0)})),selectedId);if(!id)return"";for(var processed=l10nStrings[id],iteration=0;_hasPatternRe.test(processed);){if(++iteration>50)throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");_patternRe.lastIndex=0,processed=processed.replace(_patternRe,(function(pat){var subId=pat.slice(1,-1);return overrides&&overrides.hasOwnProperty(subId)?overrides[subId]:l10nStrings.hasOwnProperty(subId)?l10nStrings[subId]:void 0}))}return processed}}}))),_patternRe,_hasPatternRe,strings={errors:{},warnings:{},debugView:{},uiBar:{},jumpto:{},saves:{},settings:{},restart:{},share:{},autoload:{},macros:{back:{},return:{}}},l10nStrings={identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errorTitle:"Error",errorToggle:"Toggle the error view",errorNonexistentPassage:'the passage "{passage}" does not exist',errorSaveDiskLoadFailed:"failed to load save file from disk",errorSaveMissingData:"save is missing required data. Either the loaded file is not a save or the save has become corrupted",errorSaveIdMismatch:"save is from the wrong {identity}",_warningIntroLacking:"Your browser either lacks or has disabled",_warningOutroDegraded:", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoWebStorage:"{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",warningDegraded:"{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",debugBarToggle:"Toggle the debug bar",debugBarNoWatches:"— no watches set —",debugBarAddWatch:"Add watch",debugBarDeleteWatch:"Delete watch",debugBarWatchAll:"Watch all",debugBarWatchNone:"Delete all",debugBarLabelAdd:"Add",debugBarLabelWatch:"Watch",debugBarLabelTurn:"Turn",debugBarLabelViews:"Views",debugBarViewsToggle:"Toggle the debug views",debugBarWatchToggle:"Toggle the watch panel",uiBarToggle:"Toggle the UI bar",uiBarBackward:"Go backward within the {identity} history",uiBarForward:"Go forward within the {identity} history",uiBarJumpto:"Jump to a specific point within the {identity} history",jumptoTitle:"Jump To",jumptoTurn:"Turn",jumptoUnavailable:"No jump points currently available…",savesTitle:"Saves",savesDisallowed:"Saving has been disallowed on this passage.",savesIncapable:"{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",savesLabelAuto:"Autosave",savesLabelDelete:"Delete",savesLabelExport:"Save to Disk…",savesLabelImport:"Load from Disk…",savesLabelLoad:"Load",savesLabelClear:"Delete All",savesLabelSave:"Save",savesLabelSlot:"Slot",savesUnavailable:"No save slots found…",savesUnknownDate:"unknown",settingsTitle:"Settings",settingsOff:"Off",settingsOn:"On",settingsReset:"Reset to Defaults",restartTitle:"Restart",restartPrompt:"Are you sure that you want to restart? Unsaved progress will be lost.",shareTitle:"Share",alertTitle:"Alert",autoloadTitle:"Autoload",autoloadCancel:"Go to start",autoloadOk:"Load autosave",autoloadPrompt:"An autosave exists. Load it now or go to the start?",macroBackText:"Back",macroReturnText:"Return"},Config=(_debug=!1,_addVisitedLinkClass=!1,_cleanupWikifierOutput=!1,_loadDelay=0,_audioPauseOnFadeToZero=!0,_audioPreloadMetadata=!0,_historyControls=!0,_historyMaxStates=40,_macrosIfAssignmentError=!0,_macrosMaxLoopIterations=1e3,_macrosTypeSkipKey=" ",_macrosTypeVisitedPassages=!0,_passagesDisplayTitles=!1,_passagesNobr=!1,_savesId="untitled-story",_savesSlots=8,_savesTryDiskOnMobile=!0,_uiStowBarInitially=800,_uiUpdateStoryElements=!0,_errHistoryModeDeprecated="Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code",Object.freeze({get debug(){return _debug},set debug(value){_debug=Boolean(value)},get addVisitedLinkClass(){return _addVisitedLinkClass},set addVisitedLinkClass(value){_addVisitedLinkClass=Boolean(value)},get cleanupWikifierOutput(){return _cleanupWikifierOutput},set cleanupWikifierOutput(value){_cleanupWikifierOutput=Boolean(value)},get loadDelay(){return _loadDelay},set loadDelay(value){if(!Number.isSafeInteger(value)||value<0)throw new RangeError("Config.loadDelay must be a non-negative integer");_loadDelay=value},audio:Object.freeze({get pauseOnFadeToZero(){return _audioPauseOnFadeToZero},set pauseOnFadeToZero(value){_audioPauseOnFadeToZero=Boolean(value)},get preloadMetadata(){return _audioPreloadMetadata},set preloadMetadata(value){_audioPreloadMetadata=Boolean(value)}}),history:Object.freeze({get controls(){return _historyControls},set controls(value){var controls=Boolean(value);if(1===_historyMaxStates&&controls)throw new Error("Config.history.controls must be false when Config.history.maxStates is 1");_historyControls=controls},get maxStates(){return _historyMaxStates},set maxStates(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.history.maxStates must be a positive integer");_historyMaxStates=value,_historyControls&&1===value&&(_historyControls=!1)},get mode(){throw new Error(_errHistoryModeDeprecated)},set mode(_){throw new Error(_errHistoryModeDeprecated)},get tracking(){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")},set tracking(_){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")}}),macros:Object.freeze({get ifAssignmentError(){return _macrosIfAssignmentError},set ifAssignmentError(value){_macrosIfAssignmentError=Boolean(value)},get maxLoopIterations(){return _macrosMaxLoopIterations},set maxLoopIterations(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.macros.maxLoopIterations must be a positive integer");_macrosMaxLoopIterations=value},get typeSkipKey(){return _macrosTypeSkipKey},set typeSkipKey(value){_macrosTypeSkipKey=String(value)},get typeVisitedPassages(){return _macrosTypeVisitedPassages},set typeVisitedPassages(value){_macrosTypeVisitedPassages=Boolean(value)}}),navigation:Object.freeze({get override(){return _navigationOverride},set override(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_navigationOverride=value}}),passages:Object.freeze({get descriptions(){return _passagesDescriptions},set descriptions(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"Object"!==valueType&&"function"!==valueType)throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: ".concat(valueType,")"))}_passagesDescriptions=value},get displayTitles(){return _passagesDisplayTitles},set displayTitles(value){_passagesDisplayTitles=Boolean(value)},get nobr(){return _passagesNobr},set nobr(value){_passagesNobr=Boolean(value)},get onProcess(){return _passagesOnProcess},set onProcess(value){if(null!=value){var valueType=Util.getType(value);if("function"!==valueType)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: ".concat(valueType,")"))}_passagesOnProcess=value},get start(){return _passagesStart},set start(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType)throw new TypeError("Config.passages.start must be a string or null/undefined (received: ".concat(valueType,")"))}_passagesStart=value},get transitionOut(){return _passagesTransitionOut},set transitionOut(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: ".concat(valueType,")"))}_passagesTransitionOut=value}}),saves:Object.freeze({get autoload(){return _savesAutoload},set autoload(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"string"!==valueType&&"function"!==valueType)throw new TypeError("Config.saves.autoload must be a boolean, string, function, or null/undefined (received: ".concat(valueType,")"))}_savesAutoload=value},get autosave(){return _savesAutosave},set autosave(value){if(null!=value){var valueType=Util.getType(value);if("string"===valueType)return void(_savesAutosave=[value]);if("boolean"!==valueType&&("Array"!==valueType||!value.every((function(item){return"string"==typeof item})))&&"function"!==valueType)throw new TypeError("Config.saves.autosave must be a boolean, Array<string>, function, or null/undefined (received: ".concat(valueType).concat("Array"===valueType?"<any>":"",")"))}_savesAutosave=value},get id(){return _savesId},set id(value){if("string"!=typeof value||""===value)throw new TypeError("Config.saves.id must be a non-empty string (received: ".concat(Util.getType(value),")"));_savesId=value},get isAllowed(){return _savesIsAllowed},set isAllowed(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_savesIsAllowed=value},get slots(){return _savesSlots},set slots(value){if(!Number.isSafeInteger(value)||value<0)throw new TypeError("Config.saves.slots must be a non-negative integer (received: ".concat(Util.getType(value),")"));_savesSlots=value},get tryDiskOnMobile(){return _savesTryDiskOnMobile},set tryDiskOnMobile(value){_savesTryDiskOnMobile=Boolean(value)},get version(){return _savesVersion},set version(value){_savesVersion=value},get onLoad(){throw new Error("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead")},set onLoad(value){console.warn("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead"),Save.onLoad.add(value)},get onSave(){throw new Error("Config.saves.onSave has been deprecated, use the Save.onSave API instead")},set onSave(value){console.warn("Config.saves.onSave has been deprecated, use the Save.onSave API instead"),Save.onSave.add(value)}}),ui:Object.freeze({get stowBarInitially(){return _uiStowBarInitially},set stowBarInitially(value){var valueType=Util.getType(value);if("boolean"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.ui.stowBarInitially must be a boolean or non-negative integer (received: ".concat(valueType,")"));_uiStowBarInitially=value},get updateStoryElements(){return _uiUpdateStoryElements},set updateStoryElements(value){_uiUpdateStoryElements=Boolean(value)}})})),_navigationOverride,_passagesDescriptions,_passagesStart,_passagesOnProcess,_passagesTransitionOut,_savesAutoload,_savesAutosave,_savesIsAllowed,_savesVersion,_debug,_addVisitedLinkClass,_cleanupWikifierOutput,_loadDelay,_audioPauseOnFadeToZero,_audioPreloadMetadata,_historyControls,_historyMaxStates,_macrosIfAssignmentError,_macrosMaxLoopIterations,_macrosTypeSkipKey,_macrosTypeVisitedPassages,_passagesDisplayTitles,_passagesNobr,_savesId,_savesSlots,_savesTryDiskOnMobile,_uiStowBarInitially,_uiUpdateStoryElements,_errHistoryModeDeprecated,SimpleAudio=function(){var _hasPromise,_gestureEventNames=Object.freeze(["click","contextmenu","dblclick","keyup","mouseup","pointerup","touchend"]),_specialIds=Object.freeze([":not",":all",":looped",":muted",":paused",":playing"]),_formatSpecRe=/^([\w-]+)\s*\|\s*(\S.*)$/,_badIdRe=/[:\s]/,_tracks=new Map,_groups=new Map,_lists=new Map,_subscribers=new Map,_masterRate=1,_masterVolume=1,_masterMute=!1,_masterMuteOnHidden=!1,_playReturnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,Has.audio)try{var audio=document.createElement("audio");audio.muted=!0;var value=audio.play();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise}),AudioTrack=function(){function AudioTrack(obj){if(_classCallCheck(this,AudioTrack),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioTrack))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioTrack,[{key:"_create",value:function(sourceList){var dataUriRe=/^data:\s*audio\/(?:x-)?([^;,]+)\s*[;,]/i,extRe=/\.([^./\\]+)$/,formats=AudioTrack.formats,usedSources=[],audio=document.createElement("audio");audio.preload="none",sourceList.forEach((function(src){var srcUri=null;switch(_typeof(src)){case"string":var match;if("data:"===src.slice(0,5)){if(null===(match=dataUriRe.exec(src)))throw new Error("source data URI missing media type")}else if(null===(match=extRe.exec(Util.parseUrl(src).pathname)))throw new Error("source URL missing file extension");formats[match[1]]&&(srcUri=src);break;case"object":if(null===src)throw new Error("source object cannot be null");if(!src.hasOwnProperty("src"))throw new Error('source object missing required "src" property');if(!src.hasOwnProperty("format"))throw new Error('source object missing required "format" property');formats[src.format]&&(srcUri=src.src);break;default:throw new Error("invalid source value (type: ".concat(_typeof(src),")"))}if(null!==srcUri){var source=document.createElement("source");source.src=srcUri,audio.appendChild(source),usedSources.push(srcUri)}})),audio.hasChildNodes()&&Config.audio.preloadMetadata&&(audio.preload="metadata"),this._finalize(audio,usedSources,clone(sourceList))}},{key:"_copy",value:function(obj){this._finalize(obj.audio.cloneNode(!0),clone(obj.sources),clone(obj.originals))}},{key:"_finalize",value:function(audio,sources,originals){var _this3=this;Object.defineProperties(this,{audio:{configurable:!0,value:audio},sources:{value:Object.freeze(sources)},originals:{value:Object.freeze(originals)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",(function(){return _this3._error=!1})).on("error.AudioTrack",(function(){return _this3._error=!0})).find("source:last-of-type").on("error.AudioTrack",(function(){return _this3._trigger("error")})),function(id,callback){if("function"!=typeof callback)throw new Error("callback parameter must be a function");_subscribers.set(id,callback)}(this,(function(mesg){if(_this3.audio)switch(mesg){case"loadwithscreen":if(_this3.hasSource()){var lockId=LoadScreen.lock();_this3.one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",(function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(lockId)})).load()}break;case"load":_this3.load();break;case"mute":_this3._updateAudioMute();break;case"rate":_this3._updateAudioRate();break;case"stop":_this3.stop();break;case"volume":_this3._updateAudioVolume();break;case"unload":_this3.unload()}else unsubscribe(_this3)})),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(eventName){jQuery(this.audio).triggerHandler(eventName)}},{key:"_destroy",value:function(){unsubscribe(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new AudioTrack(this)}},{key:"load",value:function(){var _this4=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach((function(srcUri){var source=document.createElement("source");source.src=srcUri,_this4.audio.appendChild(source)}))}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var audio=this.audio;for(audio.preload="none";audio.hasChildNodes();)audio.removeChild(audio.firstChild);audio.load()}},{key:"play",value:function(){var _this5=this;if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));"auto"!==this.audio.preload&&(this.audio.preload="auto");var namespace=".AudioTrack_play";return _playReturnsPromise()?this.audio.play():new Promise((function(resolve,reject){_this5.isPlaying()?resolve():(jQuery(_this5.audio).off(namespace).one("error".concat(namespace," playing").concat(namespace," timeupdate").concat(namespace),(function(ev){jQuery(_this5).off(namespace),"error"===ev.type?reject(new Error("unknown audio play error")):resolve()})),_this5.audio.play())}))}},{key:"playWhenAllowed",value:function(){var _this6=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioTrack_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioTrack_playWhenAllowed"),_this6.audio.play()}))}))}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(duration,toVol,fromVol){var _this7=this;if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var from=Math.clamp(null==fromVol?this.volume():fromVol,0,1),to=Math.clamp(toVol,0,1);return from!==to?(this.volume(from),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",(function(){var min,max;from<to?(min=from,max=to):(min=to,max=from);var time=Math.max(duration,1),delta=(to-from)/(time/.025);_this7._trigger(":fading"),_this7._faderId=setInterval((function(){_this7.isPlaying()?(_this7.volume(Math.clamp(_this7.volume()+delta,min,max)),Config.audio.pauseOnFadeToZero&&0===_this7.volume()&&_this7.pause(),_this7.volume()===to&&(_this7.fadeStop(),_this7._trigger(":faded"))):_this7.fadeStop()}),25)})),this.play()):void 0}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(_loop){return null==_loop?this.audio.loop:(this.audio.loop=!!_loop,this)}},{key:"mute",value:function(_mute){return null==_mute?this._mute:(this._mute=!!_mute,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||_masterMute}},{key:"rate",value:function(_rate){if(null==_rate)return this._rate;if("number"!=typeof _rate)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*_masterRate,.2,5)}},{key:"time",value:function(_time){var _this8=this;if(null==_time)return this.audio.currentTime;if("number"!=typeof _time)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=_time:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",(function(){return _this8.audio.currentTime=_time})),this}},{key:"volume",value:function(_volume){if(null==_volume)return this._volume;if("number"!=typeof _volume)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*_masterVolume,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return jQuery.fn.on.apply(jQuery(this.audio),args),this}},{key:"one",value:function(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return jQuery.fn.one.apply(jQuery(this.audio),args),this}},{key:"off",value:function(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];return jQuery.fn.off.apply(jQuery(this.audio),args),this}}]),AudioTrack}();Object.defineProperties(AudioTrack,{formats:{value:function(){var audio=document.createElement("audio"),types=new Map;function canPlay(mimeType){return types.has(mimeType)||types.set(mimeType,""!==audio.canPlayType(mimeType).replace(/^no$/i,"")),types.get(mimeType)}return Object.assign(Object.create(null),{aac:canPlay("audio/aac"),caf:canPlay("audio/x-caf")||canPlay("audio/caf"),flac:canPlay("audio/x-flac")||canPlay("audio/flac"),mp3:canPlay('audio/mpeg; codecs="mp3"')||canPlay("audio/mpeg")||canPlay("audio/mp3")||canPlay("audio/mpa"),mpeg:canPlay("audio/mpeg"),m4a:canPlay("audio/x-m4a")||canPlay("audio/m4a")||canPlay("audio/aac"),mp4:canPlay("audio/x-mp4")||canPlay("audio/mp4")||canPlay("audio/aac"),ogg:canPlay("audio/ogg"),oga:canPlay("audio/ogg"),opus:canPlay('audio/ogg; codecs="opus"')||canPlay("audio/opus"),wav:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),wave:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),weba:canPlay("audio/webm"),webm:canPlay("audio/webm")})}()}});var AudioList=function(){function AudioList(obj){if(_classCallCheck(this,AudioList),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioList))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioList,[{key:"_create",value:function(trackList){var _this9=this;this._finalize(trackList.map((function(trackObj){if("object"!==_typeof(trackObj))throw new Error("tracks parameter array members must be objects");var own,rate,track,volume;if(trackObj instanceof AudioTrack)own=!0,rate=trackObj.rate(),track=trackObj.clone(),volume=trackObj.volume();else{if(!trackObj.hasOwnProperty("track"))throw new Error('track object missing required "track" property');if(!(trackObj.track instanceof AudioTrack))throw new Error('track object\'s "track" property must be an AudioTrack object');own=trackObj.hasOwnProperty("own")&&trackObj.own,rate=trackObj.hasOwnProperty("rate")?trackObj.rate:trackObj.track.rate(),track=trackObj.track,volume=trackObj.hasOwnProperty("volume")?trackObj.volume:trackObj.track.volume()}return track.stop(),track.loop(!1),track.mute(!1),track.rate(rate),track.volume(volume),track.on("ended.AudioList",(function(){return _this9._onEnd()})),{own:own,track:track,volume:volume,rate:rate}})))}},{key:"_copy",value:function(obj){this._finalize(clone(obj.tracks))}},{key:"_finalize",value:function(tracks){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(tracks)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter((function(trackObj){return trackObj.own})).forEach((function(trackObj){return trackObj.track._destroy()})),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach((function(trackObj){return trackObj.track.load()}))}},{key:"unload",value:function(){this.stop(),this.tracks.forEach((function(trackObj){return trackObj.track.unload()}))}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var _this10=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioList_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioList_playWhenAllowed"),_this10.play()}))}))}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(duration,toVol,fromVol){if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var adjFromVol,adjToVol=Math.clamp(toVol,0,1)*this.current.volume;return null!=fromVol&&(adjFromVol=Math.clamp(fromVol,0,1)*this.current.volume),this._volume=toVol,this.current.track.fade(duration,adjToVol,adjFromVol)}}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(_loop2){return null==_loop2?this._loop:(this._loop=!!_loop2,this)}},{key:"mute",value:function(_mute2){return null==_mute2?this._mute:(this._mute=!!_mute2,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(_rate2){if(null==_rate2)return this._rate;if("number"!=typeof _rate2)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate2,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(_shuffle){var _this11=this;if(null==_shuffle)return this._shuffle;if(this._shuffle=!!_shuffle,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var _this$queue,firstIdx=this.queue.findIndex((function(trackObj){return trackObj===_this11.current}));if(-1!==firstIdx)(_this$queue=this.queue).push.apply(_this$queue,_toConsumableArray(this.queue.splice(0,firstIdx+1)))}return this}},{key:"volume",value:function(_volume2){if(null==_volume2)return this._volume;if("number"!=typeof _volume2)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume2,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var remainingTime=this.queue.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0);return null!==this.current&&(remainingTime+=this.current.track.remaining()),remainingTime}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){var nextTrack;for(null!==this.current&&(this.current.track.stop(),this.current=null);nextTrack=this.queue.shift();)if(!nextTrack.track.isUnavailable()){this.current=nextTrack;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var _this$queue2;this._drainQueue(),(_this$queue2=this.queue).push.apply(_this$queue2,_toConsumableArray(this.tracks.filter((function(trackObj){return!trackObj.track.isUnavailable()})))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}]),AudioList}(),AudioRunner=function(){function AudioRunner(list){if(_classCallCheck(this,AudioRunner),!(list instanceof Set||list instanceof AudioRunner))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(list instanceof AudioRunner?list.trackIds:list)}})}return _createClass(AudioRunner,[{key:"load",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.load)}},{key:"unload",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.unload)}},{key:"play",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.play)}},{key:"playWhenAllowed",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.playWhenAllowed)}},{key:"pause",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.pause)}},{key:"stop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.stop)}},{key:"fade",value:function(duration,toVol,fromVol){if(null==duration||null==toVol)throw new Error("fade requires parameters");AudioRunner._run(this.trackIds,AudioTrack.prototype.fade,duration,toVol,fromVol)}},{key:"fadeIn",value:function(duration,fromVol){if(null==duration)throw new Error("fadeIn requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeIn,duration,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){if(null==duration)throw new Error("fadeOut requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeOut,duration,fromVol)}},{key:"fadeStop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeStop)}},{key:"loop",value:function(_loop3){if(null==_loop3)throw new Error("loop requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.loop,_loop3),this}},{key:"mute",value:function(_mute3){if(null==_mute3)throw new Error("mute requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.mute,_mute3),this}},{key:"rate",value:function(_rate3){if(null==_rate3)throw new Error("rate requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.rate,_rate3),this}},{key:"time",value:function(_time2){if(null==_time2)throw new Error("time requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.time,_time2),this}},{key:"volume",value:function(_volume3){if(null==_volume3)throw new Error("volume requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.volume,_volume3),this}},{key:"on",value:function(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.on].concat(args)),this}},{key:"one",value:function(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.one].concat(args)),this}},{key:"off",value:function(){for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++)args[_key10]=arguments[_key10];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.off].concat(args)),this}}],[{key:"_run",value:function(ids,fn){for(var _len11=arguments.length,args=new Array(_len11>2?_len11-2:0),_key11=2;_key11<_len11;_key11++)args[_key11-2]=arguments[_key11];ids.forEach((function(id){var track=_tracks.get(id);track&&fn.apply(track,args)}))}}]),AudioRunner}();var _runnerParseSelector=function(){var notWsRe=/\S/g,parenRe=/[()]/g;function processNegation(str,startPos){var match;if(notWsRe.lastIndex=startPos,null===(match=notWsRe.exec(str))||"("!==match[0])throw new Error('invalid ":not()" syntax: missing parentheticals');parenRe.lastIndex=notWsRe.lastIndex;for(var start=notWsRe.lastIndex,result={str:"",nextMatch:-1},depth=1;null!==(match=parenRe.exec(str));)if("("===match[0]?++depth:--depth,depth<1){result.nextMatch=parenRe.lastIndex,result.str=str.slice(start,result.nextMatch-1);break}return result}return function parseSelector(idArg){for(var match,ids=[],idRe=/:?[^\s:()]+/g;null!==(match=idRe.exec(idArg));){var id=match[0];if(":not"===id){if(0===ids.length)throw new Error('invalid negation: no group ID preceded ":not()"');var parent=ids[ids.length-1];if(":"!==parent.id[0])throw new Error('invalid negation of track "'.concat(parent.id,'": only groups may be negated with ":not()"'));var negation=processNegation(idArg,idRe.lastIndex);if(-1===negation.nextMatch)throw new Error('unknown error parsing ":not()"');idRe.lastIndex=negation.nextMatch,parent.not=parseSelector(negation.str)}else ids.push({id:id})}return ids}}();function masterMute(mute){if(null==mute)return _masterMute;publish("mute",_masterMute=!!mute)}function unsubscribe(id){_subscribers.delete(id)}function publish(mesg,data){_subscribers.forEach((function(fn){return fn(mesg,data)}))}function _newTrack(sources){return new AudioTrack(sources.map((function(source){if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);if(passage.tags.includes("Twine.audio"))return passage.text.trim()}var match=_formatSpecRe.exec(source);return null===match?source:{format:match[1],src:match[2]}})))}return Object.freeze(Object.defineProperties({},{tracks:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("track ID"),arguments.length<2&&errors.push("sources"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='track ID "'.concat(id,'"');if(_badIdRe.test(id))throw new Error("invalid ".concat(what,": track IDs must not contain colons or whitespace"));var track,sources=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{track=_newTrack(sources)}catch(ex){throw new Error("".concat(what,": error during track initialization: ").concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("".concat(what,": no supported audio sources found"));_tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.set(id,track)}},delete:{value:function(id){return _tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.delete(id)}},clear:{value:function(){_tracks.forEach((function(track){return track._destroy()})),_tracks.clear()}},has:{value:function(id){return _tracks.has(id)}},get:{value:function(id){return _tracks.get(id)||null}}}))},groups:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("group ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='group ID "'.concat(id,'"');if(":"!==id[0]||_badIdRe.test(id.slice(1)))throw new Error("invalid ".concat(what,": group IDs must start with a colon and must not contain colons or whitespace"));if(_specialIds.includes(id))throw new Error("cannot clobber special ".concat(what));var group,trackIds=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{group=new Set(trackIds.map((function(trackId){if(!_tracks.has(trackId))throw new Error('track "'.concat(trackId,'" does not exist'));return trackId})))}catch(ex){throw new Error("".concat(what,": error during group initialization: ").concat(ex.message))}_groups.set(id,Object.freeze(Array.from(group)))}},delete:{value:function(id){return _groups.delete(id)}},clear:{value:function(){_groups.clear()}},has:{value:function(id){return _groups.has(id)}},get:{value:function(id){return _groups.get(id)||null}}}))},lists:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("list ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='list ID "'.concat(id,'"');if(_badIdRe.test(id))return this.error("invalid ".concat(what,": list IDs must not contain colons or whitespace"));var list,descriptors=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{list=new AudioList(descriptors.map((function(desc){if(null===desc)throw new Error("track descriptor must be a string or object (type: null)");switch(_typeof(desc)){case"string":desc={id:desc};break;case"object":if(!desc.hasOwnProperty("id")&&!desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(desc.hasOwnProperty("id")&&desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: ".concat(_typeof(desc),")"))}var own,track,volume;if(desc.hasOwnProperty("id")){if("string"!=typeof desc.id)throw new Error('"id" property must be a string');if(!_tracks.has(desc.id))throw new Error('track "'.concat(desc.id,'" does not exist'));track=_tracks.get(desc.id)}else if(desc.hasOwnProperty("sources")){if(!Array.isArray(desc.sources)||0===desc.sources.length)throw new Error('"sources" property must be a non-empty array');if(desc.hasOwnProperty("own"))throw new Error('"own" property is not allowed with the "sources" property');try{track=_newTrack(desc.sources),own=!0}catch(ex){throw new Error("error during track initialization: ".concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("no supported audio sources found")}if(desc.hasOwnProperty("own")){if("boolean"!=typeof desc.own)throw new Error('"own" property must be a boolean');(own=desc.own)&&(track=track.clone())}if(desc.hasOwnProperty("volume")){if("number"!=typeof desc.volume||Number.isNaN(desc.volume)||!Number.isFinite(desc.volume)||desc.volume<0)throw new Error('"volume" property must be a non-negative finite number');volume=desc.volume}return{own:null!=own&&own,track:track,volume:null!=volume?volume:track.volume()}})))}catch(ex){throw new Error("".concat(what,": error during playlist initialization: ").concat(ex.message))}_lists.has(id)&&_lists.get(id)._destroy(),_lists.set(id,list)}},delete:{value:function(id){return _lists.has(id)&&_lists.get(id)._destroy(),_lists.delete(id)}},clear:{value:function(){_lists.forEach((function(list){return list._destroy()})),_lists.clear()}},has:{value:function(id){return _lists.has(id)}},get:{value:function(id){return _lists.get(id)||null}}}))},select:{value:function(){if(0===arguments.length)throw new Error("no track selector specified");var selector=String(arguments[0]).trim(),trackIds=new Set;try{var renderIds=function renderIds(idObj){var ids,id=idObj.id;switch(id){case":all":ids=allIds;break;case":looped":ids=allIds.filter((function(id){return _tracks.get(id).loop()}));break;case":muted":ids=allIds.filter((function(id){return _tracks.get(id).mute()}));break;case":paused":ids=allIds.filter((function(id){return _tracks.get(id).isPaused()}));break;case":playing":ids=allIds.filter((function(id){return _tracks.get(id).isPlaying()}));break;default:ids=":"===id[0]?_groups.get(id):[id]}if(idObj.hasOwnProperty("not")){var negated=idObj.not.map((function(idObj){return renderIds(idObj)})).flat(1/0);ids=ids.filter((function(id){return!negated.includes(id)}))}return ids},allIds=Array.from(_tracks.keys());_runnerParseSelector(selector).forEach((function(idObj){return renderIds(idObj).forEach((function(id){if(!_tracks.has(id))throw new Error('track "'.concat(id,'" does not exist'));trackIds.add(id)}))}))}catch(ex){throw new Error("error during runner initialization: ".concat(ex.message))}return new AudioRunner(trackIds)}},load:{value:function(){publish("load")}},loadWithScreen:{value:function(){publish("loadwithscreen")}},mute:{value:masterMute},muteOnHidden:{value:function(mute){if(!Visibility.isEnabled())return!1;if(null==mute)return _masterMuteOnHidden;var namespace=".SimpleAudio_masterMuteOnHidden";if(_masterMuteOnHidden=!!mute){var visibilityChange="".concat(Visibility.changeEvent).concat(namespace);jQuery(document).off(namespace).on(visibilityChange,(function(){return masterMute(Visibility.isHidden())})),Visibility.isHidden()&&masterMute(!0)}else jQuery(document).off(namespace)}},rate:{value:function(rate){if(null==rate)return _masterRate;if("number"!=typeof rate||Number.isNaN(rate)||!Number.isFinite(rate))throw new Error("rate must be a finite number");publish("rate",_masterRate=Math.clamp(rate,.2,5))}},stop:{value:function(){publish("stop")}},unload:{value:function(){publish("unload")}},volume:{value:function(volume){if(null==volume)return _masterVolume;if("number"!=typeof volume||Number.isNaN(volume)||!Number.isFinite(volume))throw new Error("volume must be a finite number");publish("volume",_masterVolume=Math.clamp(volume,0,1))}}}))}(),State=function(){var _history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null,_tempVariables={};function stateMarshal(noDelta){var stateObj={index:_activeIndex};return noDelta?stateObj.history=clone(_history):stateObj.delta=historyDeltaEncode(_history),_expired.length>0&&(stateObj.expired=_toConsumableArray(_expired)),null!==_prng&&(stateObj.seed=_prng.seed),stateObj}function stateUnmarshal(stateObj,noDelta){if(null==stateObj)throw new Error("state object is null or undefined");if(!stateObj.hasOwnProperty(noDelta?"history":"delta")||0===stateObj[noDelta?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!stateObj.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==_prng&&!stateObj.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===_prng&&stateObj.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");_history=noDelta?clone(stateObj.history):historyDeltaDecode(stateObj.delta),_activeIndex=stateObj.index,_expired=stateObj.hasOwnProperty("expired")?_toConsumableArray(stateObj.expired):[],stateObj.hasOwnProperty("seed")&&(_prng.seed=stateObj.seed),momentActivate(_activeIndex)}function momentCreate(title,variables){return{title:null==title?"":String(title),variables:null==variables?{}:clone(variables)}}function momentActivate(moment){if(null==moment)throw new Error("moment activation attempted with null or undefined");switch(_typeof(moment)){case"object":_active=clone(moment);break;case"number":if(historyIsEmpty())throw new Error("moment activation attempted with index on empty history");if(moment<0||moment>=historySize())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, ".concat(historySize()-1,"], got ").concat(moment));_active=clone(_history[moment]);break;default:throw new TypeError('moment activation attempted with a "'.concat(_typeof(moment),'"; must be an object or valid history stack index'))}return null!==_prng&&(_prng=PRNGWrapper.unmarshal({seed:_prng.seed,pull:_active.pull})),session.set("state",stateMarshal()),jQuery.event.trigger(":historyupdate"),_active}function historyLength(){return _activeIndex+1}function historySize(){return _history.length}function historyIsEmpty(){return 0===_history.length}function historyTop(){return _history.length>0?_history[_history.length-1]:null}function historyGoTo(index){return!(null==index||index<0||index>=historySize()||index===_activeIndex)&&(momentActivate(_activeIndex=index),!0)}function historyDeltaEncode(historyArr){if(!Array.isArray(historyArr))return null;if(0===historyArr.length)return[];for(var delta=[historyArr[0]],i=1,iend=historyArr.length;i<iend;++i)delta.push(Diff.diff(historyArr[i-1],historyArr[i]));return delta}function historyDeltaDecode(delta){if(!Array.isArray(delta))return null;if(0===delta.length)return[];for(var historyArr=[clone(delta[0])],i=1,iend=delta.length;i<iend;++i)historyArr.push(Diff.patch(historyArr[i-1],delta[i]));return historyArr}function prngInit(seed,useEntropy){var scriptSection;if(!historyIsEmpty())throw scriptSection="the Story JavaScript",new Error("State.prng.init must be called during initialization, within either ".concat(scriptSection," or the StoryInit special passage"));_prng=new PRNGWrapper(seed,useEntropy),_active.pull=_prng.pull}function metadataDelete(key){if("string"!=typeof key)throw new TypeError("State.metadata.delete key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");store&&store.hasOwnProperty(key)&&(1===Object.keys(store).length?storage.delete("metadata"):(delete store[key],storage.set("metadata",store)))}return Object.freeze(Object.defineProperties({},{reset:{value:function(){session.delete("state"),_history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null===_prng?null:new PRNGWrapper(_prng.seed,!1)}},restore:{value:function(){if(session.has("state")){var stateObj=session.get("state");return null!=stateObj&&(stateUnmarshal(stateObj),!0)}return!1}},marshalForSave:{value:function(){return stateMarshal(!0)}},unmarshalForSave:{value:function(stateObj){return stateUnmarshal(stateObj,!0)}},expired:{get:function(){return _expired}},turns:{get:function(){return _expired.length+historyLength()}},passages:{get:function(){return _expired.concat(_history.slice(0,historyLength()).map((function(moment){return moment.title})))}},hasPlayed:{value:function(title){return null!=title&&""!==title&&(!!_expired.includes(title)||!!_history.slice(0,historyLength()).some((function(moment){return moment.title===title})))}},active:{get:function(){return _active}},activeIndex:{get:function(){return _activeIndex}},passage:{get:function(){return _active.title}},variables:{get:function(){return _active.variables}},history:{get:function(){return _history}},length:{get:historyLength},size:{get:historySize},isEmpty:{value:historyIsEmpty},current:{get:function(){return _history.length>0?_history[_activeIndex]:null}},top:{get:historyTop},bottom:{get:function(){return _history.length>0?_history[0]:null}},index:{value:function(index){return historyIsEmpty()||index<0||index>_activeIndex?null:_history[index]}},peek:{value:function(offset){if(historyIsEmpty())return null;var lengthOffset=1+(offset?Math.abs(offset):0);return lengthOffset>historyLength()?null:_history[historyLength()-lengthOffset]}},has:{value:function(title){if(historyIsEmpty()||null==title||""===title)return!1;for(var i=_activeIndex;i>=0;--i)if(_history[i].title===title)return!0;return!1}},create:{value:function(title){for(0,historyLength()<historySize()&&_history.splice(historyLength(),historySize()-historyLength()),_history.push(momentCreate(title,_active.variables)),_prng&&(historyTop().pull=_prng.pull);historySize()>Config.history.maxStates;)_expired.push(_history.shift().title);return momentActivate(_activeIndex=historySize()-1),historyLength()}},goTo:{value:historyGoTo},go:{value:function(offset){return null!=offset&&0!==offset&&historyGoTo(_activeIndex+offset)}},deltaEncode:{value:historyDeltaEncode},deltaDecode:{value:historyDeltaDecode},prng:{value:Object.freeze(Object.defineProperties({},{init:{value:prngInit},isEnabled:{value:function(){return null!==_prng}},pull:{get:function(){return _prng?_prng.pull:NaN}},seed:{get:function(){return _prng?_prng.seed:null}}}))},random:{value:function(){return _prng?_prng.random():Math.random()}},clearTemporary:{value:function(){TempVariables=_tempVariables={}}},temporary:{get:function(){return _tempVariables}},getVar:{value:function(varExpression){try{return Scripting.evalTwineScript(varExpression)}catch(ex){}}},setVar:{value:function(varExpression,value){try{return Scripting.evalTwineScript("".concat(varExpression," = evalTwineScript$Data$"),null,value),!0}catch(ex){}return!1}},metadata:{value:Object.freeze(Object.defineProperties({},{clear:{value:function(){storage.delete("metadata")}},delete:{value:metadataDelete},entries:{value:function(){var store=storage.get("metadata");return store&&Object.entries(store)}},get:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.get key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)?store[key]:undefined}},has:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.has key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)}},keys:{value:function(){var store=storage.get("metadata");return store&&Object.keys(store)}},set:{value:function(key,value){if("string"!=typeof key)throw new TypeError("State.metadata.set key parameter must be a string (received: ".concat(_typeof(key),")"));if(void 0===value)metadataDelete(key);else{var store=storage.get("metadata")||{};store[key]=value,storage.set("metadata",store)}}},size:{get:function(){var store=storage.get("metadata");return store?Object.keys(store).length:0}}}))},initPRNG:{value:prngInit},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Scripting=function(){function addAccessibleClickHandler(targets,selector,handler,one,namespace){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var fn,opts;if("function"==typeof selector?(fn=selector,opts={namespace:one,one:!!handler}):(fn=handler,opts={namespace:namespace,one:!!one,selector:selector}),"function"!=typeof fn)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(targets).ariaClick(opts,fn)}function insertElement(place,type,id,classNames,text,title){var $el=jQuery(document.createElement(type));return id&&$el.attr("id",id),classNames&&$el.addClass(classNames),title&&$el.attr("title",title),text&&$el.text(text),place&&$el.appendTo(place),$el[0]}function insertText(place,text){jQuery(place).append(document.createTextNode(text))}function removeChildren(node){jQuery(node).empty()}function removeElement(node){jQuery(node).remove()}function fade(el,options){var current,intervalId,direction="in"===options.fade?1:-1,proxy=el.cloneNode(!0);function setOpacity(el,opacity){el.style.zoom=1,el.style.filter="alpha(opacity=".concat(Math.floor(100*opacity),")"),el.style.opacity=opacity}el.parentNode.replaceChild(proxy,el),"in"===options.fade?(current=0,proxy.style.visibility="visible"):current=1,setOpacity(proxy,current),intervalId=window.setInterval((function(){current+=.05*direction,setOpacity(proxy,Math.easeInOut(current)),(1===direction&&current>=1||-1===direction&&current<=0)&&(el.style.visibility="in"===options.fade?"visible":"hidden",proxy.parentNode.replaceChild(el,proxy),proxy=null,window.clearInterval(intervalId),options.onComplete&&options.onComplete())}),25)}function scrollWindowTo(el,incrementBy){var increment=null!=incrementBy?Number(incrementBy):.1;Number.isNaN(increment)||!Number.isFinite(increment)||increment<0?increment=.1:increment>1&&(increment=1);var intervalId,start=window.scrollY?window.scrollY:document.body.scrollTop,end=function(el){var posTop=function(el){var curtop=0;for(;el.offsetParent;)curtop+=el.offsetTop,el=el.offsetParent;return curtop}(el),posBottom=posTop+el.offsetHeight,winTop=window.scrollY?window.scrollY:document.body.scrollTop,winHeight=window.innerHeight?window.innerHeight:document.body.clientHeight,winBottom=winTop+winHeight;return posTop>=winTop&&posBottom>winBottom&&el.offsetHeight<winHeight?posTop-(winHeight-el.offsetHeight)+20:posTop}(el),distance=Math.abs(start-end),direction=start>end?-1:1,progress=0;intervalId=window.setInterval((function(){progress+=increment,window.scroll(0,start+direction*(distance*Math.easeInOut(progress))),progress>=1&&window.clearInterval(intervalId)}),25)}function toStringOrDefault(value){return stringFrom(value)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(key){if("string"!=typeof key)throw new TypeError("forget key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.delete(key)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,i=0,iend=needles.length;i<iend;++i)if(!played.includes(needles[i]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,uBound=played.length-1,turns=State.turns,i=0,iend=needles.length;i<iend&&turns>-1;++i){var lastIndex=played.lastIndexOf(needles[i]);turns=Math.min(turns,-1===lastIndex?-1:uBound-lastIndex)}return turns}function memorize(key,value){if("string"!=typeof key)throw new TypeError("memorize key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.set(key,value)}function passage(){return State.passage}function previous(){var passages=State.passages;if(arguments.length>0){var offset=Number(arguments[0]);if(!Number.isSafeInteger(offset)||offset<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return passages.length>offset?passages[passages.length-1-offset]:""}for(var i=passages.length-2;i>=0;--i)if(passages[i]!==State.passage)return passages[i];return""}function random(){var min,max;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:min=0,max=Math.trunc(arguments[0]);break;default:min=Math.trunc(arguments[0]),max=Math.trunc(arguments[1])}if(!Number.isInteger(min))throw new Error("random min parameter must be an integer");if(!Number.isInteger(max))throw new Error("random max parameter must be an integer");if(min>max){var _ref6=[max,min];min=_ref6[0],max=_ref6[1]}return Math.floor(State.random()*(max-min+1))+min}function randomFloat(){var min,max;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:min=0,max=Number(arguments[0]);break;default:min=Number(arguments[0]),max=Number(arguments[1])}if(Number.isNaN(min)||!Number.isFinite(min))throw new Error("randomFloat min parameter must be a number");if(Number.isNaN(max)||!Number.isFinite(max))throw new Error("randomFloat max parameter must be a number");if(min>max){var _ref7=[max,min];min=_ref7[0],max=_ref7[1]}return State.random()*(max-min)+min}function recall(key,defaultValue){if("string"!=typeof key)throw new TypeError("recall key parameter must be a string (received: ".concat(Util.getType(key),")"));return State.metadata.has(key)?State.metadata.get(key):defaultValue}function tags(){if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var passages=Array.prototype.concat.apply([],arguments),tags=[],i=0,iend=passages.length;i<iend;++i)tags=tags.concat(Story.get(passages[i]).tags);return tags}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:Util.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),played=State.passages,count=State.turns,i=0,iend=needles.length;i<iend&&count>0;++i)count=Math.min(count,played.count(needles[i]));return count}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],arguments),nLength=needles.length,played=State.passages,seen=new Map,count=0,i=0,iend=played.length;i<iend;++i){var title=played[i];if(seen.has(title))seen.get(title)&&++count;else{var _tags2=Story.get(title).tags;if(_tags2.length>0){for(var found=0,j=0;j<nLength;++j)_tags2.includes(needles[j])&&++found;found===nLength?(++count,seen.set(title,!0)):seen.set(title,!1)}}}return count}var _ref8=function(){function slugifyUrl(url){return Util.parseUrl(url).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function addScript(url){return new Promise((function(resolve,reject){jQuery(document.createElement("script")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importScripts failed to load the script "'.concat(url,'".')))})).appendTo(document.head).attr({id:"script-imported-".concat(slugifyUrl(url)),type:"text/javascript",src:url})}))}function addStyle(url){return new Promise((function(resolve,reject){jQuery(document.createElement("link")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importStyles failed to load the stylesheet "'.concat(url,'".')))})).appendTo(document.head).attr({id:"style-imported-".concat(slugifyUrl(url)),rel:"stylesheet",href:url})}))}function sequence(callbacks){return callbacks.reduce((function(seq,fn){return seq.then(fn)}),Promise.resolve())}return{importScripts:function(){for(var _len12=arguments.length,urls=new Array(_len12),_key12=0;_key12<_len12;_key12++)urls[_key12]=arguments[_key12];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addScript(url)}}))):addScript(oneOrSeries)})))},importStyles:function(){for(var _len13=arguments.length,urls=new Array(_len13),_key13=0;_key13<_len13;_key13++)urls[_key13]=arguments[_key13];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addStyle(url)}}))):addStyle(oneOrSeries)})))}}}(),importScripts=_ref8.importScripts,importStyles=_ref8.importStyles,parse=function(){var tokenTable=Util.toEnum({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),parseRe=new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(`(?:\\\\.|[^`\\\\])+`)","(?:[=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),notSpaceRe=/\S/,varTest=new RegExp("^".concat(Patterns.variable)),withColonTestRe=/^\s*:/,withNotTestRe=/^\s+not\b/;function parse(rawCodeString){if(0!==parseRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var match,code=rawCodeString;null!==(match=parseRe.exec(code));)if(match[1]){var rawTemplate=match[1],parsedTemplate=parseTemplate(rawTemplate);parsedTemplate!==rawTemplate&&(code=code.splice(match.index,rawTemplate.length,parsedTemplate),parseRe.lastIndex+=parsedTemplate.length-rawTemplate.length)}else if(match[2]){var token=match[2];if("$"===token||"_"===token)continue;if(varTest.test(token))token=token[0];else if("is"===token){var start=parseRe.lastIndex,ahead=code.slice(start);withNotTestRe.test(ahead)&&(code=code.splice(start,ahead.search(notSpaceRe)),token="isnot")}else{var _ahead=code.slice(parseRe.lastIndex);if(withColonTestRe.test(_ahead))continue}tokenTable[token]&&(code=code.splice(match.index,token.length,tokenTable[token]),parseRe.lastIndex+=tokenTable[token].length-token.length)}return code}var templateGroupStartRe=/\$\{/g,templateGroupParseRe=new RegExp(["(?:\"\"|'')",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(\\{)","(\\})"].join("|"),"g");function parseTemplate(rawTemplateLiteral){if(0!==templateGroupStartRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start of template literal");for(var startMatch,template=rawTemplateLiteral;null!==(startMatch=templateGroupStartRe.exec(template));){var startIdx=startMatch.index+2,endIdx=startIdx,depth=1,endMatch=void 0;for(templateGroupParseRe.lastIndex=startIdx;null!==(endMatch=templateGroupParseRe.exec(template));)if(endMatch[1]?++depth:endMatch[2]&&--depth,0===depth){endIdx=endMatch.index;break}if(endIdx>startIdx){var parseIndex=parseRe.lastIndex,rawGroup=template.slice(startIdx,endIdx);parseRe.lastIndex=0;var parsedGroup=parse(rawGroup);parseRe.lastIndex=parseIndex,template=template.splice(startIdx,rawGroup.length,parsedGroup),templateGroupStartRe.lastIndex+=parsedGroup.length-rawGroup.length}}return template}return parse}();function evalJavaScript(code,output,data){return function(code,output,evalJavaScript$Data$){return eval(code)}.call(output?{output:output}:null,String(code),output,data)}function evalTwineScript(code,output,data){return function(code,output,evalTwineScript$Data$){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output,data)}return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),_ref9=function(){var Lexer=function(){function Lexer(source,initialState){if(_classCallCheck(this,Lexer),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:source},initial:{value:initialState},state:{writable:!0,value:initialState},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})}return _createClass(Lexer,[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(num){this.pos-=num||1}},{key:"forward",value:function(num){this.pos+=num||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(valid){var ch=this.next();return-1!==ch&&(!!valid.includes(ch)||(this.backup(),!1))}},{key:"acceptRe",value:function(validRe){var ch=this.next();return-1!==ch&&(!!validRe.test(ch)||(this.backup(),!1))}},{key:"acceptRun",value:function(valid){for(;;){var ch=this.next();if(-1===ch)return;if(!valid.includes(ch))break}this.backup()}},{key:"acceptRunRe",value:function(validRe){for(;;){var ch=this.next();if(-1===ch)return;if(!validRe.test(ch))break}this.backup()}},{key:"emit",value:function(type){this.items.push({type:type,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(type,message){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:type,message:message,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(names){var obj=names.reduce((function(obj,name,i){return obj[name]=i,obj}),{});return Object.freeze(Object.assign(Object.create(null),obj))}}]),Lexer}();return{EOF:-1,Lexer:Lexer}}(),EOF=_ref9.EOF,Lexer=_ref9.Lexer,Wikifier=function(){var _optionsStack,lookaheadRe,idOrClassRe,_callDepth=0,Wikifier=function(){function Wikifier(destination,source,options){_classCallCheck(this,Wikifier),Wikifier.Parser.Profile.isEmpty()&&Wikifier.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(source)},options:{writable:!0,value:Object.assign({profile:"all"},options)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),null==destination?this.output=document.createDocumentFragment():destination.jquery?this.output=destination[0]:this.output=destination;try{++_callDepth,this.subWikify(this.output),1===_callDepth&&Config.cleanupWikifierOutput&&convertBreaks(this.output)}finally{--_callDepth}}return _createClass(Wikifier,[{key:"subWikify",value:function(output,terminator,options){var newOptions,oldOptions,oldOutput=this.output;this.output=output,Wikifier.Option.length>0&&(newOptions=Object.assign(newOptions||{},Wikifier.Option.options)),null!==options&&"object"===_typeof(options)&&(newOptions=Object.assign(newOptions||{},options)),newOptions&&(oldOptions=this.options,this.options=Object.assign({},this.options,newOptions));var terminatorMatch,parserMatch,parsersProfile=Wikifier.Parser.Profile.get(this.options.profile),terminatorRegExp=terminator?new RegExp("(?:".concat(terminator,")"),this.options.ignoreTerminatorCase?"gim":"gm"):null;do{if(parsersProfile.parserRegExp.lastIndex=this.nextMatch,terminatorRegExp&&(terminatorRegExp.lastIndex=this.nextMatch),parserMatch=parsersProfile.parserRegExp.exec(this.source),(terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null)&&(!parserMatch||terminatorMatch.index<=parserMatch.index))return terminatorMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,terminatorMatch.index),this.matchStart=terminatorMatch.index,this.matchLength=terminatorMatch[0].length,this.matchText=terminatorMatch[0],this.nextMatch=terminatorRegExp.lastIndex,this.output=oldOutput,void(oldOptions&&(this.options=oldOptions));if(parserMatch){parserMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,parserMatch.index),this.matchStart=parserMatch.index,this.matchLength=parserMatch[0].length,this.matchText=parserMatch[0],this.nextMatch=parsersProfile.parserRegExp.lastIndex;for(var matchingParser=void 0,i=1,iend=parserMatch.length;i<iend;++i)if(parserMatch[i]){matchingParser=i-1;break}if(parsersProfile.parsers[matchingParser].handler(this),null!=TempState.break)break}}while(terminatorMatch||parserMatch);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=oldOutput,oldOptions&&(this.options=oldOptions)}},{key:"outputText",value:function(destination,startPos,endPos){jQuery(destination).append(document.createTextNode(this.source.substring(startPos,endPos)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this._rawArgs)}}],[{key:"wikifyEval",value:function(text){var output=document.createDocumentFragment();new Wikifier(output,text);var errors=output.querySelector(".error");if(null!==errors)throw new Error(errors.textContent.replace(errorPrologRegExp,""));return output}},{key:"createInternalLink",value:function(destination,passage,text,callback){var $link=jQuery(document.createElement("a"));return null!=passage&&($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken"),$link.ariaClick({one:!0},(function(){"function"==typeof callback&&callback(),Engine.play(passage)}))),text&&$link.append(document.createTextNode(text)),destination&&$link.appendTo(destination),$link[0]}},{key:"createExternalLink",value:function(destination,url,text){var $link=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(text).appendTo(destination);return null!=url&&$link.attr({href:url,tabindex:0}),$link[0]}},{key:"isExternalLink",value:function(link){return!Story.has(link)&&(new RegExp("^".concat(Patterns.url),"gim").test(link)||/[/.?#]/.test(link))}}]),Wikifier}();return Object.defineProperty(Wikifier,"Option",{value:(_optionsStack=[],Object.freeze(Object.defineProperties({},{length:{get:function(){return _optionsStack.length}},options:{get:function(){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(_optionsStack)))}},clear:{value:function(){_optionsStack=[]}},get:{value:function(idx){return _optionsStack[idx]}},pop:{value:function(){return _optionsStack.pop()}},push:{value:function(options){if("object"!==_typeof(options)||null===options)throw new TypeError("Wikifier.Option.push options parameter must be an object (received: ".concat(Util.getType(options),")"));return _optionsStack.push(options)}}})))}),Object.defineProperty(Wikifier,"Parser",{value:function(){var _profiles,_parsers=[];function parsersHas(name){return!!_parsers.find((function(parser){return parser.name===name}))}return Object.freeze(Object.defineProperties({},{parsers:{get:function(){return _parsers}},add:{value:function(parser){if("object"!==_typeof(parser))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!parser.hasOwnProperty("name"))throw new Error('parser object missing required "name" property');if("string"!=typeof parser.name)throw new Error('parser object "name" property must be a string');if(!parser.hasOwnProperty("match"))throw new Error('parser object missing required "match" property');if("string"!=typeof parser.match)throw new Error('parser object "match" property must be a string');if(!parser.hasOwnProperty("handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof parser.handler)throw new Error('parser object "handler" property must be a function');if(parser.hasOwnProperty("profiles")&&!Array.isArray(parser.profiles))throw new Error('parser object "profiles" property must be an array');if(parsersHas(parser.name))throw new Error('cannot clobber existing parser "'.concat(parser.name,'"'));_parsers.push(parser)}},delete:{value:function(name){var parser=_parsers.find((function(parser){return parser.name===name}));parser&&_parsers.delete(parser)}},isEmpty:{value:function(){return 0===_parsers.length}},has:{value:parsersHas},get:{value:function(name){return _parsers.find((function(parser){return parser.name===name}))||null}},Profile:{value:Object.freeze(Object.defineProperties({},{profiles:{get:function(){return _profiles}},compile:{value:function(){var all=_parsers,core=all.filter((function(parser){return!Array.isArray(parser.profiles)||parser.profiles.includes("core")}));return _profiles=Object.freeze({all:{parsers:all,parserRegExp:new RegExp(all.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")},core:{parsers:core,parserRegExp:new RegExp(core.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")}})}},isEmpty:{value:function(){return"object"!==_typeof(_profiles)||0===Object.keys(_profiles).length}},has:{value:function(profile){return"object"===_typeof(_profiles)&&_profiles.hasOwnProperty(profile)}},get:{value:function(profile){if("object"!==_typeof(_profiles)||!_profiles.hasOwnProperty(profile))throw new Error('nonexistent parser profile "'.concat(profile,'"'));return _profiles[profile]}}}))}}))}()}),Object.defineProperties(Wikifier,{helpers:{value:{}},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(Wikifier.helpers,{inlineCss:{value:(lookaheadRe=new RegExp(Patterns.inlineCss,"gm"),idOrClassRe=new RegExp("(".concat(Patterns.cssIdOrClassSigil,")(").concat(Patterns.anyLetter,"+)"),"g"),function(w){var matched,css={classes:[],id:"",styles:{}};do{lookaheadRe.lastIndex=w.nextMatch;var match=lookaheadRe.exec(w.source);if(matched=match&&match.index===w.nextMatch){if(match[1])css.styles[Util.fromCssProperty(match[1])]=match[2].trim();else if(match[3])css.styles[Util.fromCssProperty(match[3])]=match[4].trim();else if(match[5]){var subMatch=void 0;for(idOrClassRe.lastIndex=0;null!==(subMatch=idOrClassRe.exec(match[5]));)"."===subMatch[1]?css.classes.push(subMatch[2]):css.id=subMatch[2]}w.nextMatch=lookaheadRe.lastIndex}}while(matched);return css})},evalText:{value:function(text){var result;try{switch(_typeof(result=Scripting.evalTwineScript(text))){case"string":""===result.trim()&&(result=text);break;case"number":result=String(result);break;default:result=text}}catch(ex){result=text}return result}},evalPassageId:{value:function(passage){return null==passage||Story.has(passage)?passage:Wikifier.helpers.evalText(passage)}},hasBlockContext:{value:function(nodes){for(var hasGCS="function"==typeof window.getComputedStyle,i=nodes.length-1;i>=0;--i){var node=nodes[i];switch(node.nodeType){case Node.ELEMENT_NODE:var tagName=node.nodeName.toUpperCase();if("BR"===tagName)return!0;var styles=hasGCS?window.getComputedStyle(node,null):node.currentStyle;if(styles&&styles.display){if("none"===styles.display)continue;return"block"===styles.display}switch(tagName){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},createShadowSetterCallback:{value:function(){var macroParser=null;function getMacroContextShadowView(){for(var macro=macroParser||function(){if(!macroParser&&!(macroParser=Wikifier.Parser.get("macro")))throw new Error('cannot find "macro" parser');return macroParser}(),view=new Set,context=macro.context;null!==context;context=context.parent)context._shadows&&context._shadows.forEach((function(name){return view.add(name)}));return _toConsumableArray(view)}return function(code){var shadowStore={};return getMacroContextShadowView().forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]})),function(){var shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null;try{return shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),Scripting.evalJavaScript(code)}finally{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}}()},parseSquareBracketedMarkup:{value:function(){var Item=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),Delim=Lexer.enumFromNames(["None","LTR","RTL"]);function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexLeftMeta(lexer){if(!lexer.accept("["))return lexer.error(Item.Error,"malformed square-bracketed markup");if(lexer.accept("["))lexer.data.isLink=!0,lexer.emit(Item.LinkMeta);else{if(lexer.accept("<>"),!(lexer.accept("Ii")&&lexer.accept("Mm")&&lexer.accept("Gg")&&lexer.accept("[")))return lexer.error(Item.Error,"malformed square-bracketed markup");lexer.data.isLink=!1,lexer.emit(Item.ImageMeta)}return lexer.depth=2,lexCoreComponents}function lexCoreComponents(lexer){for(var what=lexer.data.isLink?"link":"image",delim=Delim.None;;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup"));break;case"|":delim===Delim.None&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(),lexer.emit(Item.DelimLTR));break;case"-":delim===Delim.None&&">"===lexer.peek()&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(2),lexer.emit(Item.DelimLTR));break;case"<":delim===Delim.None&&"-"===lexer.peek()&&(delim=Delim.RTL,lexer.backup(),lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.DelimRTL));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.InnerMeta),lexer.data.isLink?lexSetter:lexImageLink;case"]":return--lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexImageLink(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup link component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.InnerMeta),lexSetter;case"]":return--lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexSetter(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup setter component"));break;case"'":if(slurpQuote(lexer,"'")===EOF)return lexer.error(Item.Error,"unterminated single quoted string in ".concat(what," markup setter component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)return"]"!==lexer.peek()?lexer.error(Item.Error,"malformed ".concat(what," markup")):(--lexer.depth,lexer.backup(),lexer.emit(Item.Setter),lexer.forward(2),lexer.emit(Item.RightMeta),null)}}return function(w){var lexer=new Lexer(w.source,lexLeftMeta);lexer.start=lexer.pos=w.matchStart;var markup={},items=lexer.run(),last=items.last();return last&&last.type===Item.Error?markup.error=last.message:items.forEach((function(item){var text=item.text.trim();switch(item.type){case Item.ImageMeta:markup.isImage=!0,"<"===text[1]?markup.align="left":">"===text[1]&&(markup.align="right");break;case Item.LinkMeta:markup.isLink=!0;break;case Item.Link:"~"===text[0]?(markup.forceInternal=!0,markup.link=text.slice(1)):markup.link=text;break;case Item.Setter:markup.setter=text;break;case Item.Source:markup.source=text;break;case Item.Text:markup.text=text}})),markup.pos=lexer.pos,markup}}()}}),Wikifier}();!function(){function _verbatimTagHandler(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(match[1]).appendTo(w.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("blockquote")).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,i,destStack=[w.output],curLevel=0,newLevel=w.matchLength;do{if(newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement("blockquote")).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();curLevel=newLevel,w.subWikify(destStack[destStack.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(destStack[destStack.length-1]),this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);(matched=match&&match.index===w.nextMatch)&&(newLevel=match[0].length,w.nextMatch+=match[0].length)}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?".concat(Patterns.macroName,")(?:\\s*)((?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/)|(?://.*\\n)|(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>"),"gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(w){var matchStart=this.lookahead.lastIndex=w.matchStart;if(this.parseTag(w)){var macro,nextMatch=w.nextMatch,name=this.working.name,rawArgs=this.working.arguments;try{if(!(macro=Macro.get(name))){if(Macro.tags.has(name)){var tags=Macro.tags.get(name);return throwError(w.output,"child tag <<".concat(name,">> was found outside of a call to its parent macro").concat(1===tags.length?"":"s"," <<").concat(tags.join(">>, <<"),">>"),w.source.slice(matchStart,w.nextMatch))}return throwError(w.output,"macro <<".concat(name,">> does not exist"),w.source.slice(matchStart,w.nextMatch))}var payload=null;if(void 0!==macro.tags&&!(payload=this.parseBody(w,macro)))return w.nextMatch=nextMatch,throwError(w.output,"cannot find a closing tag for macro <<".concat(name,">>"),"".concat(w.source.slice(matchStart,w.nextMatch),"…"));if("function"!=typeof macro.handler)return throwError(w.output,"macro <<".concat(name,">> handler function ").concat(void 0===macro.handler?"does not exist":"is not a function"),w.source.slice(matchStart,w.nextMatch));var args=payload?payload[0].args:this.createArgs(rawArgs,this.skipArgs(macro,macro.name));if(void 0!==macro._MACRO_API){this.context=new MacroContext({macro:macro,name:name,args:args,payload:payload,source:w.source.slice(matchStart,w.nextMatch),parent:this.context,parser:w});try{macro.handler.call(this.context)}finally{this.context=this.context.parent}}else{var prevRawArgs=w._rawArgs;w._rawArgs=rawArgs;try{macro.handler(w.output,name,args,w,payload)}finally{w._rawArgs=prevRawArgs}}}catch(ex){return throwError(w.output,"cannot execute ".concat(macro&&macro.isWidget?"widget":"macro"," <<").concat(name,">>: ").concat(ex.message),w.source.slice(matchStart,w.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else w.outputText(w.output,w.matchStart,w.nextMatch)},parseTag:function(w){var match=this.lookahead.exec(w.source);return!(!match||match.index!==w.matchStart||!match[1])&&(w.nextMatch=this.lookahead.lastIndex,this.working.source=w.source.slice(match.index,this.lookahead.lastIndex),this.working.name=match[1],this.working.arguments=match[2],this.working.index=match.index,!0)},parseBody:function(w,macro){for(var openTag=this.working.name,closeTag="/".concat(openTag),closeAlt="end".concat(openTag),bodyTags=!!Array.isArray(macro.tags)&&macro.tags,payload=[],end=-1,opened=1,curSource=this.working.source,curTag=this.working.name,curArgument=this.working.arguments,contentStart=w.nextMatch;-1!==(w.matchStart=w.source.indexOf(this.match,w.nextMatch));)if(this.parseTag(w)){var tagSource=this.working.source,tagName=this.working.name,tagArgs=this.working.arguments,tagBegin=this.working.index,tagEnd=w.nextMatch,hasArgs=""!==tagArgs.trim();switch(tagName){case openTag:++opened;break;case closeAlt:case closeTag:if(hasArgs)throw w.nextMatch=tagBegin+2+tagName.length,new Error('malformed closing tag: "'.concat(tagSource,'"'));--opened;break;default:if(hasArgs&&(tagName.startsWith("/")||tagName.startsWith("end"))){this.lookahead.lastIndex=w.nextMatch=tagBegin+2+tagName.length;continue}if(1===opened&&bodyTags)for(var i=0,iend=bodyTags.length;i<iend;++i)tagName===bodyTags[i]&&(payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),curSource=tagSource,curTag=tagName,curArgument=tagArgs,contentStart=tagEnd)}if(0===opened){payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),end=tagEnd;break}}else this.lookahead.lastIndex=w.nextMatch=w.matchStart+this.match.length;return-1!==end?(w.nextMatch=end,payload):null},createArgs:function(rawArgsString,skipArgs){var args=skipArgs?[]:this.parseArgs(rawArgsString);return Object.defineProperties(args,{raw:{value:rawArgsString},full:{value:Scripting.parse(rawArgsString)}}),args},skipArgs:function(macro,tagName){if(void 0!==macro.skipArgs){var sa=macro.skipArgs;return"boolean"==typeof sa&&sa||Array.isArray(sa)&&sa.includes(tagName)}return void 0!==macro.skipArg0&&(macro.skipArg0&&macro.name===tagName)},parseArgs:function(){var Item=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),spaceRe=new RegExp(Patterns.space),notSpaceRe=new RegExp(Patterns.notSpace),varTest=new RegExp("^".concat(Patterns.variable));function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexSpace(lexer){var offset=lexer.source.slice(lexer.pos).search(notSpaceRe);if(offset===EOF)return null;switch(0!==offset&&(lexer.pos+=offset,lexer.ignore()),lexer.next()){case"`":return lexExpression;case'"':return lexDoubleQuote;case"'":return lexSingleQuote;case"[":return lexSquareBracket;default:return lexBareword}}function lexExpression(lexer){return slurpQuote(lexer,"`")===EOF?lexer.error(Item.Error,"unterminated backquote expression"):(lexer.emit(Item.Expression),lexSpace)}function lexDoubleQuote(lexer){return slurpQuote(lexer,'"')===EOF?lexer.error(Item.Error,"unterminated double quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSingleQuote(lexer){return slurpQuote(lexer,"'")===EOF?lexer.error(Item.Error,"unterminated single quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSquareBracket(lexer){var what;if(lexer.accept("<>IiMmGg")?(what="image",lexer.acceptRun("<>IiMmGg")):what="link",!lexer.accept("["))return lexer.error(Item.Error,"malformed ".concat(what," markup"));lexer.depth=2;loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case"[":++lexer.depth;break;case"]":if(--lexer.depth,lexer.depth<0)return lexer.error(Item.Error,"unexpected right square bracket ']'");if(1===lexer.depth){if("]"===lexer.next()){--lexer.depth;break loop}lexer.backup()}}return lexer.emit(Item.SquareBracket),lexSpace}function lexBareword(lexer){var offset=lexer.source.slice(lexer.pos).search(spaceRe);return lexer.pos=offset===EOF?lexer.source.length:lexer.pos+offset,lexer.emit(Item.Bareword),offset===EOF?null:lexSpace}return function(rawArgsString){var lexer=new Lexer(rawArgsString,lexSpace),args=[];return lexer.run().forEach((function(item){var arg=item.text;switch(item.type){case Item.Error:throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(item.message));case Item.Bareword:if(varTest.test(arg))arg=State.getVar(arg);else if(/^(?:settings|setup)[.[]/.test(arg))try{arg=Scripting.evalTwineScript(arg)}catch(ex){throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(ex.message))}else if("null"===arg)arg=null;else if("undefined"===arg)arg=undefined;else if("true"===arg)arg=!0;else if("false"===arg)arg=!1;else if("NaN"===arg)arg=NaN;else{var argAsNum=Number(arg);Number.isNaN(argAsNum)||(arg=argAsNum)}break;case Item.Expression:if(""===(arg=arg.slice(1,-1).trim()))arg=undefined;else try{arg=Scripting.evalTwineScript("(".concat(arg,")"))}catch(ex){throw new Error('unable to parse macro argument expression "'.concat(arg,'": ').concat(ex.message))}break;case Item.String:try{arg=Scripting.evalJavaScript(arg)}catch(ex){throw new Error('unable to parse macro argument string "'.concat(arg,'": ').concat(ex.message))}break;case Item.SquareBracket:var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:arg,matchStart:0});if(markup.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(markup.error));if(markup.pos<arg.length)throw new Error('unable to parse macro argument "'.concat(arg,'": unexpected character(s) "').concat(arg.slice(markup.pos),'" (pos: ').concat(markup.pos,")"));markup.isLink?((arg={isLink:!0}).count=markup.hasOwnProperty("text")?2:1,arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):arg.link,arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null):markup.isImage&&(arg=function(source){var imgObj={source:source,isImage:!0};if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(imgObj.source=passage.text,imgObj.passage=passage.title)}return imgObj}(Wikifier.helpers.evalPassageId(markup.source)),markup.hasOwnProperty("align")&&(arg.align=markup.align),markup.hasOwnProperty("text")&&(arg.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("link")&&(arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link)),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null)}args.push(arg)})),args}}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{w.nextMatch=markup.pos;var link=Wikifier.helpers.evalPassageId(markup.link),text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):link,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,output=(Config.debug?new DebugView(w.output,"link-markup","[[link]]",w.source.slice(w.matchStart,w.nextMatch)):w).output;markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(output,link,text,setFn):Wikifier.createExternalLink(output,link,text)}}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(w){w.outputText(Wikifier.createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{var debugView;w.nextMatch=markup.pos,Config.debug&&(debugView=new DebugView(w.output,"image-markup",markup.hasOwnProperty("link")?"[img[][link]]":"[img[]]",w.source.slice(w.matchStart,w.nextMatch))).modes({block:!0});var source,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,el=(Config.debug?debugView:w).output;if(markup.hasOwnProperty("link")){var link=Wikifier.helpers.evalPassageId(markup.link);(el=markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(el,link,null,setFn):Wikifier.createExternalLink(el,link)).classList.add("link-image")}if(el=jQuery(document.createElement("img")).appendTo(el).get(0),"data:"!==(source=Wikifier.helpers.evalPassageId(markup.source)).slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(el.setAttribute("data-passage",passage.title),source=passage.text.trim())}el.src=source,markup.hasOwnProperty("text")&&(el.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("align")&&(el.align=markup.align)}}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){var pre=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(match[1]).appendTo(pre),pre.appendTo(w.output),w.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(w){switch(w.matchText){case"''":w.subWikify(jQuery(document.createElement("strong")).appendTo(w.output).get(0),"''");break;case"//":w.subWikify(jQuery(document.createElement("em")).appendTo(w.output).get(0),"//");break;case"__":w.subWikify(jQuery(document.createElement("u")).appendTo(w.output).get(0),"__");break;case"^^":w.subWikify(jQuery(document.createElement("sup")).appendTo(w.output).get(0),"\\^\\^");break;case"~~":w.subWikify(jQuery(document.createElement("sub")).appendTo(w.output).get(0),"~~");break;case"==":w.subWikify(jQuery(document.createElement("s")).appendTo(w.output).get(0),"==");break;case"{{{":var lookahead=/\{\{\{((?:.|\n)*?)\}\}\}/gm;lookahead.lastIndex=w.matchStart;var match=lookahead.exec(w.source);match&&match.index===w.matchStart&&(jQuery(document.createElement("code")).text(match[1]).appendTo(w.output),w.nextMatch=lookahead.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(w){var css=Wikifier.helpers.inlineCss(w);this.blockRe.lastIndex=w.nextMatch;var blockMatch=this.blockRe.exec(w.source),blockLevel=blockMatch&&blockMatch.index===w.nextMatch,$el=jQuery(document.createElement(blockLevel?"div":"span")).appendTo(w.output);0===css.classes.length&&""===css.id&&0===Object.keys(css.styles).length?$el.addClass("marked"):(css.classes.forEach((function(className){return $el.addClass(className)})),""!==css.id&&$el.attr("id",css.id),$el.css(css.styles)),blockLevel?(w.nextMatch+=blockMatch[0].length,w.subWikify($el[0],"\\n?".concat(this.terminator))):w.subWikify($el[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(match[1]||match[2]).appendTo(w.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+$\\n?|<[Hh][Rr]\\s*/?>\\n?",handler:function(w){jQuery(document.createElement("hr")).appendTo(w.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(w){jQuery(document.createTextNode("—")).appendTo(w.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(w){jQuery(document.createTextNode("$")).appendTo(w.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:"".concat(Patterns.variable,"(?:(?:\\.").concat(Patterns.identifier,")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\[").concat(Patterns.variable,"\\]))*"),handler:function(w){var result=State.getVar(w.matchText);null==result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"variable",w.matchText,w.matchText):w).output,stringFrom(result))}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?".concat(Patterns.templateName),handler:function(w){var name=w.matchText.slice(1),template=Template.get(name),result=null;switch(template instanceof Array&&(template=template.random()),_typeof(template)){case"function":try{result=stringFrom(template.call({name:name}))}catch(ex){return throwError(w.output,"cannot execute function template ?".concat(name,": ").concat(ex.message),w.source.slice(w.matchStart,w.nextMatch))}break;case"string":result=template}null===result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"template",w.matchText,w.matchText):w).output,result)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("h".concat(w.matchLength))).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,table=jQuery(document.createElement("table")).appendTo(w.output).get(0),prevColumns=[],curRowType=null,$rowContainer=null,rowCount=0;w.nextMatch=w.matchStart;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var nextRowType=match[2];"k"===nextRowType?(table.className=match[1],w.nextMatch+=match[0].length+1):(nextRowType!==curRowType&&(curRowType=nextRowType,$rowContainer=jQuery(document.createElement(this.rowTypes[nextRowType])).appendTo(table)),"c"===curRowType?($rowContainer.css("caption-side",0===rowCount?"top":"bottom"),w.nextMatch+=1,w.subWikify($rowContainer[0],this.rowTerminator)):this.rowHandler(w,jQuery(document.createElement("tr")).appendTo($rowContainer).get(0),prevColumns),++rowCount)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))},rowHandler:function(w,rowEl,prevColumns){var matched,_this12=this,cellRe=new RegExp(this.cellPattern,"gm"),col=0,curColCount=1;do{cellRe.lastIndex=w.nextMatch;var cellMatch=cellRe.exec(w.source);if(matched=cellMatch&&cellMatch.index===w.nextMatch){if("~"===cellMatch[1]){var last=prevColumns[col];last&&(++last.rowCount,last.$element.attr("rowspan",last.rowCount).css("vertical-align","middle")),w.nextMatch=cellMatch.index+cellMatch[0].length-1}else if(">"===cellMatch[1])++curColCount,w.nextMatch=cellMatch.index+cellMatch[0].length-1;else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}!function(){++w.nextMatch;for(var css=Wikifier.helpers.inlineCss(w),spaceLeft=!1,spaceRight=!1,$cell=void 0;" "===w.source.substr(w.nextMatch,1);)spaceLeft=!0,++w.nextMatch;"!"===w.source.substr(w.nextMatch,1)?($cell=jQuery(document.createElement("th")).appendTo(rowEl),++w.nextMatch):$cell=jQuery(document.createElement("td")).appendTo(rowEl),prevColumns[col]={rowCount:1,$element:$cell},curColCount>1&&($cell.attr("colspan",curColCount),curColCount=1),w.subWikify($cell[0],_this12.cellTerminator)," "===w.matchText.substr(w.matchText.length-2,1)&&(spaceRight=!0),css.classes.forEach((function(className){return $cell.addClass(className)})),""!==css.id&&$cell.attr("id",css.id),spaceLeft&&spaceRight?css.styles["text-align"]="center":spaceLeft?css.styles["text-align"]="right":spaceRight&&(css.styles["text-align"]="left"),$cell.css(css.styles),w.nextMatch=w.nextMatch-1}()}++col}}while(matched)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){w.nextMatch=w.matchStart;var matched,i,destStack=[w.output],curType=null,curLevel=0;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var newType=match[2]?"ol":"ul",newLevel=match[0].length;if(w.nextMatch+=match[0].length,newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();else newLevel===curLevel&&newType!==curType&&(destStack.pop(),destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0)));curLevel=newLevel,curType=newType,w.subWikify(jQuery(document.createElement("li")).appendTo(destStack[destStack.length-1]).get(0),this.terminator)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\".concat(Patterns.spaceNoTerminator,"*\\n|\\n").concat(Patterns.spaceNoTerminator,"*\\\\|\\n?\\\\").concat(Patterns.spaceNoTerminator,"*$|^").concat(Patterns.spaceNoTerminator,"*\\\\\\n?"),handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n|<[Bb][Rr]\\s*/?>",handler:function(w){w.options.nobr||jQuery(document.createElement("br")).appendTo(w.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(w){jQuery(document.createDocumentFragment()).append(w.matchText).appendTo(w.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){w.nextMatch=this.lookahead.lastIndex;var css=match[2];this.hasImageMarkup.test(css)&&(this.imageMarkup.lastIndex=0,css=css.replace(this.imageMarkup,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text)}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),jQuery(document.createDocumentFragment()).append(match[1]+css+match[3]).appendTo(w.output)}}}),Wikifier.Parser.add({name:"svgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/<(\/?)[Ss][Vv][Gg][^>]*>/gm,namespace:"http://www.w3.org/2000/svg",handler:function(w){var _this13=this;this.lookahead.lastIndex=w.nextMatch;for(var match,depth=1;depth>0&&null!==(match=this.lookahead.exec(w.source));)depth+="/"===match[1]?-1:1;if(0===depth){w.nextMatch=this.lookahead.lastIndex;var svgTag=w.source.slice(w.matchStart,this.lookahead.lastIndex),$frag=jQuery(document.createDocumentFragment()).append(svgTag);$frag.find("a[data-passage],image[data-passage]").each((function(_,el){var tagName=el.tagName.toLowerCase();try{_this13.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"svg|<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}el.hasAttribute("data-passage")&&_this13.processDataAttributes(el,tagName)})),$frag.appendTo(w.output)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref10){var name=_ref10.name,value=_ref10.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if("image"===tagName)"data:"!==passage.slice(0,5)&&Story.has(passage)&&(passage=Story.get(passage)).tags.includes("Twine.image")&&el.setAttribute("href",passage.text.trim());else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<".concat(Patterns.htmlTagName,"(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>"),tagRe:new RegExp("^<(".concat(Patterns.htmlTagName,")")),mediaTags:["audio","img","source","track","video"],nobrTags:["audio","colgroup","datalist","dl","figure","meter","ol","optgroup","picture","progress","ruby","select","table","tbody","tfoot","thead","tr","ul","video"],voidTags:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(w){var tagMatch=this.tagRe.exec(w.matchText),tag=tagMatch&&tagMatch[1],tagName=tag&&tag.toLowerCase();if(tagName){var terminator,terminatorMatch,isVoid=this.voidTags.includes(tagName)||w.matchText.endsWith("/>"),isNobr=this.nobrTags.includes(tagName);if(!isVoid){terminator="<\\/".concat(tagName,"\\s*>");var terminatorRe=new RegExp(terminator,"gim");terminatorRe.lastIndex=w.matchStart,terminatorMatch=terminatorRe.exec(w.source)}if(!isVoid&&!terminatorMatch)return throwError(w.output,"cannot find a closing tag for HTML <".concat(tag,">"),"".concat(w.matchText,"…"));var debugView,output=w.output,el=document.createElement(w.output.tagName);for(el.innerHTML=w.matchText;el.firstChild;)el=el.firstChild;try{this.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}if(el.hasAttribute("data-passage")&&(this.processDataAttributes(el,tagName),Config.debug&&((debugView=new DebugView(w.output,"html-".concat(tagName),tagName,w.matchText)).modes({block:"img"===tagName,nonvoid:terminatorMatch}),output=debugView.output)),terminatorMatch){try{Wikifier.Option.push({nobr:isNobr}),w.subWikify(el,terminator,{ignoreTerminatorCase:!0})}finally{Wikifier.Option.pop()}debugView&&jQuery(el).find(".debug.block").length>0&&debugView.modes({block:!0})}output.appendChild("track"===tagName?el.cloneNode(!0):el)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref11){var name=_ref11.name,value=_ref11.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if(this.mediaTags.includes(tagName)){if("data:"!==passage.slice(0,5)&&Story.has(passage)){var parentName,twineTag;switch(passage=Story.get(passage),tagName){case"audio":case"video":twineTag="Twine.".concat(tagName);break;case"img":twineTag="Twine.image";break;case"track":twineTag="Twine.vtt";break;case"source":var $parent=$(el).closest("audio,picture,video");$parent.length&&(parentName=$parent.get(0).tagName.toLowerCase(),twineTag="Twine.".concat("picture"===parentName?"image":parentName))}passage.tags.includes(twineTag)&&(el["picture"===parentName?"srcset":"src"]=passage.text.trim())}}else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}})}();var Template=(_templates=new Map,_validNameRe=new RegExp("^(?:".concat(Patterns.templateName,")$")),_validType=function(template){var templateType=_typeof(template);return"function"===templateType||"string"===templateType},Object.freeze(Object.defineProperties({},{add:{value:function(name,template){if(!(_validType(template)||template instanceof Array&&template.length>0&&template.every(_validType)))throw new TypeError("invalid template type (".concat(name,"); templates must be: functions, strings, or an array of either"));(name instanceof Array?name:[name]).forEach((function(name){if(!_validNameRe.test(name))throw new Error('invalid template name "'.concat(name,'"'));if(_templates.has(name))throw new Error("cannot clobber existing template ?".concat(name));_templates.set(name,template)}))}},delete:{value:function(name){(name instanceof Array?name:[name]).forEach((function(name){return _templates.delete(name)}))}},get:{value:function(name){return _templates.has(name)?_templates.get(name):null}},has:{value:function(name){return _templates.has(name)}},size:{get:function(){return _templates.size}}}))),_templates,_validNameRe,_validType,Macro=function(){var _macros={},_tags={},_validNameRe=new RegExp("^(?:".concat(Patterns.macroName,")$"));function macrosHas(name){return _macros.hasOwnProperty(name)}function tagsRegister(parent,bodyTags){if(!parent)throw new Error("no parent specified");for(var endTags=["/".concat(parent),"end".concat(parent)],allTags=[].concat(endTags,Array.isArray(bodyTags)?bodyTags:[]),i=0;i<allTags.length;++i){var tag=allTags[i];if(macrosHas(tag))throw new Error("cannot register tag for an existing macro");tagsHas(tag)?_tags[tag].includes(parent)||(_tags[tag].push(parent),_tags[tag].sort()):_tags[tag]=[parent]}}function tagsUnregister(parent){if(!parent)throw new Error("no parent specified");Object.keys(_tags).forEach((function(tag){var i=_tags[tag].indexOf(parent);-1!==i&&(1===_tags[tag].length?delete _tags[tag]:_tags[tag].splice(i,1))}))}function tagsHas(name){return _tags.hasOwnProperty(name)}return Object.freeze(Object.defineProperties({},{add:{value:function macrosAdd(name,def){if(Array.isArray(name))name.forEach((function(name){return macrosAdd(name,def)}));else{if(!_validNameRe.test(name))throw new Error('invalid macro name "'.concat(name,'"'));if(macrosHas(name))throw new Error("cannot clobber existing macro <<".concat(name,">>"));if(tagsHas(name))throw new Error("cannot clobber child tag <<".concat(name,">> of parent macro").concat(1===_tags[name].length?"":"s"," <<").concat(_tags[name].join(">>, <<"),">>"));try{if("object"===_typeof(def))_macros[name]=Object.assign(Object.create(null),def,{_MACRO_API:!0});else{if(!macrosHas(def))throw new Error("cannot create alias of nonexistent macro <<".concat(def,">>"));_macros[name]=Object.create(_macros[def],{_ALIAS_OF:{enumerable:!0,value:def}})}Object.defineProperty(_macros,name,{writable:!1})}catch(ex){throw"TypeError"===ex.name?new Error("cannot clobber protected macro <<".concat(name,">>")):new Error("unknown error when attempting to add macro <<".concat(name,">>: [").concat(ex.name,"] ").concat(ex.message))}if(void 0!==_macros[name].tags)if(null==_macros[name].tags)tagsRegister(name);else{if(!Array.isArray(_macros[name].tags))throw new Error('bad value for "tags" property of macro <<'.concat(name,">>"));tagsRegister(name,_macros[name].tags)}}}},delete:{value:function macrosDelete(name){if(Array.isArray(name))name.forEach((function(name){return macrosDelete(name)}));else if(macrosHas(name)){void 0!==_macros[name].tags&&tagsUnregister(name);try{Object.defineProperty(_macros,name,{writable:!0}),delete _macros[name]}catch(ex){throw new Error("unknown error removing macro <<".concat(name,">>: ").concat(ex.message))}}else if(tagsHas(name))throw new Error("cannot remove child tag <<".concat(name,">> of parent macro <<").concat(_tags[name],">>"))}},isEmpty:{value:function(){return 0===Object.keys(_macros).length}},has:{value:macrosHas},get:{value:function(name){var macro=null;return macrosHas(name)&&"function"==typeof _macros[name].handler?macro=_macros[name]:macros.hasOwnProperty(name)&&"function"==typeof macros[name].handler&&(macro=macros[name]),macro}},init:{value:function(){var handler=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(_macros).forEach((function(name){"function"==typeof _macros[name][handler]&&_macros[name][handler](name)})),Object.keys(macros).forEach((function(name){"function"==typeof macros[name][handler]&&macros[name][handler](name)}))}},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:tagsRegister},unregister:{value:tagsUnregister},has:{value:tagsHas},get:{value:function(name){return tagsHas(name)?_tags[name]:null}}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var MacroContext=function(){function MacroContext(contextData){_classCallCheck(this,MacroContext);var context=Object.assign({parent:null,macro:null,name:"",displayName:"",args:null,payload:null,parser:null,source:""},contextData);if(null===context.macro||""===context.name||null===context.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:context.macro},name:{value:void 0===context.macro._ALIAS_OF?context.name:context.macro._ALIAS_OF},displayName:{value:context.name},args:{value:context.args},payload:{value:context.payload},source:{value:context.source},parent:{value:context.parent},parser:{value:context.parser},_output:{value:context.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(MacroContext,[{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return _toConsumableArray(this._shadows)}},{key:"shadowView",get:function(){var view=new Set;return this.contextSelectAll((function(ctx){return ctx._shadows})).forEach((function(ctx){return ctx._shadows.forEach((function(name){return view.add(name)}))})),_toConsumableArray(view)}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}},{key:"contextHas",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return!0;return!1}},{key:"contextSelect",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return context;return null}},{key:"contextSelectAll",value:function(filter){for(var result=[],context=this;null!==(context=context.parent);)filter(context)&&result.push(context);return result}},{key:"addShadow",value:function(){var _this14=this;this._shadows||(this._shadows=new Set);for(var varRe=new RegExp("^".concat(Patterns.variable,"$")),_len14=arguments.length,names=new Array(_len14),_key14=0;_key14<_len14;_key14++)names[_key14]=arguments[_key14];names.flat(1/0).forEach((function(name){if("string"!=typeof name)throw new TypeError("variable name must be a string; type: ".concat(_typeof(name)));if(!varRe.test(name))throw new Error('invalid variable name "'.concat(name,'"'));_this14._shadows.add(name)}))}},{key:"createShadowWrapper",value:function(callback,doneCallback,startCallback){var shadowStore,shadowContext=this;return"function"==typeof callback&&(shadowStore={},this.shadowView.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]}))),function(){for(var _len15=arguments.length,args=new Array(_len15),_key15=0;_key15<_len15;_key15++)args[_key15]=arguments[_key15];if("function"==typeof startCallback&&startCallback.apply(this,args),"function"==typeof callback){var contextCache,shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null,macroParser=Wikifier.Parser.get("macro");try{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),contextCache=macroParser.context,macroParser.context=shadowContext,callback.apply(this,args)}finally{contextCache!==undefined&&(macroParser.context=contextCache),shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}"function"==typeof doneCallback&&doneCallback.apply(this,args)}}},{key:"createDebugView",value:function(name,title){return this._debugView=new DebugView(this._output,"macro",name||this.displayName,title||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(message,source){return throwError(this._output,"<<".concat(this.displayName,">>: ").concat(message),source||this.source)}}]),MacroContext}();return MacroContext}();!function(){if(Macro.add("capture",{skipArgs:!0,tags:null,tsVarRe:new RegExp("(".concat(Patterns.variable,")"),"g"),handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var valueCache={};try{for(var match,tsVarRe=this.self.tsVarRe;null!==(match=tsVarRe.exec(this.args.raw));){var varName=match[1],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),this.addShadow(varName)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,jsVarRe:new RegExp("State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var match,jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var store=State[match[1]],name=match[2];store.hasOwnProperty(name)&&delete store[name]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}for(var match,remember=storage.get("remember")||{},jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];remember[name]=State.variables[name]}if(!storage.set("remember",remember))return this.error("unknown error, cannot remember: ".concat(this.args.raw));Config.debug&&this.debugView.modes({hidden:!0})},init:function(){var remember=storage.get("remember");remember&&Object.keys(remember).forEach((function(name){return State.variables[name]=remember[name]}))}}),Macro.add("forget",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var match,remember=storage.get("remember"),jsVarRe=this.self.jsVarRe,needStore=!1;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];State.variables.hasOwnProperty(name)&&delete State.variables[name],remember&&remember.hasOwnProperty(name)&&(needStore=!0,delete remember[name])}if(needStore)if(0===Object.keys(remember).length){if(!storage.delete("remember"))return this.error("unknown error, cannot update remember store")}else if(!storage.set("remember",remember))return this.error("unknown error, cannot update remember store");Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var output=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,output)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.createDebugView(),output.hasChildNodes()&&this.output.appendChild(output)}}),Macro.add("include",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?(Config.debug&&this.debugView.modes({block:!0}),passage=Story.get(passage),void(this.args[1]?jQuery(document.createElement(this.args[1])).addClass("".concat(passage.domId," macro-").concat(this.name)).attr("data-passage",passage.title).appendTo(this.output):jQuery(this.output)).wiki(passage.processText())):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var result=stringFrom(Scripting.evalJavaScript(this.args.full));null!==result&&new Wikifier(this.output,"-"===this.name?Util.escape(result):result)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var frag=document.createDocumentFragment();if(new Wikifier(frag,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({block:!0,hidden:!0}),this.output.appendChild(frag);else{var errList=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent}));if(errList.length>0)return this.error("error".concat(1===errList.length?"":"s"," within contents (").concat(errList.join("; "),")"))}}}),Macro.add("type",{isAsync:!0,tags:null,typeId:0,handler:function(){if(0===this.args.length)return this.error("no speed specified");var cursor,speed=Util.fromCssTime(this.args[0]);if(speed<0)return this.error("speed time value must be non-negative (received: ".concat(this.args[0],")"));for(var elClass="",elId="",elTag="div",skipKey=Config.macros.typeSkipKey,start=400,options=this.args.slice(1);options.length>0;){var option=options.shift();switch(option){case"class":if(0===options.length)return this.error("class option missing required class name(s)");if(""===(elClass=options.shift()))throw new Error('class option class name(s) must be non-empty (received: "")');break;case"element":if(0===options.length)return this.error("element option missing required element tag name");if(""===(elTag=options.shift()))throw new Error('element option tag name must be non-empty (received: "")');break;case"id":if(0===options.length)return this.error("id option missing required ID");if(""===(elId=options.shift()))throw new Error('id option ID must be non-empty (received: "")');break;case"keep":cursor="keep";break;case"none":cursor="none";break;case"skipkey":if(0===options.length)return this.error("skipkey option missing required key value");if(""===(skipKey=options.shift()))throw new Error('skipkey option key value must be non-empty (received: "")');break;case"start":if(0===options.length)return this.error("start option missing required time value");var value=options.shift();if((start=Util.fromCssTime(value))<0)throw new Error("start option time value must be non-negative (received: ".concat(value,")"));break;default:return this.error("unknown option: ".concat(option))}}var contents=this.payload[0].contents;if(""!==contents.trim()){Config.debug&&this.debugView.modes({block:!0});var className="macro-".concat(this.name),namespace=".".concat(className),$target=jQuery(document.createElement(elTag)).addClass("".concat(className," ").concat(className,"-target")).appendTo(this.output);TempState.macroTypeQueue||(TempState.macroTypeQueue=[],$(document).off(namespace).one(":passageinit".concat(namespace),(function(){return $(document).off(namespace)})));var startTyping=0===TempState.macroTypeQueue.length,selfId=++this.self.typeId;TempState.macroTypeQueue.push({id:selfId,handler:function(){var $wrapper=jQuery(document.createElement(elTag)).addClass(className);elId&&$wrapper.attr("id",elId),elClass&&$wrapper.addClass(elClass),new Wikifier($wrapper,contents);var passage=State.passage,turn=State.turns;if(!Config.macros.typeVisitedPassages&&State.passages.slice(0,-1).some((function(title){return title===passage}))||$wrapper.find(".error").length>0)return $target.replaceWith($wrapper),TempState.macroTypeQueue.shift(),void(TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().handler());var typer=new NodeTyper({targetNode:$wrapper.get(0),classNames:"none"===cursor?null:"".concat(className,"-cursor")});$target.replaceWith($wrapper);var keydownAndNS="keydown".concat(namespace),typingStopAndNS="".concat(":typingstop").concat(namespace);$(document).off(keydownAndNS).on(keydownAndNS,(function(ev){Util.scrubEventKey(ev.key)!==skipKey||ev.target!==document.body&&ev.target!==document.documentElement||(ev.preventDefault(),$(document).off(keydownAndNS),typer.finish())})).one(typingStopAndNS,(function(){TempState.macroTypeQueue&&(0===TempState.macroTypeQueue.length?jQuery.event.trigger(":typingcomplete"):TempState.macroTypeQueue.first().handler())}));var typeNode=function(){var typeNodeMember=function(typeIntervalId){State.passage===passage&&State.turns===turn&&typer.type()||(typeIntervalId&&clearInterval(typeIntervalId),TempState.macroTypeQueue&&TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().id===selfId&&TempState.macroTypeQueue.shift(),$wrapper.trigger(":typingstop"),$wrapper.addClass("".concat(className,"-done")),"keep"===cursor&&$wrapper.addClass("".concat(className,"-cursor")))};$wrapper.trigger(":typingstart"),typeNodeMember();var typeNodeMemberId=setInterval((function(){return typeNodeMember(typeNodeMemberId)}),speed)};start?setTimeout(typeNode,start):typeNode()}}),startTyping&&(Engine.isPlaying()?$(document).one(":passageend".concat(namespace),(function(){return TempState.macroTypeQueue.first().handler()})):TempState.macroTypeQueue.first().handler())}}}),Macro.add("display","include"),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],elseifWsRe:/^\s*if\b/i,ifAssignRe:/[^!=&^|<>*/%+-]=[^=>]/,handler:function(){var i;try{var len=this.payload.length,elseifWsRe=this.self.elseifWsRe,ifAssignRe=this.self.ifAssignRe;for(i=0;i<len;++i)if("else"===this.payload[i].name){if(this.payload[i].args.raw.length>0)return elseifWsRe.test(this.payload[i].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'.concat(i>0?" (#"+i+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<else>> must be the final clause")}else{if(0===this.payload[i].args.full.length)return this.error("no conditional expression specified for <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""));if(Config.macros.ifAssignmentError&&ifAssignRe.test(this.payload[i].args.full))return this.error("assignment operator found within <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""," (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: ").concat(this.payload[i].args.raw))}var evalJavaScript=Scripting.evalJavaScript,success=!1;for(i=0;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"else"===this.payload[i].name||evalJavaScript(this.payload[i].args.full)){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!success,invalid:!success})}}catch(ex){return this.error("bad conditional expression in <<".concat(0===i?"if":"elseif",">> clause").concat(i>0?" (#"+i+")":"",": ").concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var i,result,len=this.payload.length;if(1===len)return this.error("no cases specified");for(i=1;i<len;++i)if("default"===this.payload[i].name){if(this.payload[i].args.length>0)return this.error("<<default>> does not accept values, invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<default>> must be the final case")}else if(0===this.payload[i].args.length)return this.error("no value(s) specified for <<".concat(this.payload[i].name,">> (#").concat(i,")"));try{result=Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}var debugView=this.debugView,success=!1;for(Config.debug&&debugView.modes({nonvoid:!1,hidden:!0}),i=1;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"default"===this.payload[i].name||this.payload[i].args.some((function(val){return val===result}))){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});debugView.modes({nonvoid:!1,hidden:!0,invalid:!success}),this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0,invalid:!success})}}}),Macro.add("for",{skipArgs:!0,tags:null,hasRangeRe:new RegExp("^\\S".concat(Patterns.anyChar,"*?\\s+range\\s+\\S").concat(Patterns.anyChar,"*?$")),rangeRe:new RegExp("^(?:State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")\\s*,\\s*)?State\\.(variables|temporary)\\.(").concat(Patterns.identifier,")\\s+range\\s+(\\S").concat(Patterns.anyChar,"*?)$")),threePartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,forInRe:/^\S+\s+in\s+\S+/i,forOfRe:/^\S+\s+of\s+\S+/i,handler:function(){var argsStr=this.args.full.trim(),payload=this.payload[0].contents.replace(/\n$/,"");if(0===argsStr.length)this.self.handleFor.call(this,payload,null,!0,null);else if(this.self.hasRangeRe.test(argsStr)){var parts=argsStr.match(this.self.rangeRe);if(null===parts)return this.error("invalid range form syntax, format: [index ,] value range collection");this.self.handleForRange.call(this,payload,{type:parts[1],name:parts[2]},{type:parts[3],name:parts[4]},parts[5])}else{var init,condition,post;if(-1===argsStr.indexOf(";")){if(this.self.forInRe.test(argsStr))return this.error("invalid syntax, for…in is not supported; see: for…range");if(this.self.forOfRe.test(argsStr))return this.error("invalid syntax, for…of is not supported; see: for…range");condition=argsStr}else{var _parts=argsStr.match(this.self.threePartRe);if(null===_parts)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");init=_parts[1],condition=_parts[2].trim(),post=_parts[3],0===condition.length&&(condition=!0)}this.self.handleFor.call(this,payload,init,condition,post)}},handleFor:function(payload,init,condition,post){var evalJavaScript=Scripting.evalJavaScript,first=!0,safety=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,init)try{evalJavaScript(init)}catch(ex){return this.error("bad init expression: ".concat("object"===_typeof(ex)?ex.message:ex))}for(;evalJavaScript(condition);){if(--safety<0)return this.error("exceeded configured maximum loop iterations (".concat(Config.macros.maxLoopIterations,")"));if(new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(post)try{evalJavaScript(post)}catch(ex){return this.error("bad post expression: ".concat("object"===_typeof(ex)?ex.message:ex))}}}catch(ex){return this.error("bad conditional expression: ".concat("object"===_typeof(ex)?ex.message:ex))}finally{TempState.break=null}},handleForRange:function(payload,indexVar,valueVar,rangeExp){var rangeList,first=!0;try{rangeList=this.self.toRangeList(rangeExp)}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});try{TempState.break=null;for(var i=0;i<rangeList.length;++i)if(indexVar.name&&(State[indexVar.type][indexVar.name]=rangeList[i][0]),State[valueVar.type][valueVar.name]=rangeList[i][1],new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}catch(ex){return this.error("object"===_typeof(ex)?ex.message:ex)}finally{TempState.break=null}},toRangeList:function(rangeExp){var value,list,evalJavaScript=Scripting.evalJavaScript;try{value=evalJavaScript("{"===rangeExp[0]?"(".concat(rangeExp,")"):rangeExp)}catch(ex){if("object"!==_typeof(ex))throw new Error("bad range expression: ".concat(ex));throw ex.message="bad range expression: ".concat(ex.message),ex}switch(_typeof(value)){case"string":list=[];for(var i=0;i<value.length;){var obj=Util.charAndPosAt(value,i);list.push([i,obj.char]),i=1+obj.end}break;case"object":if(Array.isArray(value))list=value.map((function(val,i){return[i,val]}));else if(value instanceof Set)list=_toConsumableArray(value).map((function(val,i){return[i,val]}));else if(value instanceof Map)list=_toConsumableArray(value.entries());else{if("Object"!==Util.toStringTag(value))throw new Error("unsupported range expression type: ".concat(Util.toStringTag(value)));list=Object.keys(value).map((function(key){return[key,value[key]]}))}break;default:throw new Error("unsupported range expression type: ".concat(_typeof(value)))}return list}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextHas((function(ctx){return"for"===ctx.name})))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var _this15=this;if(0===this.args.length)return this.error("no ".concat("button"===this.name?"button":"link"," text specified"));var passage,$link=jQuery(document.createElement("button"===this.name?"button":"a"));if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var $image=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo($link);$link.addClass("link-image"),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link}else $link.append(document.createTextNode(this.args[0].text)),passage=this.args[0].link;else $link.wikiWithOptions({profile:"core"},this.args[0]),passage=this.args.length>1?this.args[1]:undefined;null!=passage?($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken")):$link.addClass("link-internal"),$link.addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:null!=passage?"link":"button",one:null!=passage},this.createShadowWrapper(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(_this15.payload[0].contents.trim())}:null,null!=passage?function(){return Engine.play(passage)}:null)).appendTo(this.output)}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("unchecked value"),this.args.length<3&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),uncheckValue=this.args[1],checkValue=this.args[2],el=document.createElement("input");switch(jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:"checkbox",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.checked?checkValue:uncheckValue)}))).appendTo(this.output),this.args[3]){case"autocheck":State.getVar(varName)===checkValue?el.checked=!0:State.setVar(varName,uncheckValue);break;case"checked":el.checked=!0,State.setVar(varName,checkValue);break;default:State.setVar(varName,uncheckValue)}}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var _this16=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),len=this.payload.length;if(1===len)return this.error("no options specified");for(var config={autoselect:!1,once:!1},i=1;i<this.args.length;++i){var arg=this.args[i];switch(arg){case"once":config.once=!0;break;case"autoselect":config.autoselect=!0;break;default:return this.error("unknown argument: ".concat(arg))}}for(var options=[],tagCount={option:0,optionsfrom:0},selectedIdx=-1,_i5=1;_i5<len;++_i5){var payload=this.payload[_i5];if("option"===payload.name){if(++tagCount.option,0===payload.args.length)return this.error("no arguments specified for <<".concat(payload.name,">> (#").concat(tagCount.option,")"));var option={label:String(payload.args[0])},isSelected=!1;switch(payload.args.length){case 1:option.value=payload.args[0];break;case 2:"selected"===payload.args[1]?(option.value=payload.args[0],isSelected=!0):option.value=payload.args[1];break;default:option.value=payload.args[1],"selected"===payload.args[2]&&(isSelected=!0)}if(options.push(option),isSelected){if(config.autoselect)return this.error("cannot specify both the autoselect and selected keywords");if(-1!==selectedIdx)return this.error("multiple selected keywords specified for <<".concat(payload.name,">> (#").concat(selectedIdx+1," & #").concat(tagCount.option,")"));selectedIdx=options.length-1}}else{var _ret=function(){if(++tagCount.optionsfrom,0===payload.args.full.length)return{v:_this16.error("no expression specified for <<".concat(payload.name,">> (#").concat(tagCount.optionsfrom,")"))};var result=void 0;try{var exp=payload.args.full;result=Scripting.evalJavaScript("{"===exp[0]?"(".concat(exp,")"):exp)}catch(ex){return{v:_this16.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}if("object"!==_typeof(result)||null===result)return{v:_this16.error("expression must yield a supported collection or generic object (type: ".concat(null===result?"null":_typeof(result),")"))};if(result instanceof Array||result instanceof Set)result.forEach((function(val){return options.push({label:String(val),value:val})}));else if(result instanceof Map)result.forEach((function(val,key){return options.push({label:String(key),value:val})}));else{var oType=Util.toStringTag(result);if("Object"!==oType)return{v:_this16.error("expression must yield a supported collection or generic object (object type: ".concat(oType,")"))};Object.keys(result).forEach((function(key){return options.push({label:key,value:result[key]})}))}}();if("object"===_typeof(_ret))return _ret.v}}if(-1===selectedIdx)if(config.autoselect){var sameValueZero=Util.sameValueZero,curValue=State.getVar(varName),curValueIdx=options.findIndex((function(opt){return sameValueZero(opt.value,curValue)}));selectedIdx=-1===curValueIdx?0:curValueIdx}else selectedIdx=0;if("cycle"===this.name){var lastIdx=options.length-1;if(config.once&&selectedIdx===lastIdx)jQuery(this.output).wikiWithOptions({profile:"core"},options[selectedIdx].label);else{var cycleIdx=selectedIdx;jQuery(document.createElement("a")).wikiWithOptions({profile:"core"},options[selectedIdx].label).attr("id","".concat(this.name,"-").concat(varId)).addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:"button"},this.createShadowWrapper((function(){var $this=$(this);cycleIdx=(cycleIdx+1)%options.length,State.setVar(varName,options[cycleIdx].value),$this.empty().wikiWithOptions({profile:"core"},options[cycleIdx].label),config.once&&cycleIdx===lastIdx&&$this.off().contents().unwrap()}))).appendTo(this.output)}}else{var $select=jQuery(document.createElement("select"));options.forEach((function(opt,i){jQuery(document.createElement("option")).val(i).text(opt.label).appendTo($select)})),$select.attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),tabindex:0}).addClass("macro-".concat(this.name)).val(selectedIdx).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,options[Number(this.value)].value)}))).appendTo(this.output)}State.setVar(varName,options[selectedIdx].value)}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this17=this;if(0===this.args.length)return this.error("no link text specified");var $link=jQuery(document.createElement("a")),$insert=jQuery(document.createElement("span")),transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]);$link.wikiWithOptions({profile:"core"},this.args[0]).addClass("link-internal macro-".concat(this.name)).ariaClick({namespace:".macros",one:!0},this.createShadowWrapper((function(){if("linkreplace"===_this17.name?$link.remove():$link.wrap('<span class="macro-'.concat(_this17.name,'"></span>')).replaceWith((function(){return $link.html()})),""!==_this17.payload[0].contents){var frag=document.createDocumentFragment();new Wikifier(frag,_this17.payload[0].contents),$insert.append(frag)}transition&&setTimeout((function(){return $insert.removeClass("macro-".concat(_this17.name,"-in"))}),Engine.minDomActionDelay)}))).appendTo(this.output),$insert.addClass("macro-".concat(this.name,"-insert")),transition&&$insert.addClass("macro-".concat(this.name,"-in")),"linkprepend"===this.name?$insert.insertBefore($link):$insert.insertAfter($link)}}),Macro.add(["numberbox","textbox"],{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var asNumber="numberbox"===this.name,defaultValue=asNumber?Number(this.args[1]):this.args[1];if(asNumber&&Number.isNaN(defaultValue))return this.error('default value "'.concat(this.args[1],'" is neither a number nor can it be parsed into a number'));var passage,varId=Util.slugify(varName),el=document.createElement("input"),autofocus=!1;this.args.length>3?(passage=this.args[2],autofocus="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?autofocus=!0:passage=this.args[2]),"object"===_typeof(passage)&&(passage=passage.link),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:asNumber?"number":"text",inputmode:asNumber?"decimal":"text",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,asNumber?Number(this.value):this.value)}))).on("keypress.macros",this.createShadowWrapper((function(ev){13===ev.which&&(ev.preventDefault(),State.setVar(varName,asNumber?Number(this.value):this.value),null!=passage&&Engine.play(passage))}))).appendTo(this.output),asNumber&&(el.step="any"),State.setVar(varName,defaultValue),el.value=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),checkValue=this.args[1],el=document.createElement("input");switch(TempState.hasOwnProperty(this.name)||(TempState[this.name]={}),TempState[this.name].hasOwnProperty(varId)||(TempState[this.name][varId]=0),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId,"-").concat(TempState[this.name][varId]++),name:"".concat(this.name,"-").concat(varId),type:"radio",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){this.checked&&State.setVar(varName,checkValue)}))).appendTo(this.output),this.args[2]){case"autocheck":State.getVar(varName)===checkValue&&(el.checked=!0);break;case"checked":el.checked=!0,State.setVar(varName,checkValue)}}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var varId=Util.slugify(varName),defaultValue=this.args[1],autofocus="autofocus"===this.args[2],el=document.createElement("textarea");jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),rows:4,tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.value)}))).appendTo(this.output),State.setVar(varName,defaultValue),el.textContent=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("click","link"),Macro.add("actions",{handler:function(){for(var $list=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),i=0;i<this.args.length;++i){var passage=void 0,text=void 0,$image=void 0,setFn=void 0;if("object"===_typeof(this.args[i])?this.args[i].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[i].source),this.args[i].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[i].passage),this.args[i].hasOwnProperty("title")&&$image.attr("title",this.args[i].title),this.args[i].hasOwnProperty("align")&&$image.attr("align",this.args[i].align),passage=this.args[i].link,setFn=this.args[i].setFn):(text=this.args[i].text,passage=this.args[i].link,setFn=this.args[i].setFn):text=passage=this.args[i],!(State.variables.hasOwnProperty("#actions")&&State.variables["#actions"].hasOwnProperty(passage)&&State.variables["#actions"][passage])){var $link=jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo($list),passage,null,function(passage,fn){return function(){State.variables.hasOwnProperty("#actions")||(State.variables["#actions"]={}),State.variables["#actions"][passage]=!0,"function"==typeof fn&&fn()}}(passage,setFn))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text));$image&&$link.addClass("link-image")}}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var passage,text,$image,$link,momentIndex=-1;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(passage=this.args[0].link)):(1===this.args[0].count||(text=this.args[0].text),passage=this.args[0].link):1===this.args.length&&(text=this.args[0])),null==passage){for(var i=State.length-2;i>=0;--i)if(State.history[i].title!==State.passage){momentIndex=i,passage=State.history[i].title;break}if(null==passage&&"return"===this.name)for(var _i6=State.expired.length-1;_i6>=0;--_i6)if(State.expired[_i6]!==State.passage){passage=State.expired[_i6];break}}else{if(!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));if("back"===this.name){for(var _i7=State.length-2;_i7>=0;--_i7)if(State.history[_i7].title===passage){momentIndex=_i7;break}if(-1===momentIndex)return this.error('cannot find passage "'.concat(passage,'" in the current story history'))}}if(null==passage)return this.error("cannot find passage");"back"!==this.name||-1!==momentIndex?($link=jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(passage)}:function(){return Engine.goTo(momentIndex)}),$image&&$link.addClass("link-image")):$link=jQuery(document.createElement("span")).addClass("link-disabled"),$link.addClass("macro-".concat(this.name)).append($image||document.createTextNode(text||L10n.get("macro".concat(this.name.toUpperFirst(),"Text")))).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var passage,text,$image,setFn,$link,choiceId=State.passage;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link,setFn=this.args[0].setFn):(text=this.args[0].text,passage=this.args[0].link,setFn=this.args[0].setFn):text=passage=this.args[0]:(passage=this.args[0],text=this.args[1]),State.variables.hasOwnProperty("#choice")&&State.variables["#choice"].hasOwnProperty(choiceId)&&State.variables["#choice"][choiceId])return $link=jQuery(document.createElement("span")).addClass("link-disabled macro-".concat(this.name)).attr("tabindex",-1).append($image||document.createTextNode(text)).appendTo(this.output),void($image&&$link.addClass("link-image"));$link=jQuery(Wikifier.createInternalLink(this.output,passage,null,(function(){State.variables.hasOwnProperty("#choice")||(State.variables["#choice"]={}),State.variables["#choice"][choiceId]=!0,"function"==typeof setFn&&setFn()}))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text)),$image&&$link.addClass("link-image")}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("selector"),this.args.length<2&&errors.push("class names"),this.error("no ".concat(errors.join(" or ")," specified"))}var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));switch(this.name){case"addclass":$targets.addClass(this.args[1].trim());break;case"toggleclass":$targets.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));this.args.length>1?$targets.removeClass(this.args[1].trim()):$targets.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));jQuery(this.output).append($targets.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this18=this;if(0===this.args.length)return this.error("no selector specified");var $insert,$targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));if(""!==this.payload[0].contents)switch(this.args.length>1&&this.self.t8nRe.test(this.args[1])?(($insert=jQuery(document.createElement("span"))).addClass("macro-".concat(this.name,"-insert macro-").concat(this.name,"-in")),setTimeout((function(){return $insert.removeClass("macro-".concat(_this18.name,"-in"))}),Engine.minDomActionDelay)):$insert=jQuery(document.createDocumentFragment()),$insert.wiki(this.payload[0].contents),this.name){case"replace":$targets.empty();case"append":$targets.append($insert);break;case"prepend":$targets.prepend($insert)}else"replace"===this.name&&$targets.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));$targets.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Has.audio){var errorOnePlaybackAction=function(cur,prev){return'only one playback action allowed per invocation, "'.concat(cur,'" cannot be combined with "').concat(prev,'"')};Macro.add("audio",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track and/or group IDs"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var selected;try{selected=SimpleAudio.select(this.args[0])}catch(ex){return this.error(ex.message)}for(var action,fadeTo,loop,mute,passage,time,volume,args=this.args.slice(1),fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors=[];return args.length<1&&_errors.push("seconds"),args.length<2&&_errors.push("level"),this.error("fadeoverto missing required ".concat(_errors.join(" and ")," value").concat(_errors.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"time":if(0===args.length)return this.error("time missing required seconds value");if(raw=args.shift(),time=Number.parseFloat(raw),Number.isNaN(time)||!Number.isFinite(time))return this.error("cannot parse time: ".concat(raw));break;case"loop":case"unloop":loop="loop"===arg;break;case"goto":if(0===args.length)return this.error("goto missing required passage title");if(raw=args.shift(),passage="object"===_typeof(raw)?raw.link:raw,!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));break;default:return this.error("unknown action: ".concat(arg))}}try{if(null!=volume&&selected.volume(volume),null!=time&&selected.time(time),null!=mute&&selected.mute(mute),null!=loop&&selected.loop(loop),null!=passage){var nsEnded="ended.macros.macro-".concat(this.name,"_goto");selected.off(nsEnded).one(nsEnded,(function(){selected.off(nsEnded),Engine.play(passage)}))}switch(action){case"fade":selected.fade(fadeOver,fadeTo);break;case"load":selected.load();break;case"pause":selected.pause();break;case"play":selected.playWhenAllowed();break;case"stop":selected.stop();break;case"unload":selected.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("cacheaudio",{handler:function(){var _this19=this;if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track ID"),this.args.length<2&&errors.push("sources"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim(),oldFmtRe=/^format:\s*([\w-]+)\s*;\s*/i;try{SimpleAudio.tracks.add(id,this.args.slice(1).map((function(source){if(oldFmtRe.test(source)){if(Config.debug)return _this19.error('track ID "'.concat(id,'": format specifier migration required, "format:formatId;" → "formatId|"'));source=source.replace(oldFmtRe,"$1|")}return source})))}catch(ex){return this.error(ex.message)}if(Config.debug&&!SimpleAudio.tracks.get(id).hasSource())return this.error('track ID "'.concat(id,'": no supported audio sources found'));Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var groupId=String(this.args[0]).trim(),trackIds=[],i=1,len=this.payload.length;i<len;++i){if(this.payload[i].args.length<1)return this.error("no track ID specified");trackIds.push(String(this.payload[i].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(groupId,trackIds)}catch(ex){return this.error(ex.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");var playlist=Macro.get("playlist");if(null!==playlist.from&&"createplaylist"!==playlist.from)return this.error("a playlist has already been defined with <<setplaylist>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var listId=String(this.args[0]).trim(),trackObjs=[],i=1,len=this.payload.length;i<len;++i){if(0===this.payload[i].args.length)return this.error("no track ID specified");for(var trackObj={id:String(this.payload[i].args[0]).trim()},args=this.payload[i].args.slice(1);args.length>0;){var arg=args.shift(),raw=void 0,parsed=void 0;switch(arg){case"copy":case"own":trackObj.own=!0;break;case"rate":args.length>0&&args.shift();break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),parsed=Number.parseFloat(raw),Number.isNaN(parsed)||!Number.isFinite(parsed))return this.error("cannot parse volume: ".concat(raw));trackObj.volume=parsed;break;default:return this.error("unknown action: ".concat(arg))}}trackObjs.push(trackObj),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(listId,trackObjs)}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="createplaylist"),Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var action,mute,muteOnHide,volume,args=this.args.slice(0);args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"mute":case"unmute":mute="mute"===arg;break;case"muteonhide":case"nomuteonhide":muteOnHide="muteonhide"===arg;break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=mute&&SimpleAudio.mute(mute),null!=muteOnHide&&SimpleAudio.muteOnHidden(muteOnHide),null!=volume&&SimpleAudio.volume(volume),action){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("playlist",{from:null,handler:function(){var list,args,action,from=this.self.from;if(null===from)return this.error("no playlists have been created");if("createplaylist"===from){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("list ID"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));list=SimpleAudio.lists.get(id),args=this.args.slice(1)}else{if(0===this.args.length)return this.error("no actions specified");list=SimpleAudio.lists.get("setplaylist"),args=this.args.slice(0)}for(var fadeTo,loop,mute,shuffle,volume,fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors2=[];return args.length<1&&_errors2.push("seconds"),args.length<2&&_errors2.push("level"),this.error("fadeoverto missing required ".concat(_errors2.join(" and ")," value").concat(_errors2.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"loop":case"unloop":loop="loop"===arg;break;case"shuffle":case"unshuffle":shuffle="shuffle"===arg;break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=volume&&list.volume(volume),null!=mute&&list.mute(mute),null!=loop&&list.loop(loop),null!=shuffle&&list.shuffle(shuffle),action){case"fade":list.fade(fadeOver,fadeTo);break;case"load":list.load();break;case"pause":list.pause();break;case"play":list.playWhenAllowed();break;case"skip":list.skip();break;case"stop":list.stop();break;case"unload":list.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.groups.has(id))return this.error('group "'.concat(id,'" does not exist'));SimpleAudio.groups.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));SimpleAudio.lists.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}}),Macro.add("setplaylist",{handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");var playlist=Macro.get("playlist");if(null!==playlist.from&&"setplaylist"!==playlist.from)return this.error("playlists have already been defined with <<createplaylist>>");try{SimpleAudio.lists.add("setplaylist",this.args.slice(0))}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="setplaylist"),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("stopallaudio",{skipArgs:!0,handler:function(){SimpleAudio.select(":all").stop(),Config.debug&&this.debugView.modes({hidden:!0})}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio","setplaylist","stopallaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}});Macro.add("done",{skipArgs:!0,tags:null,handler:function(){var contents=this.payload[0].contents.trim();""!==contents&&setTimeout(this.createShadowWrapper((function(){return $.wiki(contents)})),Engine.minDomActionDelay)}}),Macro.add("goto",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?void setTimeout((function(){return Engine.play(passage)}),Engine.minDomActionDelay):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){var delay,_this20=this;if(0===this.args.length)return this.error("no time value specified");try{delay=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerInterval(this.createShadowWrapper((function(){var frag=document.createDocumentFragment();new Wikifier(frag,_this20.payload[0].contents);var $output=$wrapper;transition&&($output=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-repeat-in")}),Engine.minDomActionDelay)})),delay)},registerInterval:function(callback,delay){var _this21=this;if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null;timerId=setInterval((function(){if(State.passage!==passage||State.turns!==turn)return clearInterval(timerId),void timers.delete(timerId);var timerIdCache;try{TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(timerIdCache=TempState.repeatTimerId),TempState.repeatTimerId=timerId,callback.call(_this21)}finally{void 0!==timerIdCache?TempState.repeatTimerId=timerIdCache:delete TempState.repeatTimerId,TempState.break=null}}),delay),timers.add(timerId),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearInterval(timerId)})),timers.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var timers=Macro.get("repeat").timers,timerId=TempState.repeatTimerId;clearInterval(timerId),timers.delete(timerId),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var i,items=[];try{items.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(ex){return this.error("".concat(ex.message," in <<timed>>"))}if(this.payload.length>1)try{var len;for(i=1,len=this.payload.length;i<len;++i)items.push({name:this.payload[i].name,source:this.payload[i].source,delay:0===this.payload[i].args.length?items[items.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[i].args[0])),content:this.payload[i].contents})}catch(ex){return this.error("".concat(ex.message," in <<next>> (#").concat(i,")"))}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerTimeout(this.createShadowWrapper((function(item){var frag=document.createDocumentFragment();new Wikifier(frag,item.content);var $output=$wrapper;Config.debug&&"next"===item.name&&($output=jQuery(new DebugView($output[0],"macro",item.name,item.source).output)),transition&&($output=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-timed-in")}),Engine.minDomActionDelay)})),items)},registerTimeout:function(callback,items){if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null,nextItem=items.shift();timerId=setTimeout((function worker(){if(timers.delete(timerId),State.passage===passage&&State.turns===turn){var curItem=nextItem;null!=(nextItem=items.shift())&&(timerId=setTimeout(worker,nextItem.delay),timers.add(timerId)),callback.call(this,curItem)}}),nextItem.delay),timers.add(timerId),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearTimeout(timerId)})),timers.clear()})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var widgetCode,widgetName=this.args[0],isNonVoid=this.args.length>1&&"container"===this.args[1];if(Macro.has(widgetName)){if(!Macro.get(widgetName).isWidget)return this.error('cannot clobber existing macro "'.concat(widgetName,'"'));Macro.delete(widgetName)}try{var widgetDef={isWidget:!0,handler:(widgetCode=this.payload[0].contents,function(){var shadowStore={};State.temporary.hasOwnProperty("args")&&(shadowStore._args=State.temporary.args),State.temporary.args=_toConsumableArray(this.args),State.temporary.args.raw=this.args.raw,State.temporary.args.full=this.args.full,this.addShadow("_args"),isNonVoid&&(State.temporary.hasOwnProperty("contents")&&(shadowStore._contents=State.temporary.contents),State.temporary.contents=this.payload[0].contents,this.addShadow("_contents")),State.variables.hasOwnProperty("args")&&(shadowStore.$args=State.variables.args),State.variables.args=State.temporary.args,this.addShadow("$args");try{var resFrag=document.createDocumentFragment(),errList=[];if(new Wikifier(resFrag,widgetCode),Array.from(resFrag.querySelectorAll(".error")).forEach((function(errEl){errList.push(errEl.textContent)})),0!==errList.length)return this.error("error".concat(errList.length>1?"s":""," within widget code (").concat(errList.join("; "),")"));this.output.appendChild(resFrag)}catch(ex){return this.error("cannot execute widget: ".concat(ex.message))}finally{shadowStore.hasOwnProperty("_args")?State.temporary.args=shadowStore._args:delete State.temporary.args,isNonVoid&&(shadowStore.hasOwnProperty("_contents")?State.temporary.contents=shadowStore._contents:delete State.temporary.contents),shadowStore.hasOwnProperty("$args")?State.variables.args=shadowStore.$args:delete State.variables.args}})};isNonVoid&&(widgetDef.tags=[]),Macro.add(widgetName,widgetDef),Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error('cannot create widget macro "'.concat(widgetName,'": ').concat(ex.message))}}})}();var Dialog=function(){var _$overlay=null,_$dialog=null,_$dialogTitle=null,_$dialogBody=null,_lastActive=null,_scrollbarWidth=0,_dialogObserver=null;function dialogClose(ev){return _$dialogBody.trigger(":dialogclosing"),jQuery(document).off(".dialog-close"),_dialogObserver?(_dialogObserver.disconnect(),_dialogObserver=null):_$dialogBody.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),_$dialog.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),_$overlay.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),_$dialogTitle.empty(),_$dialogBody.empty().removeClass(),null!==_lastActive&&(jQuery(_lastActive).focus(),_lastActive=null),ev&&ev.data&&"function"==typeof ev.data.closeFn&&ev.data.closeFn(ev),_$dialogBody.trigger(":dialogclose"),_$dialogBody.trigger(":dialogclosed"),Dialog}function dialogIsOpen(classNames){return _$dialog.hasClass("open")&&(!classNames||classNames.splitOrEmpty(/\s+/).every((function(cn){return _$dialogBody.hasClass(cn)})))}function dialogOpen(options,closeFn){_$dialogBody.trigger(":dialogopening");var top=jQuery.extend({top:50},options).top;return dialogIsOpen()||(_lastActive=safeActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),_$overlay.addClass("open"),null!==_$dialogBody[0].querySelector("img")&&_$dialogBody.imagesLoaded().always((function(){return _resizeHandler({data:{top:top}})})),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0),_$dialog.css(_calcPosition(top)).addClass("open").focus(),jQuery(window).on("resize.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),Has.mutationObserver?(_dialogObserver=new MutationObserver((function(mutations){for(var i=0;i<mutations.length;++i)if("childList"===mutations[i].type){_resizeHandler({data:{top:top}});break}}))).observe(_$dialogBody[0],{childList:!0,subtree:!0}):_$dialogBody.on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),jQuery(document).one("click.dialog-close",".ui-close",{closeFn:closeFn},(function(ev){dialogClose(ev)})).one("keypress.dialog-close",".ui-close",(function(ev){13!==ev.which&&32!==ev.which||jQuery(this).trigger("click")})),_$dialogBody.trigger(":dialogopen"),_$dialogBody.trigger(":dialogopened"),Dialog}function _calcPosition(topPos){var top=null!=topPos?topPos:50,$parent=jQuery(window),dialogPos={left:"",right:"",top:"",bottom:""};_$dialog.css(dialogPos);var horzSpace=$parent.width()-_$dialog.outerWidth(!0)-1,vertSpace=$parent.height()-_$dialog.outerHeight(!0)-1;return horzSpace<=32+_scrollbarWidth&&(vertSpace-=_scrollbarWidth),vertSpace<=32+_scrollbarWidth&&(horzSpace-=_scrollbarWidth),dialogPos.left=dialogPos.right=horzSpace<=32?16:horzSpace/2>>0,dialogPos.top=vertSpace<=32?dialogPos.bottom=16:vertSpace/2>top?top:dialogPos.bottom=vertSpace/2>>0,Object.keys(dialogPos).forEach((function(key){""!==dialogPos[key]&&(dialogPos[key]+="px")})),dialogPos}function _resizeHandler(ev){var top=ev&&ev.data&&void 0!==ev.data.top?ev.data.top:50;"block"===_$dialog.css("display")&&(_$dialog.css({display:"none"}),_$dialog.css(jQuery.extend({display:""},_calcPosition(top))))}return Object.freeze(Object.defineProperties({},{append:{value:function(){var _$dialogBody2;return(_$dialogBody2=_$dialogBody).append.apply(_$dialogBody2,arguments),Dialog}},body:{value:function(){return _$dialogBody.get(0)}},close:{value:dialogClose},init:{value:function(){if(!document.getElementById("ui-dialog")){_scrollbarWidth=function(){var scrollbarWidth;try{var inner=document.createElement("p"),outer=document.createElement("div");inner.style.width="100%",inner.style.height="200px",outer.style.position="absolute",outer.style.left="0px",outer.style.top="0px",outer.style.width="100px",outer.style.height="100px",outer.style.visibility="hidden",outer.style.overflow="hidden",outer.appendChild(inner),document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="auto";var w2=inner.offsetWidth;w1===w2&&(w2=outer.clientWidth),document.body.removeChild(outer),scrollbarWidth=w1-w2}catch(ex){}return scrollbarWidth||17}();var $elems=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+'<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'.concat(L10n.get("close"),'"></button>')+'</div><div id="ui-dialog-body"></div></div>');_$overlay=jQuery($elems.find("#ui-overlay").get(0)),_$dialog=jQuery($elems.find("#ui-dialog").get(0)),_$dialogTitle=jQuery($elems.find("#ui-dialog-title").get(0)),_$dialogBody=jQuery($elems.find("#ui-dialog-body").get(0)),$elems.insertBefore("body>script#script-sugarcube")}}},isOpen:{value:dialogIsOpen},open:{value:dialogOpen},resize:{value:function(data){return _resizeHandler("object"===_typeof(data)?{data:data}:undefined)}},setup:{value:function(title,classNames){return _$dialogBody.empty().removeClass(),null!=classNames&&_$dialogBody.addClass(classNames),_$dialogTitle.empty().append((null!=title?String(title):"")||" "),_$dialogBody.get(0)}},wiki:{value:function(){var _$dialogBody3;return(_$dialogBody3=_$dialogBody).wiki.apply(_$dialogBody3,arguments),Dialog}},addClickHandler:{value:function(targets,options,startFn,doneFn,closeFn){return jQuery(targets).ariaClick((function(ev){ev.preventDefault(),"function"==typeof startFn&&startFn(ev),dialogOpen(options,closeFn),"function"==typeof doneFn&&doneFn(ev)}))}}}))}(),Engine=function(){var States=Util.toEnum({Idle:"idle",Playing:"playing",Rendering:"rendering"}),_initDebugViews=[],_state=States.Idle,_lastPlay=null,_outlinePatch=null,_updating=null;function engineGo(offset){var succeded=State.go(offset);return succeded&&engineShow(),succeded}function engineShow(){return enginePlay(State.passage,!0)}function enginePlay(title,noHistory){var passageReadyOutput,passageDoneOutput,passageTitle=title;if(_state=States.Playing,TempState={},State.clearTemporary(),"function"==typeof Config.navigation.override)try{var overrideTitle=Config.navigation.override(passageTitle);overrideTitle&&(passageTitle=overrideTitle)}catch(ex){}var passage=Story.get(passageTitle);if(jQuery.event.trigger({type:":passageinit",passage:passage}),Object.keys(prehistory).forEach((function(task){"function"==typeof prehistory[task]&&prehistory[task].call(passage,task)})),noHistory||State.create(passage.title),document.body.className&&(document.body.className=""),_lastPlay=Util.now(),Object.keys(predisplay).forEach((function(task){"function"==typeof predisplay[task]&&predisplay[task].call(passage,task)})),Story.has("PassageReady"))try{passageReadyOutput=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(ex){console.error(ex),Alert.error("PassageReady",ex.message)}_state=States.Rendering;var dataTags=passage.tags.length>0?passage.tags.join(" "):null,passageEl=document.createElement("div");jQuery(passageEl).attr({id:passage.domId,"data-passage":passage.title,"data-tags":dataTags}).addClass("passage ".concat(passage.className)),jQuery(document.body).attr("data-tags",dataTags).addClass(passage.className),jQuery(document.documentElement).attr("data-tags",dataTags),jQuery.event.trigger({type:":passagestart",content:passageEl,passage:passage}),Object.keys(prerender).forEach((function(task){"function"==typeof prerender[task]&&prerender[task].call(passage,passageEl,task)})),Story.has("PassageHeader")&&new Wikifier(passageEl,Story.get("PassageHeader").processText()),passageEl.appendChild(passage.render()),Story.has("PassageFooter")&&new Wikifier(passageEl,Story.get("PassageFooter").processText()),jQuery.event.trigger({type:":passagerender",content:passageEl,passage:passage}),Object.keys(postrender).forEach((function(task){"function"==typeof postrender[task]&&postrender[task].call(passage,passageEl,task)}));var debugView,containerEl=document.getElementById("passages");if(containerEl.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?_toConsumableArray(containerEl.childNodes).forEach((function(outgoing){var $outgoing=jQuery(outgoing);if(outgoing.nodeType===Node.ELEMENT_NODE&&$outgoing.hasClass("passage")){if($outgoing.hasClass("passage-out"))return;$outgoing.attr({id:"out-".concat($outgoing.attr("id")),"aria-live":"off"}).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?$outgoing.on(Has.transitionEndEvent,(function(ev){ev.propertyName===Config.passages.transitionOut&&$outgoing.remove()})):setTimeout((function(){return $outgoing.remove()}),Math.max(40,Config.passages.transitionOut))}else $outgoing.remove()})):jQuery(containerEl).empty()),jQuery(passageEl).addClass("passage-in").appendTo(containerEl),setTimeout((function(){return jQuery(passageEl).removeClass("passage-in")}),40),Story.has("StoryDisplayTitle")?null===_updating&&Config.ui.updateStoryElements||setDisplayTitle(Story.get("StoryDisplayTitle").processText()):Config.passages.displayTitles&&passage.title!==Config.passages.start&&(document.title="".concat(passage.title," | ").concat(Story.title)),window.scroll(0,0),_state=States.Playing,Story.has("PassageDone"))try{passageDoneOutput=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(ex){console.error(ex),Alert.error("PassageDone",ex.message)}(jQuery.event.trigger({type:":passagedisplay",content:passageEl,passage:passage}),Object.keys(postdisplay).forEach((function(task){"function"==typeof postdisplay[task]&&postdisplay[task].call(passage,task)})),null!==_updating?_updating.forEach((function(pair){jQuery(pair.element).empty(),new Wikifier(pair.element,Story.get(pair.passage).processText().trim())})):Config.ui.updateStoryElements&&UIBar.update(),Config.debug)&&(null!=passageReadyOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady")).modes({hidden:!0}),debugView.append(passageReadyOutput),jQuery(passageEl).prepend(debugView.output)),null!=passageDoneOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone")).modes({hidden:!0}),debugView.append(passageDoneOutput),jQuery(passageEl).append(debugView.output)),1===State.turns&&_initDebugViews.length>0&&jQuery(passageEl).prepend(_initDebugViews));switch(jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"object":passage.tags.some((function(tag){return Config.saves.autosave.includes(tag)}))&&Save.autosave.save();break;case"function":Config.saves.autosave()&&Save.autosave.save()}return jQuery.event.trigger({type:":passageend",content:passageEl,passage:passage}),_state=States.Idle,_lastPlay=Util.now(),passageEl}function _hideOutlines(){_outlinePatch.set("*:focus{outline:none;}")}return Object.freeze(Object.defineProperties({},{States:{value:States},minDomActionDelay:{value:40},init:{value:function(){var _lastOutlineEvent;jQuery("#init-no-js,#init-lacking").remove(),function(){var $elems=jQuery(document.createDocumentFragment()),markup=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(markup){UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),$elems.append(markup);var $passages=$elems.find("#passages");if(0===$passages.length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');$passages.empty().not("[aria-live]").attr("aria-live","polite").end(),$elems.find("[data-init-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-init-passage" content attribute'));var passage=el.getAttribute("data-init-passage").trim();if(el.hasAttribute("data-passage"))throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> must not contain a "data-passage" content attribute'));if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&jQuery(el).empty().wiki(Story.get(passage).processText().trim())}));var updating=[];$elems.find("[data-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-passage" content attribute'));var passage=el.getAttribute("data-passage").trim();if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&updating.push({passage:passage,element:el})})),updating.length>0&&(_updating=updating),Config.ui.updateStoryElements=!1}else $elems.append('<div id="story" role="main"><div id="passages" aria-live="polite"></div></div>');$elems.insertBefore("body>script#script-sugarcube")}(),_outlinePatch=new StyleWrapper(jQuery(document.createElement("style")).attr({id:"style-aria-outlines",type:"text/css"}).appendTo(document.head).get(0)),_hideOutlines(),jQuery(document).on("mousedown.aria-outlines keydown.aria-outlines",(function(ev){ev.type!==_lastOutlineEvent&&(_lastOutlineEvent=ev.type,"keydown"===ev.type?_outlinePatch.clear():_hideOutlines())}))}},start:{value:function(){if(Story.getAllInit().forEach((function(passage){try{var debugBuffer=Wikifier.wikifyEval(passage.text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","".concat(passage.title," [init-tagged]"),"".concat(passage.title," [init-tagged]"));debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("".concat(passage.title," [init-tagged]"),"object"===_typeof(ex)?ex.message:ex)}})),Story.has("StoryInit"))try{var debugBuffer=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("StoryInit","object"===_typeof(ex)?ex.message:ex)}if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'.concat(Config.passages.start,'") not found'));if(jQuery(document.documentElement).focus(),State.restore())engineShow();else{var loadStart=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!1,UI.buildAutoload(),Dialog.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(loadStart=!Save.autosave.load())}loadStart&&enginePlay(Config.passages.start)}}},restart:{value:function(){LoadScreen.show(),window.scroll(0,0),State.reset(),jQuery.event.trigger(":enginerestart"),window.location.reload()}},state:{get:function(){return _state}},isIdle:{value:function(){return _state===States.Idle}},isPlaying:{value:function(){return _state!==States.Idle}},isRendering:{value:function(){return _state===States.Rendering}},lastPlay:{get:function(){return _lastPlay}},goTo:{value:function(idx){var succeded=State.goTo(idx);return succeded&&engineShow(),succeded}},go:{value:engineGo},backward:{value:function(){return engineGo(-1)}},forward:{value:function(){return engineGo(1)}},show:{value:engineShow},play:{value:enginePlay},display:{value:function(title,link,option){var noHistory=!1;switch(option){case undefined:break;case"replace":case"back":noHistory=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'.concat(option,'"; please notify the developer'))}enginePlay(title,noHistory)}}}))}(),Passage=(_tagsToSkip=/^(?:debug|nobr|passage|widget|twine\..*)$/i,function(){function Passage(title,el){var _this22=this;_classCallCheck(this,Passage),Object.defineProperties(this,{title:{value:Util.unescape(title)},element:{value:el||null},tags:{value:Object.freeze(el&&el.hasAttribute("tags")?Array.from(new Set(el.getAttribute("tags").trim().splitOrEmpty(/\s+/))):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-".concat(Util.slugify(this.title))},classes:{value:Object.freeze(0===this.tags.length?[]:_this22.tags.filter((function(tag){return!_tagsToSkip.test(tag)})).map((function(tag){return Util.slugify(tag)})))}})}return _createClass(Passage,[{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var passage=Util.escapeMarkup(this.title),mesg="".concat(L10n.get("errorTitle"),": ").concat(L10n.get("errorNonexistentPassage",{passage:passage}));return'<div class="error-view"><span class="error">'.concat(mesg,"</span></div>")}return this.element.textContent.replace(/\r/g,"")}},{key:"description",value:function(){var descriptions=Config.passages.descriptions;switch(_typeof(descriptions)){case"boolean":if(descriptions)return this.title;break;case"object":if(descriptions.hasOwnProperty(this.title))return descriptions[this.title];break;case"function":var result=descriptions.call(this);if(result)return result}return null===this._excerpt&&(this._excerpt=Passage.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img[".concat(this.text,"]]");var processed=this.text;return Config.passages.onProcess&&(processed=Config.passages.onProcess.call(null,{title:this.title,tags:this.tags,text:processed})),(Config.passages.nobr||this.tags.includes("nobr"))&&(processed=processed.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),processed}},{key:"render",value:function(options){var frag=document.createDocumentFragment();return new Wikifier(frag,this.processText(),options),this._excerpt=Passage.getExcerptFromNode(frag),frag}}],[{key:"getExcerptFromNode",value:function(node,count){if(!node.hasChildNodes())return"";var excerpt=node.textContent.trim();if(""!==excerpt){var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})"));excerpt=excerpt.replace(/\s+/g," ").match(excerptRe)}return excerpt?"".concat(excerpt[1],"…"):"…"}},{key:"getExcerptFromText",value:function(text,count){if(""===text)return"";var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})")),excerpt=text.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*?)(?:(?:\||->|<-)[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(excerptRe);return excerpt?"".concat(excerpt[1],"…"):"…"}}]),Passage}()),_tagsToSkip,Save=function(){var Type=Util.toEnum({Autosave:"autosave",Disk:"disk",Serialize:"serialize",Slot:"slot"}),_slotsUBound=-1,_onLoadHandlers=new Set,_onSaveHandlers=new Set;function savesObjGet(){var saves=storage.get("saves");return null===saves?{autosave:null,slots:_appendSlots([],Config.saves.slots)}:saves}function savesObjClear(){return storage.delete("saves"),!0}function autosaveOk(){return"cookie"!==storage.name&&void 0!==Config.saves.autosave}function slotsOk(){return"cookie"!==storage.name&&-1!==_slotsUBound}function slotsCount(){if(!slotsOk())return 0;for(var saves=savesObjGet(),count=0,i=0,iend=saves.slots.length;i<iend;++i)null!==saves.slots[i]&&++count;return count}function _appendSlots(array,num){for(var i=0;i<num;++i)array.push(null);return array}function _savesObjIsEmpty(saves){for(var slots=saves.slots,isSlotsEmpty=!0,i=0,iend=slots.length;i<iend;++i)if(null!==slots[i]){isSlotsEmpty=!1;break}return null===saves.autosave&&isSlotsEmpty}function _savesObjSave(saves){return _savesObjIsEmpty(saves)?(storage.delete("saves"),!0):storage.set("saves",saves)}function _savesObjUpdate(saveObj){if(null==saveObj||"object"!==_typeof(saveObj))return!1;var updated=!1;return saveObj.hasOwnProperty("state")&&saveObj.state.hasOwnProperty("delta")&&saveObj.state.hasOwnProperty("index")||(saveObj.hasOwnProperty("data")?(delete saveObj.mode,saveObj.state={delta:State.deltaEncode(saveObj.data)},delete saveObj.data):saveObj.state.hasOwnProperty("delta")?saveObj.state.hasOwnProperty("index")||delete saveObj.state.mode:(delete saveObj.state.mode,saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history),saveObj.state.index=saveObj.state.delta.length-1,updated=!0),saveObj.state.hasOwnProperty("rseed")&&(saveObj.state.seed=saveObj.state.rseed,delete saveObj.state.rseed,saveObj.state.delta.forEach((function(_,i,delta){delta[i].hasOwnProperty("rcount")&&(delta[i].pull=delta[i].rcount,delete delta[i].rcount)})),updated=!0),(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired||saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired&&delete saveObj.state.expired,(saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.expired=[],saveObj.state.hasOwnProperty("unique")&&(saveObj.state.expired.push(saveObj.state.unique),delete saveObj.state.unique),saveObj.state.hasOwnProperty("last")&&(saveObj.state.expired.push(saveObj.state.last),delete saveObj.state.last)),updated=!0),updated}function _marshal(supplemental,details){if(null!=supplemental&&"object"!==_typeof(supplemental))throw new Error("supplemental parameter must be an object");var saveObj=Object.assign({},supplemental,{id:Config.saves.id,state:State.marshalForSave()});return Config.saves.version&&(saveObj.version=Config.saves.version),_onSaveHandlers.forEach((function(fn){return fn(saveObj,details)})),saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history,saveObj}function _unmarshal(saveObj){try{if(_savesObjUpdate(saveObj),!saveObj||!saveObj.hasOwnProperty("id")||!saveObj.hasOwnProperty("state"))throw new Error(L10n.get("errorSaveMissingData"));if(saveObj.state.history=State.deltaDecode(saveObj.state.delta),delete saveObj.state.delta,_onLoadHandlers.forEach((function(fn){return fn(saveObj)})),saveObj.id!==Config.saves.id)throw new Error(L10n.get("errorSaveIdMismatch"));State.unmarshalForSave(saveObj.state),Engine.show()}catch(ex){return UI.alert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("aborting"),".")),!1}return!0}return Object.freeze(Object.defineProperties({},{init:{value:function(){if("cookie"===storage.name)return savesObjClear(),Config.saves.autoload=undefined,Config.saves.autosave=undefined,Config.saves.slots=0,!1;var saves=savesObjGet(),updated=!1;Array.isArray(saves)&&(saves={autosave:null,slots:saves},updated=!0),Config.saves.slots!==saves.slots.length&&(Config.saves.slots<saves.slots.length?(saves.slots.reverse(),saves.slots=saves.slots.filter((function(val){return!(null===val&&this.count>0)||(--this.count,!1)}),{count:saves.slots.length-Config.saves.slots}),saves.slots.reverse()):Config.saves.slots>saves.slots.length&&_appendSlots(saves.slots,Config.saves.slots-saves.slots.length),updated=!0),_savesObjUpdate(saves.autosave)&&(updated=!0);for(var i=0;i<saves.slots.length;++i)_savesObjUpdate(saves.slots[i])&&(updated=!0);return _savesObjIsEmpty(saves)&&(storage.delete("saves"),updated=!1),updated&&_savesObjSave(saves),_slotsUBound=saves.slots.length-1,!0}},get:{value:savesObjGet},clear:{value:savesObjClear},ok:{value:function(){return autosaveOk()||slotsOk()}},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:autosaveOk},has:{value:function(){return null!==savesObjGet().autosave}},get:{value:function(){return savesObjGet().autosave}},load:{value:function(){var saves=savesObjGet();return null!==saves.autosave&&_unmarshal(saves.autosave)}},save:{value:function(title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var saves=savesObjGet(),supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.autosave=_marshal(supplemental,{type:Type.Autosave}),_savesObjSave(saves)}},delete:{value:function(){var saves=savesObjGet();return saves.autosave=null,_savesObjSave(saves)}}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:slotsOk},length:{get:function(){return _slotsUBound+1}},isEmpty:{value:function(){return 0===slotsCount()}},count:{value:slotsCount},has:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])}},get:{value:function(slot){if(slot<0||slot>_slotsUBound)return null;var saves=savesObjGet();return slot>=saves.slots.length?null:saves.slots[slot]}},load:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])&&_unmarshal(saves.slots[slot])}},save:{value:function(slot,title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),!1;if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();if(slot>=saves.slots.length)return!1;var supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.slots[slot]=_marshal(supplemental,{type:Type.Slot}),_savesObjSave(saves)}},delete:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length)&&(saves.slots[slot]=null,_savesObjSave(saves))}}}))},export:{value:function(filename,metadata){if("function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed()){var str,now,MM,DD,hh,mm,ss,baseName=null==filename?Story.domId:(str=filename,Util.sanitizeFilename(str).replace(/[_\s\u2013\u2014-]+/g,"-")),saveName="".concat(baseName,"-").concat((now=new Date,MM=now.getMonth()+1,DD=now.getDate(),hh=now.getHours(),mm=now.getMinutes(),ss=now.getSeconds(),MM<10&&(MM="0".concat(MM)),DD<10&&(DD="0".concat(DD)),hh<10&&(hh="0".concat(hh)),mm<10&&(mm="0".concat(mm)),ss<10&&(ss="0".concat(ss)),"".concat(now.getFullYear()).concat(MM).concat(DD,"-").concat(hh).concat(mm).concat(ss)),".save"),supplemental=null==metadata?{}:{metadata:metadata},saveObj=LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Disk})));saveAs(new Blob([saveObj],{type:"text/plain;charset=UTF-8"}),saveName)}else Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed"))}},import:{value:function(event){var file=event.target.files[0],reader=new FileReader;jQuery(reader).one("loadend",(function(){if(reader.error){var ex=reader.error;UI.alert("".concat(L10n.get("errorSaveDiskLoadFailed").toUpperFirst()," (").concat(ex.name,": ").concat(ex.message,").</p><p>").concat(L10n.get("aborting"),"."))}else{var saveObj;try{saveObj=JSON.parse(/\.json$/i.test(file.name)||/^\{/.test(reader.result)?reader.result:LZString.decompressFromBase64(reader.result))}catch(ex){}_unmarshal(saveObj)}})),reader.readAsText(file)}},serialize:{value:function(metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),null;var supplemental=null==metadata?{}:{metadata:metadata};return LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Serialize})))}},deserialize:{value:function(base64Str){var saveObj;try{saveObj=JSON.parse(LZString.decompressFromBase64(base64Str))}catch(ex){}return _unmarshal(saveObj)?saveObj.metadata:null}},onLoad:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onLoad.add handler parameter must be a function (received: ".concat(valueType,")"));_onLoadHandlers.add(handler)}},clear:{value:function(){_onLoadHandlers.clear()}},delete:{value:function(handler){return _onLoadHandlers.delete(handler)}},size:{get:function(){return _onLoadHandlers.size}}}))},onSave:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onSave.add handler parameter must be a function (received: ".concat(valueType,")"));_onSaveHandlers.add(handler)}},clear:{value:function(){_onSaveHandlers.clear()}},delete:{value:function(handler){return _onSaveHandlers.delete(handler)}},size:{get:function(){return _onSaveHandlers.size}}}))}}))}(),Setting=function(){var Types=Util.toEnum({Header:0,Toggle:1,List:2,Range:3}),_definitions=[];function settingsCreate(){return Object.create(null)}function settingsSave(){var savedSettings=settingsCreate();return Object.keys(settings).length>0&&_definitions.filter((function(def){return def.type!==Types.Header&&settings[def.name]!==def.default})).forEach((function(def){return savedSettings[def.name]=settings[def.name]})),0===Object.keys(savedSettings).length?(storage.delete("settings"),!0):storage.set("settings",savedSettings)}function settingsLoad(){var defaultSettings=settingsCreate(),loadedSettings=storage.get("settings")||settingsCreate();_definitions.filter((function(def){return def.type!==Types.Header})).forEach((function(def){return defaultSettings[def.name]=def.default})),window.SugarCube.settings=settings=Object.assign(defaultSettings,loadedSettings)}function settingsClear(){return window.SugarCube.settings=settings=settingsCreate(),storage.delete("settings"),!0}function definitionsAdd(type,name,def){if(arguments.length<3){var errors=[];throw arguments.length<1&&errors.push("type"),arguments.length<2&&errors.push("name"),arguments.length<3&&errors.push("definition"),new Error("missing parameters, no ".concat(errors.join(" or ")," specified"))}if("object"!==_typeof(def))throw new TypeError("definition parameter must be an object");if(definitionsHas(name))throw new Error('cannot clobber existing setting "'.concat(name,'"'));var str,pos,definition={type:type,name:name,label:"string"==typeof def.label?def.label.trim():""};if("string"==typeof def.desc){var desc=def.desc.trim();""!==desc&&(definition.desc=desc)}switch(type){case Types.Header:break;case Types.Toggle:definition.default=!!def.default;break;case Types.List:if(!def.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(def.list))throw new TypeError("list must be an array");if(0===def.list.length)throw new Error("list must not be empty");if(definition.list=Object.freeze(def.list),null==def.default)definition.default=def.list[0];else{var defaultIndex=def.list.indexOf(def.default);if(-1===defaultIndex)throw new Error("list does not contain default");definition.default=def.list[defaultIndex]}break;case Types.Range:if(!def.hasOwnProperty("min"))throw new Error("no min specified");if("number"!=typeof def.min||Number.isNaN(def.min)||!Number.isFinite(def.min))throw new TypeError("min must be a finite number");if(!def.hasOwnProperty("max"))throw new Error("no max specified");if("number"!=typeof def.max||Number.isNaN(def.max)||!Number.isFinite(def.max))throw new TypeError("max must be a finite number");if(!def.hasOwnProperty("step"))throw new Error("no step specified");if("number"!=typeof def.step||Number.isNaN(def.step)||!Number.isFinite(def.step)||def.step<=0)throw new TypeError("step must be a finite number greater than zero");var stepValidate=function(value){if(fracDigits>0){var ma=Number("".concat(def.min,"e").concat(fracDigits)),sa=Number("".concat(def.step,"e").concat(fracDigits)),_va=Number("".concat(value,"e").concat(fracDigits))-ma;return Number("".concat(_va-_va%sa+ma,"e-").concat(fracDigits))}var va=value-def.min;return va-va%def.step+def.min},fracDigits=(str=String(def.step),-1===(pos=str.lastIndexOf("."))?0:str.length-pos-1);if(stepValidate(def.max)!==def.max)throw new RangeError("max (".concat(def.max,") is not a multiple of the step (").concat(def.step,") plus the min (").concat(def.min,")"));if(definition.max=def.max,definition.min=def.min,definition.step=def.step,null==def.default)definition.default=def.max;else{if("number"!=typeof def.default||Number.isNaN(def.default)||!Number.isFinite(def.default))throw new TypeError("default must be a finite number");if(def.default<def.min)throw new RangeError("default (".concat(def.default,") is less than min (").concat(def.min,")"));if(def.default>def.max)throw new RangeError("default (".concat(def.default,") is greater than max (").concat(def.max,")"));definition.default=def.default}break;default:throw new Error("unknown Setting type: ".concat(type))}"function"==typeof def.onInit&&(definition.onInit=Object.freeze(def.onInit)),"function"==typeof def.onChange&&(definition.onChange=Object.freeze(def.onChange)),_definitions.push(Object.freeze(definition))}function definitionsHas(name){return _definitions.some((function(definition){return definition.name===name}))}function definitionsGet(name){return _definitions.find((function(definition){return definition.name===name}))}return Object.freeze(Object.defineProperties({},{Types:{value:Types},init:{value:function(){if(storage.has("options")){var old=storage.get("options");null!==old&&(window.SugarCube.settings=settings=Object.assign(settingsCreate(),old)),settingsSave(),storage.delete("options")}settingsLoad(),_definitions.forEach((function(def){if(def.hasOwnProperty("onInit")){var thisArg={name:def.name,value:settings[def.name],default:def.default};def.hasOwnProperty("list")&&(thisArg.list=def.list),def.onInit.call(thisArg)}}))}},create:{value:settingsCreate},save:{value:settingsSave},load:{value:settingsLoad},clear:{value:settingsClear},reset:{value:function(name){if(0===arguments.length)settingsClear(),settingsLoad();else{if(null==name||!definitionsHas(name))throw new Error('nonexistent setting "'.concat(name,'"'));var def=definitionsGet(name);def.type!==Types.Header&&(settings[name]=def.default)}return settingsSave()}},forEach:{value:function(callback,thisArg){_definitions.forEach(callback,thisArg)}},add:{value:definitionsAdd},addHeader:{value:function(name,desc){definitionsAdd(Types.Header,name,{desc:desc})}},addToggle:{value:function(){for(var _len16=arguments.length,args=new Array(_len16),_key16=0;_key16<_len16;_key16++)args[_key16]=arguments[_key16];definitionsAdd.apply(void 0,[Types.Toggle].concat(args))}},addList:{value:function(){for(var _len17=arguments.length,args=new Array(_len17),_key17=0;_key17<_len17;_key17++)args[_key17]=arguments[_key17];definitionsAdd.apply(void 0,[Types.List].concat(args))}},addRange:{value:function(){for(var _len18=arguments.length,args=new Array(_len18),_key18=0;_key18<_len18;_key18++)args[_key18]=arguments[_key18];definitionsAdd.apply(void 0,[Types.Range].concat(args))}},isEmpty:{value:function(){return 0===_definitions.length}},has:{value:definitionsHas},get:{value:definitionsGet},delete:{value:function definitionsDelete(name){definitionsHas(name)&&delete settings[name];for(var i=0;i<_definitions.length;++i)if(_definitions[i].name===name){_definitions.splice(i,1),definitionsDelete(name);break}}}}))}(),Story=function(){var _passages={},_inits=[],_scripts=[],_styles=[],_widgets=[],_title="",_ifId="",_domId="";function _storySetTitle(rawTitle){if(null==rawTitle)throw new Error("story title must not be null or undefined");var title=Util.unescape(String(rawTitle)).trim();if(""===title)throw new Error("story title must not be empty or consist solely of whitespace");if(document.title=_title=title,""===(_domId=Util.slugify(_title)))if(""!==_ifId)_domId=_ifId;else for(var i=0,len=_title.length;i<len;++i){var _Util$charAndPosAt2=Util.charAndPosAt(_title,i),char=_Util$charAndPosAt2.char,start=_Util$charAndPosAt2.start,end=_Util$charAndPosAt2.end;_domId+=char.codePointAt(0).toString(16),i+=end-start}}return Object.freeze(Object.defineProperties({},{load:{value:function(){var validationCodeTags=["init","widget"],validationNoCodeTagPassages=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryInit","StoryMenu","StoryShare","StorySubtitle"];function validateStartingPassage(passage){if(passage.tags.includesAny(validationCodeTags))throw new Error('starting passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(passage.tags.filter((function(tag){return validationCodeTags.includes(tag)})).sort().join('", "'),'"'))}function validateSpecialPassages(passage){if(validationNoCodeTagPassages.includes(passage.title)){for(var _len19=arguments.length,tags=new Array(_len19>1?_len19-1:0),_key19=1;_key19<_len19;_key19++)tags[_key19-1]=arguments[_key19];throw new Error('special passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(tags.sort().join('", "'),'"'))}var codeTags=[].concat(validationCodeTags),foundTags=[];if(passage.tags.forEach((function(tag){codeTags.includes(tag)&&foundTags.push.apply(foundTags,_toConsumableArray(codeTags.delete(tag)))})),foundTags.length>1)throw new Error('passage "'.concat(passage.title,'" contains multiple special tags; invalid: "').concat(foundTags.sort().join('", "'),'"'))}var $storydata=jQuery("tw-storydata"),startNode=$storydata.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test($storydata.attr("options")),$storydata.children("style").each((function(i){_styles.push(new Passage("tw-user-style-".concat(i),this))})),$storydata.children("script").each((function(i){_scripts.push(new Passage("tw-user-script-".concat(i),this))})),$storydata.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each((function(){var $this=jQuery(this),pid=$this.attr("pid")||"",passage=new Passage($this.attr("name"),this);pid===startNode&&""!==startNode?(Config.passages.start=passage.title,validateStartingPassage(passage),_passages[passage.title]=passage):passage.tags.includes("init")?(validateSpecialPassages(passage,"init"),_inits.push(passage)):passage.tags.includes("widget")?(validateSpecialPassages(passage,"widget"),_widgets.push(passage)):_passages[passage.title]=passage})),_ifId=$storydata.attr("ifid"),_storySetTitle("未命名故事"),Config.saves.id=Story.domId}},init:{value:function(){var storyStyle;storyStyle=document.createElement("style"),new StyleWrapper(storyStyle).add(_styles.map((function(style){return style.text.trim()})).join("\n")),jQuery(storyStyle).appendTo(document.head).attr({id:"style-story",type:"text/css"});for(var i=0;i<_scripts.length;++i)try{Scripting.evalJavaScript(_scripts[i].text)}catch(ex){console.error(ex),Alert.error(_scripts[i].title,"object"===_typeof(ex)?ex.message:ex)}for(var _i8=0;_i8<_widgets.length;++_i8)try{Wikifier.wikifyEval(_widgets[_i8].processText())}catch(ex){console.error(ex),Alert.error(_widgets[_i8].title,"object"===_typeof(ex)?ex.message:ex)}}},title:{get:function(){return _title}},domId:{get:function(){return _domId}},ifId:{get:function(){return _ifId}},add:{value:function(passage){if(!(passage instanceof Passage))throw new TypeError("Story.add passage parameter must be an instance of Passage");var title=passage.title;return!_passages.hasOwnProperty(title)&&(_passages[title]=passage,!0)}},has:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":return _passages.hasOwnProperty(String(title));case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.has title parameter cannot be ".concat(type))}},get:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":var id=String(title);return _passages.hasOwnProperty(id)?_passages[id]:new Passage(id||"(unknown)");case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.get title parameter cannot be ".concat(type))}},getAllInit:{value:function(){return Object.freeze(Array.from(_inits))}},getAllRegular:{value:function(){return Object.freeze(Object.assign({},_passages))}},getAllScript:{value:function(){return Object.freeze(Array.from(_scripts))}},getAllStylesheet:{value:function(){return Object.freeze(Array.from(_styles))}},getAllWidget:{value:function(){return Object.freeze(Array.from(_widgets))}},lookup:{value:function(key,value){var sortKey=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"title",results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];"object"===_typeof(passage[key])&&null!==passage[key]?passage[key]instanceof Array&&passage[key].some((function(m){return Util.sameValueZero(m,value)}))&&results.push(passage):Util.sameValueZero(passage[key],value)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}},lookupWith:{value:function(predicate){var sortKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"title";if("function"!=typeof predicate)throw new TypeError("Story.lookupWith predicate parameter must be a function");var results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];predicate(passage)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}}}))}(),UI=function(){function uiAssembleLinkList(passage,listEl){var list=listEl,debugState=Config.debug,cleanState=Config.cleanupWikifierOutput;Config.debug=!1,Config.cleanupWikifierOutput=!1;try{null==list&&(list=document.createElement("ul"));var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim());var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "));for(;frag.hasChildNodes();){var node=frag.firstChild;if(node.nodeType===Node.ELEMENT_NODE&&"A"===node.nodeName.toUpperCase()){var li=document.createElement("li");list.appendChild(li),li.appendChild(node)}else frag.removeChild(node)}}finally{Config.cleanupWikifierOutput=cleanState,Config.debug=debugState}return list}function uiOpenAlert(message){jQuery(Dialog.setup(L10n.get("alertTitle"),"alert")).append("<p>".concat(message,'</p><ul class="buttons">')+'<li><button id="alert-ok" class="ui-close">'.concat(L10n.get(["alertOk","ok"]),"</button></li>")+"</ul>");for(var _len20=arguments.length,args=new Array(_len20>1?_len20-1:0),_key20=1;_key20<_len20;_key20++)args[_key20-1]=arguments[_key20];Dialog.open.apply(Dialog,args)}function uiBuildAutoload(){return jQuery(Dialog.setup(L10n.get("autoloadTitle"),"autoload")).append("<p>".concat(L10n.get("autoloadPrompt"),'</p><ul class="buttons">')+'<li><button id="autoload-ok" class="ui-close">'.concat(L10n.get(["autoloadOk","ok"]),"</button></li>")+'<li><button id="autoload-cancel" class="ui-close">'.concat(L10n.get(["autoloadCancel","cancel"]),"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",(function(ev){var isAutoloadOk="autoload-ok"===ev.target.id;jQuery(document).one(":dialogclosed",(function(){isAutoloadOk&&Save.autosave.load()||Engine.play(Config.passages.start)}))})),!0}function uiBuildJumpto(){var list=document.createElement("ul");jQuery(Dialog.setup(L10n.get("jumptoTitle"),"jumpto list")).append(list);for(var expired=State.expired.length,i=State.size-1;i>=0;--i)if(i!==State.activeIndex){var passage=Story.get(State.history[i].title);passage&&passage.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(idx){return function(){return jQuery(document).one(":dialogclosed",(function(){return Engine.goTo(idx)}))}}(i)).addClass("ui-close").text("".concat(L10n.get("jumptoTurn")," ").concat(expired+i+1,": ").concat(passage.description()))).appendTo(list)}list.hasChildNodes()||jQuery(list).append("<li><a><em>".concat(L10n.get("jumptoUnavailable"),"</em></a></li>"))}function uiBuildRestart(){return jQuery(Dialog.setup(L10n.get("restartTitle"),"restart")).append("<p>".concat(L10n.get("restartPrompt"),'</p><ul class="buttons">')+'<li><button id="restart-ok">'.concat(L10n.get(["restartOk","ok"]),"</button></li>")+'<li><button id="restart-cancel" class="ui-close">'.concat(L10n.get(["restartCancel","cancel"]),"</button></li>")+"</ul>").find("#restart-ok").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){return Engine.restart()})),Dialog.close()})),!0}function uiBuildSaves(){var savesAllowed="function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed();function createActionItem(bId,bClass,bText,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId)).html(bText);return bClass&&$btn.addClass(bClass),bAction?$btn.ariaClick(bAction):$btn.ariaDisabled(!0),jQuery(document.createElement("li")).append($btn)}var $dialogBody=jQuery(Dialog.setup(L10n.get("savesTitle"),"saves")),savesOk=Save.ok(),fileOk=Has.fileAPI&&(Config.saves.tryDiskOnMobile||!Browser.isMobile.any());if(savesOk&&$dialogBody.append(function(){function createButton(bId,bClass,bText,bSlot,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId,"-").concat(bSlot)).addClass(bId).html(bText);return bClass&&$btn.addClass(bClass),bAction?"auto"===bSlot?$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelAuto"))},(function(){return bAction()})):$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelSlot")," ").concat(bSlot+1)},(function(){return bAction(bSlot)})):$btn.ariaDisabled(!0),$btn}var saves=Save.get(),$tbody=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var $tdSlot=jQuery(document.createElement("td")),$tdLoad=jQuery(document.createElement("td")),$tdDesc=jQuery(document.createElement("td")),$tdDele=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:L10n.get("savesLabelAuto"),"aria-label":L10n.get("savesLabelAuto")}).text("A").appendTo($tdSlot),saves.autosave?($tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),"auto",(function(){jQuery(document).one(":dialogclosed",(function(){return Save.autosave.load()}))}))),jQuery(document.createElement("div")).text(saves.autosave.title).appendTo($tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.autosave.date?"".concat(new Date(saves.autosave.date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo($tdDesc),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto",(function(){Save.autosave.delete(),uiBuildSaves()})))):($tdLoad.append(createButton("load",null,L10n.get("savesLabelLoad"),"auto")),$tdDesc.addClass("empty").text("•  •  •"),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto"))),jQuery(document.createElement("tr")).append($tdSlot).append($tdLoad).append($tdDesc).append($tdDele).appendTo($tbody)}for(var i=0,iend=saves.slots.length;i<iend;++i){var _$tdSlot=jQuery(document.createElement("td")),_$tdLoad=jQuery(document.createElement("td")),_$tdDesc=jQuery(document.createElement("td")),_$tdDele=jQuery(document.createElement("td"));_$tdSlot.append(document.createTextNode(i+1)),saves.slots[i]?(_$tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),i,(function(slot){jQuery(document).one(":dialogclosed",(function(){return Save.slots.load(slot)}))}))),jQuery(document.createElement("div")).text(saves.slots[i].title).appendTo(_$tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.slots[i].date?"".concat(new Date(saves.slots[i].date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo(_$tdDesc),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i,(function(slot){Save.slots.delete(slot),uiBuildSaves()})))):(_$tdLoad.append(createButton("save","ui-close",L10n.get("savesLabelSave"),i,savesAllowed?Save.slots.save:null)),_$tdDesc.addClass("empty").text("•  •  •"),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i))),jQuery(document.createElement("tr")).append(_$tdSlot).append(_$tdLoad).append(_$tdDesc).append(_$tdDele).appendTo($tbody)}return jQuery(document.createElement("table")).attr("id","saves-list").append($tbody)}()),savesOk||fileOk){var $btnBar=jQuery(document.createElement("ul")).addClass("buttons").appendTo($dialogBody);return fileOk&&($btnBar.append(createActionItem("export","ui-close",L10n.get("savesLabelExport"),savesAllowed?function(){return Save.export()}:null)),$btnBar.append(createActionItem("import",null,L10n.get("savesLabelImport"),(function(){return $dialogBody.find("#saves-import-file").trigger("click")}))),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",(function(ev){jQuery(document).one(":dialogclosed",(function(){return Save.import(ev)})),Dialog.close()})).appendTo($dialogBody)),savesOk&&$btnBar.append(createActionItem("clear",null,L10n.get("savesLabelClear"),Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),uiBuildSaves()}:null)),!0}return uiOpenAlert(L10n.get("savesIncapable")),!1}function uiBuildSettings(){var $dialogBody=jQuery(Dialog.setup(L10n.get("settingsTitle"),"settings"));return Setting.forEach((function(control){if(control.type===Setting.Types.Header){var _name=control.name,_id=Util.slugify(_name),$header=jQuery(document.createElement("div")),$heading=jQuery(document.createElement("h2"));return $header.attr("id","header-body-".concat(_id)).append($heading).appendTo($dialogBody),$heading.attr("id","header-heading-".concat(_id)).wiki(_name),void(control.desc&&jQuery(document.createElement("p")).attr("id","header-desc-".concat(_id)).wiki(control.desc).appendTo($header))}var $control,name=control.name,id=Util.slugify(name),$setting=jQuery(document.createElement("div")),$label=jQuery(document.createElement("label")),$controlBox=jQuery(document.createElement("div"));switch(jQuery(document.createElement("div")).append($label).append($controlBox).appendTo($setting),control.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-".concat(id)).wiki(control.desc).appendTo($setting),$label.attr({id:"setting-label-".concat(id),for:"setting-control-".concat(id)}).wiki(control.label),null==settings[name]&&(settings[name]=control.default),control.type){case Setting.Types.Toggle:$control=jQuery(document.createElement("button")),settings[name]?$control.addClass("enabled").text(L10n.get("settingsOn")):$control.text(L10n.get("settingsOff")),$control.ariaClick((function(){settings[name]?(jQuery(this).removeClass("enabled").text(L10n.get("settingsOff")),settings[name]=!1):(jQuery(this).addClass("enabled").text(L10n.get("settingsOn")),settings[name]=!0),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default})}));break;case Setting.Types.List:$control=jQuery(document.createElement("select"));for(var i=0,iend=control.list.length;i<iend;++i)jQuery(document.createElement("option")).val(i).text(control.list[i]).appendTo($control);$control.val(control.list.indexOf(settings[name])).attr("tabindex",0).on("change",(function(){settings[name]=control.list[Number(this.value)],Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,list:control.list})}));break;case Setting.Types.Range:($control=jQuery(document.createElement("input"))).attr({type:"range",min:control.min,max:control.max,step:control.step,value:settings[name],tabindex:0}).on("change input",(function(){settings[name]=Number(this.value),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,min:control.min,max:control.max,step:control.step})})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$control.trigger("change"))}))}$control.attr("id","setting-control-".concat(id)).appendTo($controlBox),$setting.attr("id","setting-body-".concat(id)).appendTo($dialogBody)})),$dialogBody.append('<ul class="buttons">'+'<li><button id="settings-ok" class="ui-close">'.concat(L10n.get(["settingsOk","ok"]),"</button></li>")+'<li><button id="settings-reset">'.concat(L10n.get("settingsReset"),"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){Setting.reset(),window.location.reload()})),Dialog.close()})),!0}function uiBuildShare(){try{jQuery(Dialog.setup(L10n.get("shareTitle"),"share list")).append(uiAssembleLinkList("StoryShare"))}catch(ex){return console.error(ex),Alert.error("StoryShare",ex.message),!1}return!0}return Object.freeze(Object.defineProperties({},{assembleLinkList:{value:uiAssembleLinkList},alert:{value:uiOpenAlert},jumpto:{value:function(){uiBuildJumpto(),Dialog.open.apply(Dialog,arguments)}},restart:{value:function(){uiBuildRestart(),Dialog.open.apply(Dialog,arguments)}},saves:{value:function(){uiBuildSaves(),Dialog.open.apply(Dialog,arguments)}},settings:{value:function(){uiBuildSettings(),Dialog.open.apply(Dialog,arguments)}},share:{value:function(){uiBuildShare(),Dialog.open.apply(Dialog,arguments)}},buildAutoload:{value:uiBuildAutoload},buildJumpto:{value:uiBuildJumpto},buildRestart:{value:uiBuildRestart},buildSaves:{value:uiBuildSaves},buildSettings:{value:uiBuildSettings},buildShare:{value:uiBuildShare},stow:{value:function(){return UIBar.stow()}},unstow:{value:function(){return UIBar.unstow()}},setStoryElements:{value:function(){return UIBar.update()}},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:uiBuildAutoload},buildDialogJumpto:{value:uiBuildJumpto},buildDialogRestart:{value:uiBuildRestart},buildDialogSaves:{value:uiBuildSaves},buildDialogSettings:{value:uiBuildSettings},buildDialogShare:{value:uiBuildShare},buildLinkListFromPassage:{value:uiAssembleLinkList}}))}(),UIBar=function(){var _$uiBar=null;function uiBarStow(noAnimation){var $story;_$uiBar&&!_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.addClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay));return this}function uiBarUpdate(){if(Story.has("StoryDisplayTitle")&&setDisplayTitle(Story.get("StoryDisplayTitle").processText()),_$uiBar){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var menuStory=document.getElementById("menu-story");if(null!==menuStory&&(jQuery(menuStory).empty(),Story.has("StoryMenu")))try{UI.assembleLinkList("StoryMenu",menuStory)}catch(ex){console.error(ex),Alert.error("StoryMenu",ex.message)}}}return Object.freeze(Object.defineProperties({},{destroy:{value:function(){_$uiBar&&(_$uiBar.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),_$uiBar.remove(),_$uiBar=null)}},hide:{value:function(){return _$uiBar&&_$uiBar.hide(),this}},init:{value:function(){if(!document.getElementById("ui-bar")){var toggleLabel,backwardLabel,jumptoLabel,forwardLabel,$backward,$forward,$elems=(toggleLabel=L10n.get("uiBarToggle"),backwardLabel=L10n.get("uiBarBackward"),jumptoLabel=L10n.get("uiBarJumpto"),forwardLabel=L10n.get("uiBarForward"),jQuery(document.createDocumentFragment()).append('<div id="ui-bar" aria-live="polite"><div id="ui-bar-tray">'+'<button id="ui-bar-toggle" tabindex="0" title="'.concat(toggleLabel,'" aria-label="').concat(toggleLabel,'"></button>')+'<div id="ui-bar-history">'+'<button id="history-backward" tabindex="0" title="'.concat(backwardLabel,'" aria-label="').concat(backwardLabel,'"></button>')+'<button id="history-jumpto" tabindex="0" title="'.concat(jumptoLabel,'" aria-label="').concat(jumptoLabel,'"></button>')+'<button id="history-forward" tabindex="0" title="'.concat(forwardLabel,'" aria-label="').concat(forwardLabel,'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+'<li id="menu-item-saves"><a tabindex="0">'.concat(L10n.get("savesTitle"),"</a></li>")+'<li id="menu-item-settings"><a tabindex="0">'.concat(L10n.get("settingsTitle"),"</a></li>")+'<li id="menu-item-restart"><a tabindex="0">'.concat(L10n.get("restartTitle"),"</a></li>")+'<li id="menu-item-share"><a tabindex="0">'.concat(L10n.get("shareTitle"),"</a></li>")+"</ul></nav></div></div>"));_$uiBar=jQuery($elems.find("#ui-bar").get(0)),$elems.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate.ui-bar",($backward=jQuery("#history-backward"),$forward=jQuery("#history-forward"),function(){$backward.ariaDisabled(State.length<2),$forward.ariaDisabled(State.length===State.size)}))}}},isHidden:{value:function(){return _$uiBar&&"none"===_$uiBar.css("display")}},isStowed:{value:function(){return _$uiBar&&_$uiBar.hasClass("stowed")}},show:{value:function(){return _$uiBar&&_$uiBar.show(),this}},start:{value:function(){_$uiBar&&(("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&uiBarStow(!0),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarToggle")},(function(){return _$uiBar.toggleClass("stowed")})),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarBackward")},(function(){return Engine.backward()})),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarJumpto")},(function(){return UI.jumpto()})):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarForward")},(function(){return Engine.forward()}))):jQuery("#ui-bar-history").remove(),Story.has("StoryDisplayTitle")?setDisplayTitle(Story.get("StoryDisplayTitle").processText()):jQuery("#story-title").text(Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||uiBarUpdate(),jQuery("#menu-item-saves a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSaves(),Dialog.open()})).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSettings(),Dialog.open()})).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildRestart(),Dialog.open()})).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildShare(),Dialog.open()})).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove())}},stow:{value:uiBarStow},unstow:{value:function(noAnimation){var $story;return _$uiBar&&_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.removeClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay)),this}},update:{value:uiBarUpdate},setStoryElements:{value:uiBarUpdate}}))}(),DebugBar=function(){var _variableRe=new RegExp("^".concat(Patterns.variable,"$")),_numericKeyRe=/^\d+$/,_watchList=[],_$debugBar=null,_$watchBody=null,_$watchList=null,_$turnSelect=null,_stowed=!0;function debugBarStow(){_$debugBar.css("right","-".concat(_$debugBar.outerWidth(),"px")),_stowed=!0,_updateSession()}function debugBarUnstow(){_$debugBar.css("right",0),_stowed=!1,_updateSession()}function debugBarToggle(){_stowed?debugBarUnstow():debugBarStow()}function debugBarWatchAdd(varName){_variableRe.test(varName)&&(_watchList.pushUnique(varName),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession())}function debugBarWatchAddAll(){Object.keys(State.variables).map((function(name){return _watchList.pushUnique("$".concat(name))})),Object.keys(State.temporary).map((function(name){return _watchList.pushUnique("_".concat(name))})),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchClear(){for(var i=_watchList.length-1;i>=0;--i)_watchList.pop();_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDelete(varName){_watchList.delete(varName),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDisable(){_debugBarWatchDisableNoUpdate(),_updateSession()}function debugBarWatchEnable(){_debugBarWatchEnableNoUpdate(),_updateSession()}function debugBarWatchIsEnabled(){return!_$watchBody.attr("hidden")}function debugBarWatchToggle(){_$watchBody.attr("hidden")?debugBarWatchEnable():debugBarWatchDisable()}function _debugBarWatchDisableNoUpdate(){_$watchBody.attr({"aria-hidden":!0,hidden:"hidden"})}function _debugBarWatchEnableNoUpdate(){_$watchBody.removeAttr("aria-hidden hidden")}function _clearSession(){session.delete("debugState")}function _hasSession(){return session.has("debugState")}function _updateSession(){session.set("debugState",{stowed:_stowed,watchList:_watchList,watchEnabled:debugBarWatchIsEnabled(),viewsEnabled:DebugView.isEnabled()})}function _updateWatchBody(){if(0!==_watchList.length){for(var delLabel=L10n.get("debugBarDeleteWatch"),$table=jQuery(document.createElement("table")),$tbody=jQuery(document.createElement("tbody")),_loop4=function(i,len){var varName=_watchList[i],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary,$row=jQuery(document.createElement("tr")),$delBtn=jQuery(document.createElement("button")),$code=jQuery(document.createElement("code"));$delBtn.addClass("watch-delete").attr("data-name",varName).ariaClick({one:!0,label:delLabel},(function(){return debugBarWatchDelete(varName)})),$code.text(_toWatchString(store[varKey])),jQuery(document.createElement("td")).append($delBtn).appendTo($row),jQuery(document.createElement("td")).text(varName).appendTo($row),jQuery(document.createElement("td")).append($code).appendTo($row),$row.appendTo($tbody)},i=0,len=_watchList.length;i<len;++i)_loop4(i);$table.append($tbody),_$watchBody.empty().append($table)}else _$watchBody.empty().append("<div>".concat(L10n.get("debugBarNoWatches"),"</div>"))}function _updateWatchList(){var svn=Object.keys(State.variables),tvn=Object.keys(State.temporary);if(0!==svn.length||0!==tvn.length){var names=[].concat(_toConsumableArray(svn.map((function(name){return"$".concat(name)}))),_toConsumableArray(tvn.map((function(name){return"_".concat(name)})))).sort(),options=document.createDocumentFragment();names.delete(_watchList);for(var i=0,len=names.length;i<len;++i)jQuery(document.createElement("option")).val(names[i]).appendTo(options);_$watchList.empty().append(options)}else _$watchList.empty()}function _updateTurnSelect(){for(var histLen=State.size,expLen=State.expired.length,options=document.createDocumentFragment(),i=0;i<histLen;++i)jQuery(document.createElement("option")).val(i).text("".concat(expLen+i+1,". ").concat(Util.escape(State.history[i].title))).appendTo(options);_$turnSelect.empty().ariaDisabled(histLen<2).append(options).val(State.activeIndex)}function _toWatchString(value){if(null===value)return"null";switch(_typeof(value)){case"number":if(Number.isNaN(value))return"NaN";if(!Number.isFinite(value))return"Infinity";case"boolean":case"symbol":case"undefined":return String(value);case"string":return JSON.stringify(value);case"function":return"Function"}var objType=Util.toStringTag(value);if("Date"===objType)return"Date {".concat(value.toLocaleString(),"}");if("RegExp"===objType)return"RegExp ".concat(value.toString());var result=[];if(value instanceof Array||value instanceof Set){for(var list=value instanceof Array?value:Array.from(value),i=0,len=list.length;i<len;++i)result.push(list.hasOwnProperty(i)?_toWatchString(list[i]):"<empty>");return Object.keys(list).filter((function(key){return!_numericKeyRe.test(key)})).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(list[key])))})),"".concat(objType,"(").concat(list.length,") [").concat(result.join(", "),"]")}return value instanceof Map?(value.forEach((function(val,key){return result.push("".concat(_toWatchString(key)," → ").concat(_toWatchString(val)))})),"".concat(objType,"(").concat(value.size,") {").concat(result.join(", "),"}")):(Object.keys(value).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(value[key])))})),"".concat(objType," {").concat(result.join(", "),"}"))}return Object.freeze(Object.defineProperties({},{init:{value:function(){var barToggleLabel=L10n.get("debugBarToggle"),watchAddLabel=L10n.get("debugBarAddWatch"),watchAllLabel=L10n.get("debugBarWatchAll"),watchNoneLabel=L10n.get("debugBarWatchNone"),watchToggleLabel=L10n.get("debugBarWatchToggle"),viewsToggleLabel=L10n.get("debugBarViewsToggle");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch">'+"<div>".concat(L10n.get("debugBarNoWatches"),"</div>>")+"</div><div>"+'<button id="debug-bar-watch-toggle" tabindex="0" title="'.concat(watchToggleLabel,'" aria-label="').concat(watchToggleLabel,'">').concat(L10n.get("debugBarLabelWatch"),"</button>")+'<label id="debug-bar-watch-label" for="debug-bar-watch-input">'.concat(L10n.get("debugBarLabelAdd"),"</label>")+'<input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" list="debug-bar-watch-list" tabindex="0"><datalist id="debug-bar-watch-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-watch-add" tabindex="0" title="'.concat(watchAddLabel,'" aria-label="').concat(watchAddLabel,'"></button>')+'<button id="debug-bar-watch-all" tabindex="0" title="'.concat(watchAllLabel,'" aria-label="').concat(watchAllLabel,'"></button>')+'<button id="debug-bar-watch-none" tabindex="0" title="'.concat(watchNoneLabel,'" aria-label="').concat(watchNoneLabel,'"></button>')+"</div><div>"+'<button id="debug-bar-views-toggle" tabindex="0" title="'.concat(viewsToggleLabel,'" aria-label="').concat(viewsToggleLabel,'">').concat(L10n.get("debugBarLabelViews"),"</button>")+'<label id="debug-bar-turn-label" for="debug-bar-turn-select">'.concat(L10n.get("debugBarLabelTurn"),"</label>")+'<select id="debug-bar-turn-select" tabindex="0"></select></div>'+'<button id="debug-bar-toggle" tabindex="0" title="'.concat(barToggleLabel,'" aria-label="').concat(barToggleLabel,'"></button>')+'</div><div id="debug-bar-hint"></div>').appendTo("body"),_$debugBar=jQuery("#debug-bar"),_$watchBody=jQuery(_$debugBar.find("#debug-bar-watch").get(0)),_$watchList=jQuery(_$debugBar.find("#debug-bar-watch-list").get(0)),_$turnSelect=jQuery(_$debugBar.find("#debug-bar-turn-select").get(0));var $barToggle=jQuery(_$debugBar.find("#debug-bar-toggle").get(0)),$watchToggle=jQuery(_$debugBar.find("#debug-bar-watch-toggle").get(0)),$watchInput=jQuery(_$debugBar.find("#debug-bar-watch-input").get(0)),$watchAdd=jQuery(_$debugBar.find("#debug-bar-watch-add").get(0)),$watchAll=jQuery(_$debugBar.find("#debug-bar-watch-all").get(0)),$watchNone=jQuery(_$debugBar.find("#debug-bar-watch-none").get(0)),$viewsToggle=jQuery(_$debugBar.find("#debug-bar-views-toggle").get(0));$barToggle.ariaClick(debugBarToggle),$watchToggle.ariaClick(debugBarWatchToggle),$watchInput.on(":addwatch",(function(){debugBarWatchAdd(this.value.trim()),this.value=""})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$watchInput.trigger(":addwatch"))})),$watchAdd.ariaClick((function(){return $watchInput.trigger(":addwatch")})),$watchAll.ariaClick(debugBarWatchAddAll),$watchNone.ariaClick(debugBarWatchClear),_$turnSelect.on("change",(function(){Engine.goTo(Number(this.value))})),$viewsToggle.ariaClick((function(){DebugView.toggle(),_updateSession()})),jQuery(document).on(":historyupdate.debug-bar",_updateTurnSelect).on(":passageend.debug-bar",(function(){_updateWatchBody(),_updateWatchList()})).on(":enginerestart.debug-bar",_clearSession),_hasSession()||DebugView.enable()}},isStowed:{value:function(){return _stowed}},start:{value:function(){(function(){if(!_hasSession())return!1;var debugState=session.get("debugState");_stowed=debugState.stowed,_watchList.push.apply(_watchList,_toConsumableArray(debugState.watchList)),debugState.watchEnabled?_debugBarWatchEnableNoUpdate():_debugBarWatchDisableNoUpdate();debugState.viewsEnabled?DebugView.enable():DebugView.disable()})(),_stowed?debugBarStow():debugBarUnstow(),_updateTurnSelect(),_updateWatchBody(),_updateWatchList()}},stow:{value:debugBarStow},toggle:{value:debugBarToggle},unstow:{value:debugBarUnstow},watch:{value:Object.freeze(Object.defineProperties({},{add:{value:debugBarWatchAdd},all:{value:debugBarWatchAddAll},clear:{value:debugBarWatchClear},delete:{value:debugBarWatchDelete},disable:{value:debugBarWatchDisable},enable:{value:debugBarWatchEnable},isEnabled:{value:debugBarWatchIsEnabled},toggle:{value:debugBarWatchToggle}}))}}))}(),LoadScreen=function(){var _locks=new Set,_autoId=0;function loadScreenHide(){jQuery(document.documentElement).removeAttr("data-init")}function loadScreenShow(){jQuery(document.documentElement).attr("data-init","loading")}return Object.freeze(Object.defineProperties({},{init:{value:function(){jQuery(document).on("readystatechange.SugarCube",(function(){_locks.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout((function(){0===_locks.size&&loadScreenHide()}),Math.max(Engine.minDomActionDelay,Config.loadDelay)):loadScreenHide()):loadScreenShow())}))}},clear:{value:function(){jQuery(document).off("readystatechange.SugarCube"),_locks.clear(),loadScreenHide()}},hide:{value:loadScreenHide},show:{value:loadScreenShow},lock:{value:function(){return++_autoId,_locks.add(_autoId),loadScreenShow(),_autoId}},unlock:{value:function(id){if(null==id)throw new Error("LoadScreen.unlock called with a null or undefined ID");_locks.has(id)&&_locks.delete(id),0===_locks.size&&jQuery(document).trigger("readystatechange")}}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:36,patch:1,prerelease:null,build:9717,date:new Date("2021-12-22T05:37:33.467Z"),extensions:{},toString:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,"+").concat(this.build)},short:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.title," (v").concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,")")},long:function(){return"".concat(this.title," v").concat(this.toString()," (").concat(this.date.toUTCString(),")")}}),TempState={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story,TempVariables=State.temporary;window.SugarCube={},jQuery((function(){try{var lockId=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),Story.load(),storage=SimpleStore.create(Story.domId,!0),session=SimpleStore.create(Story.domId,!1),Dialog.init(),UIBar.init(),Engine.init(),Story.init(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),Engine.start(),Config.debug&&DebugBar.init();var $window=$(window),vprCheckId=setInterval((function(){$window.width()&&(clearInterval(vprCheckId),UIBar.start(),Config.debug&&DebugBar.start(),jQuery.event.trigger({type:":storyready"}),setTimeout((function(){return LoadScreen.unlock(lockId)}),2*Engine.minDomActionDelay))}),Engine.minDomActionDelay);Object.defineProperty(window,"SugarCube",{value:Object.seal(Object.assign(Object.create(null),{Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Fullscreen:Fullscreen,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}))})}catch(ex){return console.error(ex),LoadScreen.clear(),Alert.fatal(null,ex.message,ex)}}))})(window,window.document,jQuery);}
	</script>
</body>
</html>
